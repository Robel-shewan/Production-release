{"version":3,"file":"9252.35f5c09cc9a2e2717632.js","mappings":"yMAMe,SAASA,IACpB,MAAM,cAACC,IAAiBC,EAAAA,EAAAA,WACxB,OACIC,IAAAA,cAAA,KACIC,UAAU,mBACVC,MAAOJ,EAAc,CAACK,GAAI,qBAAsBC,eAAgB,eAG5E,CCEA,MAAMC,EAAkBC,IAA6B,IAA5B,KAACC,EAAI,SAAEC,GAAgBF,EAC5C,MAAMG,EAAiC,KAApBF,aAAI,EAAJA,EAAMG,WAEzB,OACIV,IAAAA,cAAA,OAAKC,UAAU,oBACXD,IAAAA,cAACW,EAAAA,KAAI,CACDV,UAAU,yBACVW,GAAE,IAAAC,OAAMJ,EAAaF,aAAI,EAAJA,EAAMO,KAAO,KAElCd,IAAAA,cAACH,EAAQ,MACTG,IAAAA,cAAA,YACKS,EACGT,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,oCACHC,eAAe,qBACfY,OAAQ,CAACR,SAAUA,QAAAA,EAAYD,aAAI,EAAJA,EAAMO,QAGzCd,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,wBACHC,eAAe,WAK7B,EAEZC,EAAAY,UAAA,CA9BET,SAAQU,IAAAA,QAgCZ,S,4YCtBe,SAASC,EAAsBC,GAC1C,MAAM,kBACFC,EACIrB,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,qCACHC,eAAe,mBAEtB,SACDkB,EACItB,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,gCACHC,eAAe,WAEtB,aACDmB,EAAY,WACZC,EACIxB,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,oCACHC,eAAe,uBAEtB,SACDqB,EAAQ,UACRC,GACAN,EAEEO,GAAUC,EAAAA,EAAAA,cAAY,KACxBF,EAAU,CACNG,QAvCI,6BAwCJC,YAAa,CACTT,oBACAU,mBAAoB,iBACpBC,WAAY,+BACZC,QACIjC,IAAAA,cAAAA,IAAAA,SAAA,KACKoB,EAAMc,cACHlC,IAAAA,cAAA,SACKoB,EAAMc,cAGflC,IAAAA,cAAA,OAAKC,UAAU,sBACXD,IAAAA,cAACmC,EAAAA,EAAW,CAACC,oBAAoB,SACjCpC,IAAAA,cAAA,cACKoB,EAAMG,gBAKvBc,UAAWZ,EACXvB,MAAOsB,GAEXc,WAAYC,EAAAA,GACd,GACH,CAAClB,EAAmBE,EAAcC,EAAYC,EAAUC,IAE3D,OACI1B,IAAAA,cAAA,UACIC,UAAU,0BACV0B,QAASA,GAERL,EAGb,CAACH,EAAAF,UAAA,CAvEGI,kBAAiBH,IAAAA,KACjBI,SAAQJ,IAAAA,KACRgB,aAAYhB,IAAAA,KACZK,aAAYL,IAAAA,KACZM,WAAUN,IAAAA,KACVO,SAAQP,IAAAA,KAAAA,WACRQ,UAASR,IAAAA,IAAAA,YCXb,MAAMsB,EAAqB,CACvBd,UAASA,EAAAA,GAGb,GAAee,EAAAA,EAAAA,SAAQ,KAAMD,EAA7B,CAAiDrB,GCDlC,SAASuB,EAAkBtB,GACtC,OACIpB,IAAAA,cAACmB,EAAqB,CAClBE,kBACIrB,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,mCACHC,eAAe,WAGvBkB,SACItB,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,oBACHC,eAAe,WAGvBmB,aACIvB,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,gCACHC,eAAe,0FAGvBoB,WACIxB,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,kCACHC,eAAe,wBAGvBqB,SAAUL,EAAMK,UAG5B,CAACiB,EAAAzB,UAAA,CAjCGQ,SAAQP,IAAAA,KAAAA,YCiBZ,MAAMyB,EAAoB,CAACC,EAAAA,EAAAA,eACrBC,EAA0B,CAACD,EAAAA,EAAAA,sBAE3BE,EAAgBxC,IAST,IARTyC,SAAS,kBACLC,GACH,SACDvB,EAAQ,MACRwB,EAAQ,CAAC,EAAgB,gBACzBC,EAAe,cACfC,EAAgB,GAAE,mBAClBC,EAAqB,IACjB9C,EACJ,MAAM+C,GAAgBC,EAAAA,EAAAA,UAAQ,KACnB,CAACC,gBAAiB,OAAF1C,OAAS2C,EAAAA,GAAAA,uBAA+BP,EAAM9C,IAAG,QACzE,CAAC8C,EAAM9C,KAEJsD,GAAe7B,EAAAA,EAAAA,cAAY,KACxBqB,IAGDxB,GACAA,EAASwB,EAAM9C,IAEnB6C,EAAkBC,EAAM9C,IAAG,GAC5B,CAAC6C,EAAmBC,EAAOxB,IAE9B,IAAIiC,EAAcN,EACdF,GAAmBA,IAAoBQ,IACvCA,GAAe,MAAQR,EAAkB,KAG7C,IAAIS,EAAe3D,IAAAA,cAAC0C,EAAiB,CAACjB,SAAUgC,IAkBhD,OAfIE,EADAV,EAAMW,aAAeT,EAEjBnD,IAAAA,cAAC6D,EAAAA,EAAqB,CAACC,YAAanB,GAC/BgB,GAKL3D,IAAAA,cAAC6D,EAAAA,EAAqB,CAACC,YAAanB,GAChC3C,IAAAA,cAAC6D,EAAAA,EAAqB,CAACC,YAAajB,GAC/Bc,IAOb3D,IAAAA,cAAA,MAAIC,UAAU,wBACVD,IAAAA,cAAA,MAAIC,UAAU,oBAAoB,IAAMgD,EAAMnC,KAAO,KACrDd,IAAAA,cAAA,MAAIC,UAAU,qBACVD,IAAAA,cAAA,QACIC,UAAU,WACV8D,MAAOV,KAGfrD,IAAAA,cAAA,MAAIC,UAAU,uBAAuByD,GACrC1D,IAAAA,cAAA,MAAIC,UAAU,2BAA2B0D,GACxC,EAEXb,EAAA7B,UAAA,CAzEE+C,QAAO9C,IAAAA,OACPiC,cAAajC,IAAAA,OACbkC,mBAAkBlC,IAAAA,OAClBgC,gBAAehC,IAAAA,OACfO,SAAQP,IAAAA,KACR6B,QAAO7B,IAAAA,MAAA,CACH8B,kBAAiB9B,IAAAA,KAAAA,aAAA+C,YAqEzB,QAAejE,IAAAA,KAAW8C,GCpD1B,GAAeL,EAAAA,EAAAA,UArBf,SAAyByB,EAAoBC,GACzC,MAAMlB,EAAQiB,EAAME,SAASC,OAAOC,YAAYH,EAASH,SACnDO,GAAUC,EAAAA,EAAAA,IAAQN,EAAOjB,EAAMW,YAErC,MAAO,CACHX,QACAG,oBAAoBqB,EAAAA,EAAAA,IAAqBP,EAAOK,GAChDrB,gBAAiBqB,EAAUA,EAAQG,SAAW,GAC9CvB,eAAewB,EAAAA,EAAAA,IAAiBT,GAChCU,aAAaC,EAAAA,EAAAA,IAAeX,GAEpC,IAEA,SAA4BY,GACxB,MAAO,CACH/B,SAASgC,EAAAA,EAAAA,oBAAmB,CACxB/B,kBAAiBA,EAAAA,IAClB8B,GAEX,GAEA,CAA4DhC,G,ieCmB5D,MAAMkC,UAAkBhF,IAAAA,cAGpBiF,WAAAA,CAAY7D,GACR8D,MAAM9D,GAAO+D,EAAA,iBAqBLC,IACJA,GACAA,EAAEC,iBAGN,MAAMC,EAAOC,KAAKrB,MAAMsB,KAAO,EAC/BD,KAAKE,SAAS,CAACC,aAAa,IAC5BH,KAAKnE,MAAM2B,QAAQ4C,gBAAgBL,EAtEpB,GAsE0CM,EAAAA,GAAAA,cAAoB,GACzEC,MAAKvF,IAAyC,IAAxC,KAACwF,GAAkCxF,EACrCiF,KAAKE,SAAS,CAACD,KAAMF,EAAMI,aAAa,IACpCI,GAAQA,EAAKC,OAzEV,IA0EHR,KAAKE,SAAS,CAACO,cAAc,IAGjCT,KAAKnE,MAAM6E,aAAa,GAC1B,IACTd,EAAA,qBACeC,IACRA,GACAA,EAAEC,iBAGNE,KAAKE,SAAS,CACVD,KAAMD,KAAKrB,MAAMsB,KAAO,EACxBE,aAAa,EACbM,cAAc,IAGlBT,KAAKnE,MAAM6E,aAAa,IAC3Bd,EAAA,uBAEqCC,IAClC,IAAKA,IAAMA,EAAEc,OACT,OAGJ,MAAMC,EAAQf,EAAEc,OAA4BE,OAAS,GAErDC,aAAad,KAAKe,eAElBf,KAAKe,cAAgBC,YAAWC,UAC5B,GAAoB,KAAhBL,EAAKM,OAEL,YADAlB,KAAKE,SAAS,CAACiB,aAAc,KAAMlB,KAAM,IAI7CD,KAAKE,SAAS,CAACkB,SAAS,IAExB,MAAM,KAACb,SAAcP,KAAKnE,MAAM2B,QAAQ6D,mBACpCT,EACA,CAAC,GACD,GAGAL,EACAP,KAAKE,SAAS,CACViB,aAAcZ,EAAKe,KAAKC,GAAoBA,EAAG3G,KAC/CwG,SAAS,IAGbpB,KAAKE,SAAS,CAACiB,aAAc,GAAIC,SAAS,GAC9C,GA3H4B,IA4HG,IACtCxB,EAAA,yBAEmBnB,IAChB,IAAKuB,KAAKrB,MAAMwC,aACZ,OAGJ,MAAMK,EAAQxB,KAAKrB,MAAMwC,aAAaM,QAAQhD,GAE9C,GAAI+C,EAAQ,EACR,OAGJ,MAAME,EAAkB,IAAI1B,KAAKrB,MAAMwC,cACvCO,EAAgBC,OAAOH,EAAO,GAC9BxB,KAAKE,SAAS,CAACiB,aAAcO,GAAiB,IAlG9C1B,KAAKe,cAAgB,KACrBf,KAAKrB,MAAQ,CACTyC,SAAS,EACTnB,KAAM,EACNE,aAAa,EACbgB,aAAc,KACdV,cAAc,EAEtB,CAEA,uBAAMmB,GACF5B,KAAKnE,MAAM2B,QAAQ4C,gBAAgB,EAAGyB,GAAoBxB,EAAAA,GAAAA,cAAoB,GAC1EC,MAAKwB,IAAyC,IAAxC,KAACvB,GAAkCuB,EACrC9B,KAAKE,SAAS,CAACkB,SAAS,IACpBb,GAAQA,EAAKC,OAzDV,IA0DHR,KAAKE,SAAS,CAACO,cAAc,GACjC,GAEZ,CAmFAsB,MAAAA,GACI,MAAMZ,EAAenB,KAAKrB,MAAMwC,aAC1BrC,EAAS,GACf,IAAIkD,EACAC,EAEJ,GAAIjC,KAAKrB,MAAMyC,QACXtC,EAAOoD,KACHzH,IAAAA,cAAA,MACI0H,IAAI,UACJzH,UAAU,8CAEVD,IAAAA,cAAA,MAAI2H,QAAS,GACT3H,IAAAA,cAAC4H,EAAAA,EAAa,CAACF,IAAI,oBAI5B,GAC4B,IAA/BnC,KAAKnE,MAAMyG,SAAS9B,QACnBW,GAAwC,IAAxBA,EAAaX,OAE9B1B,EAAOoD,KACHzH,IAAAA,cAAA,MACI0H,IAAI,QACJzH,UAAU,8CAEVD,IAAAA,cAAA,MAAI2H,QAAS,GACT3H,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,mBACHC,eAAe,kCAK5B,GAAIsG,EACPA,EAAaoB,SAAS9D,IAClBK,EAAOoD,KACHzH,IAAAA,cAAC8C,EAAa,CACV4E,IAAK,oBAAsB1D,EAC3BA,QAASA,EACTvC,SAAU8D,KAAKwC,iBACfhF,QAAS,CAACC,kBAAiBA,EAAAA,MAElC,QAEF,CACH,MAAMgF,EA9LK,GA8LOzC,KAAKrB,MAAMsB,KACvByC,EAAUD,EA/LL,GA4MX,GAZwBzC,KAAKnE,MAAMyG,SAASK,MAAMF,EAAWC,GAE7CH,SAAS9D,IACrBK,EAAOoD,KACHzH,IAAAA,cAAC8C,EAAa,CACV4E,IAAK,kBAAoB1D,EACzBA,QAASA,EACTjB,QAAS,CAACC,kBAAiBA,EAAAA,MAElC,IAGDuC,KAAKrB,MAAM8B,aAAc,CACzB,MAAMmC,EACFnI,IAAAA,cAAA,YACIA,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,0BACHC,eAAe,SAEnBJ,IAAAA,cAACoI,EAAAA,EAAQ,CAAChG,oBAAoB,UAItCmF,EACIvH,IAAAA,cAACqI,EAAAA,EAAU,CACPC,SAAS,eACTC,aAAa,aACb5G,QAAS4D,KAAKiD,SACdC,OAAQlD,KAAKrB,MAAMwB,YACnBgD,SAAUnD,KAAKrB,MAAMwB,YACrBtF,eAAgB+H,EAChBQ,cAAeR,GAG3B,CAEI5C,KAAKrB,MAAMsB,KAAO,IAClBgC,EACIxH,IAAAA,cAAA,UACIC,UAAU,mBACV0B,QAAS4D,KAAKqD,cAEd5I,IAAAA,cAAC6I,EAAAA,EAAY,CAACzG,oBAAoB,SAClCpC,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,0BACHC,eAAe,cAKnC,CAEA,OACIJ,IAAAA,cAAA,WACIA,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,OAAKC,UAAU,4BACXD,IAAAA,cAAC8I,EAAAA,EAAU,MACX9I,IAAAA,cAAA,SACI+I,KAAK,SACL9I,UAAU,eACV+I,YAAazD,KAAKnE,MAAM6H,KAAKnJ,cAAc,CAACK,GAAI,oBAAqBC,eAAgB,wBACrF8I,SAAU3D,KAAK4D,eACfpF,MAAOA,EAAMqF,WAIzBpJ,IAAAA,cAAA,QAAMC,UAAU,wBACZD,IAAAA,cAAA,SACIA,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,kBACHC,eAAe,uJAGvBJ,IAAAA,cAAA,SACIA,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,mBACHC,eAAe,+KAI3BJ,IAAAA,cAAA,OAAKC,UAAU,kBACXD,IAAAA,cAAA,SAAOC,UAAU,qBACbD,IAAAA,cAAA,aACIA,IAAAA,cAAA,MAAIC,UAAU,iDACVD,IAAAA,cAAA,MAAIC,UAAU,oBACVD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,kBACHC,eAAe,UAGvBJ,IAAAA,cAAA,MAAIC,UAAU,qBACVD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,mBACHC,eAAe,WAGvBJ,IAAAA,cAAA,MAAIC,UAAU,uBACVD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,qBACHC,eAAe,aAGvBJ,IAAAA,cAAA,MAAIC,UAAU,sBACVD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,qBACHC,eAAe,eAK/BJ,IAAAA,cAAA,aAAQqE,KAGhBrE,IAAAA,cAAA,OAAKC,UAAU,wBACVuH,EACAD,GAIjB,EAGJ,MAAMxD,EAAQ,CACVqF,OAAQ,CAACC,SAAU,EAAGC,WAAY,IAGtC,GAAeC,EAAAA,EAAAA,YAAWvE,GCrT1B,GAAevC,EAAAA,EAAAA,UAff,SAAyByB,GACrB,MAAO,CACH2D,UAAU2B,EAAAA,EAAAA,IAA8BtF,IAAU,GAE1D,IAEA,SAA4BY,GACxB,MAAO,CACH/B,SAASgC,EAAAA,EAAAA,oBAAmB,CACxBY,gBAAe,KACfiB,mBAAkBA,EAAAA,IACnB9B,GAEX,GAEA,CAA4DE,GCFtDyE,EAA4B,CAAC7G,EAAAA,EAAAA,eAC7B8G,EAAQ,CAAC,eAAgB,aAAc,cAAe,aAE7C,SAASC,EAASrJ,GAOvB,IAPwB,gBAC9BsJ,EAAkB,GAAE,SACpBC,EAAW,GAAE,SACbrJ,EAAW,GAAE,YACbyF,EAAW,aACX6D,EAAY,QACZ/G,GACIzC,GACSP,EAAAA,EAAAA,YAEbgK,EAAAA,EAAAA,YAAU,KACNC,IACAjH,EAAQkH,kBAAkBP,GAC1BQ,EAAAA,KAEO,KACHA,EAAAA,GAAiBJ,EAAa,IAEnC,KAEHC,EAAAA,EAAAA,YAAU,KACNC,GAAa,GACd,CAACxJ,IAEJ,MAAMwJ,EAAcA,KAChBG,SAASjK,MAAQ,UAAU,EAG/B,OACIF,IAAAA,cAAA,OAAKC,UAAU,gCACXD,IAAAA,cAAA,OAAKC,UAAU,oBACXD,IAAAA,cAAA,UACIA,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,oBACHC,eAAe,kBAGvBJ,IAAAA,cAAC6D,EAAAA,EAAqB,CAACC,YAAa2F,GAChCzJ,IAAAA,cAACW,EAAAA,KAAI,CACDV,UAAU,WACVW,GAAI,IAAMiJ,EAAW,cAErB7J,IAAAA,cAAA,UAAQ+I,KAAK,SAAS9I,UAAU,mBAC5BD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,iBACHC,eAAe,yBAMnCJ,IAAAA,cAACgF,EAAS,CAACiB,YAAaA,IAGpC,CAAC0D,EAAA1I,UAAA,CAnEG4I,SAAQ3I,IAAAA,OACR0I,gBAAe1I,IAAAA,OACfV,SAAQU,IAAAA,OAGR6B,QAAO7B,IAAAA,MAAA,IAAA+C,YCYX,SAAexB,EAAAA,EAAAA,UAnBf,SAAyByB,GACrB,MAAM3D,GAAOsE,EAAAA,EAAAA,IAAeX,GAE5B,MAAO,CACH2F,SAAUtJ,aAAI,EAAJA,EAAMO,KAChB8I,gBAAiBrJ,aAAI,EAAJA,EAAM6J,aACvB5J,SAAU0D,EAAME,SAASiG,QAAQC,OAAOC,SACxCT,cAAcU,EAAAA,EAAAA,IAAStG,GAE/B,IAEA,SAA4BY,GACxB,MAAO,CACH/B,SAASgC,EAAAA,EAAAA,oBAAmB,CACxBkF,kBAAiBA,EAAAA,IAClBnF,GAEX,GAEA,CAA4D6E,G,iCCvB5D,MA+BA,EA/BwBrJ,IAAuB,IAAtB,SAACmK,GAAgBnK,EACtC,MAAM,cAACR,IAAiBC,EAAAA,EAAAA,WAClB2K,EAAgC,GAoBtC,OAlBA1K,IAAAA,SAAAA,QAAuByK,GAAU,CAACE,EAAO5D,KACvB,IAAVA,GACA2D,EAAiBjD,KACbzH,IAAAA,cAAA,QACI0H,IAAK,UAAYX,EACjB9G,UAAU,6BAEVD,IAAAA,cAAA,KACIC,UAAU,oBACVC,MAAOJ,EAAc,CAACK,GAAI,2BAA4BC,eAAgB,wBAMtFsK,EAAiBjD,KAAKkD,EAAM,IAI5B3K,IAAAA,cAAA,OAAKC,UAAU,oBACXD,IAAAA,cAAA,UACK0K,GAEH,E,ydCeC,MAAME,WAAiB5K,IAAAA,cAClCiF,WAAAA,CAAY7D,GACR8D,MAAM9D,GAAO+D,GAAA,yBAWEqB,SACRjB,KAAKsF,aAAazF,KAC5BD,GAAA,8BAEuBqB,SACbjB,KAAKsF,aAAazF,KAC5BD,GAAA,qBAEcqB,UACX,MAAM,QAACzD,EAAO,SAAE+H,EAAQ,KAAEC,EAAI,KAAExK,GAAQgF,KAAKnE,OACvC,MAAC4J,EAAK,KAAElK,EAAI,OAAE2H,GAAUlD,KAAKrB,MAInC,GAFAkB,EAAEC,iBAEEoD,EACA,OAGJlD,KAAKE,SAAS,CACVgD,QAAQ,EACRwC,MAAO,OAGX,MAAMhI,EAAyB,CAC3BW,WAAYmH,EAAK5K,GACjBW,KAAMA,EAAK2F,OAAOyE,eAQtB,GAJIjI,EAAMnC,KAAKqK,WAAW,MAAQlI,EAAMnC,KAAKsK,SAAS,OAClDnI,EAAMnC,KAAOmC,EAAMnC,KAAKuK,UAAU,EAAGpI,EAAMnC,KAAKiF,OAAS,KAGxD9C,EAAMnC,KAWP,YAVAyE,KAAKE,SAAS,CACVgD,QAAQ,EACRwC,MACIjL,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,yBACHC,eAAe,uCAQ/B,GAAK,eAAgBkL,KAAKrI,EAAMnC,MAW5B,YAVAyE,KAAKE,SAAS,CACVgD,QAAQ,EACRwC,MACIjL,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,wBACHC,eAAe,qGAQ/B,GAAI0K,EAASS,eAAetI,EAAMnC,MAW9B,YAVAyE,KAAKE,SAAS,CACVgD,QAAQ,EACRwC,MACIjL,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,sBACHC,eAAe,iFAQ/B,GAAI0K,EAASU,IAAIvI,EAAMnC,MAWnB,YAVAyE,KAAKE,SAAS,CACVgD,QAAQ,EACRwC,MACIjL,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,4BACHC,eAAe,iFAQ/B,IAAK4K,EAWD,YAVAzF,KAAKE,SAAS,CACVgD,QAAQ,EACRwC,MACIjL,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,0BACHC,eAAe,yCAS/B,GAAI4K,EAAMS,KADe,QAYrB,YAVAlG,KAAKE,SAAS,CACVgD,QAAQ,EACRwC,MACIjL,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,0BACHC,eAAe,oEAQ/B,MAAMsL,QAAiB3I,EAAQ4I,kBAAkB1I,EAAsB+H,GAEvE,GAAI,SAAUU,GACSA,KACU5F,KAAKhF,OAASmC,EAAMnC,KAE7C,YADA8K,EAAAA,GAAAA,KAAanE,KAAK,IAAMlH,EAAKO,KAAO,UAK5C,GAAI,UAAW4K,EAAU,CACrB,MAAMG,EAAgBH,EACtB,GAAIG,EAMA,YALAtG,KAAKE,SAAS,CACVgD,QAAQ,EACRwC,MAAOY,EAAcZ,MAAMhJ,SAKvC,CAEA,MAAM6J,EACF9L,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,wBACHC,eAAe,uDAIvBmF,KAAKE,SAAS,CACVgD,QAAQ,EACRwC,MAAQa,GACV,IACL3G,GAAA,mBAEaC,IACVG,KAAKE,SAAS,CACV3E,KAAMsE,EAAEc,OAAOE,OACjB,IACLjB,GAAA,oBAEcC,IACX,GAAsB,MAAlBA,EAAEc,OAAO6F,OAA2C,IAA1B3G,EAAEc,OAAO6F,MAAMhG,OAMzC,YALAR,KAAKE,SAAS,CACVuF,MAAO,KACPgB,SAAU,KAMlB,MAAMhB,EAAQ5F,EAAEc,OAAO6F,MAAO,GAExBE,EAAS,IAAIC,WACnBD,EAAOE,OAAS,KACZ5G,KAAKE,SAAS,CACVuF,QACAgB,SAAUC,EAAOG,QACnB,EAENH,EAAOI,cAAcrB,EAAM,IA3L3BzF,KAAKrB,MAAQ,CACTpD,KAAM,GACNkK,MAAO,KACPgB,SAAU,GACVvD,QAAQ,EACRwC,MAAO,KAEf,CAuLA3D,MAAAA,GACI,IAAIgF,EAAW,KACX/G,KAAKrB,MAAM8G,QACXsB,EACItM,IAAAA,cAAA,QAAMC,UAAU,uBACXsF,KAAKrB,MAAM8G,MAAMlK,OAK9B,IAAIyL,EAAU,KA+Bd,OA9BIhH,KAAKrB,MAAM8H,WACXO,EACIvM,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAAA,SACIC,UAAU,yBACVuM,QAAQ,WAERxM,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,oBACHC,eAAe,aAGvBJ,IAAAA,cAAA,OAAKC,UAAU,wCACXD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,6BACHC,eAAe,yCACfY,OAAQ,CACJgK,MACIhL,IAAAA,cAAA,QACIC,UAAU,WACV8D,MAAO,CAACR,gBAAiB,OAASgC,KAAKrB,MAAM8H,SAAW,aAWpFhM,IAAAA,cAAA,OAAKC,UAAU,yBACXD,IAAAA,cAACyM,EAAe,KACZzM,IAAAA,cAACW,EAAAA,KAAI,CAACC,GAAI,IAAM2E,KAAKnE,MAAMb,KAAKO,KAAO,UACnCd,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,oBACHC,eAAe,kBAGvBJ,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,mBACHC,eAAe,SAGvBJ,IAAAA,cAAA,OAAKC,UAAU,kBACXD,IAAAA,cAAA,QACIC,UAAU,kBACVyM,SAAUnH,KAAKoH,kBAEf3M,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAAA,SACIC,UAAU,yBACVuM,QAAQ,QAERxM,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,iBACHC,eAAe,UAGvBJ,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,SACIG,GAAG,OACH4I,KAAK,OACL6D,UAAW,GACX3M,UAAU,eACVmG,MAAOb,KAAKrB,MAAMpD,KAClBoI,SAAU3D,KAAKsH,aAEnB7M,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,sBACHC,eAAe,sIAK/BJ,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAAA,SACIC,UAAU,yBACVuM,QAAQ,SAERxM,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,kBACHC,eAAe,WAGvBJ,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,WACIA,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,UAAQC,UAAU,mBACdD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,yBACHC,eAAe,YAGvBJ,IAAAA,cAAA,SACIG,GAAG,eACH4I,KAAK,OACL+D,OAAQC,GAAAA,UAAAA,mBACRC,UAAU,EACV9D,SAAU3D,KAAK0H,eAGtBX,EACDtM,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,uBACHC,eAAe,gIAMlCmM,EACDvM,IAAAA,cAAA,OAAKC,UAAU,0BACXD,IAAAA,cAACkN,EAAAA,EAAS,CACNnE,KAAK,YACLkC,MAAO1F,KAAKrB,MAAM+G,QAEtBjL,IAAAA,cAACW,EAAAA,KAAI,CACDV,UAAU,mBACVW,GAAI,IAAM2E,KAAKnE,MAAMb,KAAKO,KAAO,UAEjCd,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,mBACHC,eAAe,YAGvBJ,IAAAA,cAACmN,GAAAA,EAAa,CACV,cAAY,cACZlN,UAAU,kBACV8I,KAAK,SACLqE,SAAU7H,KAAKrB,MAAMuE,OACrB4E,cAAcC,EAAAA,EAAAA,IAAgB,mBAAoB,aAClD3L,QAAS4D,KAAKgI,uBAEdvN,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,iBACHC,eAAe,aAQ/C,ECvXJ,UAAeqC,EAAAA,EAAAA,UAdf,SAAyByB,GACrB,MAAO,CACH4G,UAAU0C,EAAAA,EAAAA,IAAYtJ,GAE9B,IAEA,SAA4BY,GACxB,MAAO,CACH/B,SAASgC,EAAAA,EAAAA,oBAAmB,CACxB4G,kBAAiBA,EAAAA,IAClB7G,GAEX,GAEA,CAA4D8F,I,kQChBtD6C,GAAoBnN,IAA8C,IAA7C,MAAC0K,EAAK,MAAE9K,EAAK,YAAEwN,EAAW,KAAEC,GAAYrN,EAC/D,OACIN,IAAAA,cAACW,EAAAA,KAAI,CACDC,GAAI+M,EACJ1N,UAAU,sBAEVD,IAAAA,cAAA,OACI4N,IAAK,oBACL3N,UAAU,4BACV4N,IAAK7C,IAEThL,IAAAA,cAAA,OAAKC,UAAU,6BACVC,GAELF,IAAAA,cAAA,OAAKC,UAAU,mCACVyN,GAEF,EAEbD,GAAAxM,UAAA,CAzBE+J,MAAK9J,IAAAA,OAAAA,WACLhB,MAAKgB,IAAAA,QAAAA,WACLwM,YAAWxM,IAAAA,QAAAA,WACXyM,KAAIzM,IAAAA,OAAAA,YAwBR,SAAelB,IAAAA,KAAWyN,I,uaCAX,MAAMK,WAAqB9N,IAAAA,cAA2BiF,WAAAA,GAAA,SAAA8I,WAAA5I,GAAA,oBAKnD,KAEVgF,SAASjK,MAAQ,UAAU,GAC9B,CAPDiH,iBAAAA,GACI5B,KAAKyE,aACT,CAOA1C,MAAAA,GACI,MAAM0G,EAAU,GA2LhB,OAzLIzI,KAAKnE,MAAM6M,wBACXD,EAAQvG,KACJzH,IAAAA,cAACkO,GAAAA,EAAkB,CACfC,OAAQ5I,KAAKnE,MAAMb,KAAKJ,GACxB2D,YAAa,CAAClB,EAAAA,GAAAA,0BACd8E,IAAI,6BAEJ1H,IAAAA,cAACyN,GAAiB,CACd/F,IAAI,kBACJsD,MAAOoD,GACPlO,MACIF,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,qCACHC,eAAe,sBAGvBsN,YACI1N,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,2CACHC,eAAe,mEAGvBuN,KACI,IACApI,KAAKnE,MAAMb,KAAKO,KAChB,sCAOhByE,KAAKnE,MAAMiN,wBACXL,EAAQvG,KACJzH,IAAAA,cAACkO,GAAAA,EAAkB,CACfC,OAAQ5I,KAAKnE,MAAMb,KAAKJ,GACxB2D,YAAa,CAAClB,EAAAA,GAAAA,0BACd8E,IAAI,6BAEJ1H,IAAAA,cAACyN,GAAiB,CACd/F,IAAI,kBACJsD,MAAOsD,GACPpO,MACIF,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,qCACHC,eAAe,sBAGvBsN,YACI1N,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,2CACHC,eAAe,qFAGvBuN,KACI,IACApI,KAAKnE,MAAMb,KAAKO,KAChB,sCAOhByE,KAAKnE,MAAMmN,gBACXP,EAAQvG,KACJzH,IAAAA,cAACkO,GAAAA,EAAkB,CACfC,OAAQ5I,KAAKnE,MAAMb,KAAKJ,GACxB2D,YAAa,CAAClB,EAAAA,GAAAA,uBACd8E,IAAI,qBAEJ1H,IAAAA,cAACyN,GAAiB,CACd/F,IAAI,UACJsD,MAAOwD,GACPtO,MACIF,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,6BACHC,eAAe,mBAGvBsN,YACI1N,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,mCACHC,eAAe,0DAGvBuN,KACI,IACApI,KAAKnE,MAAMb,KAAKO,KAChB,6BAOhByE,KAAKnE,MAAMqN,4BACXT,EAAQvG,KACJzH,IAAAA,cAAC0O,GAAAA,EAAoB,CACjB5K,YAAa,CAAClB,EAAAA,GAAAA,cACd8E,IAAI,wBAEJ1H,IAAAA,cAACyN,GAAiB,CACd/F,IAAI,aACJsD,MAAO2D,GACPzO,MACIF,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,+BACHC,eAAe,2BAGvBsN,YACI1N,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,qCACHC,eAAe,4FAGvBuN,KACI,IACApI,KAAKnE,MAAMb,KAAKO,KAChB,gCAOhByE,KAAKnE,MAAMwN,gCACXZ,EAAQvG,KACJzH,IAAAA,cAACkO,GAAAA,EAAkB,CACfC,OAAQ5I,KAAKnE,MAAMb,KAAKJ,GACxB2D,YAAa,CACTlB,EAAAA,GAAAA,mCAEJ8E,IAAI,sCAEJ1H,IAAAA,cAACyN,GAAiB,CACd/F,IAAI,2BACJsD,MAAO6D,GACP3O,MACIF,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,8CACHC,eAAe,+BAGvBsN,YACI1N,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,oDACHC,eAAe,4FAGvBuN,KACI,IACApI,KAAKnE,MAAMb,KAAKO,KAChB,gDAOpBkN,EAAQvG,KACJzH,IAAAA,cAAC0O,GAAAA,EAAoB,CACjB5K,YAAa,CAAC,eACd4D,IAAI,mBAEJ1H,IAAAA,cAACyN,GAAiB,CACdzC,MAAO8D,GACP5O,MACIF,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,qBACHC,eAAe,iBAGvBsN,YACI1N,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,0BACHC,eAAe,6EAGvBuN,KAAM,IAAMpI,KAAKnE,MAAMb,KAAKO,KAAO,yBAM3Cd,IAAAA,cAAA,OAAKC,UAAU,yBACXD,IAAAA,cAAA,OAAKC,UAAU,oBACXD,IAAAA,cAAA,UACIA,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,sBACHC,eAAe,mBAI3BJ,IAAAA,cAAA,OAAKC,UAAU,wBACXD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,oBACHC,eAAe,kGACfY,OAAQ,CACJ+N,aACI/O,IAAAA,cAACgP,GAAAA,EAAY,CACTC,KAAK,qCACLC,SAAS,gBAETlP,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,iCACHC,eAAe,uBAOvCJ,IAAAA,cAAA,OAAKC,UAAU,sCACV+N,GAIjB,EACH7I,GAzOoB2I,GAAY,aAR7BG,uBAAsB/M,IAAAA,KAAAA,WACtBmN,uBAAsBnN,IAAAA,KAAAA,WACtBqN,eAAcrN,IAAAA,KAAAA,WACduN,2BAA0BvN,IAAAA,KAAAA,WAC1B0N,+BAA8B1N,IAAAA,KAAAA,aCAlC,UAAeuB,EAAAA,EAAAA,UAnBf,SAAyByB,GACrB,MAAMoG,GAAS6E,EAAAA,EAAAA,IAAUjL,GAQzB,MAAO,CACH1D,SARa8J,EAAOC,SASpB0D,uBAR6D,SAAlC3D,EAAO8E,uBASlCf,uBAR6D,SAAlC/D,EAAO+E,uBASlCd,eAR6C,SAA1BjE,EAAOgF,eAS1Bb,2BARqE,SAAtCnE,EAAOiF,2BAStCX,+BAR6E,SAA1CtE,EAAOkF,+BAUlD,GAEA,CAAwC1B,I,0ECVxC,MAAM2B,GAAgBnP,IAOT,IAPU,SACnBoP,EAAQ,WACRC,EAAU,cACVC,EAAa,SACbC,EAAQ,MACRzJ,EAAK,SACL8C,GACI5I,EACJ,MAAM2I,GAAOlJ,EAAAA,EAAAA,WAEPiO,EAAU,CACZhO,IAAAA,cAAA,UACI0H,IAAI,GACJtB,MAAM,IAEL6C,EAAKnJ,cAAc,CAChBK,GAAI,6BACJC,eAAgB,+BAqC5B,OAhCAsP,EAAS5H,SAASgI,IACd,MAAMC,EAAcD,EAAQ1F,cAAgB0F,EAAQhP,MAChDgP,EAAQ/G,OAASgE,GAAAA,QAAAA,cAA0B4C,GASpCG,EAAQ/G,OAASgE,GAAAA,QAAAA,iBAA6B6C,GAS9CE,EAAQ/G,OAASgE,GAAAA,QAAAA,YAAwB8C,IAjBhD7B,EAAQvG,KACJzH,IAAAA,cAAA,UACI0H,IAAKoI,EAAQ3P,GACbiG,MAAO0J,EAAQ3P,IAEd4P,GAqBb,IAIA/P,IAAAA,cAAA,UACIC,UAAU,eACVmG,MAAOA,EACP8C,SAAUA,EACV/I,GAAG,iBAEF6N,EACI,EAIjB,IAAegC,EAAAA,EAAAA,MAAKP,ICxEdQ,IAAsBC,EAAAA,GAAAA,IACxB,sBACAC,GAAAA,GACAC,GAAAA,GACA,CAACV,EAAUW,IACA,IAAIX,GAAUY,KAAKC,GAAAA,GAAAA,KAAsC,KAAMF,MAU9E,IAAe5N,EAAAA,EAAAA,UANf,SAAyByB,GACrB,MAAO,CACHwL,SAAUO,GAAoB/L,GAEtC,GAEA,CAAwCuL,I,uaCkDzB,MAAMe,WAAgCC,EAAAA,cACjDxL,WAAAA,CAAY7D,GACR8D,MAAM9D,GAAO+D,GAAA,yBAKGuL,IACT,CACHhN,aAAagN,aAAI,EAAJA,EAAMtG,eAAgB,GACnCsD,aAAagD,aAAI,EAAJA,EAAMhD,cAAe,GAClCiD,WAAWD,aAAI,EAAJA,EAAME,aAAc,GAC/BC,eAAeH,aAAI,EAAJA,EAAMI,kBAAkB,EACvCpM,UAAUgM,aAAI,EAAJA,EAAMhM,WAAY,GAC5BqM,SAASL,aAAI,EAAJA,EAAMM,WAAY,GAC3BvI,QAAQ,EACRwI,YAAa,GACbC,YAAa,SAEpB/L,GAAA,qBAEeC,IAA4D,IAAA+L,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAGxE,GAFApM,EAAEC,iBAEEE,KAAKrB,MAAMuE,OACX,OASJ,GANAlD,KAAKE,SAAS,CACVgD,QAAQ,EACRwI,YAAa,GACbC,YAAa,QAGZ3L,KAAKrB,MAAMyM,UAWZ,YAVApL,KAAKE,SAAS,CACVgD,QAAQ,EACRyI,YACIlR,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,uCACHC,eAAe,kCAQ/B,MAAMsQ,EAAO,CACTE,WAAYrL,KAAKrB,MAAMyM,UACvBG,eAAgBvL,KAAKrB,MAAM2M,cAC3BzG,aAAc7E,KAAKrB,MAAMR,YACzBgK,YAAanI,KAAKrB,MAAMwJ,YACxBhJ,SAAUa,KAAKrB,MAAMQ,SACrBsM,SAAUzL,KAAKrB,MAAM6M,QACrB5Q,IAA0B,QAAtBgR,EAAA5L,KAAKnE,MAAMqQ,mBAAW,IAAAN,OAAA,EAAtBA,EAAwBhR,KAAM,GAClCuR,WAAiC,QAAtBN,EAAA7L,KAAKnE,MAAMqQ,mBAAW,IAAAL,OAAA,EAAtBA,EAAwBM,YAAa,EAChDC,WAAiC,QAAtBN,EAAA9L,KAAKnE,MAAMqQ,mBAAW,IAAAJ,OAAA,EAAtBA,EAAwBM,YAAa,EAChDjR,WAAiC,QAAtB4Q,EAAA/L,KAAKnE,MAAMqQ,mBAAW,IAAAH,OAAA,EAAtBA,EAAwB5Q,YAAa,EAChDkR,SAA+B,QAAtBL,EAAAhM,KAAKnE,MAAMqQ,mBAAW,IAAAF,OAAA,EAAtBA,EAAwBK,UAAW,GAC5CC,SAA+B,QAAtBL,EAAAjM,KAAKnE,MAAMqQ,mBAAW,IAAAD,OAAA,EAAtBA,EAAwBK,UAAW,IAGhDtM,KAAKnE,MAAM0Q,OAAOpB,GAAM7K,MAAK,IAAMN,KAAKE,SAAS,CAACgD,QAAQ,KAAQ,IACrEtD,GAAA,0BAE0DC,IACvDG,KAAKE,SAAS,CACV/B,YAAa0B,EAAEc,OAAOE,OACxB,IACLjB,GAAA,0BAE0DC,IACvDG,KAAKE,SAAS,CACViI,YAAatI,EAAEc,OAAOE,OACxB,IACLjB,GAAA,wBAEyDC,IACtDG,KAAKE,SAAS,CACVkL,UAAWvL,EAAEc,OAAOE,OACtB,IACLjB,GAAA,4BAE4DC,IACzDG,KAAKE,SAAS,CACVoL,cAAezL,EAAEc,OAAO6L,SAC1B,IACL5M,GAAA,uBAEuDC,IACpDG,KAAKE,SAAS,CACVf,SAAUU,EAAEc,OAAOE,OACrB,IACLjB,GAAA,sBAEsDC,IACnDG,KAAKE,SAAS,CACVsL,QAAS3L,EAAEc,OAAOE,OACpB,IA/FFb,KAAKrB,MAAQqB,KAAKyM,iBAAiBzM,KAAKnE,MAAMqQ,YAClD,CAiGAnK,MAAAA,GACI,MAAM2K,EAAiB1M,KAAKnE,MAAM8Q,OAC5BC,EAAiB5M,KAAKnE,MAAMgR,OAElC,OACIpS,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAACyM,EAAe,KACZzM,IAAAA,cAACW,EAAAA,KAAI,CAACC,GAAE,IAAAC,OAAM0E,KAAKnE,MAAMb,KAAKO,KAAI,oCAC9Bd,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,2BACHC,eAAe,uBAGvBJ,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAI8R,EAAe9R,GACnBC,eAAgB6R,EAAe7R,kBAGvCJ,IAAAA,cAAA,OAAKC,UAAU,kBACXD,IAAAA,cAAA,QACIC,UAAU,kBACVyM,SAAWtH,GAAMG,KAAKsF,aAAazF,IAEnCpF,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAAA,SACIC,UAAU,yBACVuM,QAAQ,eAERxM,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,mCACHC,eAAe,WAGvBJ,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,SACIG,GAAG,cACH4I,KAAK,OACL6D,UAAW,GACX3M,UAAU,eACVmG,MAAOb,KAAKrB,MAAMR,YAClBwF,SAAU3D,KAAK8M,oBAEnBrS,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,wCACHC,eAAe,+EAK/BJ,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAAA,SACIC,UAAU,yBACVuM,QAAQ,eAERxM,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,mCACHC,eAAe,iBAGvBJ,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,SACIG,GAAG,cACH4I,KAAK,OACL6D,UAAW,IACX3M,UAAU,eACVmG,MAAOb,KAAKrB,MAAMwJ,YAClBxE,SAAU3D,KAAK+M,oBAEnBtS,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,wCACHC,eAAe,uCAK/BJ,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAAA,SACIC,UAAU,yBACVuM,QAAQ,aAERxM,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,+BACHC,eAAe,aAGvBJ,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAACyP,GAAa,CACVrJ,MAAOb,KAAKrB,MAAMyM,UAClBzH,SAAU3D,KAAKgN,gBACf5C,YAAY,EACZC,eAAe,EACfC,UAAU,IAEd7P,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,oCACHC,eAAe,8JAK/BJ,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAAA,SACIC,UAAU,yBACVuM,QAAQ,iBAERxM,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,qCACHC,eAAe,0BAGvBJ,IAAAA,cAAA,OAAKC,UAAU,8BACXD,IAAAA,cAAA,SACIG,GAAG,gBACH4I,KAAK,WACLgJ,QAASxM,KAAKrB,MAAM2M,cACpB3H,SAAU3D,KAAKiN,sBAEnBxS,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,0CACHC,eAAe,2EAK7BmF,KAAKnE,MAAMqR,4BACTzS,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAAA,SACIC,UAAU,yBACVuM,QAAQ,YAERxM,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,gCACHC,eAAe,cAGvBJ,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,SACIG,GAAG,WACH4I,KAAK,OACL6D,UAAW,GACX3M,UAAU,eACVmG,MAAOb,KAAKrB,MAAMQ,SAClBwE,SAAU3D,KAAKmN,iBAEnB1S,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,qCACHC,eAAe,6PAMjCmF,KAAKnE,MAAMuR,wBACT3S,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAAA,SACIC,UAAU,yBACVuM,QAAQ,WAERxM,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,gCACHC,eAAe,qBAGvBJ,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,SACIG,GAAG,UACH4I,KAAK,OACL6D,UAAW,KACX3M,UAAU,eACVmG,MAAOb,KAAKrB,MAAM6M,QAClB7H,SAAU3D,KAAKqN,gBAEnB5S,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,qCACHC,eAAe,yOAMnCJ,IAAAA,cAAA,OAAKC,UAAU,0BACXD,IAAAA,cAACkN,EAAAA,EAAS,CACNnE,KAAK,YACL8J,OAAQ,CAACtN,KAAKnE,MAAM6P,YAAa1L,KAAKrB,MAAMgN,eAEhDlR,IAAAA,cAACW,EAAAA,KAAI,CACDV,UAAU,mBACVW,GAAE,IAAAC,OAAM0E,KAAKnE,MAAMb,KAAKO,KAAI,oCAE5Bd,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,8BACHC,eAAe,YAGvBJ,IAAAA,cAACmN,GAAAA,EAAa,CACVlN,UAAU,kBACV8I,KAAK,SACLqE,SAAU7H,KAAKrB,MAAMuE,OACrB4E,cAAcC,EAAAA,EAAAA,IAAgB/H,KAAKnE,MAAMuF,QAAQxG,GAAcoF,KAAKnE,MAAMuF,QAAQvG,gBAClFuB,QAAUyD,GAAMG,KAAKsF,aAAazF,GAClCjF,GAAG,eAEHH,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAIgS,EAAehS,GACnBC,eAAgB+R,EAAe/R,qBAQ/D,EChYJ,MAAM0S,IAAWC,EAAAA,EAAAA,gBAAe,CAC5BX,OAAQ,CACJjS,GAAI,4BACJC,eAAgB,QAEpB8R,OAAQ,CACJ/R,GAAI,mBACJC,eAAgB,OAEpBuG,QAAS,CACLxG,GAAI,8BACJC,eAAgB,eA8BlB4S,GAAqB1S,IAKd,IALe,KACxBC,EAAI,2BACJkS,EAA0B,uBAC1BE,EAAsB,QACtB5P,GACIzC,EACJ,MAAO2Q,EAAagC,IAAkBC,EAAAA,EAAAA,UAAS,IAEzCC,GAAkBvR,EAAAA,EAAAA,cAAY4E,UAChCyM,EAAe,IAEf,MAAM,KAACnN,EAAI,MAAEmF,SAAelI,EAAQqQ,mBAAmB1C,GACnD5K,GACA8F,EAAAA,GAAAA,KAAanE,KAAK,IAAD5G,OAAKN,EAAKO,KAAI,oDAAAD,OAAmDiF,EAAK3F,KAGvF8K,GACAgI,EAAehI,EAAMhJ,QACzB,GACD,CAACc,EAASxC,EAAKO,OAElB,OACId,IAAAA,cAACwQ,GAAuB,CACpBjQ,KAAMA,EACN2R,OAAQY,GAASZ,OACjBE,OAAQU,GAASV,OACjBzL,QAASmM,GAASnM,QAClB8L,2BAA4BA,EAC5BE,uBAAwBA,EACxBb,OAAQqB,EACRlC,YAAaA,GACf,EAER+B,GAAA/R,UAAA,CAjDEwR,2BAA0BvR,IAAAA,KAAAA,WAK1ByR,uBAAsBzR,IAAAA,KAAAA,WAEtB6B,QAAO7B,IAAAA,MAAA,CAKHkS,mBAAkBlS,IAAAA,KAAAA,aAAA+C,YAsC1B,UAAe+L,EAAAA,EAAAA,MAAKgD,ICzDpB,IAAevQ,EAAAA,EAAAA,UAnBf,SAAyByB,GACrB,MAAMoG,GAAS6E,EAAAA,EAAAA,IAAUjL,GAIzB,MAAO,CACHuO,2BAJqE,SAAtCnI,EAAO+I,2BAKtCV,uBAJ6D,SAAlCrI,EAAOgJ,uBAM1C,IAEA,SAA4BxO,GACxB,MAAO,CACH/B,SAASgC,EAAAA,EAAAA,oBAAmB,CACxBqO,mBAAkBA,GAAAA,IACnBtO,GAEX,GAEA,CAA4DkO,IChC5D,SAAA7N,GAAAoO,EAAA7L,EAAAtB,GAAA,OAAAsB,EAAA,SAAA8L,GAAA,IAAA9L,EAAA,SAAA+L,EAAAC,GAAA,oBAAAD,GAAA,OAAAA,EAAA,OAAAA,EAAA,IAAAE,EAAAF,EAAAG,OAAAC,aAAA,QAAAC,IAAAH,EAAA,KAAAI,EAAAJ,EAAAK,KAAAP,EAAAC,UAAA,oBAAAK,EAAA,OAAAA,EAAA,UAAAE,UAAA,uDAAAC,OAAAT,EAAA,CAAAU,CAAAX,GAAA,uBAAA9L,EAAAA,EAAAwM,OAAAxM,EAAA,CAAA0M,CAAA1M,MAAA6L,EAAAc,OAAAC,eAAAf,EAAA7L,EAAA,CAAAtB,MAAAA,EAAAmO,YAAA,EAAAC,cAAA,EAAAC,UAAA,IAAAlB,EAAA7L,GAAAtB,EAAAmN,CAAA,CA4Ee,MAAMmB,WAAyB1U,IAAAA,cAI1CiF,WAAAA,CAAY7D,GACR8D,MAAM9D,GAAO+D,GAAA,wBAQEwP,IACR,CACH7T,KAAM6T,EAAI7T,MAAQ,GAClB4M,YAAaiH,EAAIjH,aAAe,GAChCkH,SAAUD,EAAIC,UAAY,GAC1B5D,SAAU2D,EAAI3D,UAAY,GAC1B6D,aAAcF,EAAIG,cAAgBH,EAAIG,cAAcC,KAAK,MAAQ,GACjEC,WAAYL,EAAIK,aAAc,EAC9BC,SAAUC,QAAQP,EAAI3D,UACtBvI,QAAQ,EACRyI,YAAa,SAEpB/L,GAAA,oBAEa,KAAM,IAAAgQ,EACS,QAAzBA,EAAI5P,KAAKyL,SAASoE,eAAO,IAAAD,GAArBA,EAAuB/O,OACvBb,KAAKE,SAAS,CACVwP,UAAU,EACVjE,SAAUzL,KAAKyL,SAASoE,QAAQhP,OAExC,IACHjB,GAAA,qBAEeC,IAGZ,GAFAA,EAAEC,iBAEEE,KAAKrB,MAAMuE,OACX,OAQJ,GALAlD,KAAKE,SAAS,CACVgD,QAAQ,EACRyI,YAAa,MAGZ3L,KAAKrB,MAAMpD,KAWZ,YAVAyE,KAAKE,SAAS,CACVgD,QAAQ,EACRyI,YACIlR,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,6BACHC,eAAe,sDAQ/B,IAAKmF,KAAKrB,MAAMwJ,YAWZ,YAVAnI,KAAKE,SAAS,CACVgD,QAAQ,EACRyI,YACIlR,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,oCACHC,eAAe,6DAQ/B,IAAKmF,KAAKrB,MAAM0Q,SAWZ,YAVArP,KAAKE,SAAS,CACVgD,QAAQ,EACRyI,YACIlR,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,iCACHC,eAAe,0DAQ/B,MAAMyU,EAAe,GACrB,IAAK,IAAIQ,KAAe9P,KAAKrB,MAAM2Q,aAAaS,MAAM,MAClDD,EAAcA,EAAY5O,OAEtB4O,EAAYtP,OAAS,GACrB8O,EAAapN,KAAK4N,GAI1B,GAA4B,IAAxBR,EAAa9O,OAWb,YAVAR,KAAKE,SAAS,CACVgD,QAAQ,EACRyI,YACIlR,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,qCACHC,eAAe,8CAQ/B,MAAMuU,EAAM,CACR7T,KAAMyE,KAAKrB,MAAMpD,KACjBgU,cAAeD,EACfD,SAAUrP,KAAKrB,MAAM0Q,SACrBlH,YAAanI,KAAKrB,MAAMwJ,YACxBsH,WAAYzP,KAAKrB,MAAM8Q,WACvBhE,SAAUzL,KAAKrB,MAAM8M,UAGzBzL,KAAKnE,MAAM0Q,OAAO6C,GAAK9O,MAAK,IAAMN,KAAKE,SAAS,CAACgD,QAAQ,KAAQ,IACpEtD,GAAA,mBAEaC,IACVG,KAAKE,SAAS,CACV3E,KAAMsE,EAAEc,OAAOE,OACjB,IACLjB,GAAA,sBAEgBC,IACbG,KAAKE,SAAS,CACVuP,WAA+B,SAAnB5P,EAAEc,OAAOE,OACvB,IACLjB,GAAA,0BAEoBC,IACjBG,KAAKE,SAAS,CACViI,YAAatI,EAAEc,OAAOE,OACxB,IACLjB,GAAA,uBAEiBC,IACdG,KAAKE,SAAS,CACVmP,SAAUxP,EAAEc,OAAOE,OACrB,IACLjB,GAAA,sBAEgBC,IACbG,KAAKE,SAAS,CACVwP,UAAU,EACVjE,SAAU5L,EAAEc,OAAOE,QAEvBb,KAAKyF,MAAM6C,IAAMzI,EAAEc,OAAOE,KAAK,IAClCjB,GAAA,2BAEqBC,IAClBG,KAAKE,SAAS,CACVoP,aAAczP,EAAEc,OAAOE,OACzB,IAzJFb,KAAKyF,MAAQ,IAAIuK,MACjBhQ,KAAKyF,MAAMmB,OAAS5G,KAAKiQ,YACzBjQ,KAAKyL,SAAWhR,IAAAA,YAChBuF,KAAKrB,MAAQqB,KAAKkQ,gBAAgBlQ,KAAKnE,MAAMsU,YAAc,CAAC,EAChE,CAwJApO,MAAAA,GAAS,IAAAqO,EAAAC,EACL,MAAM3D,EAAiB1M,KAAKnE,MAAM8Q,OAC5BC,EAAiB5M,KAAKnE,MAAMgR,OAC5ByD,EAActQ,KAAKnE,MAAMyU,YAE/B,IAAIC,EACAvQ,KAAKrB,MAAM+Q,WACXa,EACI9V,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,OACI4N,IAAK,mBACLC,IAAKtI,KAAKrB,MAAM8M,aAMhC,MAAM+E,EACF/V,IAAAA,cAAC0O,GAAAA,EAAoB,CAAC5K,YAAa,CAAClB,EAAAA,GAAAA,gBAChC5C,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAAA,SACIC,UAAU,yBACVuM,QAAQ,cAERxM,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,+BACHC,eAAe,gBAGvBJ,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,SAAOC,UAAU,gBACbD,IAAAA,cAAA,SACI+I,KAAK,QACL3C,MAAM,OACNtF,KAAK,aACLiR,QAASxM,KAAKrB,MAAM8Q,WACpB9L,SAAU3D,KAAKyQ,gBAEnBhW,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,mCACHC,eAAe,SAGvBJ,IAAAA,cAAA,SAAOC,UAAU,gBACbD,IAAAA,cAAA,SACI+I,KAAK,QACL3C,MAAM,QACNtF,KAAK,aACLiR,SAAUxM,KAAKrB,MAAM8Q,WACrB9L,SAAU3D,KAAKyQ,gBAEnBhW,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,kCACHC,eAAe,QAGvBJ,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,6BACHC,eAAe,+NAQvC,OACIJ,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAACyM,EAAe,KACZzM,IAAAA,cAACW,EAAAA,KAAI,CAACC,GAAE,IAAAC,OAAM0E,KAAKnE,MAAMb,KAAKO,KAAI,8BAC9Bd,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,8BACHC,eAAe,2BAGvBJ,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAI8R,EAAe9R,GACnBC,eAAgB6R,EAAe7R,kBAGvCJ,IAAAA,cAAA,OAAKC,UAAU,kBACV6V,EACD9V,IAAAA,cAAA,QAAMC,UAAU,mBACX8V,EACD/V,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAAA,SACIC,UAAU,yBACVuM,QAAQ,QAERxM,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,4BACHC,eAAe,kBAGvBJ,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,SACIG,GAAG,OACH4I,KAAK,OACL6D,UAAW,GACX3M,UAAU,eACVmG,MAAOb,KAAKrB,MAAMpD,KAClBoI,SAAU3D,KAAKsH,aAEnB7M,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,0BACHC,eAAe,yFAK/BJ,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAAA,SACIC,UAAU,yBACVuM,QAAQ,eAERxM,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,mCACHC,eAAe,iBAGvBJ,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,SACIG,GAAG,cACH4I,KAAK,OACL6D,UAAW,IACX3M,UAAU,eACVmG,MAAOb,KAAKrB,MAAMwJ,YAClBxE,SAAU3D,KAAK+M,oBAEnBtS,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,iCACHC,eAAe,4CAK/BJ,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAAA,SACIC,UAAU,yBACVuM,QAAQ,YAERxM,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,gCACHC,eAAe,cAGvBJ,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,SACIG,GAAG,WACH4I,KAAK,MACL6D,UAAW,IACX3M,UAAU,eACVmG,MAAOb,KAAKrB,MAAM0Q,SAClB1L,SAAU3D,KAAK0Q,iBAEnBjW,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,8BACHC,eAAe,4IAK/BJ,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAAA,SACIC,UAAU,yBACVuM,QAAQ,YAERxM,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,+BACHC,eAAe,cAGvBJ,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,SACIG,GAAG,WACH+V,IAAK3Q,KAAKyL,SACVjI,KAAK,MACL6D,UAAW,IACX3M,UAAU,eACVmG,MAAOb,KAAKrB,MAAM8M,SAClB9H,SAAU3D,KAAK4Q,gBAEnBnW,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,0BACHC,eAAe,yHAK/BJ,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAAA,SACIC,UAAU,yBACVuM,QAAQ,gBAERxM,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,oCACHC,eAAe,kCAGvBJ,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,YACIG,GAAG,eACHiW,KAAM,EACNxJ,UAAW,KACX3M,UAAU,eACVmG,MAAOb,KAAKrB,MAAM2Q,aAClB3L,SAAU3D,KAAK8Q,qBAEnBrW,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,kCACHC,eAAe,oPAK/BJ,IAAAA,cAAA,OAAKC,UAAU,0BACXD,IAAAA,cAACkN,EAAAA,EAAS,CACNnE,KAAK,YACL8J,OAAQ,CAACtN,KAAKnE,MAAM6P,YAAa1L,KAAKrB,MAAMgN,eAEhDlR,IAAAA,cAACW,EAAAA,KAAI,CACDV,UAAU,mBACVW,GAAE,IAAAC,OAAM0E,KAAKnE,MAAMb,KAAKO,KAAI,8BAE5Bd,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,8BACHC,eAAe,YAGvBJ,IAAAA,cAACmN,GAAAA,EAAa,CACVlN,UAAU,kBACV8I,KAAK,SACLqE,SAAU7H,KAAKrB,MAAMuE,OACrB4E,cAAcC,EAAAA,EAAAA,KAAkC,QAAlBqI,EAAApQ,KAAKnE,MAAMuF,eAAO,IAAAgP,OAAA,EAAlBA,EAAoBxV,KAAM,IAAuB,QAAlByV,EAAArQ,KAAKnE,MAAMuF,eAAO,IAAAiP,OAAA,EAAlBA,EAAoBxV,iBAAkB,IACnGuB,QAAS4D,KAAKsF,aACd1K,GAAG,gBAEHH,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAIgS,EAAehS,GACnBC,eAAgB+R,EAAe/R,kBAGtCyV,KAMzB,EACH1Q,GAlaoBuP,GAAgB,aA/BjCmB,YAAW3U,IAAAA,QAKX+P,YAAW/P,IAAAA,OAAAA,WAUX4Q,OAAM5Q,IAAAA,KAAAA,aC/CV,MAAM4R,IAAWC,EAAAA,EAAAA,gBAAe,CAC5BX,OAAQ,CACJjS,GAAI,4BACJC,eAAgB,QAEpB8R,OAAQ,CACJ/R,GAAI,uBACJC,eAAgB,OAEpBuG,QAAS,CACLxG,GAAI,8BACJC,eAAgB,eAoBlBkW,GAAchW,IAAyC,IAAxC,KAACC,EAAI,QAAEwC,GAAezC,EACvC,MAAMiW,GAAUC,EAAAA,EAAAA,eAETvF,EAAagC,IAAkBC,EAAAA,EAAAA,UAAS,IAgB/C,OACIlT,IAAAA,cAAC0U,GAAgB,CACbnU,KAAMA,EACN2R,OAAQY,GAASZ,OACjBE,OAAQU,GAASV,OACjBzL,QAASmM,GAASnM,QAClBmL,OApBYtL,UAChByM,EAAe,IAEf,MAAM,KAACnN,EAAI,MAAEmF,SAAelI,EAAQ0T,YAAY9B,GAC5C7O,EACAyQ,EAAQ9O,KAAK,IAAD5G,OAAKN,EAAKO,KAAI,8CAAAD,OAA6CiF,EAAK3F,KAI5E8K,GACAgI,EAAehI,EAAMhJ,QACzB,EAUIgP,YAAaA,GACf,EAERqF,GAAArV,UAAA,CAtCE8B,QAAO7B,IAAAA,MAAA,CAKHuV,YAAWvV,IAAAA,KAAAA,aAAA+C,YAmCnB,YCzDA,IAAexB,EAAAA,EAAAA,SAAQ,MARvB,SAA4BqC,GACxB,MAAO,CACH/B,SAASgC,EAAAA,EAAAA,oBAAmB,CACxB0R,YAAWA,GAAAA,IACZ3R,GAEX,GAEA,CAAiDwR,I,gbCqElC,MAAMI,WAAgC1W,IAAAA,cACjDiF,WAAAA,CAAY7D,GACR8D,MAAM9D,GAAO+D,GAAA,yBAKGuL,IAChB,IAAIiG,EAAe,GACnB,GAAIjG,SAAAA,EAAMkG,cAAe,CACrB,IAAIC,EAAI,EACR,IAAKA,EAAI,EAAGA,EAAInG,EAAKkG,cAAc7Q,OAAQ8Q,IACvCF,GAAgBjG,EAAKkG,cAAcC,GAAK,IAEhD,CAEA,IAAIhC,EAAe,GACnB,GAAInE,SAAAA,EAAMoE,cAAe,CACrB,IAAI+B,EAAI,EACR,IAAKA,EAAI,EAAGA,EAAInG,EAAKoE,cAAc/O,OAAQ8Q,IACvChC,GAAgBnE,EAAKoE,cAAc+B,GAAK,IAEhD,CAEA,MAAO,CACHnT,aAAagN,aAAI,EAAJA,EAAMtG,eAAgB,GACnCsD,aAAagD,aAAI,EAAJA,EAAMhD,cAAe,GAClCoJ,aAAapG,aAAI,EAAJA,EAAMqG,eAAgB,oCACnCpG,WAAWD,aAAI,EAAJA,EAAME,aAAc,GAC/B+F,eACAK,aAAatG,aAAI,EAAJA,EAAMuG,eAAgB,EACnCpC,eACApM,QAAQ,EACRyI,YAAa,KACbxM,UAAUgM,aAAI,EAAJA,EAAMhM,WAAY,GAC5BqM,SAASL,aAAI,EAAJA,EAAMM,WAAY,GAC9B,IACJ7L,GAAA,qBAEeC,IAA4D,IAAA+L,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAGxE,GAFApM,EAAEC,iBAEEE,KAAKrB,MAAMuE,OACX,OAGJlD,KAAKE,SAAS,CACVgD,QAAQ,EACRyI,YAAa,OAGjB,MAAMyF,EAAe,GACrB,GAAIpR,KAAKrB,MAAMyS,aACX,IAAK,IAAIO,KAAe3R,KAAKrB,MAAMyS,aAAarB,MAAM,MAClD4B,EAAcA,EAAYzQ,OAEtByQ,EAAYnR,OAAS,GACrB4Q,EAAalP,KAAKyP,GAK9B,IAAK3R,KAAKrB,MAAMyM,WAAqC,IAAxBgG,EAAa5Q,OAWtC,YAVAR,KAAKE,SAAS,CACVgD,QAAQ,EACRyI,YACIlR,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,qDACHC,eAAe,6DAQ/B,MAAMyU,EAAe,GACrB,IAAK,IAAIQ,KAAe9P,KAAKrB,MAAM2Q,aAAaS,MAAM,MAClDD,EAAcA,EAAY5O,OAEtB4O,EAAYtP,OAAS,GACrB8O,EAAapN,KAAK4N,GAI1B,GAA4B,IAAxBR,EAAa9O,OAWb,YAVAR,KAAKE,SAAS,CACVgD,QAAQ,EACRyI,YACIlR,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,4CACHC,eAAe,6CAQ/B,MAAMsQ,EAAO,CACTkB,QAASrM,KAAKnE,MAAMb,KAAKJ,GACzByQ,WAAYrL,KAAKrB,MAAMyM,UACvBiG,cAAeD,EACfM,aAAc1R,KAAKrB,MAAM8S,YACzBlC,cAAeD,EACfzK,aAAc7E,KAAKrB,MAAMR,YACzBqT,aAAcxR,KAAKrB,MAAM4S,YACzBpJ,YAAanI,KAAKrB,MAAMwJ,YACxBhJ,SAAUa,KAAKrB,MAAMQ,SACrBsM,SAAUzL,KAAKrB,MAAM6M,QACrB5Q,IAA0B,QAAtBgR,EAAA5L,KAAKnE,MAAMqQ,mBAAW,IAAAN,OAAA,EAAtBA,EAAwBhR,KAAM,GAClCuR,WAAiC,QAAtBN,EAAA7L,KAAKnE,MAAMqQ,mBAAW,IAAAL,OAAA,EAAtBA,EAAwBM,YAAa,EAChDC,WAAiC,QAAtBN,EAAA9L,KAAKnE,MAAMqQ,mBAAW,IAAAJ,OAAA,EAAtBA,EAAwBM,YAAa,EAChDjR,WAAiC,QAAtB4Q,EAAA/L,KAAKnE,MAAMqQ,mBAAW,IAAAH,OAAA,EAAtBA,EAAwB5Q,YAAa,EAChDkD,YAAkC,QAAtB2N,EAAAhM,KAAKnE,MAAMqQ,mBAAW,IAAAF,OAAA,EAAtBA,EAAwB3N,aAAc,GAClDuT,OAA6B,QAAtB3F,EAAAjM,KAAKnE,MAAMqQ,mBAAW,IAAAD,OAAA,EAAtBA,EAAwB2F,QAAS,IAG5C5R,KAAKnE,MAAM0Q,OAAOpB,GAAM7K,MAAK,IAAMN,KAAKE,SAAS,CAACgD,QAAQ,KAAQ,IACrEtD,GAAA,0BAE0DC,IACvDG,KAAKE,SAAS,CACV/B,YAAa0B,EAAEc,OAAOE,OACxB,IACLjB,GAAA,0BAE0DC,IACvDG,KAAKE,SAAS,CACViI,YAAatI,EAAEc,OAAOE,OACxB,IACLjB,GAAA,0BAE2DC,IACxDG,KAAKE,SAAS,CACVqR,YAAa1R,EAAEc,OAAOE,OACxB,IACLjB,GAAA,wBAEyDC,IACtDG,KAAKE,SAAS,CACVkL,UAAWvL,EAAEc,OAAOE,OACtB,IACLjB,GAAA,2BAE8DC,IAC3DG,KAAKE,SAAS,CACVkR,aAAcvR,EAAEc,OAAOE,OACzB,IACLjB,GAAA,0BAE2DC,IACxDG,KAAKE,SAAS,CACVuR,YAAaI,SAAShS,EAAEc,OAAOE,MAAO,KACxC,IACLjB,GAAA,2BAE8DC,IAC3DG,KAAKE,SAAS,CACVoP,aAAczP,EAAEc,OAAOE,OACzB,IACLjB,GAAA,uBAEuDC,IACpDG,KAAKE,SAAS,CACVf,SAAUU,EAAEc,OAAOE,OACrB,IACLjB,GAAA,sBAEsDC,IACnDG,KAAKE,SAAS,CACVsL,QAAS3L,EAAEc,OAAOE,OACpB,IAxKFb,KAAKrB,MAAQqB,KAAKyM,iBAAiBzM,KAAKnE,MAAMqQ,YAClD,CA0KAnK,MAAAA,GACI,MAAM+P,EAAqB,oCACrBC,EAAqB,mBAErBrF,EAAiB1M,KAAKnE,MAAM8Q,OAC5BC,EAAiB5M,KAAKnE,MAAMgR,OAC5ByD,EAActQ,KAAKnE,MAAMyU,YAE/B,OACI7V,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAACyM,EAAe,KACZzM,IAAAA,cAACW,EAAAA,KAAI,CAACC,GAAE,IAAAC,OAAM0E,KAAKnE,MAAMb,KAAKO,KAAI,oCAC9Bd,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,8BACHC,eAAe,uBAGvBJ,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAI8R,EAAe9R,GACnBC,eAAgB6R,EAAe7R,kBAGvCJ,IAAAA,cAAA,OAAKC,UAAU,kBACXD,IAAAA,cAAA,QACIC,UAAU,kBACVyM,SAAUnH,KAAKsF,cAEf7K,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAAA,SACIC,UAAU,yBACVuM,QAAQ,eAERxM,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,mCACHC,eAAe,WAGvBJ,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,SACIG,GAAG,cACH4I,KAAK,OACL6D,UAAW,GACX3M,UAAU,eACVmG,MAAOb,KAAKrB,MAAMR,YAClBwF,SAAU3D,KAAK8M,oBAEnBrS,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,wCACHC,eAAe,+EAK/BJ,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAAA,SACIC,UAAU,yBACVuM,QAAQ,eAERxM,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,mCACHC,eAAe,iBAGvBJ,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,SACIG,GAAG,cACH4I,KAAK,OACL6D,UAAW,IACX3M,UAAU,eACVmG,MAAOb,KAAKrB,MAAMwJ,YAClBxE,SAAU3D,KAAK+M,oBAEnBtS,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,wCACHC,eAAe,uCAK/BJ,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAAA,SACIC,UAAU,yBACVuM,QAAQ,eAERxM,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,oCACHC,eAAe,kBAGvBJ,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,UACIC,UAAU,eACVmG,MAAOb,KAAKrB,MAAM4S,YAClB5N,SAAU3D,KAAKgS,mBAEfvX,IAAAA,cAAA,UACIoG,MAAOiR,GAENA,GAELrX,IAAAA,cAAA,UACIoG,MAAOkR,GAENA,IAGTtX,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,yCACHC,eAAe,4DAGvBJ,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,yCACHC,eAAe,4HAGvBJ,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,yCACHC,eAAe,mFAK/BJ,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAAA,SACIC,UAAU,yBACVuM,QAAQ,aAERxM,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,+BACHC,eAAe,aAGvBJ,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAACyP,GAAa,CACVrJ,MAAOb,KAAKrB,MAAMyM,UAClBzH,SAAU3D,KAAKgN,gBACf5C,YAAY,EACZC,eAAe,EACfC,UAAU,IAEd7P,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,oCACHC,eAAe,6IAK/BJ,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAAA,SACIC,UAAU,yBACVuM,QAAQ,gBAERxM,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,oCACHC,eAAe,kCAGvBJ,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,YACIG,GAAG,eACHiW,KAAM,EACNxJ,UAAW,IACX3M,UAAU,eACVmG,MAAOb,KAAKrB,MAAMyS,aAClBzN,SAAU3D,KAAKiS,qBAEnBxX,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,yCACHC,eAAe,wQAK/BJ,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAAA,SACIC,UAAU,yBACVuM,QAAQ,gBAERxM,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,+CACHC,eAAe,kBAGvBJ,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,UACIG,GAAG,cACHF,UAAU,eACVmG,MAAOb,KAAKrB,MAAM8S,YAClB9N,SAAU3D,KAAKkS,mBAEfzX,IAAAA,cAAA,UACIoG,MAAM,MAELkH,EAAAA,EAAAA,IAAgB,uDAAwD,8CAE7EtN,IAAAA,cAAA,UACIoG,MAAM,MAELkH,EAAAA,EAAAA,IAAgB,yDAA0D,2CAGnFtN,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,oDACHC,eAAe,qDAK/BJ,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAAA,SACIC,UAAU,yBACVuM,QAAQ,gBAERxM,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,oCACHC,eAAe,kCAGvBJ,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,YACIG,GAAG,eACHiW,KAAM,EACNxJ,UAAW,IACX3M,UAAU,eACVmG,MAAOb,KAAKrB,MAAM2Q,aAClB3L,SAAU3D,KAAK8Q,qBAEnBrW,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,yCACHC,eAAe,gGACfY,OAAQ,CACJ2M,KACI3N,IAAAA,cAACgP,GAAAA,EAAY,CACTC,KAAMyI,GAAAA,GAAAA,mBACNxI,SAAS,6BAETlP,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,iDACHC,eAAe,uCAS9CmF,KAAKnE,MAAMqR,4BACRzS,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAAA,SACIC,UAAU,yBACVuM,QAAQ,YAERxM,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,gCACHC,eAAe,cAGvBJ,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,SACIG,GAAG,WACH4I,KAAK,OACL6D,UAAW,GACX3M,UAAU,eACVmG,MAAOb,KAAKrB,MAAMQ,SAClBwE,SAAU3D,KAAKmN,iBAEnB1S,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,qCACHC,eAAe,yPAMlCmF,KAAKnE,MAAMuR,wBACR3S,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAAA,SACIC,UAAU,yBACVuM,QAAQ,WAERxM,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,gCACHC,eAAe,qBAGvBJ,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,SACIG,GAAG,UACH4I,KAAK,OACL6D,UAAW,KACX3M,UAAU,eACVmG,MAAOb,KAAKrB,MAAM6M,QAClB7H,SAAU3D,KAAKqN,gBAEnB5S,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,qCACHC,eAAe,gPAMnCJ,IAAAA,cAAA,OAAKC,UAAU,0BACXD,IAAAA,cAACkN,EAAAA,EAAS,CACNnE,KAAK,YACL8J,OAAQ,CAACtN,KAAKnE,MAAM6P,YAAa1L,KAAKrB,MAAMgN,eAEhDlR,IAAAA,cAACW,EAAAA,KAAI,CACDV,UAAU,mBACVW,GAAE,IAAAC,OAAM0E,KAAKnE,MAAMb,KAAKO,KAAI,oCAE5Bd,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,8BACHC,eAAe,YAGvBJ,IAAAA,cAACmN,GAAAA,EAAa,CACVlN,UAAU,kBACV8I,KAAK,SACLqE,SAAU7H,KAAKrB,MAAMuE,OACrB4E,cAAcC,EAAAA,EAAAA,IAAgB/H,KAAKnE,MAAMuF,QAAQxG,GAAcoF,KAAKnE,MAAMuF,QAAQvG,gBAClFuB,QAAS4D,KAAKsF,aACd1K,GAAG,eAEHH,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAIgS,EAAehS,GACnBC,eAAgB+R,EAAe/R,kBAGtCyV,KAMzB,ECrlBJ,MAAM/C,IAAWC,EAAAA,EAAAA,gBAAe,CAC5BX,OAAQ,CACJjS,GAAI,4BACJC,eAAgB,QAEpB8R,OAAQ,CACJ/R,GAAI,mBACJC,eAAgB,OAEpBuG,QAAS,CACLxG,GAAI,8BACJC,eAAgB,eA8BlBuX,GAAqBrX,IAA6F,IAA5F,KAACC,EAAI,QAAEwC,EAAO,2BAAE0P,EAA0B,uBAAEE,GAA8BrS,EAClG,MAAMiW,GAAUC,EAAAA,EAAAA,eAETvF,EAAagC,IAAkBC,EAAAA,EAAAA,UAAS,IAgB/C,OACIlT,IAAAA,cAAC0W,GAAuB,CACpBnW,KAAMA,EACN2R,OAAQY,GAASZ,OACjBE,OAAQU,GAASV,OACjBzL,QAASmM,GAASnM,QAClBkP,YAAa,GACb/D,OArBgBtL,UACpByM,EAAe,IAEf,MAAM,KAACnN,EAAI,MAAEmF,SAAelI,EAAQ6U,mBAAmBlH,GACnD5K,EACAyQ,EAAQ9O,KAAK,IAAD5G,OAAKN,EAAKO,KAAI,oDAAAD,OAAmDiF,EAAK3F,KAIlF8K,GACAgI,EAAehI,EAAMhJ,QACzB,EAWIgP,YAAaA,EACbwB,2BAA4BA,EAC5BE,uBAAwBA,GAC1B,EAERgF,GAAA1W,UAAA,CAnDE8B,QAAO7B,IAAAA,MAAA,CAKH0W,mBAAkB1W,IAAAA,KAAAA,aAAA+C,WAMtBwO,2BAA0BvR,IAAAA,KAAAA,WAK1ByR,uBAAsBzR,IAAAA,KAAAA,YAqC1B,YCzDA,IAAeuB,EAAAA,EAAAA,UAlBf,SAAyByB,GACrB,MAAMoG,GAAS6E,EAAAA,EAAAA,IAAUjL,GAGzB,MAAO,CACHuO,2BAHqE,SAAtCnI,EAAO+I,2BAItCV,uBAH6D,SAAlCrI,EAAOgJ,uBAK1C,IAEA,SAA4BxO,GACxB,MAAO,CACH/B,SAASgC,EAAAA,EAAAA,oBAAmB,CACxB6S,mBAAkBA,GAAAA,IACnB9S,GAEX,GAEA,CAA4D6S,I,qCCpBrD,SAASE,GAAUC,GACtB,OAAOC,EAAAA,GAAAA,IAAe,CAClBC,WAAYxU,EAAAA,GAAAA,UACZyU,UAAWC,GAAAA,GAAAA,qBACXC,OAAQ,CACJL,IAGZ,CAEO,SAASM,GAASC,EAAmBC,GACxC,OAAOP,EAAAA,GAAAA,IAAe,CAClBC,WAAYxU,EAAAA,GAAAA,SACZyU,UAAWC,GAAAA,GAAAA,qBACXC,OAAQ,CACJE,EACAC,IAGZ,CAYO,SAASC,KAAoD,IAA3C/S,EAAIuI,UAAAhI,OAAA,QAAA+N,IAAA/F,UAAA,GAAAA,UAAA,GAAG,EAAGyK,EAAOzK,UAAAhI,OAAA,QAAA+N,IAAA/F,UAAA,GAAAA,UAAA,GAjCZ,GAkC1B,OAAOgK,EAAAA,GAAAA,IAAe,CAClBC,WAAYxU,EAAAA,GAAAA,sBACZyU,UAAWC,GAAAA,GAAAA,sBACXC,OAAQ,CACJ3S,EACAgT,IAGZ,CAEO,SAASC,GAAWJ,GACvB,OAAON,EAAAA,GAAAA,IAAe,CAClBC,WAAYxU,EAAAA,GAAAA,WACZyU,UAAWC,GAAAA,GAAAA,qBACXC,OAAQ,CACJE,IAGZ,CAEO,SAASK,GAAUL,GACtB,OAAON,EAAAA,GAAAA,IAAe,CAClBC,WAAYxU,EAAAA,GAAAA,UACZyU,UAAWC,GAAAA,GAAAA,qBACXC,OAAQ,CACJE,IAGZ,C,ihCC5DO,SAASM,GAAiBzU,GAC7B,OAAOA,EAAME,SAASwU,aAAaC,aACvC,CAMO,SAASC,GAAiB5U,GAC7B,OAAOA,EAAME,SAASwU,aAAaG,aACvC,CAEO,SAASC,GAAY9U,GACxB,OAAOA,EAAME,SAASwU,aAAaK,QACvC,CAEO,SAASC,GAAahV,GACzB,OAAOA,EAAME,SAASwU,aAAaO,SACvC,CAEO,SAASC,GAA4BlV,GACxC,OAAOA,EAAME,SAASwU,aAAaS,wBACvC,CAEO,MAAMC,IAAsEpJ,EAAAA,GAAAA,IAC/E,2BACAqJ,EAAAA,GACAZ,IACA,CAACxK,EAAQqL,IACEnF,OAAOoF,KAAKD,GACf3S,KAAKa,GAAQ8R,EAAM9R,KACnBgS,QAAQC,GAAiBA,EAAa/H,UAAYzD,MAIjDyL,IAAuD1J,EAAAA,GAAAA,IAChE,qBACA2J,GAAAA,IACC3V,GAAuBA,EAAME,SAASwU,aAAakB,kBACpD,CAACC,EAAMC,IACID,EAAOC,EAAM,KAIfC,IAAkD/J,EAAAA,GAAAA,IAC3D,gBACA2J,GAAAA,IACC3V,GAAuBA,EAAME,SAASwU,aAAasB,aACpD,CAACH,EAAMC,IACID,EAAOC,EAAM,MAW4D9J,EAAAA,GAAAA,IACpF,gCACAqJ,EAAAA,GACAT,IACA,CAAC3K,EAAQqL,IACEnF,OAAOrT,OAAOwY,GAAOE,QAAQS,GAAMA,EAAEvI,UAAYzD,MALzD,MASMiM,IAAmElK,EAAAA,GAAAA,IAC5E,iBACA8I,IAlBG,SAA2B9U,GAC9B,OAAOA,EAAME,SAASwU,aAAayB,cACvC,IAkBI,CAACpB,EAAUoB,IACPC,GAAAA,GAAA,GACOrB,GACAoB,MAK+DnK,EAAAA,GAAAA,IAC1E,8BACAkK,GACAb,EAAAA,IACA,CAACN,EAAUsB,IACAlG,OAAOrT,OAAOiY,GAAUS,QAAQc,GAC5BA,KAAaA,EAAQ5I,SAAW4I,EAAQ5I,UAAY2I,IAAkBC,EAAQC,gBACtFnK,MAAK,CAACoK,EAAGC,IAAMD,EAAEtQ,aAAawQ,cAAcD,EAAEvQ,kB,iDCjEzD,MAqKA,GAnJsB9J,IAAwG,IAAvG,kBAACua,GAAoBvN,EAAAA,EAAAA,IAAgB,wBAAyB,WAAoChN,EAAtBwa,E,kXAAcC,CAAAza,EAAA0a,IAC7G,MAAM,cAAClb,IAAiBC,EAAAA,EAAAA,YAEjB2Z,EAAQuB,IAAa/H,EAAAA,EAAAA,UAAS,IAE/BgI,EAAgBxB,EAAOxO,cAE7B,IAAIT,EAAW,GACX0Q,EAAa,EACjB,GAAIL,EAAenU,QACf8D,EAAW,CACPzK,IAAAA,cAAC4H,EAAAA,EAAa,CACVF,IAAI,iBAGT,CACH,IAAI0T,GAAc,EACqB,mBAA5BN,EAAerQ,UACrBA,EAAU2Q,GAAeN,EAAerQ,SAASyQ,GAElDzQ,EAAWqQ,EAAerQ,SAE9BA,EAAWzK,IAAAA,SAAAA,IAAmByK,GAAWE,GAC9B3K,IAAAA,aAAmB2K,EAAO,CAACuQ,oBAEd,IAApBzQ,EAAS1E,QAAiBqV,EAwB1BD,EAAa1Q,EAAS1E,OAvBjBmV,EAWMJ,EAAeO,kBACtB5Q,EAAW,CACPzK,IAAAA,cAAA,OACIC,UAAU,6CACVE,GAAG,4BACHuH,IAAI,mBAEH1H,IAAAA,aAAmB8a,EAAeO,gBAAiB,CAACra,OAAQ,CAACsa,WAAYJ,QAjB9EJ,EAAeS,YACf9Q,EAAW,CACPzK,IAAAA,cAAA,OACIC,UAAU,6CACVyH,IAAI,aAEHoT,EAAeS,YAkBxC,CAEA,IAAIC,EAAU,KAEVV,EAAeU,SAAWV,EAAeW,UACzCD,EACIxb,IAAAA,cAACW,EAAAA,KAAI,CACDV,UAAU,WACVW,GAAIka,EAAeU,SAEnBxb,IAAAA,cAAA,UACI+I,KAAK,SACL9I,UAAU,kBACVE,GAAI2a,EAAeY,aAEnB1b,IAAAA,cAAA,YACK8a,EAAeW,YAOpC,MAAME,EAAYjC,EAAO3T,OAAS,GAC5B,WAAC6V,EAAU,SAAEC,EAAQ,MAAEC,EAAK,YAAEC,EAAW,WAAEC,GA7FnCC,EAACnB,EAAuBK,EAAoBQ,KAC1D,MAAMnW,EAAQmW,IAAcb,EAAetV,KAAQ,EAAIsV,EAAetV,KAChE0W,EAAYP,IAAcb,EAAeoB,SAAYf,EAAaL,EAAeoB,SACjFJ,EAASH,IAAcb,EAAegB,MAASX,EAAaL,EAAegB,MAEjF,IAAIF,EAAcpW,EAAO0W,EAAY,EACjCL,GAAYrW,EAAO,GAAK0W,EAS5B,OARAL,EAAWA,EAAWC,EAAQA,EAAQD,EACrB,IAAbA,IACAD,EAAa,GAMV,CAACA,aAAYC,WAAUC,QAAOC,YAHjBH,GAAc,EAGgBI,WAF/BH,GAAYC,EAE8B,EA8EEG,CAAUnB,EAAgBK,EAAYQ,GAC/FQ,EAAoBhB,EAAa,EAAI1Q,EAASvC,MAAM0T,EAAa,EAAGC,GAAYpR,EAEtF,IAAI2R,EAAiBtB,EAAelS,aAChCyT,EAAavB,EAAetS,SAQhC,OAPIuT,IACAK,EAAiBA,QAEjBJ,IACAK,EAAaA,QAIbrc,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,OAAKC,UAAU,oBACXD,IAAAA,cAAA,UACK8a,EAAe5I,QAEnBsJ,GAELxb,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,OAAKC,UAAU,4BACXD,IAAAA,cAAC8I,EAAAA,EAAU,MACX9I,IAAAA,cAAA,SACI+I,KAAK,SACL9I,UAAU,eACV+I,YAAa6R,EACbzU,MAAOsT,EACPxQ,SAnGE9D,GAAqC6V,EAAU7V,EAAEc,OAAOE,OAoG1DjG,GAAG,kBAIfH,IAAAA,cAAA,QAAMC,UAAU,wBACX6a,EAAewB,UAEpBtc,IAAAA,cAAA,OAAKC,UAAU,kBACVkc,GAELnc,IAAAA,cAAA,OAAKC,UAAU,oBACXD,IAAAA,cAAA,OAAKC,UAAU,0BACXD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,gCACHC,eAAe,+DACfY,OAAQ,CACJ4a,aACAC,WACAC,WAGR9b,IAAAA,cAAA,UACI+I,KAAK,SACL9I,UAAW,iDAAmD8b,EAAc,WAAa,IACzFpa,QAASya,EACT,aAAYtc,EAAc,CAACK,GAAI,0CAA2CC,eAAgB,cAE1FJ,IAAAA,cAAC6I,EAAAA,EAAY,OAEjB7I,IAAAA,cAAA,UACI+I,KAAK,SACL9I,UAAW,4CAA8C+b,EAAa,WAAa,IACnFra,QAAS0a,EACT,aAAYvc,EAAc,CAACK,GAAI,sCAAuCC,eAAgB,UAEtFJ,IAAAA,cAACoI,EAAAA,EAAQ,SAInB,E,ydC/KP,SAASmU,GAAczE,EAAc4B,EAAiB8C,GACzD,IAAK9C,EACD,OAAO,EAEX,MAAMhV,EAAWoT,EAAIpT,UAAY,GAC3BgJ,EAAcoK,EAAIpK,aAAe,GACjChK,EAAcoU,EAAI1N,cAAgB,GAExC,IAAIqS,EAAgB,SAIpB,OAHID,GAASA,EAAM9X,WACf+X,EAAgBD,EAAM9X,aAE2B,IAA5CA,EAASwG,cAAclE,QAAQ0S,KACW,IAA/ChW,EAAYwH,cAAclE,QAAQ0S,KACa,IAA/ChM,EAAYxC,cAAclE,QAAQ0S,KACe,IAAjD+C,EAAcvR,cAAclE,QAAQ0S,GAC5C,CAqEe,MAAMgD,WAAY1c,IAAAA,cACtBiF,WAAAA,CAAY7D,GACf8D,MAAM9D,GAAO+D,GAAA,kBAUL,KACRI,KAAKnE,MAAM2B,QAAQ2V,UAAUnT,KAAKnE,MAAM0W,IAAIjG,QAAQ,IACvD1M,GAAA,mBAEY,KACTI,KAAKnE,MAAM2B,QAAQ0V,WAAWlT,KAAKnE,MAAM0W,IAAIjG,QAAQ,IACxD1M,GAAA,8BAEwBhF,IACrBoF,KAAKnE,MAAM2B,QAAQ4Z,sBAAsBxc,EAAG,IAC/CgF,GAAA,+BAEyBhF,IACtBoF,KAAKnE,MAAM2B,QAAQ6Z,uBAAuBzc,EAAG,IAChDgF,GAAA,2BAEqBhF,IAClBoF,KAAKE,SAAS,CAACoX,aAAc1c,GAAI,IACpCgF,GAAA,6BAEsB,KACnBI,KAAKnE,MAAM2B,QAAQ+Z,sBAAsBvX,KAAKrB,MAAM2Y,cACpDtX,KAAKwX,cAAc,IACtB5X,GAAA,qBAEc,KACXI,KAAKE,SAAS,CAACoX,aAAc,IAAI,IACpC1X,GAAA,wBAEiB,KACdI,KAAKE,SAAS,CACVuX,mBAAoB,OACpB7F,MAAO,CACHzJ,YAAa,KAEnB,IACLvI,GAAA,yBAEkB,KACfI,KAAKE,SAAS,CACVuX,mBAAoB,SACpB7F,MAAO,CACHzJ,YAAa,KAEnB,IACLvI,GAAA,gCAE0BC,IACvB,MAAMc,EAASd,EAAEc,OACjBX,KAAKE,SAAS,CACV0R,MAAO9C,OAAO4I,OAAO,CAAC,EAAG1X,KAAKrB,MAAMiT,MAAO,CAACzJ,YAAaxH,EAAOE,SAClE,IACLjB,GAAA,0BAEmBqB,UAGhB,GAFApB,EAAEC,iBAEmC,KAAjCE,KAAKrB,MAAMiT,MAAMzJ,YAOjB,YANAnI,KAAKE,SAAS,CAACwF,MACXjL,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,8BACHC,eAAe,kCAM3B,MAAM,KAAC0F,EAAI,MAAEmF,SAAe1F,KAAKnE,MAAM2B,QAAQma,sBAAsB3X,KAAKnE,MAAM0W,IAAIjG,QAAStM,KAAKrB,MAAMiT,MAAMzJ,aAC1G5H,EACAP,KAAKE,SAAS,CAACuX,mBAAoB,UAAW7F,MAAOrR,IAC9CmF,GACP1F,KAAKE,SAAS,CAACwF,MAAOA,EAAMhJ,SAChC,IAhFAsD,KAAKrB,MAAQ,CACT2Y,aAAc,GACdG,mBAAoB,SACpB7F,MAAO,CAAC,EACRlM,MAAO,GAEf,CA6EO3D,MAAAA,GACH,MAAM5C,EAAWa,KAAKnE,MAAM0W,IAAIpT,UAAY,GACtCgJ,EAAcnI,KAAKnE,MAAM0W,IAAIpK,aAAe,GAC5ChK,EAAc6B,KAAKnE,MAAM0W,IAAI1N,cAAgB,GAEnD,IAAIqS,EAAgB,SAChBlX,KAAKnE,MAAM+b,QACXV,EAAgB,iBACTlX,KAAKnE,MAAMob,OAASjX,KAAKnE,MAAMob,MAAM9X,WAC5C+X,EAAgBlX,KAAKnE,MAAMob,MAAM9X,UAErC,MAAMgV,EAASnU,KAAKnE,MAAMsY,OAASnU,KAAKnE,MAAMsY,OAAOxO,cAAgB,GACrE,IAAKqR,GAAchX,KAAKnE,MAAM0W,IAAK4B,EAAQnU,KAAKnE,MAAMob,OAClD,OAAO,KAGX,MAAMY,EAAY,GAiGlB,IAAIpP,EAhGJqG,OAAOrT,OAAOuE,KAAKnE,MAAMic,cAAcvV,SAASqP,IAC5C,IAAImG,EAEAC,EADAC,EAAe,GAGfrG,EAAMsG,UACNH,EACItd,IAAAA,cAAA,KACIG,GAAIgX,EAAMhX,GAAK,cACf8O,KAAK,IACLtN,QAAUyD,IACNA,EAAEC,iBACFE,KAAKqX,uBAAuBzF,EAAMhX,GAAG,GAGzCH,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,kCACHC,eAAe,cAI3Bod,EAAe,QACfD,EACIvd,IAAAA,cAAA,QAAMC,UAAU,cACZD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,0CACHC,eAAe,gBAI3Bkd,EACItd,IAAAA,cAAA,KACIG,GAAIgX,EAAMhX,GAAK,YACf8O,KAAK,IACLtN,QAAUyD,IACNA,EAAEC,iBACFE,KAAKoX,sBAAsBxF,EAAMhX,GAAG,GAGxCH,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,gCACHC,eAAe,aAM/Bgd,EAAU3V,KACNzH,IAAAA,cAAA,OACI0H,IAAKyP,EAAMhX,GACXF,UAAU,kBAEVD,IAAAA,cAAA,OAAKC,UAAU,oDACXD,IAAAA,cAAA,OAAKC,UAAWud,GACZxd,IAAAA,cAAA,OAAKC,UAAU,yCACXD,IAAAA,cAAA,SACIA,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,iCACHC,eAAe,yBAGtB+W,EAAMzJ,aAEX1N,IAAAA,cAAA,OAAKC,UAAU,+DACXD,IAAAA,cAAA,SACIA,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,+BACHC,eAAe,gBAGtB+W,EAAMhX,KAGfH,IAAAA,cAAA,WACKud,EACAD,EACA,MACDtd,IAAAA,cAAA,KACIG,GAAIgX,EAAMhX,GAAK,UACf8O,KAAK,IACLtN,QAAUyD,IACNA,EAAEC,iBACFE,KAAKmY,mBAAmBvG,EAAMhX,GAAG,GAGrCH,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,8BACHC,eAAe,eAMtC,IAIiB,WAAlBqc,IACAzO,EACIhO,IAAAA,cAAA,OAAKC,UAAU,gBACXD,IAAAA,cAAA,UACIG,GAAG,cACHF,UAAU,0BACV0B,QAAS4D,KAAKoY,iBAEd3d,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,0BACHC,eAAe,sBAGtB,MACDJ,IAAAA,cAACW,EAAAA,KAAI,CAACC,GAAE,IAAAC,OAAM0E,KAAKnE,MAAMb,KAAKO,KAAI,+BAAAD,OAA8B0E,KAAKnE,MAAM0W,IAAIjG,UAC3E7R,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,mBACHC,eAAe,UAGtB,MACDJ,IAAAA,cAAA,UACIC,UAAU,0BACV0B,QAAS4D,KAAKkT,YAEdzY,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,qBACHC,eAAe,eAMF,IAA7BmF,KAAKnE,MAAM0W,IAAIpX,YACfsN,EACIhO,IAAAA,cAAA,OAAKC,UAAU,gBACXD,IAAAA,cAAA,UACIC,UAAU,0BACV0B,QAAS4D,KAAKmT,WAEd1Y,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,oBACHC,eAAe,cAOG,SAAlCmF,KAAKrB,MAAM8Y,mBACXI,EAAU3V,KACNzH,IAAAA,cAAA,OACI0H,IAAK,SACLzH,UAAU,kBAEVD,IAAAA,cAAA,OAAK0H,IAAK,UACN1H,IAAAA,cAAA,QACIC,UAAU,kBACVyM,SAAUnH,KAAKqY,mBAEf5d,IAAAA,cAAA,OAAKC,UAAU,OACXD,IAAAA,cAAA,SAAOC,UAAU,6BACbD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,4BACHC,eAAe,yBAGvBJ,IAAAA,cAAA,OAAKC,UAAU,YACXD,IAAAA,cAAA,SACI6d,WAAW,EACX5d,UAAU,uBACV8I,KAAK,OACL6D,UAAW,GACXxG,MAAOb,KAAKrB,MAAMiT,MAAMzJ,YACxBxE,SAAU3D,KAAKuY,4BAI3B9d,IAAAA,cAAA,WACIA,IAAAA,cAAA,OAAKC,UAAU,aACXD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,gCACHC,eAAe,kEAGvBJ,IAAAA,cAAA,SACIG,GAAG,cACHF,UAAU,sBAETsF,KAAKrB,MAAM+G,OAEhBjL,IAAAA,cAAA,OAAKC,UAAU,QACXD,IAAAA,cAACqI,EAAAA,EAAU,CACPC,SAAS,qBACTK,cACI3I,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,4BACHC,eAAe,SAGvBqI,QAAQ,IAEZzI,IAAAA,cAAA,UACIC,UAAU,0BACV0B,QAAS4D,KAAKwY,kBAEd/d,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,8BACHC,eAAe,kBASN,YAAlCmF,KAAKrB,MAAM8Y,oBAClBI,EAAU3V,KACNzH,IAAAA,cAAA,OACI0H,IAAK,UACLzH,UAAU,sCAEVD,IAAAA,cAAA,OAAKC,UAAU,QACXD,IAAAA,cAACmC,EAAAA,EAAW,CAACC,oBAAoB,SACjCpC,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,4BACHC,eAAe,4EAGvBJ,IAAAA,cAAA,OAAKC,UAAU,yCACXD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,4BACHC,eAAe,wBAElBmF,KAAKrB,MAAMiT,MAAMzJ,aAEtB1N,IAAAA,cAAA,OAAKC,UAAU,yCACXD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,0BACHC,eAAe,eAElBmF,KAAKrB,MAAMiT,MAAMhX,IAEtBH,IAAAA,cAAA,UAAQC,UAAU,mBACdD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,6BACHC,eAAe,mBAElBmF,KAAKrB,MAAMiT,MAAMA,OAEtBnX,IAAAA,cAAA,OAAKC,UAAU,QACXD,IAAAA,cAAA,UACIC,UAAU,yBACV0B,QAAS4D,KAAKwY,kBAEd/d,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,yBACHC,eAAe,cAQvC,MAAM4d,EAAW9T,EAAAA,GAAsB3E,KAAKnE,MAAM2J,KAAK5K,GAAIoF,KAAKnE,MAAM2J,KAAKkT,qBAE3E,OACIje,IAAAA,cAAA,OAAKC,UAAU,wBACXD,IAAAA,cAAA,OAAKC,UAAW,0BACZD,IAAAA,cAAA,OACIC,UAAW,eACX2N,IAAK,YACLC,IAAKmQ,KAGbhe,IAAAA,cAAA,OAAKC,UAAU,gBACXD,IAAAA,cAAA,OAAKC,UAAU,4EACXD,IAAAA,cAAA,UAAQC,UAAU,sBACbyD,EAAc,MAAQgB,EAAW,KAErCsJ,GAELhO,IAAAA,cAAA,OAAKC,UAAU,4BACXD,IAAAA,cAACke,GAAAA,EAAQ,CAACjc,QAASyL,KAEvB1N,IAAAA,cAAA,OAAKC,UAAU,eACXD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,kBACHC,eAAe,gBAElBqc,GAELzc,IAAAA,cAAA,OAAKC,UAAU,qBACVmd,IAGTpd,IAAAA,cAACme,GAAAA,EAAY,CACTje,MACIF,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,oBACHC,eAAe,iBAGvB6B,QACIjC,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,0BACHC,eAAe,+CAGvBiB,kBACIrB,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,qBACHC,eAAe,WAGvB4B,WAAW,+BACXoc,KAAkC,KAA5B7Y,KAAKrB,MAAM2Y,aACjBxa,UAAWkD,KAAK8Y,qBAChBC,SAAU/Y,KAAKwX,eAI/B,E,uaCvaW,MAAMwB,WAAave,IAAAA,cACvBiF,WAAAA,CAAY7D,GACf8D,MAAM9D,GAAO+D,GAAA,iBAqEL2S,GAEJ9X,IAAAA,cAAC0c,GAAG,CACAhV,IAAKoQ,EAAIjG,QACTiG,IAAKA,EACL0E,MAAOjX,KAAKnE,MAAMod,OAAO1G,EAAIjG,SAC7B9G,KAAMxF,KAAKnE,MAAMqd,MAAM3G,EAAIjG,SAC3BwL,aAAe9X,KAAKnE,MAAMic,cAAgB9X,KAAKnE,MAAMic,aAAavF,EAAIjG,UAAa,CAAC,EACpF9O,QAASwC,KAAKnE,MAAM2B,QACpBxC,KAAMgF,KAAKnE,MAAMb,KACjB4c,QAAS5X,KAAKnE,MAAM8Y,WAAWwE,SAAS5G,EAAIjG,aAGvD1M,GAAA,aAEOuU,IACJ,MAAMiF,EAAOtK,OAAOrT,OAAOuE,KAAKnE,MAAMud,MAAMrO,MAAK,CAACoK,EAAGC,IAAMD,EAAEhW,SAASkW,cAAcD,EAAEjW,YAChFka,EAAS9G,GAAiByE,GAAczE,EAAK4B,EAAQnU,KAAKnE,MAAMod,OAAO1G,EAAIjG,UAC3EgN,EAAcF,EAAKjF,QAAQ5B,GAA0B,IAAlBA,EAAIpX,YAAiBgZ,OAAOkF,GAAO/X,IAAItB,KAAKuZ,UAC/EC,EAAeJ,EAAKjF,QAAQ5B,GAAQA,EAAIpX,UAAY,IAAGgZ,OAAOkF,GAAO/X,IAAItB,KAAKuZ,UAapF,MAAO,CAZU,CACb9e,IAAAA,cAAA,OAAK0H,IAAI,YACL1H,IAAAA,cAAA,KAAMgf,eAAc,CAChBH,YAAaA,IAEjB7e,IAAAA,cAAA,KAAMif,gBAAe,CACjBC,YAAaH,EAAahZ,OAAS,EACnCgZ,aAAcA,MAKRF,EAAY9Y,OAAS,GAAKgZ,EAAahZ,OAAS,EAAE,IAnGpER,KAAKrB,MAAQ,CACTyC,SAAS,EAEjB,CAEOQ,iBAAAA,GACH5B,KAAKnE,MAAM2B,QAAQwV,SACfxL,GAAAA,QAAAA,aAAAA,eACAA,GAAAA,QAAAA,aAAAA,WACFlH,MACGuG,IACG,GAAIA,EAAOtG,KAAM,CACb,MAAMqZ,EAAW,GAEjB,IAAK,MAAMrH,KAAO1L,EAAOtG,KAErBP,KAAKnE,MAAM2B,QAAQyB,QAAQsT,EAAIsH,UAG/BD,EAAS1X,KAAKlC,KAAKnE,MAAM2B,QAAQyB,QAAQsT,EAAIjG,UAC7CsN,EAAS1X,KAAKlC,KAAKnE,MAAM2B,QAAQsc,2BAA2BvH,EAAIjG,UAGpEyN,QAAQC,IAAIJ,GAAUtZ,MAAK,KACvBN,KAAKE,SAAS,CAACkB,SAAS,GAAO,GAEvC,KAGJpB,KAAKnE,MAAMyY,aACXtU,KAAKnE,MAAM2B,QAAQyc,iBAE3B,CAEAP,eAAAA,CAAgB7d,GACZ,IAAKA,EAAM8d,YACP,OAAO,KAEX,MAAMO,EAAgBzf,IAAAA,SAAAA,IAAmBoB,EAAM2d,cAAepU,GACnD3K,IAAAA,aAAmB2K,EAAO,CAAC+O,OAAQtY,EAAMsY,WAEpD,OACI1Z,IAAAA,cAACA,IAAAA,SAAc,KACXA,IAAAA,cAAA,OAAKC,UAAU,gBACXD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,gBACHC,eAAe,cAGvBJ,IAAAA,cAAA,OAAKC,UAAU,sBACVwf,GAIjB,CAEAT,cAAAA,CAAe5d,GACX,MAAMqe,EAAgBzf,IAAAA,SAAAA,IAAmBoB,EAAMyd,aAAclU,GAClD3K,IAAAA,aAAmB2K,EAAO,CAAC+O,OAAQtY,EAAMsY,WAEpD,OACI1Z,IAAAA,cAAA,WACKyf,EAGb,CAqCOnY,MAAAA,GACH,OACItH,IAAAA,cAAC0f,GAAa,CACVxN,OACIlS,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,qBACHC,eAAe,iBAGvBqb,QAASlW,KAAKnE,MAAMue,YAChB3f,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,kBACHC,eAAe,oBAGvBob,QAAS,IAAMjW,KAAKnE,MAAMb,KAAKO,KAAO,yBACtC4a,YAAY,gBACZH,UACIvb,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,oBACHC,eAAe,0BAGvBib,gBACIrb,IAAAA,cAAC4f,GAAAA,EAAwB,CACrBzf,GAAG,0BACHC,eAAe,2CAGvBkc,SACItc,IAAAA,cAACA,IAAAA,SAAc,KACXA,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,oBACHC,eAAe,qIACfY,OAAQ,CACJ6e,YACI7f,IAAAA,cAACgP,GAAAA,EAAY,CACTC,KAAK,iDACLC,SAAS,QAETlP,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,2BACHC,eAAe,qBAMnCJ,IAAAA,cAAC4f,GAAAA,EAAwB,CACrBzf,GAAG,oBACHC,eAAgB,0GAChBY,OAAQ,CACJ8e,SAASC,EAAAA,GAAAA,UAKzBlF,kBAAmB3Q,EAAAA,GAAsB,qBAAsB,uBAC/DvD,QAASpB,KAAKrB,MAAMyC,SAEnBpB,KAAKoZ,KAGlB,EACHxZ,GA1KoBoZ,GAAI,aA3ErBrE,WAAUhZ,IAAAA,QAAAA,IAAAA,QAAA+C,WAKV4V,YAAW3Y,IAAAA,KAAAA,WAgBXye,WAAUze,IAAAA,KAEV6B,QAAO7B,IAAAA,MAAA,CAKHqX,SAAQrX,IAAAA,KAAAA,WAKRme,2BAA0Bne,IAAAA,KAAAA,WAK1Bgc,sBAAqBhc,IAAAA,KAAAA,WAErB4b,sBAAqB5b,IAAAA,KAAAA,WACrByb,sBAAqBzb,IAAAA,KAAAA,WACrB0b,uBAAsB1b,IAAAA,KAAAA,WAKtBsD,QAAOtD,IAAAA,KAAAA,WAKPuX,WAAUvX,IAAAA,KAAAA,WAKVwX,UAASxX,IAAAA,KAAAA,WAKTse,gBAAete,IAAAA,KAAAA,aAAA+C,aC7BvB,UAAexB,EAAAA,EAAAA,UA5Cf,SAAyByB,GACrB,MACMyb,EAAiD,UADxCxQ,EAAAA,EAAAA,IAAUjL,GACC8b,yBACpBrB,GAAOsB,EAAAA,GAAAA,IAAuB/b,GAC9Bgc,EAAY7L,OAAOrT,OAAO2d,GAC1BH,EAAS0B,EACXC,QAAO,CAAC/T,EAAqC0L,KACzC1L,EAAO0L,EAAIjG,SAAWuO,EAAAA,GAAsBlc,EAAO4T,EAAIsH,UAChDhT,IACR,CAAC,GACFqS,EAAQyB,EACVC,QAAO,CAAC/T,EAAqC0L,KACzC1L,EAAO0L,EAAIjG,SAAWuO,EAAAA,GAAsBlc,EAAO4T,EAAIjG,SAChDzF,IACR,CAAC,GAER,MAAO,CACHuT,aACAhB,OACAtB,aAAcnZ,EAAME,SAASic,MAAMC,uBACnC9B,SACAC,QACAvE,WAAYD,GAAc/V,GAC1B2V,aAAaA,EAAAA,GAAAA,IAAY3V,GAEjC,IAEA,SAA4BY,GACxB,MAAO,CACH/B,SAASgC,EAAAA,EAAAA,oBAAmB,CACxBya,gBAAe,MACfjH,SAAQ,GACR8G,2BAA0B,MAC1BnC,sBAAqB,MACrBJ,sBAAqB,MACrBH,sBAAqB,MACrBC,uBAAsB,MACtBpY,QAAO,MACPiU,WAAU,GACVC,UAASA,IACV5T,GAEX,GAEA,CAA4DyZ,I,ieCtC5D,MAAMgC,GAAwB,eACxBC,GAAmB,SAqFV,MAAMC,WAAezgB,IAAAA,cAEhCiF,WAAAA,CAAY7D,GACR8D,MAAM9D,GAAO+D,GAAA,mBAFY,MAAIA,GAAA,uBAmBfC,IACdG,KAAKE,SAAS,CACVf,SAAUU,EAAEc,OAAOE,OACrB,IACLjB,GAAA,0BAEoBC,IACjBG,KAAKE,SAAS,CACV/B,YAAa0B,EAAEc,OAAOE,OACxB,IACLjB,GAAA,0BAEoBC,IACjBG,KAAKE,SAAS,CACViI,YAAatI,EAAEc,OAAOE,OACxB,IACLjB,GAAA,mBAEaC,IACVG,KAAKE,SAAS,CACVib,KAAMtb,EAAEc,OAAOE,OACjB,IACLjB,GAAA,sBAEgBC,IACbG,KAAKE,SAAS,CACVkb,QAASvb,EAAEc,OAAO6L,SACpB,IACL5M,GAAA,2BAEqBC,IAClBG,KAAKE,SAAS,CACVmb,aAAcxb,EAAEc,OAAO6L,SACzB,IACL5M,GAAA,sBAEgBC,IACb,GAAIA,EAAEc,OAAO6F,OAAS3G,EAAEc,OAAO6F,MAAM,GAAI,CACrC,MAAM8U,EAAczb,EAAEc,OAAO6F,MAAM,GACnCxG,KAAKub,YAAcC,IAAIC,gBAAgBH,GAEvC,MAAM5U,EAAS,IAAIC,WACnBD,EAAOE,OAAU8U,IAAO,IAAAC,EACpB,MAAMC,EAAcC,GAAAA,GAAsC,QAAVF,EAACD,EAAG/a,cAAM,IAAAgb,OAAA,EAATA,EAAW9U,QACtDiV,EAAoBD,GAAAA,GAA+BD,GAEzD5b,KAAKE,SAAS,CACVuF,MAAOzF,KAAKub,aAAe,GAC3BO,qBACF,EAENpV,EAAOqV,kBAAkBT,GACzBzb,EAAEc,OAAOE,MAAQ,GACjBb,KAAKE,SAAS,CAACob,eACnB,MACItb,KAAKE,SAAS,CAACob,YAAa,KAAM7V,MAAO,IAC7C,IACH7F,GAAA,mBAEY,KACTI,KAAKE,SAAS,CAACob,YAAa,UAAW7V,MAAOuW,IAAgB,IACjEpc,GAAA,oBAMaqB,UACV,IAAIgb,EAAQC,EAAAA,GAAAA,iBAERlc,KAAKrB,MAAMwc,OAASH,GACpBiB,GAAS,IAAMC,EAAAA,GAAAA,kBACRlc,KAAKrB,MAAMyc,QAClBa,GAAS,IAAMC,EAAAA,GAAAA,qBACRlc,KAAKrB,MAAM0c,eAClBY,GAAS,IAAMC,EAAAA,GAAAA,6BAGnB,MAAMC,QAAoBnc,KAAKnE,MAAM2B,QAAQ4e,gBAAgB7b,EAAK+L,QAAS2P,GAC3E,OAAIE,EACOA,EAAYzW,MAGhB,IAAI,IACd9F,GAAA,qBAEcqB,UAGX,GAFApB,EAAEC,iBAEEE,KAAKrB,MAAM0d,OACX,OAGJ,IAAKrc,KAAKrB,MAAMQ,UAAYa,KAAKrB,MAAMQ,SAASqB,OAAS,EASrD,YARAR,KAAKE,SAAS,CACVwF,MACIjL,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,mCACHC,eAAe,6JAO/B,GAAImF,KAAKrB,MAAM2c,aAAetb,KAAKsc,OAAOtc,KAAKrB,MAAM2c,aAAc,CAC/D,IAAKiB,GAAAA,GAAAA,SAAmCvc,KAAKrB,MAAM2c,YAAY9X,MAS3D,YARAxD,KAAKE,SAAS,CACVwF,MACIjL,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,mCACHC,eAAe,mEAKxB,GAAImF,KAAKrB,MAAM2c,YAAYpV,KAAOlG,KAAKnE,MAAM2gB,YAShD,YARAxc,KAAKE,SAAS,CACVwF,MACIjL,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,sCACHC,eAAe,wDAMnC,CAEAmF,KAAKE,SAAS,CACVmc,QAAQ,EACR3W,MAAO,KAGX,MAAM6M,EAAM,CACRpT,SAAUa,KAAKrB,MAAMQ,SAASwG,cAAczE,OAC5C2D,aAAc7E,KAAKrB,MAAMR,YACzBgK,YAAanI,KAAKrB,MAAMwJ,aAG5B,IAAI5H,EACAmF,EACJ,GAAI1F,KAAKnE,MAAM0W,IAAK,CAChB,MAAM1L,QAAe7G,KAAKnE,MAAM2B,QAAQqV,SAAS7S,KAAKnE,MAAM0W,IAAIjG,QAASiG,GAqBzE,GApBI1L,GACAtG,EAAOsG,EAAOtG,KACdmF,EAAQmB,EAAOnB,OAEfA,EAAQf,EAAAA,GAAsB,kBAAmB,uBAGhDe,GAASnF,IACNP,KAAKrB,MAAM2c,aAA0C,YAA3Btb,KAAKrB,MAAM2c,YAErC5V,SAD0B1F,KAAKnE,MAAM2B,QAAQif,mBAAmBlc,EAAK+L,QAAStM,KAAKrB,MAAM2c,cACrE5V,MACb1F,KAAKrB,MAAM2c,aAA0C,YAA3Btb,KAAKrB,MAAM2c,mBACtCtb,KAAKnE,MAAM2B,QAAQkf,uBAAuBnc,EAAK+L,WAIxD5G,GAASnF,IACVmF,EAAQ1F,KAAK2c,YAAYpc,IAGzBA,EAEA,YADA8F,EAAAA,GAAAA,KAAanE,KAAK,IAAD5G,OAAK0E,KAAKnE,MAAMb,KAAKO,KAAI,sBAGlD,KAAO,CACH,MAAMqhB,EAAgBjY,EAAAA,GAAyB4N,EAAIpT,UACnD,GAAIyd,EAAe,CACf,IAAIC,EAuBJ,OArBIA,EADAD,EAAchiB,KAAOkiB,GAAAA,GAAAA,uBACZ,CACLT,QAAQ,EACR3W,MACIjL,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,oCACHC,eAAe,8DAKlB,CACLwhB,QAAQ,EACR3W,MACIjL,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,mCACHC,eAAe,iKAK/BmF,KAAKE,SAAS2c,EAElB,CAEA,MAAMhW,QAAe7G,KAAKnE,MAAM2B,QAAQ8U,UAAUC,GAC9C1L,GACAtG,EAAOsG,EAAOtG,KACdmF,EAAQmB,EAAOnB,OAEfA,EAAQf,EAAAA,GAAsB,oBAAqB,wBAGvD,IAAIiN,EAAQ,GACZ,IAAKlM,GAASnF,EAAM,CACZP,KAAKrB,MAAM2c,aAA0C,YAA3Btb,KAAKrB,MAAM2c,kBAC/Btb,KAAKnE,MAAM2B,QAAQif,mBAAmBlc,EAAK+L,QAAStM,KAAKrB,MAAM2c,mBAE/Dtb,KAAKnE,MAAM2B,QAAQkf,uBAAuBnc,EAAK+L,SAEzD,MAAMyQ,QAAoB/c,KAAKnE,MAAM2B,QAAQma,sBAAsBpX,EAAK+L,QACpE3H,EAAAA,GAAsB,gCAAiC,kBAI3D,IAAKoY,GAAeA,EAAYrX,MAE5B,YADAW,EAAAA,GAAAA,KAAanE,KAAK,IAAD5G,OAAK0E,KAAKnE,MAAMb,KAAKO,KAAI,uBAI9CqW,EAAQmL,EAAYxc,KAAMqR,KAC9B,CAMA,IAJKlM,GAASnF,IACVmF,EAAQ1F,KAAK2c,YAAYpc,IAGzBA,EAEA,YADA8F,EAAAA,GAAAA,KAAanE,KAAK,IAAD5G,OAAK0E,KAAKnE,MAAMb,KAAKO,KAAI,uCAAAD,OAAsCiF,EAAK+L,QAAO,WAAAhR,OAAUsW,GAG9G,CAEA5R,KAAKE,SAAS,CACVmc,QAAQ,IAGR3W,GACA1F,KAAKE,SAAS,CACVwF,MAAOA,EAAMhJ,SAErB,IAlQAsD,KAAKrB,MAAQ,CACT+G,MAAO,GACPvG,SAAUa,KAAKnE,MAAM0W,IAAMvS,KAAKnE,MAAM0W,IAAIpT,SAAW,GACrDhB,YAAa6B,KAAKnE,MAAM0W,IAAMvS,KAAKnE,MAAM0W,IAAI1N,aAAe,GAC5DsD,YAAanI,KAAKnE,MAAM0W,IAAMvS,KAAKnE,MAAM0W,IAAIpK,YAAc,GAC3DkU,QAAQ,EACR5W,MAAOuW,GACPb,KAAM6B,GAAAA,GAAwBhd,KAAKnE,MAAMogB,OAAS,IAAMjB,GAAwBC,GAChFG,UAASpb,KAAKnE,MAAM0W,KAAMyK,GAAAA,GAAyBhd,KAAKnE,MAAMogB,OAAS,IACvEZ,eAAcrb,KAAKnE,MAAM0W,KAAMyK,GAAAA,GAA+Bhd,KAAKnE,MAAMogB,OAAS,IAClFH,kBAAmB,CAACmB,UAAW,GAAIC,gBAAiB,IACpD5B,YAAa,KAErB,CAiEAgB,MAAAA,CAAOa,GACH,YAA+B5O,IAAvB4O,EAAcjX,IAC1B,CAqLAnE,MAAAA,GACI,IAAIqb,EACA3iB,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,sBACHC,eAAe,QAGnBwiB,EACA5iB,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,yBACHC,eAAe,uBAGnByiB,EACA7iB,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,2BACHC,eAAe,gBAKnBmF,KAAKnE,MAAM0W,MACX6K,EACI3iB,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,mBACHC,eAAe,SAGvBwiB,EACI5iB,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,yBACHC,eAAe,WAGvByiB,EACI7iB,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,2BACHC,eAAe,iBAK3B,IAoBI0iB,EApBA9E,EAAW,GACX+E,EACA/iB,IAAAA,cAACgjB,GAAAA,EAAW,CACR7iB,GAAG,aACH8iB,UAAU,QACV/iB,MACIF,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,6BACHC,eAAe,qBAIvBJ,IAAAA,cAAA,KACIC,UAAW,sBACX0B,QAAS4D,KAAK2d,YAEdljB,IAAAA,cAAA,YAAO,OAmBnB,OAdIuF,KAAKnE,MAAM0W,MAAQvS,KAAKrB,MAAM2c,YAE1B7C,EADAzY,KAAKnE,MAAM2J,KACAb,EAAAA,GAAsB3E,KAAKnE,MAAM2J,KAAK5K,GAAIoF,KAAKnE,MAAM2J,KAAKkT,qBAE1D/T,EAAAA,GAAsB3E,KAAKnE,MAAM0W,IAAIjG,UAGpDmM,EAAWzY,KAAKrB,MAAM8G,MACtB8X,EAAcvd,KAAKrB,MAAMmd,kBACrB9b,KAAKrB,MAAM8G,QAAUuW,KACrBwB,EAAkB,OAKtB/iB,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAACyM,EAAe,KACZzM,IAAAA,cAACW,EAAAA,KAAI,CAACC,GAAE,IAAAC,OAAM0E,KAAKnE,MAAMb,KAAKO,KAAI,uBAC9Bd,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,qBACHC,eAAe,kBAGtBuiB,GAEL3iB,IAAAA,cAAA,OAAKC,UAAU,kBACXD,IAAAA,cAAA,QACIC,UAAU,kBACVyM,SAAUnH,KAAKsF,cAEf7K,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAAA,SACIC,UAAU,yBACVuM,QAAQ,YAERxM,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,oBACHC,eAAe,cAGvBJ,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,SACIG,GAAG,WACH4I,KAAK,OACL6D,UAAW,GACX3M,UAAU,eACVmG,MAAOb,KAAKrB,MAAMQ,SAClBwE,SAAU3D,KAAKmN,iBAEnB1S,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,wBACHC,eAAe,iFAK/BJ,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAAA,SACIC,UAAU,yBACVuM,QAAQ,WAERxM,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,gBACHC,eAAe,cAGvBJ,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,OAAKC,UAAW,qBACZD,IAAAA,cAAA,OACIC,UAAW,UACX2N,IAAK,YACLC,IAAKmQ,EACLja,MAAO+e,IAEVC,GAEL/iB,IAAAA,cAAA,OACIC,UAAU,4BAEVD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,oBACHC,eAAe,iBAEnBJ,IAAAA,cAAA,SACIC,UAAU,kBACV6M,OAAQC,GAAAA,UAAAA,oBACRhE,KAAK,OACLG,SAAU3D,KAAK4d,mBAK/BnjB,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAAA,SACIC,UAAU,yBACVuM,QAAQ,eAERxM,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,uBACHC,eAAe,kBAGvBJ,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,SACIG,GAAG,cACH4I,KAAK,OACL6D,UAAW,GACX3M,UAAU,eACVmG,MAAOb,KAAKrB,MAAMR,YAClBwF,SAAU3D,KAAK8M,oBAEnBrS,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,4BACHC,eAAgB,2FAKhCJ,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAAA,SACIC,UAAU,yBACVuM,QAAQ,eAERxM,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,sBACHC,eAAe,iBAGvBJ,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,SACIG,GAAG,cACH4I,KAAK,OACL6D,UAAW,KACX3M,UAAU,eACVmG,MAAOb,KAAKrB,MAAMwJ,YAClBxE,SAAU3D,KAAK+M,oBAEnBtS,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,2BACHC,eAAe,sDAK/BJ,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAAA,SACIC,UAAU,yBACVuM,QAAQ,QAERxM,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,eACHC,eAAe,UAGvBJ,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,UACIC,UAAU,eACVmG,MAAOb,KAAKrB,MAAMwc,KAClBhY,UAAWnD,KAAKnE,MAAMgiB,2BACtBla,SAAU3D,KAAK8d,YAEfrjB,IAAAA,cAAA,UACIoG,MAAOoa,IAENtW,EAAAA,GAAsB,sBAAuB,WAElDlK,IAAAA,cAAA,UACIoG,MAAOma,IAENrW,EAAAA,GAAsB,qBAAsB,kBAGrDlK,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,oBACHC,eAAe,6CAK/BJ,IAAAA,cAAA,OAAKC,UAAU,4BACXD,IAAAA,cAAA,OAAKC,UAAU,qCACXD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,wCACHC,eAAe,qGACfY,OAAQ,CACJ2M,KAAO2V,GACHtjB,IAAAA,cAACgP,GAAAA,EAAY,CACTC,KAAMsU,GAAAA,GAAAA,uBACNrU,SAAS,WAERoU,QAOzBtjB,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAAA,SACIC,UAAU,yBACVuM,QAAQ,WAERxM,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,mBACHC,eAAe,cAGvBJ,IAAAA,cAAA,OAAKC,UAAU,8BACXD,IAAAA,cAAA,OAAKC,UAAU,uBACXD,IAAAA,cAAA,SAAOwM,QAAQ,WACXxM,IAAAA,cAAA,SACIG,GAAG,UACH4I,KAAK,WACLgJ,QAASxM,KAAKrB,MAAMyc,SAAWpb,KAAKrB,MAAMwc,OAASH,GACnDrX,SAAU3D,KAAKie,cACf9a,UAAWnD,KAAKnE,MAAMgiB,4BAA8B7d,KAAKrB,MAAMwc,OAASH,KAE5EvgB,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,2BACHC,eAAe,cAI3BJ,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,wBACHC,eAAe,0FAK/BJ,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAAA,SACIC,UAAU,yBACVuM,QAAQ,gBAERxM,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,wBACHC,eAAe,mBAGvBJ,IAAAA,cAAA,OAAKC,UAAU,8BACXD,IAAAA,cAAA,OAAKC,UAAU,uBACXD,IAAAA,cAAA,SAAOwM,QAAQ,gBACXxM,IAAAA,cAAA,SACIG,GAAG,eACH4I,KAAK,WACLgJ,QAASxM,KAAKrB,MAAM0c,cAAgBrb,KAAKrB,MAAMwc,OAASH,IAAyBhb,KAAKrB,MAAMyc,QAC5FzX,SAAU3D,KAAKke,mBACf/a,UAAWnD,KAAKnE,MAAMgiB,4BAA8B7d,KAAKrB,MAAMwc,OAASH,IAAyBhb,KAAKrB,MAAMyc,UAEhH3gB,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,gCACHC,eAAe,cAI3BJ,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,6BACHC,eAAe,uEAK/BJ,IAAAA,cAAA,OAAKC,UAAU,0BACXD,IAAAA,cAACkN,EAAAA,EAAS,CACNnE,KAAK,YACL8J,OAAQ,CAACtN,KAAKrB,MAAM+G,SAExBjL,IAAAA,cAACW,EAAAA,KAAI,CACDV,UAAU,mBACVW,GAAE,IAAAC,OAAM0E,KAAKnE,MAAMb,KAAKO,KAAI,uBAE5Bd,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,yBACHC,eAAe,YAGvBJ,IAAAA,cAACmN,GAAAA,EAAa,CACVlN,UAAU,kBACV8I,KAAK,SACLqE,SAAU7H,KAAKrB,MAAM0d,OACrBvU,aAAcwV,EACdlhB,QAAS4D,KAAKsF,aACd1K,GAAG,WAEFyiB,MAO7B,EC5qBJ,UAAengB,EAAAA,EAAAA,UA7Bf,SAAyByB,EAAoBC,GACzC,MAAMmG,GAAS6E,EAAAA,EAAAA,IAAUjL,GACnBwf,EAAS,IAAIC,gBAAgBxf,EAAS+K,SAAS9F,QAASwa,IAAI,MAC5DjF,GAAOkF,EAAAA,GAAAA,IAAe3f,GACtB4T,EAAO6G,GAAQ+E,EAAS/E,EAAK+E,QAAS5P,EACtC/I,EAAO+M,GAAMtT,EAAAA,EAAAA,IAAQN,EAAO4T,EAAIjG,cAAWiC,EAC3C0N,EAAQzW,EAAOA,EAAKyW,WAAQ1N,EAClC,MAAO,CACHiO,YAAa3K,SAAS9M,EAAOwZ,YAAc,IAC3ChM,MACA0J,QACA4B,4BAA4BW,EAAAA,EAAAA,IAAsB7f,EAAO,CAAC8f,WAAYphB,EAAAA,GAAAA,gBACtEmI,OAER,IAEA,SAA4BjG,GACxB,MAAO,CACH/B,SAASgC,EAAAA,EAAAA,oBAAmB,CACxB8S,UAAS,GACTO,SAAQ,GACR4J,mBAAkB,MAClBC,uBAAsB,MACtB/E,sBAAqB,MACrByE,gBAAeA,GAAAA,IAChB7c,GAEX,GAEA,CAA4D2b,IC9CtDwD,GAAoB,IAEnB,SAASC,GAAoC/V,GAAkJ,IAAlI3I,EAAIuI,UAAAhI,OAAA,QAAA+N,IAAA/F,UAAA,GAAAA,UAAA,GAAG,EAAGyK,EAAOzK,UAAAhI,OAAA,QAAA+N,IAAA/F,UAAA,GAAAA,UAAA,GAAGkW,GAAmBE,EAAiBpW,UAAAhI,OAAA,QAAA+N,IAAA/F,UAAA,IAAAA,UAAA,GACxH,OAAOvH,UACH,MAAM,KAACV,SAAchB,EAASsf,GAAAA,GAAoCjW,EAAQ3I,EAAMgT,EAAS2L,IAU1F,IAAsC3K,EAJrC,OALI1T,GAGAhB,GAMiC0U,EARL4K,GAAAA,GAA+Cte,GACtCA,EAAmCue,kBAAoBve,EAQ7FU,MAAO1B,EAAUwf,KACpB,MAAMpgB,EAAQogB,IACRC,EAA2C,CAAC,EAClD,IAAK,IAAI1N,EAAI,EAAGA,EAAI2C,EAAMzT,OAAQ8Q,IAAK,CACnC,MAAMnG,EAAO8I,EAAM3C,IACdrS,EAAAA,EAAAA,IAAQN,EAAOwM,EAAKmB,WACrB0S,EAAe7T,EAAKmB,UAAW,EAEvC,CAEA,MAAM2S,EAAOnQ,OAAOoF,KAAK8K,GACzB,OAAoB,IAAhBC,EAAKze,QAITjB,GAAS2f,EAAAA,GAAAA,IAAiBD,IAHf,CAAC1e,KAAM,KAIC,IArBZ,CAACA,OAAK,CAErB,CAuBO,SAAS4e,GAAoCvW,GAA2F,IAA3E3I,EAAIuI,UAAAhI,OAAA,QAAA+N,IAAA/F,UAAA,GAAAA,UAAA,GAAG,EAAGyK,EAAOzK,UAAAhI,OAAA,QAAA+N,IAAA/F,UAAA,GAAAA,UAAA,GAAGkW,GACpF,OAAOzd,UACH,MAAM,KAACV,SAAchB,EAASsf,GAAAA,GAAoC,GAAIjW,EAAQ3I,EAAMgT,IAQrF,IAAsCgB,EAJrC,OAHI1T,GACAhB,GAMiC0U,EANK1T,EAOvCU,MAAO1B,EAAUwf,KACpB,MAAMpgB,EAAQogB,IACRC,EAA2C,CAAC,EAClD,IAAK,IAAI1N,EAAI,EAAGA,EAAI2C,EAAMzT,OAAQ8Q,IAAK,CACnC,MAAMnG,EAAO8I,EAAM3C,IACdrS,EAAAA,EAAAA,IAAQN,EAAOwM,EAAK9M,cACrB2gB,EAAe7T,EAAK9M,aAAc,EAE1C,CAEA,MAAM4gB,EAAOnQ,OAAOoF,KAAK8K,GACzB,OAAoB,IAAhBC,EAAKze,QAITjB,GAAS2f,EAAAA,GAAAA,IAAiBD,IAHf,CAAC1e,KAAM,KAIC,IArBZ,CAACA,OAAK,CAErB,CAuBO,SAAS6e,GAA+BxW,GAC3C,OAAO3H,UACH,MAAM,KAACV,SAAchB,EAASsf,GAAAA,GAAyCjW,IAQxE,IAAiC8K,EAJhC,OAHInT,GACAhB,GAM4BmU,EANKnT,EAOlCU,MAAO1B,EAAUwf,KACpB,MAAMpgB,EAAQogB,IACRC,EAA2C,CAAC,EAClD,IAAK,IAAI1N,EAAI,EAAGA,EAAIoC,EAASlT,OAAQ8Q,IAAK,CACtC,MAAM2D,EAAUvB,EAASpC,IACpBrS,EAAAA,EAAAA,IAAQN,EAAOsW,EAAQ5W,cACxB2gB,EAAe/J,EAAQ5W,aAAc,EAE7C,CAEA,MAAM4gB,EAAOnQ,OAAOoF,KAAK8K,GACzB,OAAoB,IAAhBC,EAAKze,QAITjB,GAAS2f,EAAAA,GAAAA,IAAiBD,IAHf,CAAC1e,KAAM,KAIC,IArBZ,CAACA,OAAK,CAErB,CAuBO,SAAS8e,KAAiF,IAAxDpf,EAAIuI,UAAAhI,OAAA,QAAA+N,IAAA/F,UAAA,GAAAA,UAAA,GAAG,EAAGyK,EAAOzK,UAAAhI,OAAA,QAAA+N,IAAA/F,UAAA,GAAAA,UAAA,GAAGkW,GACzD,OAAOzd,MAAO1B,EAAUwf,MAChBzK,EAAAA,GAAAA,IAAYyK,MACZxf,EAASsf,GAAAA,KAEb,MAAM,KAACte,SAAchB,EAASsf,GAAAA,GAAgC5e,EAAMgT,IAIpE,OAHI1S,GACAhB,EAML,SAAkCiV,GACrC,OAAOvT,MAAO1B,EAAUwf,KACpB,MAAMpgB,EAAQogB,IACRC,EAA2C,CAAC,EAClD,IAAK,IAAI1N,EAAI,EAAGA,EAAIkD,EAAKhU,OAAQ8Q,IAAK,CAClC,MAAMlC,EAAMoF,EAAKlD,IACZrS,EAAAA,EAAAA,IAAQN,EAAOyQ,EAAI/Q,cACpB2gB,EAAe5P,EAAI/Q,aAAc,EAEzC,CAEA,MAAM4gB,EAAOnQ,OAAOoF,KAAK8K,GACzB,OAAoB,IAAhBC,EAAKze,QAITjB,GAAS2f,EAAAA,GAAAA,IAAiBD,IAHf,CAAC1e,KAAM,KAIC,CAE3B,CAzBqB+e,CAAyB/e,IAE/B,CAACA,KAAM,KAAK,CAE3B,C,mDC5FA,MAAMgf,GAAgC1jB,IAClC,MAAM2jB,GAAUC,EAAAA,EAAAA,SAAO,IAChBC,EAAmBC,IAA8BhS,EAAAA,EAAAA,UAAyC,OAC1FiS,EAAsBC,IAA2BlS,EAAAA,EAAAA,WAAS,GAE3DmS,GAAmBC,EAAAA,EAAAA,aAAYlM,IAC/BmM,EAAoF,UAA1DD,EAAAA,EAAAA,aAAYnW,EAAAA,IAAWK,+BACjDrB,GAASmX,EAAAA,EAAAA,aAAY/L,EAAAA,IAErBzU,GAAW0gB,EAAAA,EAAAA,eAEXC,GAA0B7jB,EAAAA,EAAAA,cAAY4E,UACxC,MAAMuN,QAAYjP,GAAS4gB,EAAAA,GAAAA,IAAyCvX,EAAQwX,IAC5EP,GAAwB,GAEpBrR,EAAIjO,MAAQiO,EAAIjO,KAAKC,OACrBmf,EAA2BnR,EAAIjO,KAAK,IAEpCof,EAA2B,KAC/B,GACD,CAACpgB,EAAUqJ,IAERyX,GAA4BtiB,EAAAA,EAAAA,UAAQ,IAC/BuiB,MAAUF,GAAuBF,EAAwBE,IAAa,MAC9E,CAACF,KAEJ1b,EAAAA,EAAAA,YAAU,KACFgb,EAAQ3P,UAGZ2P,EAAQ3P,SAAU,EAEdmQ,IACAzgB,GAASghB,EAAAA,GAAAA,IAA8B3X,IACnC/M,EAAMgF,QACNgf,GAAwB,GACxBK,EAAwBrkB,EAAMgF,SAEtC,GACD,CAACmf,EAAyBnkB,EAAMgF,MAAO+H,EAAQsX,EAAyB3gB,EAAUigB,IAErF,MASMgB,EAAc1R,OAAOrT,OAAOqkB,GAE5B5R,EACFzT,IAAAA,cAAA,SACIgmB,aAAa,MACb7lB,GAAG,MACHyM,UAAW,KACX3M,UAAU,eACVmG,MAAOhF,EAAMgF,MACb8C,SAlBU9D,IACdhE,EAAM8H,SAAS9D,GAEXmgB,IACAH,GAAwB,GACxBQ,EAA0BxgB,EAAEc,OAAOE,OACvC,EAaI4C,YAAa5H,EAAM4H,cAI3B,IAAK+c,EAAYhgB,OACb,OAAO0N,EAGX,IAAIwS,EA6CJ,OA1CIA,EADAd,EAEInlB,IAAAA,cAAA,YACIA,IAAAA,cAACkmB,GAAAA,EAAc,OAGhBjB,EAEHjlB,IAAAA,cAAAA,IAAAA,SAAA,KACIA,IAAAA,cAAA,YACIA,IAAAA,cAACmmB,GAAAA,UAAS,CACN1a,KAAM,MAGdzL,IAAAA,cAAA,QAAMC,UAAU,yCACZD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,0CACHC,eAAe,kCACfY,OAAQ,CACJolB,eAAgBnB,EAAkBnkB,UAQlDd,IAAAA,cAAAA,IAAAA,SAAA,KACIA,IAAAA,cAAA,YACIA,IAAAA,cAACqmB,GAAAA,uBAAsB,CACnB5a,KAAM,MAGdzL,IAAAA,cAAA,QAAMC,UAAU,yCACZD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,8CACHC,eAAe,wCAQ/BJ,IAAAA,cAAAA,IAAAA,SAAA,KACKyT,EACDzT,IAAAA,cAAA,OAAKC,UAAU,mDACVgmB,GAEN,EAETnB,GAAA7jB,UAAA,CA9HEmF,MAAKlF,IAAAA,OAAAA,WACLgI,SAAQhI,IAAAA,KAAAA,WACR8H,YAAW9H,IAAAA,OAAAA,YA8Hf,Y,uaClEO,MAAMolB,WAAwBtmB,IAAAA,cACjCiF,WAAAA,CAAY7D,GACR8D,MAAM9D,GAAO+D,GAAA,4BAKMqV,IAA4C,IAAA+L,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAC/D,MAAO,CACHtjB,YAAkC,QAAvB6iB,EAAE/L,aAAO,EAAPA,EAASpQ,oBAAY,IAAAmc,EAAAA,EAAI,GACtC7Y,YAAiC,QAAtB8Y,EAAEhM,aAAO,EAAPA,EAAS9M,mBAAW,IAAA8Y,EAAAA,EAAI,GACrCS,QAAyB,QAAlBR,EAAEjM,aAAO,EAAPA,EAASyM,eAAO,IAAAR,EAAAA,EAAI,GAC7BS,IAAiB,QAAdR,EAAElM,aAAO,EAAPA,EAAS0M,WAAG,IAAAR,EAAAA,EAAI,GACrBS,OAAuB,QAAjBR,EAAEnM,aAAO,EAAPA,EAAS2M,cAAM,IAAAR,EAAAA,EA5Ed,IA6ETjiB,SAA2B,QAAnBkiB,EAAEpM,aAAO,EAAPA,EAAS9V,gBAAQ,IAAAkiB,EAAAA,EAAI,GAC/BQ,QAA0B,QAAnBP,EAAErM,aAAO,EAAPA,EAASxJ,gBAAQ,IAAA6V,EAAAA,EAAI,GAC9BQ,aAAoC,QAAxBP,EAAEtM,aAAO,EAAPA,EAASC,qBAAa,IAAAqM,GAAAA,EACpCQ,iBAA6C,QAA7BP,EAAEvM,aAAO,EAAPA,EAAS+M,0BAAkB,IAAAR,EAAAA,EAAI,GACjDS,wBAAoD,QAA7BR,EAAExM,aAAO,EAAPA,EAASiN,0BAAkB,IAAAT,EAAAA,EAAI,GACxDve,QAAQ,EACRyI,YAAa,KAChB,IACJ/L,GAAA,2BAEoB,IACgB,iBAAtBI,KAAKnE,MAAM8Q,OACXlS,IAAAA,cAAA,YAAOuF,KAAKnE,MAAM8Q,QAIzBlS,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAIoF,KAAKnE,MAAM8Q,OAAO/R,GACtBC,eAAgBmF,KAAKnE,MAAM8Q,OAAO9R,mBAG7C+E,GAAA,2BAEoB,IACgB,iBAAtBI,KAAKnE,MAAMgR,OACXpS,IAAAA,cAAA,YAAOuF,KAAKnE,MAAMgR,QAIzBpS,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAIoF,KAAKnE,MAAMgR,OAAOjS,GACtBC,eAAgBmF,KAAKnE,MAAMgR,OAAOhS,mBAG7C+E,GAAA,qBAEeC,IAGZ,GAFAA,EAAEC,iBAEEE,KAAKrB,MAAMuE,OACX,OAGJlD,KAAKE,SAAS,CACVgD,QAAQ,EACRyI,YAAa,KAGjB,IAAIgG,EAAc3R,KAAKrB,MAAM+iB,QAAQxgB,OAAOyE,cACX,IAA7BgM,EAAYlQ,QAAQ,OACpBkQ,EAAcA,EAAYwQ,OAAO,IAGrC,MAAMlN,EAAU,CACZpQ,aAAc7E,KAAKrB,MAAMR,YACzBgK,YAAanI,KAAKrB,MAAMwJ,YACxBuZ,QAAS/P,EACTgQ,IAAK3hB,KAAKrB,MAAMgjB,IAAIzgB,OACpB0gB,OAAQ5hB,KAAKrB,MAAMijB,OACnBziB,SAAUa,KAAKrB,MAAMQ,SACrBsM,SAAUzL,KAAKrB,MAAMkjB,QACrB3M,cAAelV,KAAKrB,MAAMmjB,aAC1BzV,QAASrM,KAAKnE,MAAMb,KAAKJ,GACzBsnB,mBAAoB,GACpBF,mBAAoB,GACpBpQ,MAAO,GACPzF,UAAW,EACXC,UAAW,EACXjR,UAAW,EACXP,GAAI,GACJyD,WAAY,IAGW,IAAA+jB,EAAAC,EAAvBpN,EAAQC,gBACRD,EAAQiN,mBAAuD,QAArCE,EAAGpiB,KAAKrB,MAAMsjB,+BAAuB,IAAAG,EAAAA,EAAI,GACnEnN,EAAQ+M,mBAAgD,QAA9BK,EAAGriB,KAAKrB,MAAMojB,wBAAgB,IAAAM,EAAAA,EAAI,IAG3DpN,EAAQyM,QAcwB,IAAjCzM,EAAQyM,QAAQjgB,QAAQ,MAcU,IAAlCwT,EAAQyM,QAAQjgB,QAAQ,KAaxBwT,EAAQyM,QAAQlhB,OAASgH,GAAAA,UAAAA,oBACzByN,EAAQyM,QAAQlhB,OAASgH,GAAAA,UAAAA,mBACzBxH,KAAKE,SAAS,CACVgD,QAAQ,EACRyI,YACIlR,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,mCACHC,eAAe,iEACfY,OAAQ,CACJ6mB,IAAK9a,GAAAA,UAAAA,mBACL+a,IAAK/a,GAAAA,UAAAA,wBASpByN,EAAQ0M,IAcb3hB,KAAKnE,MAAM0Q,OAAO0I,GAAS3U,MAAK,IAAMN,KAAKE,SAAS,CAACgD,QAAQ,MAbzDlD,KAAKE,SAAS,CACVgD,QAAQ,EACRyI,YACIlR,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,0BACHC,eAAe,gCArC3BmF,KAAKE,SAAS,CACVgD,QAAQ,EACRyI,YACIlR,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,kCACHC,eAAe,6CAnB3BmF,KAAKE,SAAS,CACVgD,QAAQ,EACRyI,YACIlR,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,kCACHC,eAAe,2CAnB3BmF,KAAKE,SAAS,CACVgD,QAAQ,EACRyI,YACIlR,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,8BACHC,eAAe,gCAoEsC,IACxE+E,GAAA,0BAEoBC,IACjBG,KAAKE,SAAS,CACV/B,YAAa0B,EAAEc,OAAOE,OACxB,IACLjB,GAAA,0BAEoBC,IACjBG,KAAKE,SAAS,CACViI,YAAatI,EAAEc,OAAOE,OACxB,IACLjB,GAAA,sBAEgBC,IACbG,KAAKE,SAAS,CACVwhB,QAAS7hB,EAAEc,OAAOE,OACpB,IACLjB,GAAA,kBAEYC,IACTG,KAAKE,SAAS,CACVyhB,IAAK9hB,EAAEc,OAAOE,OAChB,IACLjB,GAAA,qBAEeC,IACZ,MAAM2iB,EAAc3iB,EAAEc,OAAOE,MACT,MAAhB2hB,GAAuC,MAAhBA,GAAuC,KAAhBA,GAC9CxiB,KAAKE,SAAS,CACV0hB,OAAQY,GAEhB,IACH5iB,GAAA,uBAEiBC,IACdG,KAAKE,SAAS,CACVf,SAAUU,EAAEc,OAAOE,OACrB,IACLjB,GAAA,sBAEgBC,IACbG,KAAKE,SAAS,CACV2hB,QAAShiB,EAAEc,OAAOE,OACpB,IACLjB,GAAA,2BAEqBC,IAClBG,KAAKE,SAAS,CACV4hB,aAAcjiB,EAAEc,OAAO6L,SACzB,IACL5M,GAAA,+BAEyBC,IACtBG,KAAKE,SAAS,CACV6hB,iBAAkBliB,EAAEc,OAAOE,OAC7B,IACLjB,GAAA,sCAEgCC,IAC7BG,KAAKE,SAAS,CACV+hB,wBAAyBpiB,EAAEc,OAAOE,OACpC,IAjOFb,KAAKrB,MAAQqB,KAAKyiB,oBAAoBziB,KAAKnE,MAAM6mB,gBAAkB,CAAC,EACxE,CAmOA3gB,MAAAA,GAAS,IAAA4gB,EAAAvS,EAAAC,EACL,IAAI0R,EAAmB,KACnBE,EAA0B,KAwE9B,OAtEIjiB,KAAKrB,MAAMmjB,eACXC,EACItnB,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAAA,SACIC,UAAU,yBACVuM,QAAQ,oBAERxM,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,+BACHC,eAAe,uBAGvBJ,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,SACIG,GAAG,mBACH4I,KAAK,OACL6D,UAAW,KACX3M,UAAU,eACVmG,MAAOb,KAAKrB,MAAMojB,iBAClBpe,SAAU3D,KAAK4iB,uBACfnf,YAAazD,KAAKnE,MAAM6H,KAAKnJ,cAAc,CACvCK,GAAI,2CACJC,eAAgB,8BAGxBJ,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,oCACHC,eAAe,kIAOnConB,EACIxnB,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAAA,SACIC,UAAU,yBACVuM,QAAQ,2BAERxM,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,sCACHC,eAAe,8BAGvBJ,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,SACIG,GAAG,cACH4I,KAAK,OACL6D,UAAW,IACX3M,UAAU,eACVmG,MAAOb,KAAKrB,MAAMsjB,wBAClBte,SAAU3D,KAAK6iB,8BACfpf,YAAazD,KAAKnE,MAAM6H,KAAKnJ,cAAc,CACvCK,GAAI,kDACJC,eAAgB,4DAGxBJ,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,2CACHC,eAAe,0EASnCJ,IAAAA,cAAA,OAAKC,UAAU,yBACXD,IAAAA,cAACyM,EAAe,KACZzM,IAAAA,cAACW,EAAAA,KAAI,CAACC,GAAI,IAAM2E,KAAKnE,MAAMb,KAAKO,KAAO,0BACnCd,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,2BACHC,eAAe,oBAGtBmF,KAAK8iB,sBAEVroB,IAAAA,cAAA,OAAKC,UAAU,kBACXD,IAAAA,cAAA,QACIC,UAAU,kBACVyM,SAAUnH,KAAKsF,cAEf7K,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAAA,SACIC,UAAU,yBACVuM,QAAQ,eAERxM,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,0BACHC,eAAe,WAGvBJ,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,SACIG,GAAG,cACH4I,KAAK,OACL6D,UAAW,GACX3M,UAAU,eACVmG,MAAOb,KAAKrB,MAAMR,YAClBwF,SAAU3D,KAAK8M,oBAEnBrS,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,+BACHC,eAAe,qFAK/BJ,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAAA,SACIC,UAAU,yBACVuM,QAAQ,eAERxM,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,0BACHC,eAAe,iBAGvBJ,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,SACIG,GAAG,cACH4I,KAAK,OACL6D,UAAW,IACX3M,UAAU,eACVmG,MAAOb,KAAKrB,MAAMwJ,YAClBxE,SAAU3D,KAAK+M,oBAEnBtS,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,+BACHC,eAAe,oCAK/BJ,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAAA,SACIC,UAAU,yBACVuM,QAAQ,WAERxM,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,sBACHC,eAAe,0BAGvBJ,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,SACIG,GAAG,UACH4I,KAAK,OACL6D,UAAWG,GAAAA,UAAAA,mBACX9M,UAAU,eACVmG,MAAOb,KAAKrB,MAAM+iB,QAClB/d,SAAU3D,KAAK+iB,cACftf,YAAazD,KAAKnE,MAAM6H,KAAKnJ,cAAc,CACvCK,GAAI,kCACJC,eAAgB,2DAGxBJ,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,2BACHC,eAAe,kIAGvBJ,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,mCACHC,eAAe,kDAGvBJ,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,mCACHC,eAAe,mBACfY,OAAQ,CACJ2M,KACI3N,IAAAA,cAACgP,GAAAA,EAAY,CACTC,KAAMsU,GAAAA,GAAAA,sBACNrU,SAAS,oBAETlP,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,2CACHC,eAAe,uCAS/CJ,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAAA,SACIC,UAAU,yBACVuM,QAAQ,OAERxM,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,kBACHC,eAAe,iBAGvBJ,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAC8kB,GAA4B,CACzB1e,MAAOb,KAAKrB,MAAMgjB,IAClBhe,SAAU3D,KAAKgjB,UACfvf,YAAazD,KAAKnE,MAAM6H,KAAKnJ,cAAc,CACvCK,GAAI,8BACJC,eAAgB,0CAGxBJ,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,uBACHC,eAAe,2GAGvBJ,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAI,mDACJC,eAAgB,uEAChBY,OAAQ,CACJ2M,KAAO6a,GACHxoB,IAAAA,cAAA,KAAGiP,KAAK,wDAAwDuZ,SAOxFxoB,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAAA,SACIC,UAAU,yBACVuM,QAAQ,UAERxM,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,qBACHC,eAAe,oBAGvBJ,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,UACIG,GAAG,SACHF,UAAU,eACVmG,MAAOb,KAAKrB,MAAMijB,OAClBje,SAAU3D,KAAKkjB,cAEfzoB,IAAAA,cAAA,UAAQoG,MAtiBvB,KAuiBoB8D,EAAAA,GAAsB,0BAA2B,SAEtDlK,IAAAA,cAAA,UAAQoG,MAxiBxB,KAyiBqB8D,EAAAA,GAAsB,yBAA0B,SAGzDlK,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,0BACHC,eAAe,6HAK/BJ,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAAA,SACIC,UAAU,yBACVuM,QAAQ,YAERxM,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,uBACHC,eAAe,uBAGvBJ,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,SACIG,GAAG,WACH4I,KAAK,OACL6D,UAAW,GACX3M,UAAU,eACVmG,MAAOb,KAAKrB,MAAMQ,SAClBwE,SAAU3D,KAAKmN,eACf1J,YAAazD,KAAKnE,MAAM6H,KAAKnJ,cAAc,CACvCK,GAAI,mCACJC,eAAgB,eAGxBJ,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,4BACHC,eAAe,uQAK/BJ,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAAA,SACIC,UAAU,yBACVuM,QAAQ,WAERxM,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,sBACHC,eAAe,mBAGvBJ,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,SACIG,GAAG,UACH4I,KAAK,OACL6D,UAAW,KACX3M,UAAU,eACVmG,MAAOb,KAAKrB,MAAMkjB,QAClBle,SAAU3D,KAAK4Q,cACfnN,YAAazD,KAAKnE,MAAM6H,KAAKnJ,cAAc,CACvCK,GAAI,kCACJC,eAAgB,yCAGxBJ,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,2BACHC,eAAe,yNAK/BJ,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAAA,SACIC,UAAU,yBACVuM,QAAQ,gBAERxM,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,2BACHC,eAAe,kBAGvBJ,IAAAA,cAAA,OAAKC,UAAU,8BACXD,IAAAA,cAAA,SACIG,GAAG,eACH4I,KAAK,WACLgJ,QAASxM,KAAKrB,MAAMmjB,aACpBne,SAAU3D,KAAKmjB,qBAEnB1oB,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,gCACHC,eAAe,4GAK9BknB,EACAE,EACDxnB,IAAAA,cAAA,OAAKC,UAAU,0BACXD,IAAAA,cAACkN,EAAAA,EAAS,CACNnE,KAAK,YACL8J,OAAQ,CAACtN,KAAKnE,MAAM6P,YAAa1L,KAAKrB,MAAMgN,eAEhDlR,IAAAA,cAACW,EAAAA,KAAI,CACDV,UAAU,mBACVW,GAAI,IAAM2E,KAAKnE,MAAMb,KAAKO,KAAO,0BAEjCd,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,qBACHC,eAAe,YAGvBJ,IAAAA,cAACmN,GAAAA,EAAa,CACVlN,UAAU,kBACV8I,KAAK,SACLqE,SAAU7H,KAAKrB,MAAMuE,OACrB4E,aAA4C,iBAAvB9H,KAAKnE,MAAMuF,QAAuBpB,KAAKnE,MAAMuF,QAAUuD,EAAAA,GAA4C,QAAvBge,EAAmB,QAAnBvS,EAACpQ,KAAKnE,MAAMuF,eAAO,IAAAgP,OAAA,EAAlBA,EAAoBxV,UAAE,IAAA+nB,EAAAA,EAAI,GAAsB,QAApBtS,EAAErQ,KAAKnE,MAAMuF,eAAO,IAAAiP,OAAA,EAAlBA,EAAoBxV,gBACpJuB,QAAS4D,KAAKsF,aACd1K,GAAG,eAEFoF,KAAKojB,sBAETpjB,KAAKnE,MAAMyU,eAMpC,EAGJ,UAAetM,EAAAA,EAAAA,YAAW+c,ICrqBpBsC,GAAatoB,IAA4B,IAA3B,KAACC,EAAI,QAAEwC,GAAezC,EACtC,MAAMiW,GAAUC,EAAAA,EAAAA,eACV,cAAC1W,IAAiBC,EAAAA,EAAAA,WAClB8oB,EAAgB/oB,EAAc,CAACK,GAAK,mBAAqBC,eAAgB,QACzE0oB,EAAgBhpB,EAAc,CAACK,GAAK,mBAAqBC,eAAgB,SACzE2oB,EAAiBjpB,EAAc,CAACK,GAAK,qBAAuBC,eAAgB,eAC3E6Q,EAAagC,IAAkBC,EAAAA,EAAAA,UAAS,IAgB/C,OACIlT,IAAAA,cAACsmB,GAAe,CACZ/lB,KAAMA,EACN2R,OAAQ2W,EACRzW,OAAQ0W,EACRniB,QAASoiB,EACTjX,OApBWtL,UACfyM,EAAe,IAEf,MAAM,KAACnN,EAAI,MAAEmF,SAAelI,EAAQimB,WAAWxO,GAC3C1U,EACAyQ,EAAQ9O,KAAK,IAAD5G,OAAKN,EAAKO,KAAI,oDAAAD,OAAmDiF,EAAK3F,KAIlF8K,GACAgI,EAAehI,EAAMhJ,QACzB,EAUIgP,YAAaA,GACf,EAER2X,GAAA3nB,UAAA,CAzCE8B,QAAO7B,IAAAA,MAAA,CAKH8nB,WAAU9nB,IAAAA,KAAAA,aAAA+C,YAsClB,YC9CA,IAAexB,EAAAA,EAAAA,SAAQ,MARvB,SAA4BqC,GACxB,MAAO,CACH/B,SAASgC,EAAAA,EAAAA,oBAAmB,CACxBikB,WAAUA,GAAAA,IACXlkB,GAEX,GAEA,CAAiD8jB,I,OCHjD,MAAMK,GAAW3oB,IAGJ,IAHK,MACd8F,EAAK,QACL8iB,GACI5oB,EACJ,MAAM6oB,GAAWvnB,EAAAA,EAAAA,cAAawD,IAC1BA,EAAEC,kBACF+jB,EAAAA,EAAAA,IAAgBhjB,EAAM,GACvB,CAACA,IAEJ,OAAK+D,SAASkf,sBAAsB,QAKhCrpB,IAAAA,cAACgjB,GAAAA,EAAW,CACR7iB,GAAG,kBACH8iB,UAAU,MACV/iB,MACIgpB,GACIlpB,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,uBACHC,eAAe,UAK3BJ,IAAAA,cAAA,KACIiP,KAAK,IACL,cAAY,WACZhP,UAAU,kBACV0B,QAASwnB,KApBV,IAsBO,EAEpBF,GAAAhoB,UAAA,CAtCEmF,MAAKlF,IAAAA,OAAAA,WACLgoB,QAAOhoB,IAAAA,MAuCX,SAAelB,IAAAA,KAAWipB,ICrBpBK,GAAqBhpB,IAAoI,IAAnI,KAACC,EAAI,SAAE2O,EAAQ,SAAE+J,EAAQ,UAAEE,EAAS,cAAEN,EAAa,cAAEE,EAAa,KAAE4F,EAAI,yBAAEtF,GAAgC/Y,EAClI,MAAMiW,GAAUC,EAAAA,EAAAA,cAEVzN,EAAQ,IAAI4a,gBAAgBzU,EAAS9F,QAASwa,IAAI,SAAW,GAC7DzjB,EAAM,IAAIwjB,gBAAgBzU,EAAS9F,QAASwa,IAAI,OAAS,IAE/D7Z,EAAAA,EAAAA,YAAU,KACNwf,OAAOC,iBAAiB,WAAYC,GAE7B,KACHF,OAAOG,oBAAoB,WAAYD,EAAe,KAI9D,MAAMA,EAAkBrkB,IACN,UAAVA,EAAEsC,KACF6O,EAAQ9O,KAAK,IAAMlH,EAAKO,KAAO,iBAAmBiI,EACtD,EAGJ,IAAI4gB,EACArN,EACAsN,EAEJ,MAAMpP,EAAUvB,EAAS9Y,GACnBwZ,EAAed,EAAc1Y,GAC7B0pB,EAAe9Q,EAAc5Y,GAC7B2pB,EAAW3Q,EAAUhZ,GACrB4pB,EAA0B1Q,EAAyBlZ,GACnD2X,EAAM6G,EAAKxe,GAEjB,GAAI4I,IAASgE,GAAAA,UAAAA,aAAAA,SAAkCyN,EAAS,CACpD,MAAMwP,EAAexP,EAAQrD,MAE7BwS,EACI3pB,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAI,wBACJC,eAAe,mBAGvBkc,EACItc,IAAAA,cAAA,SACIA,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,uBACHC,eAAe,uMACfY,OAAQ,CACJ2M,KAAO2V,GACHtjB,IAAAA,cAACgP,GAAAA,EAAY,CACTC,KAAMsU,GAAAA,GAAAA,4BACNrU,SAAS,uBAERoU,OAOzBsG,EACI5pB,IAAAA,cAAA,KAAGC,UAAU,mBACTD,IAAAA,cAAC4f,GAAAA,EAAwB,CACrBzf,GAAG,oBACHC,eAAe,qBACfY,OAAQ,CAACmW,MAAO6S,KAEpBhqB,IAAAA,cAACipB,GAAQ,CAAC7iB,MAAO4jB,IAG7B,MAAO,GAAIjhB,IAASgE,GAAAA,UAAAA,aAAAA,kBAA2C4M,EAAc,CACzE,MAAMsQ,GAAoBlK,EAAAA,GAAAA,MAAe,UAAYpG,EAAaxZ,GAElEwpB,EACI3pB,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAI,2BACJC,eAAe,sBAGvBkc,EACItc,IAAAA,cAAA,SACIA,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,gCACHC,eAAe,sHACfY,OAAQ,CACJ2M,KAAO2V,GACHtjB,IAAAA,cAACgP,GAAAA,EAAY,CACTC,KAAMsU,GAAAA,GAAAA,wBACNrU,SAAS,uBAERoU,OAOzBsG,EACI5pB,IAAAA,cAAA,KAAGC,UAAU,mBACTD,IAAAA,cAAC4f,GAAAA,EAAwB,CACrBzf,GAAG,2BACHC,eAAe,iBACfY,OAAQ,CAACkmB,IAAK,IAAM+C,EAAoB,OAE5CjqB,IAAAA,cAACipB,GAAQ,CAAC7iB,MAAO6jB,IAG7B,MAAO,GAAIlhB,IAASgE,GAAAA,UAAAA,aAAAA,kBAA2C8c,EAAc,CACzE,MAAMK,EAAoBL,EAAa1S,MAEvCwS,EACI3pB,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAI,8BACJC,eAAe,sBAGvBkc,EACItc,IAAAA,cAAA,SACIA,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,gCACHC,eAAe,kNACfY,OAAQ,CACJ2M,KAAO2V,GACHtjB,IAAAA,cAACgP,GAAAA,EAAY,CACTC,KAAMsU,GAAAA,GAAAA,wBACNrU,SAAS,uBAERoU,OAOzBsG,EACI5pB,IAAAA,cAAA,KAAGC,UAAU,mBACTD,IAAAA,cAAC4f,GAAAA,EAAwB,CACrBzf,GAAG,6BACHC,eAAe,qBACfY,OAAQ,CAACmW,MAAO+S,KAEpBlqB,IAAAA,cAACipB,GAAQ,CAAC7iB,MAAO8jB,IAG7B,MAAO,GAAInhB,IAASgE,GAAAA,UAAAA,aAAAA,WAAoC+c,EAAU,CAC9D,MAAMK,EAAgBL,EAAS3pB,GACzBiqB,EAAiBN,EAASO,cAEhCV,EACI3pB,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAI,+BACJC,eAAe,2BAIvBkc,EAAW,GACXA,EAAS7U,KACLzH,IAAAA,cAAA,KAAG0H,IAAI,0BACH1H,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,yBACHC,eAAe,gMACfY,OAAQ,CACJ2M,KAAO2V,GACHtjB,IAAAA,cAACgP,GAAAA,EAAY,CACTC,KAAMsU,GAAAA,GAAAA,aACNrU,SAAS,uBAERoU,QAOzBhH,EAAS7U,KACLzH,IAAAA,cAAA,KAAG0H,IAAI,0BACH1H,IAAAA,cAAC4f,GAAAA,EAAwB,CACrBzf,GAAG,yBACHC,eAAe,sBACfY,OAAQ,CAACb,GAAIgqB,KAEjBnqB,IAAAA,cAACipB,GAAQ,CACLC,QACIlpB,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,8BACHC,eAAe,mBAGvBgG,MAAO+jB,IAEXnqB,IAAAA,cAAA,WACAA,IAAAA,cAAC4f,GAAAA,EAAwB,CACrBzf,GAAG,6BACHC,eAAe,8BACfY,OAAQ,CAACspB,OAAQF,KAErBpqB,IAAAA,cAACipB,GAAQ,CACLC,QACIlpB,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,kCACHC,eAAe,uBAGvBgG,MAAOgkB,MAKnB9N,EAAS7U,KACLzH,IAAAA,cAAA,KAAG0H,IAAI,6BACH1H,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,4BACHC,eAAe,8CAK3BwpB,EACI5pB,IAAAA,cAAA,KAAGC,UAAU,mBACTD,IAAAA,cAAC4f,GAAAA,EAAwB,CACrBzf,GAAG,oBACHC,eAAe,oBACfY,OAAQ,CAACkmB,IAAK4C,EAAShV,cAAcC,KAAK,SAI1D,MAAO,GAAIhM,IAASgE,GAAAA,UAAAA,aAAAA,4BAAqDgd,EAAyB,CAC9F,MAAMQ,EAAWR,EAAwBS,UACnCC,EAAeV,EAAwBM,cACvC3lB,EAAWqlB,EAAwBW,qBACnCC,EAAWZ,EAAwBa,qBAEzCjB,EACI3pB,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,8CACHC,eAAe,mCAIvBkc,EAAW,GACXA,EAAS7U,KACLzH,IAAAA,cAAA,KAAG0H,IAAI,0CACH1H,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,yCACHC,eAAe,wSACfY,OAAQ,CACJ2M,KAAO2V,GACHtjB,IAAAA,cAACgP,GAAAA,EAAY,CACTC,KAAMsU,GAAAA,GAAAA,aACNrU,SAAS,uBAERoU,QAOzBhH,EAAS7U,KACLzH,IAAAA,cAAA,KAAG0H,IAAI,0CACH1H,IAAAA,cAAC4f,GAAAA,EAAwB,CACrBzf,GAAG,yCACHC,eAAe,sBACfY,OAAQ,CAACb,GAAIoqB,KAEjBvqB,IAAAA,cAAA,WACAA,IAAAA,cAAC4f,GAAAA,EAAwB,CACrBzf,GAAG,6CACHC,eAAe,8CACfY,OAAQ,CAACspB,OAAQG,OAKc,aAAvCV,EAAwBc,YACxBvO,EAAS7U,KACLzH,IAAAA,cAAA,KAAG0H,IAAI,0CACH1H,IAAAA,cAAC4f,GAAAA,EAAwB,CACrBzf,GAAG,yCACHC,eAAe,2BACfY,OAAQ,CAAC0D,cAEb1E,IAAAA,cAACipB,GAAQ,CACLC,QACIlpB,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,6BACHC,eAAe,kBAGvBgG,MAAO1B,GAAY,KAEvB1E,IAAAA,cAAA,WACAA,IAAAA,cAAC4f,GAAAA,EAAwB,CACrBzf,GAAG,yCACHC,eAAe,2BACfY,OAAQ,CAAC2pB,gBAMzBf,EACI5pB,IAAAA,cAAAA,IAAAA,SAAA,KACIA,IAAAA,cAAA,KAAGC,UAAU,mBACTD,IAAAA,cAAC4f,GAAAA,EAAwB,CACrBzf,GAAG,0CACHC,eAAe,yBACfY,OAAQ,CAACkmB,IAAK6C,EAAwBe,oBAG9C9qB,IAAAA,cAAA,KAAGC,UAAU,mBACTD,IAAAA,cAAC4f,GAAAA,EAAwB,CACrBzf,GAAG,8CACHC,eAAe,+BACfY,OAAQ,CAACkmB,IAAK6C,EAAwBgB,UAAUhW,KAAK,UAKzE,KAAO,IAAIhM,IAASgE,GAAAA,UAAAA,aAAAA,MAA8B+K,EAyD9C,OADAvB,EAAQyU,QAAQ,eAADnqB,OAAgBoqB,GAAAA,GAAAA,iBACxB,KAzD4C,CACnD,MAAMC,EAAY,IAAIvH,gBAAgBzU,EAAS9F,QAASwa,IAAI,UAAY,GAExE+F,EACI3pB,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,qBACHC,eAAe,iBAGvBkc,EACItc,IAAAA,cAAA,SACIA,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,2BACHC,eAAe,uNACfY,OAAQ,CACJmqB,QAASrT,EAAI1N,cAAgB0N,EAAIpT,SACjC0mB,OAAS9H,GAAgBtjB,IAAAA,cAAA,cAASsjB,GAClC3V,KAAO2V,GACHtjB,IAAAA,cAACgP,GAAAA,EAAY,CACTC,KAAK,iDACLC,SAAS,uBAERoU,OAOzBsG,EACI5pB,IAAAA,cAAA,KAAGC,UAAU,mBACTD,IAAAA,cAAC4f,GAAAA,EAAwB,CACrBzf,GAAG,6BACHC,eAAe,qBACfY,OAAQ,CAACmW,MAAO+T,KAEpBlrB,IAAAA,cAACipB,GAAQ,CAAC7iB,MAAO8kB,IACjBlrB,IAAAA,cAAA,WACAA,IAAAA,cAAA,WACAA,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,qCACHC,eAAe,oIACfY,OAAQ,CACJ2M,KAAO2V,GACHtjB,IAAAA,cAACgP,GAAAA,EAAY,CACTC,KAAK,iDACLC,SAAS,uBAERoU,MAO7B,CAGA,CAEA,OACItjB,IAAAA,cAAA,OAAKC,UAAU,yBACXD,IAAAA,cAACyM,EAAe,KACZzM,IAAAA,cAACW,EAAAA,KAAI,CAACC,GAAI,IAAML,EAAKO,KAAO,iBAAmBiI,GAC1C4gB,GAEL3pB,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,mBACHC,eAAe,SAGvBJ,IAAAA,cAAA,OAAKC,UAAU,+CACXD,IAAAA,cAAA,MACIC,UAAU,wBACVE,GAAG,aAEHH,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,0BACHC,eAAe,sBAGtBkc,EACAsN,EACD5pB,IAAAA,cAAA,OAAKC,UAAU,0BACXD,IAAAA,cAACW,EAAAA,KAAI,CACDV,UAAU,kBACV8I,KAAK,SACLnI,GAAI,IAAML,EAAKO,KAAO,iBAAmBiI,EACzC5I,GAAG,cAEHH,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,oBACHC,eAAe,YAK7B,EAEZkpB,GAAAroB,UAAA,CAzaEiO,SAAQhO,IAAAA,MAAA,CAAGkI,OAAMlI,IAAAA,OAAAA,aAAA+C,YA2arB,YC1aA,IAAexB,EAAAA,EAAAA,UAXf,SAAyByB,GACrB,MAAO,CACH+U,SAAUD,GAAY9U,GACtBiV,UAAWD,GAAahV,GACxB2U,cAAeF,GAAiBzU,GAChC6U,cAAeD,GAAiB5U,GAChCya,MAAMkF,EAAAA,GAAAA,IAAe3f,GACrBmV,yBAA0BD,GAA4BlV,GAE9D,GAEA,CAAwColB,I,uaCJxC,MAAMxW,IAAWC,EAAAA,EAAAA,gBAAe,CAC5BX,OAAQ,CACJjS,GAAI,sBACJC,eAAgB,UAEpB8R,OAAQ,CACJ/R,GAAI,oBACJC,eAAgB,QAEpBuG,QAAS,CACLxG,GAAI,wBACJC,eAAgB,iBA6CT,MAAMirB,WAAoBrrB,IAAAA,cAG9BiF,WAAAA,CAAY7D,GACf8D,MAAM9D,GAAO+D,GAAA,oBAsBIqB,UAA2C,IAAA8kB,EAAAC,EAAAC,EAAAC,EAC5DlmB,KAAKmmB,WAAalR,EAEY,QAA9B8Q,EAAI/lB,KAAKrB,MAAMynB,uBAAe,IAAAL,GAA1BA,EAA4BnrB,KAC5Bqa,EAAQra,GAAKoF,KAAKrB,MAAMynB,gBAAgBxrB,KAGd,QAA1BorB,EAAAhmB,KAAKrB,MAAMynB,uBAAe,IAAAJ,OAAA,EAA1BA,EAA4BrE,OAAQ3hB,KAAKmmB,WAAWxE,MAC1B,QAA1BsE,EAAAjmB,KAAKrB,MAAMynB,uBAAe,IAAAH,OAAA,EAA1BA,EAA4BvE,WAAY1hB,KAAKmmB,WAAWzE,UAC9B,QAA1BwE,EAAAlmB,KAAKrB,MAAMynB,uBAAe,IAAAF,OAAA,EAA1BA,EAA4BtE,UAAW5hB,KAAKmmB,WAAWvE,OACvD5hB,KAAKqmB,2BAECrmB,KAAKsmB,eACf,IACH1mB,GAAA,2BAE2B,KACxBI,KAAKE,SAAS,CAACqmB,kBAAkB,GAAM,IAC1C3mB,GAAA,8BAE8B,KAC3BI,KAAKE,SAAS,CAACqmB,kBAAkB,GAAO,IAC3C3mB,GAAA,sBAEsBqB,UACnBjB,KAAKE,SAAS,CAACwL,YAAa,KAE5B,MAAM,KAACnL,EAAI,MAAEmF,SAAe1F,KAAKnE,MAAM2B,QAAQgpB,YAAYxmB,KAAKmmB,YAE5D5lB,GACA8F,EAAAA,GAAAA,KAAanE,KAAK,IAAD5G,OAAK0E,KAAKnE,MAAMb,KAAKO,KAAI,4BAI9CyE,KAAKE,SAAS,CAACqmB,kBAAkB,IAE7B7gB,GACA1F,KAAKE,SAAS,CAACwL,YAAahG,EAAMhJ,UACtC,IACHkD,GAAA,oBAEoB,KACjB,MAAM6mB,EACFhsB,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,wBACHC,eAAe,WAIjB6rB,EACFjsB,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,yBACHC,eAAe,uBAIjB8rB,EACFlsB,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,0BACHC,eAAe,iGAIvB,OACIJ,IAAAA,cAACme,GAAAA,EAAY,CACTje,MAAO+rB,EACPhqB,QAASiqB,EACT7qB,kBAAmB2qB,EACnBhqB,WAAW,+BACXoc,KAAM7Y,KAAKrB,MAAM4nB,iBACjBzpB,UAAWkD,KAAKsmB,cAChBvN,SAAU/Y,KAAK4mB,uBACjB,IA7FN5mB,KAAKmmB,gBAAa5X,EAElBvO,KAAKrB,MAAQ,CACTynB,gBAAiB,KACjBG,kBAAkB,EAClB7a,YAAa,GAErB,CAEO9J,iBAAAA,GACC5B,KAAKnE,MAAMmN,gBACXhJ,KAAKnE,MAAM2B,QAAQqpB,sBAAsB7mB,KAAKnE,MAAMb,KAAKJ,IAAI0F,MACzD,KACIN,KAAKE,SAAS,CACVkmB,gBAAiBtX,OAAOrT,OAAOuE,KAAKnE,MAAM6X,UAAUS,QAAQc,GAAYA,EAAQra,KAAOoF,KAAKnE,MAAMirB,YAAW,IAC/G,GAIlB,CA8EO/kB,MAAAA,GACH,OAAK/B,KAAKrB,MAAMynB,gBAKZ3rB,IAAAA,cAACsmB,GAAe,CACZ/lB,KAAMgF,KAAKnE,MAAMb,KACjB2R,OAAQY,GAASZ,OACjBE,OAAQU,GAASV,OACjBzL,QAASmM,GAASnM,QAClBkP,YAAatQ,KAAKsQ,cAClB/D,OAAQvM,KAAKwmB,YACb9a,YAAa1L,KAAKrB,MAAM+M,YACxBgX,eAAgB1iB,KAAKrB,MAAMynB,kBAZxB3rB,IAAAA,cAAC4H,EAAAA,EAAa,KAe7B,EACHzC,GAxHoBkmB,GAAW,aA/B5BgB,UAASnrB,IAAAA,UAAA,CAAAA,IAAAA,OAAAA,IAAAA,MAAA,UAMT6B,QAAO7B,IAAAA,MAAA,CAKHkrB,sBAAqBlrB,IAAAA,KAAAA,WAKrB6qB,YAAW7qB,IAAAA,KAAAA,aAAA+C,WAMfsK,eAAcrN,IAAAA,KAAAA,aC1BlB,UAAeuB,EAAAA,EAAAA,UArBf,SAAyByB,EAAoBC,GACzC,MAAMmG,GAAS6E,EAAAA,EAAAA,IAAUjL,GACnBmoB,EAAa,IAAI1I,gBAAgBxf,EAAS+K,SAAS9F,QAASwa,IAAI,MAChErV,EAA2C,SAA1BjE,EAAOgF,eAE9B,MAAO,CACH+c,YACApT,SAAUD,GAAY9U,GACtBqK,iBAER,IAEA,SAA4BzJ,GACxB,MAAO,CACH/B,SAASgC,EAAAA,EAAAA,oBAAmB,CACxBqnB,sBAAqB,MACrBL,YAAWA,GAAAA,IACZjnB,GAEX,GAEA,CAA4DumB,I,uaCarD,SAAS9O,GAAc/B,EAAkBd,GAC5C,OAAKA,IAI0D,IAAxDc,EAAQpQ,aAAac,cAAclE,QAAQ0S,KACS,IAAvDc,EAAQ9M,YAAYxC,cAAclE,QAAQ0S,KACS,IAAnDc,EAAQyM,QAAQ/b,cAAclE,QAAQ0S,EAC9C,CAEe,MAAM4S,WAAyBtsB,IAAAA,cAA2BiF,WAAAA,GAAA,SAAA8I,WAAA5I,GAAA,yBACjDC,IAChBA,EAAEC,iBAEFE,KAAKnE,MAAMmrB,aAAahnB,KAAKnE,MAAMoZ,QAAQ,IAC9CrV,GAAA,qBAEc,KACXI,KAAKnE,MAAMK,SAAS8D,KAAKnE,MAAMoZ,QAAQ,GAC1C,CAEDlT,MAAAA,GACI,MAAMkT,EAAUjV,KAAKnE,MAAMoZ,QAG3B,IAAK+B,GAAc/B,EAFJjV,KAAKnE,MAAMsY,OAASnU,KAAKnE,MAAMsY,OAAOxO,cAAgB,IAGjE,OAAO,KAGX,IAAIpK,EAGAA,EADA0Z,EAAQpQ,aACDoQ,EAAQpQ,aAGXpK,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,qCACHC,eAAe,0BAK3B,IAAIsN,EAAc,KACd8M,EAAQ9M,cACRA,EACI1N,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,QAAMC,UAAU,6BACXua,EAAQ9M,eAMzB,IAAIuZ,EAAU,MAAQzM,EAAQyM,QAC1BzM,EAAQC,eAAiBD,EAAQ+M,qBACjCN,GAAW,IAAMzM,EAAQ+M,oBAG7B,IAAIxkB,EAAU,KACVwC,KAAKnE,MAAMorB,YACXzpB,EACI/C,IAAAA,cAAA,OAAKC,UAAU,gBACXD,IAAAA,cAAA,UACIC,UAAU,0BACV0B,QAAS4D,KAAKknB,kBAEdzsB,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,oCACHC,eAAe,sBAGtB,MACDJ,IAAAA,cAACW,EAAAA,KAAI,CAACC,GAAE,IAAAC,OAAM0E,KAAKnE,MAAMb,KAAKO,KAAI,mCAAAD,OAAkC2Z,EAAQra,KACxEH,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,8BACHC,eAAe,UAGtB,MACDJ,IAAAA,cAACmB,EAAqB,CAClBI,aACIvB,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,oCACHC,eAAe,gIAGvBqB,SAAU8D,KAAK9B,iBAM/B,MAAMumB,EAAexP,EAAQrD,MAE7B,OACInX,IAAAA,cAAA,OAAKC,UAAU,wBACXD,IAAAA,cAAA,OAAKC,UAAU,gBACXD,IAAAA,cAAA,OAAKC,UAAU,4EACXD,IAAAA,cAAA,OAAKC,UAAU,sBACXD,IAAAA,cAAA,cACKc,IAGTd,IAAAA,cAAA,QAAMC,UAAU,yBACXgnB,GAEJlkB,GAEJ2K,EACD1N,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,QAAMC,UAAU,uBACZD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,+BACHC,eAAe,iBACfY,OAAQ,CACJmW,MAAO6S,KAGfhqB,IAAAA,cAACipB,GAAQ,CACL7iB,MAAO4jB,MAInBhqB,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,QAAMC,UAAU,0BACZD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,kCACHC,eAAe,iDACfY,OAAQ,CACJuD,QAASgB,KAAKnE,MAAMmD,QAAQG,SAC5BgoB,SAAUlS,EAAQ9I,gBAQlD,E,uaACHvM,GAjIoBmnB,GAAgB,aAjCjCC,aAAYrrB,IAAAA,KAAAA,WAKZO,SAAQP,IAAAA,KAAAA,WAKRwY,OAAMxY,IAAAA,OAUNsrB,UAAStrB,IAAAA,KAAAA,aCPE,MAAMyrB,WAA0B3sB,IAAAA,cAA2BiF,WAAAA,GAAA,SAAA8I,WAAA5I,GAAA,0BAC1CqV,IACxBjV,KAAKnE,MAAM2B,QAAQ6pB,kBAAkBpS,EAAQra,GAAG,IACnDgF,GAAA,sBAEuBqV,IACpBjV,KAAKnE,MAAM2B,QAAQ8pB,cAAcrS,EAAQra,GAAG,GAC/C,CAEO2sB,cAAAA,CAAepS,EAAYC,GAC/B,IAAIoS,EAAQrS,EAAEtQ,aACT2iB,IACDA,EAAQ7iB,EAAAA,GAAsB,qCAAsC,0BAGxE,IAAI8iB,EAAQrS,EAAEvQ,aAKd,OAJK4iB,IACDA,EAAQ9iB,EAAAA,GAAsB,qCAAsC,0BAGjE6iB,EAAMnS,cAAcoS,EAC/B,CAEO1lB,MAAAA,GACH,MAAM2R,EAAYS,GAAmBnU,KAAKnE,MAAM6X,SAC5CS,QAAQc,GAAYA,EAAQ5I,UAAYrM,KAAKnE,MAAMb,KAAKJ,KACxDuZ,QAAQc,GAAY+B,GAAc/B,EAASd,KAC3CpJ,KAAK/K,KAAKunB,gBAAgBjmB,KAAK2T,IAC3B,MAAMgS,EAAYjnB,KAAKnE,MAAM6rB,8BAAgC1nB,KAAKnE,MAAM2J,KAAK5K,KAAOqa,EAAQ5W,WAE5F,OACI5D,IAAAA,cAACssB,GAAgB,CACb5kB,IAAK8S,EAAQra,GACbI,KAAMgF,KAAKnE,MAAMb,KACjBia,QAASA,EACT+R,aAAchnB,KAAKqnB,kBACnBnrB,SAAU8D,KAAKsnB,cACftoB,QAASgB,KAAKnE,MAAMqd,MAAMjE,EAAQ5W,aAAe,CAAC,EAClD4oB,UAAWA,GACb,IAId,OACIxsB,IAAAA,cAAC0f,GAAa,CACVxN,OACIlS,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,4BACHC,eAAe,6BAGvBqb,QACIzb,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,yBACHC,eAAe,sBAGvBob,QAAS,IAAMjW,KAAKnE,MAAMb,KAAKO,KAAO,6BACtC4a,YAAY,kBACZH,UACIvb,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,2BACHC,eAAe,4BAGvBib,gBACIrb,IAAAA,cAAC4f,GAAAA,EAAwB,CACrBzf,GAAG,iCACHC,eAAe,yCAGvBkc,SACItc,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,0BACHC,eAAe,iKACfY,OAAQ,CACJksB,aACIltB,IAAAA,cAACgP,GAAAA,EAAY,CACTC,KAAMsU,GAAAA,GAAAA,4BACNrU,SAAS,sBAETlP,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,uCACHC,eAAe,oBAI3B2O,aACI/O,IAAAA,cAACgP,GAAAA,EAAY,CACTC,KAAK,qCACLC,SAAS,sBAETlP,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,uCACHC,eAAe,sBAOvCya,kBAAmB3Q,EAAAA,GAAsB,4BAA6B,yBACtEvD,QAASpB,KAAKnE,MAAMuF,UAElB+S,IACE,MAAMjP,EAAWwO,EAASS,GAC1B,MAAO,CAACjP,EAAUA,EAAS1E,OAAS,EAAE,GAItD,EACHZ,GA/GoBwnB,GAAiB,aAflC1T,SAAQ/X,IAAAA,MAAAA,WACRyF,QAAOzF,IAAAA,KAAAA,WAGP+rB,6BAA4B/rB,IAAAA,KAAAA,WAC5B6B,QAAO7B,IAAAA,MAAA,CAGH0rB,kBAAiB1rB,IAAAA,KAAAA,WAGjB2rB,cAAa3rB,IAAAA,KAAAA,aAAA+C,aCDrB,UAAexB,EAAAA,EAAAA,UAjBf,SAAyByB,EAAoBC,GAGzC,MAAO,CACH8oB,8BAHiCE,EAAAA,EAAAA,IAAoBjpB,EAAOC,EAAS5D,KAAKJ,GAAIyC,EAAAA,GAAAA,8BAKtF,IAEA,SAA4BkC,GACxB,MAAO,CACH/B,SAASgC,EAAAA,EAAAA,oBAAmB,CACxB6nB,kBAAiB,MACjBC,cAAaA,GAAAA,IACd/nB,GAEX,GAEA,CAA4D6nB,I,8BCR5D,MAAMS,GAAe9sB,IAAA,IAAE+sB,UAAWC,EAAS,WAAEC,GAA4BjtB,EAAbktB,E,kXAAIzS,CAAAza,EAAA0a,IAAA,OAC5Dhb,IAAAA,cAACytB,EAAAA,MAAKpZ,OAAA4I,OAAA,GACEuQ,EAAI,CACRlmB,OAASlG,GACLpB,IAAAA,cAACstB,EAASjZ,OAAA4I,OAAA,GACFsQ,EACAnsB,MAGd,EACJgsB,GAAAnsB,UAAA,CArBEosB,UAASnsB,IAAAA,IAAAA,WACTqsB,WAAUrsB,IAAAA,MAAA,CACNyF,QAAOzF,IAAAA,KAAAA,WACP+X,SAAQ/X,IAAAA,MAAAA,aAAA+C,WAKZypB,KAAIxsB,IAAAA,OAAAA,YA8DO,MAAMysB,WAA0B3tB,IAAAA,cAC3CiF,WAAAA,CAAY7D,GACR8D,MAAM9D,GACNmE,KAAKrB,MAAQ,CACTyC,SAAS,EAEjB,CAEAQ,iBAAAA,GACmC,IAAAymB,EAA3BroB,KAAKnE,MAAMmN,gBACXhJ,KAAKnE,MAAM2B,QAAQ4hB,gCAA8C,QAAfiJ,EAAAroB,KAAKnE,MAAMb,YAAI,IAAAqtB,OAAA,EAAfA,EAAiBztB,KAAM,IAAI0F,MACzE,IAAMN,KAAKE,SAAS,CAACkB,SAAS,KAG1C,CAEAW,MAAAA,GACI,MAAMimB,EAAa,CACf5mB,QAASpB,KAAKrB,MAAMyC,QACpBsS,SAAU1T,KAAKnE,MAAM6X,UAAY,GACjCwF,MAAOlZ,KAAKnE,MAAMqd,MAClBle,KAAMgF,KAAKnE,MAAMb,KACjBwK,KAAMxF,KAAKnE,MAAM2J,MAErB,OACI/K,IAAAA,cAAA,WACIA,IAAAA,cAAC6tB,EAAAA,OAAM,KACH7tB,IAAAA,cAACytB,EAAAA,MAAK,CACFK,OAAO,EACPJ,KAAI,GAAA7sB,OAAK0E,KAAKnE,MAAMwd,MAAMsI,IAAG,KAC7B5f,OAAQA,IAAOtH,IAAAA,cAAC+tB,EAAAA,SAAQ,CAACntB,GAAE,GAAAC,OAAK0E,KAAKnE,MAAMwd,MAAMsI,IAAG,kBAExDlnB,IAAAA,cAACotB,GAAY,CACTG,WAAYA,EACZG,KAAI,GAAA7sB,OAAK0E,KAAKnE,MAAMwd,MAAMsI,IAAG,cAC7BmG,UAAWV,KAEf3sB,IAAAA,cAACotB,GAAY,CACTG,WAAYA,EACZG,KAAI,GAAA7sB,OAAK0E,KAAKnE,MAAMwd,MAAMsI,IAAG,QAC7BmG,UAAWzE,KAEf5oB,IAAAA,cAACotB,GAAY,CACTG,WAAYA,EACZG,KAAI,GAAA7sB,OAAK0E,KAAKnE,MAAMwd,MAAMsI,IAAG,SAC7BmG,UAAWhC,KAEfrrB,IAAAA,cAACotB,GAAY,CACTG,WAAYA,EACZG,KAAI,GAAA7sB,OAAK0E,KAAKnE,MAAMwd,MAAMsI,IAAG,YAC7BmG,UAAW/D,MAK/B,E,gBAvDiBqE,G,GAAiB,Y,GAAA,CA3BlC1U,SAAQ/X,IAAAA,MAAAA,WAKR0d,MAAK1d,IAAAA,MAAA,CACDgmB,IAAGhmB,IAAAA,OAAAA,aAAA+C,WAGPlB,QAAO7B,IAAAA,MAAA,CAKHyjB,+BAA8BzjB,IAAAA,KAAAA,aAAA+C,WAMlCsK,eAAcrN,IAAAA,O,oZC9ClB,UAAeuB,EAAAA,EAAAA,UAnBf,SAAyByB,GACrB,MACMqK,EAA2C,UADlCY,EAAAA,EAAAA,IAAUjL,GACKoL,eAE9B,MAAO,CACH2J,SAAU5E,OAAOrT,OAAOgY,GAAY9U,IACpCua,OAAOuP,EAAAA,EAAAA,IAAS9pB,GAChBqK,iBAER,IAEA,SAA4BzJ,GACxB,MAAO,CACH/B,SAASgC,EAAAA,EAAAA,oBAAmB,CACxB4f,+BAA8BA,IAC/B7f,GAEX,GAEA,CAA4D6oB,I,uaCpB5D,MAAM7a,IAAWC,EAAAA,EAAAA,gBAAe,CAC5BX,OAAQ,CACJjS,GAAI,iCACJC,eAAgB,UAEpB8R,OAAQ,CACJ/R,GAAI,oBACJC,eAAgB,QAEpBuG,QAAS,CACLxG,GAAI,mCACJC,eAAgB,iBAsDT,MAAM6tB,WAA4BjuB,IAAAA,cAG7CiF,WAAAA,CAAY7D,GACR8D,MAAM9D,GAAO+D,GAAA,yBAaEqB,UAAiC,IAAA0nB,EAChD3oB,KAAK4oB,QAAUzd,EAEI,QAAnBwd,EAAI3oB,KAAKnE,MAAMsP,YAAI,IAAAwd,GAAfA,EAAiB/tB,KACjBuQ,EAAKvQ,GAAKoF,KAAKnE,MAAMsP,KAAKvQ,UAGxBoF,KAAK6oB,YAAY,IAC1BjpB,GAAA,mBAEYqB,UAGT,GAFAjB,KAAKE,SAAS,CAACwL,YAAa,MAEvB1L,KAAK4oB,QACN,OAGJ,MAAM/hB,QAAe7G,KAAKnE,MAAM2B,QAAQsrB,mBAAmB9oB,KAAK4oB,SAEhE,GAAI,SAAU/hB,GACVR,EAAAA,GAAAA,KAAanE,KAAK,IAAD5G,OAAK0E,KAAKnE,MAAMb,KAAKO,KAAI,yCAI9C,GAAI,UAAWsL,EAAQ,CACnB,MAAM,MAACnB,GAASmB,EAChB7G,KAAKE,SAAS,CAACwL,YAAahG,EAAMhJ,SACtC,KAtCAsD,KAAKrB,MAAQ,CACT+M,YAAa,GAErB,CAEA9J,iBAAAA,GACQ5B,KAAKnE,MAAM6M,wBACX1I,KAAKnE,MAAM2B,QAAQurB,gBAAgB/oB,KAAKnE,MAAMmtB,OAEtD,CAgCAjnB,MAAAA,GACI,OAAK/B,KAAKnE,MAAMsP,KAKZ1Q,IAAAA,cAACwQ,GAAuB,CACpBjQ,KAAMgF,KAAKnE,MAAMb,KACjB2R,OAAQY,GAASZ,OACjBE,OAAQU,GAASV,OACjBzL,QAASmM,GAASnM,QAClB8L,2BAA4BlN,KAAKnE,MAAMqR,2BACvCE,uBAAwBpN,KAAKnE,MAAMuR,uBACnCb,OAAQvM,KAAKipB,iBACbvd,YAAa1L,KAAKrB,MAAM+M,YACxBQ,YAAalM,KAAKnE,MAAMsP,OAbrB1Q,IAAAA,cAAC4H,EAAAA,EAAa,KAgB7B,EACHzC,GAlEoB8oB,GAAmB,aAnCpCM,OAAMrtB,IAAAA,OAAAA,WAKN+M,uBAAsB/M,IAAAA,KAAAA,WAKtBuR,2BAA0BvR,IAAAA,KAAAA,WAK1ByR,uBAAsBzR,IAAAA,KAAAA,WAEtB6B,QAAO7B,IAAAA,MAAA,CAKHmtB,mBAAkBntB,IAAAA,KAAAA,WAKlBotB,gBAAeptB,IAAAA,KAAAA,aAAA+C,aC9BvB,UAAexB,EAAAA,EAAAA,UAzBf,SAAyByB,EAAoBC,GACzC,MAAMmG,GAAS6E,EAAAA,EAAAA,IAAUjL,GACnB+J,EAA2D,SAAlC3D,EAAO8E,uBAChCqD,EAAmE,SAAtCnI,EAAO+I,2BACpCV,EAA2D,SAAlCrI,EAAOgJ,uBAChCib,EAAU,IAAI5K,gBAAgBxf,EAAS+K,SAAS9F,QAASwa,IAAI,OAAS,GAE5E,MAAO,CACH2K,SACA7d,KAAMxM,EAAME,SAASwU,aAAaC,cAAc0V,GAChDtgB,yBACAwE,6BACAE,yBAER,IAEA,SAA4B7N,GACxB,MAAO,CACH/B,SAASgC,EAAAA,EAAAA,oBAAmB,CACxBspB,mBAAkB,MAClBC,gBAAeA,GAAAA,IAChBxpB,GAEX,GAEA,CAA4DmpB,I,uaCzB5D,MAAMQ,GAAS,CAACtuB,GAAI,oBAAqBC,eAAgB,QACnDsuB,GAAS,CAACvuB,GAAI,iCAAkCC,eAAgB,UAChEuuB,GAAU,CAACxuB,GAAI,mCAAoCC,eAAgB,eAoB1D,MAAMwuB,WAAqB5uB,IAAAA,cAGtCiF,WAAAA,CAAY7D,GACR8D,MAAM9D,GAAO+D,GAAA,qBAeFqB,UACXjB,KAAKspB,OAASla,EAEVpP,KAAKnE,MAAM0oB,SAAS3pB,KACpBwU,EAAIxU,GAAKoF,KAAKnE,MAAM0oB,SAAS3pB,KAMR,KAHCoF,KAAKnE,MAAM0oB,SAAShV,cAAc/O,SAAW4O,EAAIG,cAAc/O,QACrFR,KAAKnE,MAAM0oB,SAAShV,cAAcga,OAAM,CAACC,EAAGlY,IAAMkY,IAAMpa,EAAIG,cAAc+B,MAG1EtR,KAAKqmB,2BAECrmB,KAAKypB,gBACf,IACH7pB,GAAA,2BAEoB,KACjBI,KAAKE,SAAS,CAACqmB,kBAAkB,GAAM,IAC1C3mB,GAAA,8BAEuB,KACpBI,KAAKE,SAAS,CAACqmB,kBAAkB,GAAO,IAC3C3mB,GAAA,uBAEgBqB,UACbjB,KAAKE,SAAS,CAACwL,YAAa,KAE5B,MAAM8C,QAAYxO,KAAKnE,MAAM2B,QAAQksB,aAAa1pB,KAAKspB,QAEvD,GAAI,SAAU9a,GAAOA,EAAIjO,MACrB8F,EAAAA,GAAAA,KAAanE,KAAK,IAAD5G,OAAK0E,KAAKnE,MAAMb,KAAKO,KAAI,mCAM9C,GAFAyE,KAAKE,SAAS,CAACqmB,kBAAkB,IAE7B,UAAW/X,EAAK,CAChB,MAAO9I,MAAOikB,GAAOnb,EACrBxO,KAAKE,SAAS,CAACwL,YAAaie,EAAIjtB,SACpC,KACHkD,GAAA,oBAEa,KACV,MAAM6mB,EACFhsB,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,wBACHC,eAAe,WAIjB6rB,EACFjsB,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,2BACHC,eAAe,+BAIjB8rB,EACFlsB,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,4BACHC,eAAe,yGAIvB,OACIJ,IAAAA,cAACme,GAAAA,EAAY,CACTje,MAAO+rB,EACPhqB,QAASiqB,EACT7qB,kBAAmB2qB,EACnBhqB,WAAW,+BACXoc,KAAM7Y,KAAKrB,MAAM4nB,iBACjBzpB,UAAWkD,KAAKypB,eAChB1Q,SAAU/Y,KAAK4mB,uBACjB,IAvFN5mB,KAAKrB,MAAQ,CACT4nB,kBAAkB,EAClB7a,YAAa,IAEjB1L,KAAKspB,OAAStpB,KAAKnE,MAAM0oB,QAC7B,CAEA3iB,iBAAAA,GACQ5B,KAAKnE,MAAMqN,4BACXlJ,KAAKnE,MAAM2B,QAAQosB,YAAY5pB,KAAKnE,MAAMguB,WAElD,CAgFA9nB,MAAAA,GACI,OAAK/B,KAAKnE,MAAM0oB,SAKZ9pB,IAAAA,cAAC0U,GAAgB,CACbnU,KAAMgF,KAAKnE,MAAMb,KACjB2R,OAAQuc,GACRrc,OAAQsc,GACR/nB,QAASgoB,GACT9Y,YAAatQ,KAAKsQ,cAClB/D,OAAQvM,KAAK0pB,aACbhe,YAAa1L,KAAKrB,MAAM+M,YACxByE,WAAYnQ,KAAKnE,MAAM0oB,WAZpB9pB,IAAAA,cAAC4H,EAAAA,EAAa,KAe7B,EACHzC,GAnHoBypB,GAAY,aAX7BQ,WAAUluB,IAAAA,OAAAA,WAEV6B,QAAO7B,IAAAA,MAAA,CARPiuB,YAAWjuB,IAAAA,KAAAA,WACX+tB,aAAY/tB,IAAAA,KAAAA,aAAA+C,WAQZwK,2BAA0BvN,IAAAA,KAAAA,aCU9B,UAAeuB,EAAAA,EAAAA,UArBf,SAAyByB,EAAoBC,GACzC,MAAMmG,GAAS6E,EAAAA,EAAAA,IAAUjL,GACnBkrB,EAAsB,IAAIzL,gBAAgBxf,EAAS+K,SAAS9F,QAASwa,IAAI,OAAS,GAClFnV,EAAmE,SAAtCnE,EAAOiF,2BAE1C,MAAO,CACH6f,aACAtF,SAAU5lB,EAAME,SAASwU,aAAaO,UAAUiW,GAChD3gB,6BAER,IAEA,SAA4B3J,GACxB,MAAO,CACH/B,SAASgC,EAAAA,EAAAA,oBAAmB,CACxBoqB,YAAW,MACXF,aAAYA,GAAAA,IACbnqB,GAEX,GAEA,CAA4D8pB,I,uaCzB5D,MAAMH,GAAS,CAACtuB,GAAI,oBAAqBC,eAAgB,QACnDsuB,GAAS,CAACvuB,GAAI,iCAAkCC,eAAgB,UAChEuuB,GAAU,CAACxuB,GAAI,mCAAoCC,eAAgB,eAoD1D,MAAMivB,WAA4BrvB,IAAAA,cAG7CiF,WAAAA,CAAY7D,GACR8D,MAAM9D,GAAO+D,GAAA,yBAaEqB,UACfjB,KAAK4oB,QAAUzd,EAEXnL,KAAKnE,MAAMsP,KAAMvQ,KACjBuQ,EAAKvQ,GAAKoF,KAAKnE,MAAMsP,KAAMvQ,IAG3BoF,KAAKnE,MAAMsP,KAAMyG,QACjBzG,EAAKyG,MAAQ5R,KAAKnE,MAAMsP,KAAMyG,OAGlC,MAAMmY,EAAoB/pB,KAAKnE,MAAMsP,KAAMkG,cAAc7Q,SAAW2K,EAAMkG,cAAc7Q,QACpFR,KAAKnE,MAAMsP,KAAMkG,cAAckY,OAAM,CAACC,EAAGlY,IAAMkY,IAAMre,EAAKkG,cAAcC,KAEtE0Y,EAAoBhqB,KAAKnE,MAAMsP,KAAMoE,cAAc/O,SAAW2K,EAAMoE,cAAc/O,QACpFR,KAAKnE,MAAMsP,KAAMoE,cAAcga,OAAM,CAACC,EAAGlY,IAAMkY,IAAMre,EAAKoE,cAAc+B,KAExEtR,KAAKnE,MAAMsP,KAAMqG,eAAiBrG,EAAKqG,cACtCuY,GAAqBC,QAGhBhqB,KAAK6oB,aAFX7oB,KAAKqmB,oBAGT,IACHzmB,GAAA,2BAEoB,KACjBI,KAAKE,SAAS,CAACqmB,kBAAkB,GAAM,IAC1C3mB,GAAA,8BAEuB,KACpBI,KAAKE,SAAS,CAACqmB,kBAAkB,GAAO,IAC3C3mB,GAAA,mBAEYqB,UACTjB,KAAKE,SAAS,CAACwL,YAAa,KAE5B,MAAM,KAACnL,EAAI,MAAEmF,SAAe1F,KAAKnE,MAAM2B,QAAQysB,mBAAmBjqB,KAAK4oB,SAEnEroB,GACA8F,EAAAA,GAAAA,KAAanE,KAAK,IAAD5G,OAAK0E,KAAKnE,MAAMb,KAAKO,KAAI,qCAI9CyE,KAAKE,SAAS,CAACqmB,kBAAkB,IAE7B7gB,GACA1F,KAAKE,SAAS,CAACwL,YAAahG,EAAMhJ,UACtC,IACHkD,GAAA,oBAEa,KACV,MAAM6mB,EACFhsB,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,iCACHC,eAAe,WAIjB6rB,EACFjsB,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,kCACHC,eAAe,0BAIjB8rB,EACFlsB,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,mCACHC,eAAe,oGAIvB,OACIJ,IAAAA,cAACme,GAAAA,EAAY,CACTje,MAAO+rB,EACPhqB,QAASiqB,EACT7qB,kBAAmB2qB,EACnBhqB,WAAW,+BACXoc,KAAM7Y,KAAKrB,MAAM4nB,iBACjBzpB,UAAWkD,KAAK6oB,WAChB9P,SAAU/Y,KAAK4mB,uBACjB,IA7FN5mB,KAAKrB,MAAQ,CACT4nB,kBAAkB,EAClB7a,YAAa,GAErB,CAEA9J,iBAAAA,GACQ5B,KAAKnE,MAAMiN,wBACX9I,KAAKnE,MAAM2B,QAAQ0sB,gBAAgBlqB,KAAKnE,MAAMmtB,OAEtD,CAuFAjnB,MAAAA,GACI,OAAK/B,KAAKnE,MAAMsP,KAKZ1Q,IAAAA,cAAC0W,GAAuB,CACpBnW,KAAMgF,KAAKnE,MAAMb,KACjB2R,OAAQuc,GACRrc,OAAQsc,GACR/nB,QAASgoB,GACT9Y,YAAatQ,KAAKsQ,cAClB/D,OAAQvM,KAAKmqB,iBACbze,YAAa1L,KAAKrB,MAAM+M,YACxBQ,YAAalM,KAAKnE,MAAMsP,KACxB+B,2BAA4BlN,KAAKnE,MAAMqR,2BACvCE,uBAAwBpN,KAAKnE,MAAMuR,yBAdhC3S,IAAAA,cAAC4H,EAAAA,EAAa,KAiB7B,EACHzC,GA1HoBkqB,GAAmB,aAnCpCd,OAAMrtB,IAAAA,OAAAA,WACN6B,QAAO7B,IAAAA,MAAA,CAKHsuB,mBAAkBtuB,IAAAA,KAAAA,WAKlBuuB,gBAAevuB,IAAAA,KAAAA,aAAA+C,WAMnBoK,uBAAsBnN,IAAAA,KAKtBuR,2BAA0BvR,IAAAA,KAAAA,WAK1ByR,uBAAsBzR,IAAAA,KAAAA,aClB1B,UAAeuB,EAAAA,EAAAA,UAzBf,SAAyByB,EAAoBC,GACzC,MAAMmG,GAAS6E,EAAAA,EAAAA,IAAUjL,GACnBqqB,EAAU,IAAI5K,gBAAgBxf,EAAS+K,SAAS9F,QAASwa,IAAI,MAC7DvV,EAA2D,SAAlC/D,EAAO+E,uBAChCoD,EAAmE,SAAtCnI,EAAO+I,2BACpCV,EAA2D,SAAlCrI,EAAOgJ,uBAEtC,MAAO,CACHib,OAAQA,EACR7d,KAAMxM,EAAME,SAASwU,aAAaG,cAAcwV,GAChDlgB,yBACAoE,6BACAE,yBAER,IAEA,SAA4B7N,GACxB,MAAO,CACH/B,SAASgC,EAAAA,EAAAA,oBAAmB,CACxByqB,mBAAkB,MAClBC,gBAAeA,GAAAA,IAChB3qB,GAEX,GAEA,CAA4DuqB,I,uaC5BrD,SAAS9S,GAAcoT,EAAkC7f,EAAkB4J,GAC9E,OAAKA,IAI+D,IAAhEiW,EAAgBvlB,aAAac,cAAclE,QAAQ0S,KACY,IAA/DiW,EAAgBjiB,YAAYxC,cAAclE,QAAQ0S,OAIlDiW,EAAgB/e,aACZd,IAA2D,IAAhDA,EAAQhP,KAAKoK,cAAclE,QAAQ0S,GAM1D,CA0Ce,MAAMkW,WAAiC5vB,IAAAA,cAA2BiF,WAAAA,GAAA,SAAA8I,WAAA5I,GAAA,qBAC9D,KACXI,KAAKnE,MAAMK,SAAS8D,KAAKnE,MAAMuuB,gBAAgB,GAClD,CAEDroB,MAAAA,GACI,MAAMqoB,EAAkBpqB,KAAKnE,MAAMuuB,gBAC7B7f,EAAUvK,KAAKnE,MAAM0O,QAG3B,IAAKyM,GAAcoT,EAAiB7f,EAFrBvK,KAAKnE,MAAMsY,OAASnU,KAAKnE,MAAMsY,OAAOxO,cAAgB,IAGjE,OAAO,KAGX,IAAIxH,EAEAA,EADAisB,EAAgBvlB,aACFulB,EAAgBvlB,aACvB0F,EACOA,EAAQ1F,aAGlBpK,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,8CACHC,eAAe,sBAK3B,IAAIsN,EAAc,KACdiiB,EAAgBjiB,cAChBA,EACI1N,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,QAAMC,UAAU,6BACX0vB,EAAgBjiB,eAMjC,IAAI3K,EAAU,KACVwC,KAAKnE,MAAMorB,YACXzpB,EACI/C,IAAAA,cAAA,OAAKC,UAAU,gBACXD,IAAAA,cAACW,EAAAA,KAAI,CAACC,GAAE,IAAAC,OAAM0E,KAAKnE,MAAMb,KAAKO,KAAI,4CAAAD,OAA2C8uB,EAAgBxvB,KACzFH,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,8BACHC,eAAe,UAGtB,MACDJ,IAAAA,cAACmB,EAAqB,CAClBI,aACIvB,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,6CACHC,eAAe,mIAGvBqB,SAAU8D,KAAK9B,iBAM/B,MAAMosB,GAAoB9P,EAAAA,GAAAA,MAAe,UAAY4P,EAAgBxvB,GAErE,OACIH,IAAAA,cAAA,OAAKC,UAAU,wBACXD,IAAAA,cAAA,OAAKC,UAAU,gBACXD,IAAAA,cAAA,OAAKC,UAAU,4EACXD,IAAAA,cAAA,UAAQC,UAAU,sBACbyD,GAEJX,GAEJ2K,EACD1N,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,QAAMC,UAAU,qCACZD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,6BACHC,eAAe,aACfY,OAAQ,CACJkmB,IAAK2I,KAGb7vB,IAAAA,cAAA,YACIA,IAAAA,cAACipB,GAAQ,CACL7iB,MAAOypB,OAKvB7vB,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,QAAMC,UAAU,0BACZD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,kCACHC,eAAe,iDACfY,OAAQ,CACJuD,QAASgB,KAAKnE,MAAMmD,QAAQG,SAC5BgoB,SAAUiD,EAAgBje,gBAQ1D,E,uaACHvM,GA3GoByqB,GAAwB,aA9BzCnuB,SAAQP,IAAAA,KAAAA,WAKRwY,OAAMxY,IAAAA,OAKNqD,QAAOrD,IAAAA,MAAA,CACHwD,SAAQxD,IAAAA,OAAAA,aAAA+C,WAMZuoB,UAAStrB,IAAAA,KAAAA,aClBE,MAAM4uB,WAAkC9vB,IAAAA,cACnDiF,WAAAA,CAAY7D,GACR8D,MAAM9D,GAAO+D,GAAA,8BAYQwqB,IACrBpqB,KAAKnE,MAAM2B,QAAQgtB,mBAAmBJ,EAAgBxvB,GAAG,IAC5DgF,GAAA,iBAEUqB,UACHjB,KAAKnE,MAAM6M,wBACX1I,KAAKE,SAAS,CAACkB,SAAS,IACpBH,gBACUjB,KAAKnE,MAAM2B,QAAQmhB,oCACrB3e,KAAKnE,MAAMb,KAAKJ,GAChB6vB,EA/CN,KAiDM,GAEJzqB,KAAKE,SAAS,CAACD,KAAMwqB,EAAYrpB,SAAS,GAAO,GAG7D,IACHxB,GAAA,iBAEU,KACPI,KAAK0qB,SAAS1qB,KAAKrB,MAAMsB,KAAO,EAAE,IACrCL,GAAA,qBAEc,KACXI,KAAK0qB,SAAS1qB,KAAKrB,MAAMsB,KAAO,EAAE,IACrCL,GAAA,+BAEwB,CAACuV,EAAoBC,KAC1C,IAAIuV,EAAexV,EAAEtQ,aACrB,IAAK8lB,EAAc,CACf,MAAMC,EAAW5qB,KAAKnE,MAAMsO,SAASgL,EAAE9J,YAEnCsf,EADAC,EACeA,EAAS/lB,aAETF,EAAAA,GAAsB,8CAA+C,oBAE5F,CAEA,MAAMkmB,EAAezV,EAAEvQ,aACvB,OAAO8lB,EAAatV,cAAcwV,EAAa,IAClDjrB,GAAA,yBAEmBuU,GAAmBnU,KAAKnE,MAAMyX,cAC9CvI,KAAK/K,KAAK8qB,wBACV3W,QAAQiW,GAAqCpT,GAAcoT,EAAiBpqB,KAAKnE,MAAMsO,SAASigB,EAAgB/e,YAAa8I,KAC7H7S,KAAK8oB,IACD,MAAMnD,EAAYjnB,KAAKnE,MAAMkvB,yBAA2B/qB,KAAKnE,MAAM2J,KAAK5K,KAAOwvB,EAAgB9d,QACzF/B,EAAUvK,KAAKnE,MAAMsO,SAASigB,EAAgB/e,YACpD,OACI5Q,IAAAA,cAAC4vB,GAAwB,CACrBloB,IAAKioB,EAAgBxvB,GACrBwvB,gBAAiBA,EACjBluB,SAAU8D,KAAKgrB,sBACfhsB,QAASgB,KAAKnE,MAAMqd,MAAMkR,EAAgB9d,UAAY,CAAC,EACvD2a,UAAWA,EACXjsB,KAAMgF,KAAKnE,MAAMb,KACjBuP,QAASA,GACX,MApEVvK,KAAKrB,MAAQ,CACTsB,KAAM,EACNmB,SAAS,EAEjB,CAEAQ,iBAAAA,GACI5B,KAAK0qB,SAAS,EAClB,CAgEA3oB,MAAAA,GACI,OACItH,IAAAA,cAAC0f,GAAa,CACVxN,OACIlS,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,qCACHC,eAAe,gCAGvBqb,QACIzb,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,kCACHC,eAAe,yBAGvBob,QAAS,IAAMjW,KAAKnE,MAAMb,KAAKO,KAAO,sCACtC4a,YAAY,qBACZH,UACIvb,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,oCACHC,eAAe,+BAGvBib,gBACIrb,IAAAA,cAAC4f,GAAAA,EAAwB,CACrBzf,GAAG,0CACHC,eAAe,4CAGvBkc,SACItc,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,mCACHC,eAAe,oKACfY,OAAQ,CACJksB,aACIltB,IAAAA,cAACgP,GAAAA,EAAY,CACTE,SAAS,8BACTD,KAAMsU,GAAAA,GAAAA,yBAENvjB,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,gDACHC,eAAe,oBAI3B2O,aACI/O,IAAAA,cAACgP,GAAAA,EAAY,CACTC,KAAK,qCACLC,SAAS,+BAETlP,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,gDACHC,eAAe,sBAOvCya,kBAAmB3Q,EAAAA,GAAsB,qCAAsC,4BAC/EvD,QAASpB,KAAKrB,MAAMyC,QACpB6B,SAAUjD,KAAKiD,SACfI,aAAcrD,KAAKqD,aACnBpD,KAAMD,KAAKrB,MAAMsB,KACjB0W,SAnKE,IAoKFJ,MAAOvW,KAAKnE,MAAMovB,0BAEhB9W,IACE,MAAMjP,EAAWlF,KAAKkrB,iBAAiB/W,GACvC,MAAO,CAACjP,EAAUA,EAAS1E,OAAS,EAAE,GAItD,EACHZ,GAtJoB2qB,GAAyB,aAlB1CjX,cAAa3X,IAAAA,MAAAA,WACbsvB,wBAAuBtvB,IAAAA,OAAAA,WAGvBovB,wBAAuBpvB,IAAAA,KAAAA,WACvB+M,uBAAsB/M,IAAAA,KAAAA,WACtB6B,QAAO7B,IAAAA,MAAA,CACH6uB,mBAAkB7uB,IAAAA,KAAAA,WAClBgjB,oCAAmChjB,IAAAA,KAAAA,aAAA+C,aCc3C,UAAexB,EAAAA,EAAAA,UA3Bf,SAAyByB,GACrB,MAAMiK,GAASoL,EAAAA,EAAAA,IAAiBrV,GAC1B2U,EAAgBS,GAAyBpV,GACzCssB,E9BTH,SAAoCtsB,GACvC,OAAOA,EAAME,SAASwU,aAAa4X,uBACvC,C8BOoCE,CAA2BxsB,GACrDoG,GAAS6E,EAAAA,EAAAA,IAAUjL,GACnBosB,GAA0BnD,EAAAA,EAAAA,IAAoBjpB,EAAOiK,EAAQvL,EAAAA,GAAAA,iCAC7DqL,EAA2D,SAAlC3D,EAAO8E,uBAEtC,MAAO,CACHyJ,gBACA2X,0BACA9gB,UAAUihB,EAAAA,GAAAA,IAAezsB,GACzBua,OAAOuP,EAAAA,EAAAA,IAAS9pB,GAChBosB,0BACAriB,yBAER,IAEA,SAA4BnJ,GACxB,MAAO,CACH/B,SAASgC,EAAAA,EAAAA,oBAAmB,CACxBmf,oCAAmC,GACnC6L,mBAAkBA,GAAAA,IACnBjrB,GAEX,GAEA,CAA4DgrB,I,gbC/B5D,MAAMc,GAAc,kBAEb,SAASrU,GAAcuN,EAAoBpQ,GAC9C,OAAKA,GAIEoQ,EAAShpB,KAAKoK,cAAcwT,SAAShF,EAChD,CA0Ce,MAAMmX,WAA0B7wB,IAAAA,cAC3CiF,WAAAA,CAAY7D,GACR8D,MAAM9D,GAAO+D,GAAA,+BAOSC,IAClBA,GAAKA,EAAEC,gBACPD,EAAEC,iBAENE,KAAKE,SAAS,CAACglB,aAAcllB,KAAKnE,MAAM0oB,SAASO,eAAe,IACnEllB,GAAA,+BAEyBC,IACtBA,EAAEC,iBACFE,KAAKE,SAAS,CAACglB,aAAcmG,IAAa,IAC7CzrB,GAAA,yBAEmBC,IAChBA,EAAEC,iBACFE,KAAKnE,MAAM0vB,mBAAmBvrB,KAAKnE,MAAM0oB,SAAS3pB,IAAI0F,MAClDvF,IAAa,IAAZ,MAAC2K,GAAM3K,EACA2K,EACA1F,KAAKE,SAAS,CAACwF,MAAOA,EAAMhJ,WAE5BsD,KAAKE,SAAS,CAACwF,MAAO,OACtB1F,KAAKwrB,yBACT,GAEP,IACJ5rB,GAAA,qBAEc,KACXI,KAAKnE,MAAMK,SAAS8D,KAAKnE,MAAM0oB,SAAS,IAhCxCvkB,KAAKrB,MAAQ,CACTumB,aAAcmG,GAEtB,CAgCAtpB,MAAAA,GACI,MAAM,SAACwiB,EAAQ,YAAEkH,GAAezrB,KAAKnE,MACrC,IAAI6J,EAcAnK,EAYA4M,EAhBJ,GARInI,KAAKrB,MAAM+G,QACXA,EACIjL,IAAAA,cAACkN,EAAAA,EAAS,CACNjC,MAAO1F,KAAKrB,MAAM+G,UAKzBsR,GAAcuN,EAAUvkB,KAAKnE,MAAMsY,QACpC,OAAO,KAKP5Y,EADAgpB,EAAShpB,KACFgpB,EAAShpB,KAGZd,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,2CACHC,eAAe,kCAMvB0pB,EAASpc,cACTA,EACI1N,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,QAAMC,UAAU,6BACX6pB,EAASpc,eAM1B,MAAMujB,EACFjxB,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,QAAMC,UAAU,qCACZD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,uCACHC,eAAe,wBACfY,OAAQ,CACJiwB,KAAMnH,EAAShV,cAAcC,KAAK,WAOtD,IAAImc,EAOAC,EACA1G,EANAyG,EADApH,EAAS9U,WACG9K,EAAAA,GAAsB,mCAAoC,OAE1DA,EAAAA,GAAsB,kCAAmC,MAKrE3E,KAAKrB,MAAMumB,eAAiBmG,IAC5BO,EACInxB,IAAAA,cAAA,UACIG,GAAG,mBACHF,UAAU,0BACV0B,QAAS4D,KAAKwrB,wBAEd/wB,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,oCACHC,eAAe,iBAI3BqqB,EACIzqB,IAAAA,cAAA,QAAMC,UAAU,uBACZD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,uCACHC,eAAe,oCACfY,OAAQ,CACJypB,aAAcllB,KAAKrB,MAAMumB,mBAMzC0G,EACInxB,IAAAA,cAAA,UACIG,GAAG,mBACHF,UAAU,0BACV0B,QAAS4D,KAAK6rB,wBAEdpxB,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,oCACHC,eAAe,iBAI3BqqB,EACIzqB,IAAAA,cAAA,QAAMC,UAAU,uBACZD,IAAAA,cAAC4f,GAAAA,EAAwB,CACrBzf,GAAG,uCACHC,eAAe,oCACfY,OAAQ,CACJypB,aAAcllB,KAAKrB,MAAMumB,gBAGjCzqB,IAAAA,cAACipB,GAAQ,CACLC,QACIlpB,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,kCACHC,eAAe,uBAGvBgG,MAAOb,KAAKrB,MAAMumB,iBAMlC,MAAM4G,EACFrxB,IAAAA,cAAA,UACIG,GAAG,yBACHF,UAAU,0BACV0B,QAAS4D,KAAK+rB,kBAEdtxB,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,qCACHC,eAAe,uBAK3B,IAAI0V,EAYA/S,EACqB,IAAA6qB,EAZrB9D,EAAS9Y,WACT8E,EACI9V,IAAAA,cAAA,OAAKC,UAAU,4CACXD,IAAAA,cAAA,OACI4N,IAAK,qBACLC,IAAKic,EAAS9Y,aAOzBzL,KAAKnE,MAAM+b,UACZpa,EACI/C,IAAAA,cAAA,OAAKC,UAAU,gBACVkxB,EACA,MACAE,EACA,MACDrxB,IAAAA,cAACW,EAAAA,KAAI,CAACC,GAAE,IAAAC,OAAqB,QAArB+sB,EAAMroB,KAAKnE,MAAMb,YAAI,IAAAqtB,OAAA,EAAfA,EAAiB9sB,KAAI,sCAAAD,OAAqCipB,EAAS3pB,KAC7EH,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,8BACHC,eAAe,UAGtB,MACDJ,IAAAA,cAACmB,EAAqB,CAClBI,aACIvB,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,sCACHC,eAAe,wIAGvBqB,SAAU8D,KAAK9B,iBAM/B,IAAI8tB,EACAvxB,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,QAAMC,UAAU,0BACZD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,iCACHC,eAAe,gCA2D/B,OAtDKmF,KAAKnE,MAAM+b,UACZoU,EACIvxB,IAAAA,cAAAA,IAAAA,SAAA,KACIA,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,QAAMC,UAAU,qCACZD,IAAAA,cAAC4f,GAAAA,EAAwB,CACrBzf,GAAG,kCACHC,eAAe,8BACfY,OAAQ,CACJkwB,iBAKhBlxB,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,QAAMC,UAAU,uBACZD,IAAAA,cAAC4f,GAAAA,EAAwB,CACrBzf,GAAG,mCACHC,eAAe,4BACfY,OAAQ,CACJupB,SAAUT,EAAS3pB,MAG3BH,IAAAA,cAACipB,GAAQ,CACLC,QACIlpB,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,8BACHC,eAAe,mBAGvBgG,MAAO0jB,EAAS3pB,OAI5BH,IAAAA,cAAA,OAAKC,UAAU,qBACVwqB,GAEJwG,EACDjxB,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,QAAMC,UAAU,0BACZD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,kCACHC,eAAe,iDACfY,OAAQ,CACJuD,QAASysB,EACTtE,SAAU5C,EAASpY,iBAU3C1R,IAAAA,cAAA,OAAKC,UAAU,wBACV6V,EACD9V,IAAAA,cAAA,OAAKC,UAAU,gBACXD,IAAAA,cAAA,OAAKC,UAAU,4EACXD,IAAAA,cAAA,UAAQC,UAAU,sBACba,GAEJiC,GAEJkI,EACAyC,EACA6jB,GAIjB,EACHpsB,GAtSoB0rB,GAAiB,aAzBlC1T,QAAOjc,IAAAA,KAAAA,WAEP8vB,YAAW9vB,IAAAA,OAAAA,WAKX4vB,mBAAkB5vB,IAAAA,KAAAA,WAKlBO,SAAQP,IAAAA,KAAAA,WAKRwY,OAAMxY,IAAAA,UAAA,CAAAA,IAAAA,OAAAA,IAAAA,MAAA,YCvCV,UAAeuB,EAAAA,EAAAA,UAPf,SAAyByB,EAAoBC,GACzC,MAAM2lB,EAAW3lB,EAAS2lB,UAAY,CAAC,EACvC,MAAO,CACHkH,aAAavsB,EAAAA,EAAAA,IAAqBP,GAAOM,EAAAA,EAAAA,IAAQN,EAAO4lB,EAASlmB,aAEzE,GAEA,CAAwCitB,I,uaCoDzB,MAAMW,WAA2BxxB,IAAAA,cAC5CiF,WAAAA,CAAY7D,GACR8D,MAAM9D,GAAO+D,GAAA,uBAcCwP,IACVA,GAAOA,EAAIxU,IACXoF,KAAKnE,MAAM2B,QAAQ0uB,eAAe9c,EAAIxU,GAC1C,IACHgF,GAAA,kBAgBYuU,GAAoBrF,OAAOrT,OAAOuE,KAAKnE,MAAM+X,WACtDO,QAAQ/E,GAAQ4H,GAAc5H,EAAK+E,KACnCpJ,KAAK/K,KAAKmsB,iBACV7qB,KAAK8N,GAEG3U,IAAAA,cAAC6wB,GAAiB,CACdnpB,IAAKiN,EAAIxU,GACT2pB,SAAUnV,EACVmc,mBAAoBvrB,KAAKnE,MAAM2B,QAAQ4uB,oBACvClwB,SAAU8D,KAAKksB,eACflxB,KAAMgF,KAAKnE,MAAMb,KACjBywB,YAAY,GACZ7T,QAAS5X,KAAKnE,MAAM0Y,gBAAgB4E,SAAS/J,EAAIxU,UA7C7DoF,KAAKrB,MAAQ,CACTyC,SAAS,EAEjB,CAEAQ,iBAAAA,GACQ5B,KAAKnE,MAAMqN,4BACXlJ,KAAKnE,MAAM2B,QAAQ6hB,2BAA2B/e,MAC1C,IAAMN,KAAKE,SAAS,CAACkB,SAAS,KAG1C,CAQA+qB,eAAAA,CAAgBhX,EAAaC,GACzB,IAAIoS,EAAQrS,EAAE5Z,KAAK8wB,WACd7E,IACDA,GAAQzf,EAAAA,EAAAA,IAAgB,2CAA4C,kCAGxE,IAAI0f,EAAQrS,EAAE7Z,KAAK8wB,WAKnB,OAJK5E,IACDA,GAAQ1f,EAAAA,EAAAA,IAAgB,2CAA4C,kCAGjEyf,EAAMnS,cAAcoS,EAC/B,CAmBA1lB,MAAAA,GACI,IAAK/B,KAAKnE,MAAMb,KACZ,OAAO,KAGX,IAAIa,EASJ,OAV4BmE,KAAKnE,MAAMqN,4BAA8BlJ,KAAKnE,MAAMywB,iBAG5EzwB,EAAQ,CACJoa,QAAS,IAAMjW,KAAKnE,MAAMb,KAAKO,KAAO,gCACtC2a,SAASnO,EAAAA,EAAAA,IAAgB,2BAA4B,6BACrDoO,YAAa,gBAKjB1b,IAAAA,cAAC0f,GAAarL,OAAA4I,OAAA,CACV/K,OACIlS,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,+BACHC,eAAe,2BAGvBkc,SACItc,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,4BACHC,eAAe,2JACfY,OAAQ,CACJ8wB,kBACI9xB,IAAAA,cAACgP,GAAAA,EAAY,CACTC,KAAMsU,GAAAA,GAAAA,aACNrU,SAAS,wBAETlP,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,8CACHC,eAAe,4BAI3B2O,aACI/O,IAAAA,cAACgP,GAAAA,EAAY,CACTC,KAAK,sCACLC,SAAS,wBAETlP,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,yCACHC,eAAe,sBAOvCmb,UACIvb,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,6BACHC,eAAe,oCAGvBib,gBACIrb,IAAAA,cAAC4f,GAAAA,EAAwB,CACrBzf,GAAG,mCACHC,eAAe,iDAGvBya,mBAAmBvN,EAAAA,EAAAA,IAAgB,8BAA+B,iCAClE3G,QAASpB,KAAKrB,MAAMyC,SAChBvF,IAEFsY,IACE,MAAMjP,EAAWlF,KAAK4T,UAAUO,GAChC,MAAO,CAACjP,EAAUA,EAAS1E,OAAS,EAAE,GAItD,EACHZ,GAhIoBqsB,GAAkB,aAnCnC1X,gBAAe5Y,IAAAA,QAAAA,IAAAA,QAAA+C,WAKf4tB,eAAc3wB,IAAAA,KAAAA,WAKduN,2BAA0BvN,IAAAA,KAAAA,WAE1B6B,QAAO7B,IAAAA,MAAA,CAKH0jB,yBAAwB1jB,IAAAA,KAAAA,WAKxBywB,oBAAmBzwB,IAAAA,KAAAA,WAKnBuwB,eAAcvwB,IAAAA,KAAAA,aAAA+C,aCtBtB,UAAexB,EAAAA,EAAAA,UAvBf,SAAyByB,GACrB,MACMuK,EAAmE,UAD1DU,EAAAA,EAAAA,IAAUjL,GACiBqL,2BAE1C,MAAO,CACHsiB,gBAAgB9N,EAAAA,EAAAA,IAAsB7f,EAAO,CAAC8f,WAAYphB,EAAAA,GAAAA,eAC1DuW,UAAWD,GAAahV,GACxB4V,gBAAiBF,GAAmB1V,GACpCuK,6BACAlO,MAAMsE,EAAAA,EAAAA,IAAeX,GAE7B,IAEA,SAA4BY,GACxB,MAAO,CACH/B,SAASgC,EAAAA,EAAAA,oBAAmB,CACxB6f,yBAAwB,GACxB+M,oBAAmB,KACnBF,eAAcA,GAAAA,IACf3sB,GAEX,GAEA,CAA4D0sB,I,uaC3BrD,SAASjV,GAAcwV,EAAkCjiB,EAAkB4J,GAC9E,IAAKA,EACD,OAAO,EAGX,MACItP,aAAc1G,EAAW,YACzBgK,EACAkJ,cAAeD,GACfob,EAEJ,GACKruB,IAA8D,IAA/CA,EAAYwH,cAAclE,QAAQ0S,IACjDhM,IAA8D,IAA/CA,EAAYxC,cAAclE,QAAQ0S,GAElD,OAAO,EAGX,GAAI/C,EACA,IAAK,MAAMO,KAAeP,EACtB,IAAmD,IAA/CO,EAAYhM,cAAclE,QAAQ0S,GAClC,OAAO,EAKnB,SAAI5J,IAAWA,EAAQhP,OACiC,IAAhDgP,EAAQhP,KAAKoK,cAAclE,QAAQ0S,GAM/C,CAae,MAAMsY,WAAiChyB,IAAAA,cAA2BiF,WAAAA,GAAA,SAAA8I,WAAA5I,GAAA,yBACzDC,IAChBA,EAAEC,iBAEFE,KAAKnE,MAAMmrB,aAAahnB,KAAKnE,MAAM2wB,gBAAgB,IACtD5sB,GAAA,qBAEc,KACXI,KAAKnE,MAAMK,SAAS8D,KAAKnE,MAAM2wB,gBAAgB,GAClD,CAEDE,eAAAA,CAAgBF,EAAkCjiB,GAC9C,OAAIiiB,EAAgB3nB,aACT2nB,EAAgB3nB,aAChB0F,EACAA,EAAQ1F,aAGfpK,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,8CACHC,eAAe,qBAG3B,CAEAkH,MAAAA,GACI,MAAMyqB,EAAkBxsB,KAAKnE,MAAM2wB,gBAC7BjiB,EAAUvK,KAAKnE,MAAM0O,QACrB4J,EAASnU,KAAKnE,MAAMsY,OAASnU,KAAKnE,MAAMsY,OAAOxO,cAAgB,GAIrE,GAAI6mB,IAAoBxV,GAAcwV,EAAiBjiB,EAAS4J,GAC5D,OAAO,KAGX,MAAMhW,EAAc6B,KAAK0sB,gBAAgBF,EAAiBjiB,GAE1D,IAAIpC,EAAc,KACdqkB,EAAgBrkB,cAChBA,EACI1N,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,QAAMC,UAAU,6BACX8xB,EAAgBrkB,eAMjC,IAAIiJ,EAAe,KACfob,EAAgBnb,eAAiBmb,EAAgBnb,cAAc7Q,OAAS,IACxE4Q,EACI3W,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,QAAMC,UAAU,+BACZD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,sCACHC,eAAe,gCACfY,OAAQ,CACJ2V,aAAcob,EAAgBnb,cAAc7B,KAAK,YAQzE,MAAMkc,EACFjxB,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,QAAMC,UAAU,qCACZD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,uCACHC,eAAe,wBACfY,OAAQ,CACJiwB,KAAMc,EAAgBjd,cAAcC,KAAK,WAO7D,IAAIiC,EAnDqB,IAoDrB+a,EAAgB9a,aAChBD,EACIhX,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,uDACHC,eAAe,8CAvDI,IA0DpB2xB,EAAgB9a,eACvBD,EACIhX,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,yDACHC,eAAe,2CAK3B,IAAI2C,EAAU,KAkCd,OAjCIwC,KAAKnE,MAAMorB,YACXzpB,EACI/C,IAAAA,cAAA,OAAKC,UAAU,gBACXD,IAAAA,cAAA,UACIC,UAAU,0BACV0B,QAAS4D,KAAKknB,kBAEdzsB,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,oCACHC,eAAe,sBAGtB,MACDJ,IAAAA,cAACW,EAAAA,KAAI,CAACC,GAAE,IAAAC,OAAM0E,KAAKnE,MAAMb,KAAKO,KAAI,4CAAAD,OAA2CkxB,EAAgB5xB,KACzFH,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,8BACHC,eAAe,UAGtB,MACDJ,IAAAA,cAACmB,EAAqB,CAClBI,aACIvB,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,6CACHC,eAAe,mIAGvBqB,SAAU8D,KAAK9B,iBAO3BzD,IAAAA,cAAA,OAAKC,UAAU,wBACXD,IAAAA,cAAA,OAAKC,UAAU,gBACXD,IAAAA,cAAA,OAAKC,UAAU,4EACXD,IAAAA,cAAA,UAAQC,UAAU,sBACbyD,GAEJX,GAEJ2K,EACD1N,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,QAAMC,UAAU,8BACZD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,sCACHC,eAAe,8BACfY,OAAQ,CACJ8V,YAAaib,EAAgBhb,cAAgB,yCAK5DJ,EACD3W,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,QAAMC,UAAU,8BACZD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,qCACHC,eAAe,8BACfY,OAAQ,CACJgW,mBAKhBhX,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,QAAMC,UAAU,uBACZD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,+BACHC,eAAe,iBACfY,OAAQ,CACJmW,MAAO4a,EAAgB5a,SAG/BnX,IAAAA,cAACipB,GAAQ,CACL7iB,MAAO2rB,EAAgB5a,UAInCnX,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,QAAMC,UAAU,0BACZD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,kCACHC,eAAe,iDACfY,OAAQ,CACJuD,QAASgB,KAAKnE,MAAMmD,QAAQG,SAC5BgoB,SAAUqF,EAAgBrgB,eAKzCuf,GAIjB,E,uaACH9rB,GAnMoB6sB,GAAwB,aATzCzF,aAAYrrB,IAAAA,KAAAA,WACZO,SAAQP,IAAAA,KAAAA,WAIRsrB,UAAStrB,IAAAA,KAAAA,WACTwY,OAAMxY,IAAAA,SC4BK,MAAMgxB,WAAkClyB,IAAAA,cACnDiF,WAAAA,CAAY7D,GACR8D,MAAM9D,GAAO+D,GAAA,kCAmBY4sB,IACzBxsB,KAAKnE,MAAM2B,QAAQovB,uBAAuBJ,EAAgB5xB,GAAG,IAChEgF,GAAA,2BAEqB4sB,IAClBxsB,KAAKnE,MAAM2B,QAAQqvB,mBAAmBL,EAAgB5xB,GAAG,IAC5DgF,GAAA,+BAEwB,CAACuV,EAAoBC,KAC1C,IAAIuV,EAAexV,EAAEtQ,aACrB,IAAK8lB,EAAc,CACf,MAAMC,EAAW5qB,KAAKnE,MAAMsO,SAASgL,EAAE9J,YAEnCsf,EADAC,EACeA,EAAS/lB,cAETkD,EAAAA,EAAAA,IAAgB,8CAA+C,oBAEtF,CAEA,IAAI8iB,EAAezV,EAAEvQ,aACrB,IAAKgmB,EAAc,CACf,MAAMiC,EAAW9sB,KAAKnE,MAAMsO,SAASiL,EAAE/J,YAEnCwf,EADAiC,EACeA,EAASjoB,cAETkD,EAAAA,EAAAA,IAAgB,8CAA+C,oBAEtF,CACA,OAAO4iB,EAAatV,cAAcwV,EAAa,IAClDjrB,GAAA,yBAEmBuU,GAAmBnU,KAAKnE,MAAMkxB,iBAC9ChiB,KAAK/K,KAAKgtB,wBACV7Y,QAAQqY,GAAoBxV,GAAcwV,EAAiBxsB,KAAKnE,MAAMsO,SAASqiB,EAAgBnhB,YAAa8I,KAC5G7S,KAAKkrB,IACD,MAAMvF,EAAYjnB,KAAKnE,MAAMkvB,yBAA2B/qB,KAAKnE,MAAM2J,KAAK5K,KAAO4xB,EAAgBnuB,WACzFkM,EAAUvK,KAAKnE,MAAMsO,SAASqiB,EAAgBnhB,YACpD,OACI5Q,IAAAA,cAACgyB,GAAwB,CACrBtqB,IAAKqqB,EAAgB5xB,GACrB4xB,gBAAiBA,EACjBxF,aAAchnB,KAAKitB,0BACnB/wB,SAAU8D,KAAK6sB,mBACf7tB,QAASgB,KAAKnE,MAAMqd,MAAMsT,EAAgBnuB,aAAe,CAAC,EAC1D4oB,UAAWA,EACXjsB,KAAMgF,KAAKnE,MAAMb,KACjBuP,QAASA,GACX,MAhEVvK,KAAKrB,MAAQ,CACTyC,SAAS,EAEjB,CAEAQ,iBAAAA,GACQ5B,KAAKnE,MAAMiN,wBACX9I,KAAKnE,MAAM2B,QAAQ2hB,oCACfnf,KAAKnE,MAAM+M,OACXpB,GAAAA,UAAAA,aAAAA,eACAA,GAAAA,UAAAA,aAAAA,WACFlH,MACE,IAAMN,KAAKE,SAAS,CAACkB,SAAS,KAG1C,CAqDAW,MAAAA,GACI,OACItH,IAAAA,cAAC0f,GAAa,CACVxN,OACIlS,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,qCACHC,eAAe,gCAGvBqb,QACIzb,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,kCACHC,eAAe,yBAGvBob,QACI,IACAjW,KAAKnE,MAAMb,KAAKO,KAChB,sCAEJ4a,YAAY,qBACZH,UACIvb,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,oCACHC,eAAe,+BAGvBib,gBACIrb,IAAAA,cAAC4f,GAAAA,EAAwB,CACrBzf,GAAG,0CACHC,eAAe,4CAGvBkc,SACItc,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,mCACHC,eAAe,oKACfY,OAAQ,CACJksB,aACIltB,IAAAA,cAACgP,GAAAA,EAAY,CACTC,KAAMsU,GAAAA,GAAAA,wBACNrU,SAAS,+BAETlP,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,gDACHC,eAAe,oBAI3B2O,aACI/O,IAAAA,cAACgP,GAAAA,EAAY,CACTC,KAAK,qCACLC,SAAS,+BAETlP,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,gDACHC,eAAe,sBAOvCya,mBAAmBvN,EAAAA,EAAAA,IACf,qCACA,4BAEJ3G,QAASpB,KAAKrB,MAAMyC,UAElB+S,IACE,MAAMjP,EAAWlF,KAAK+sB,iBAAiB5Y,GACvC,MAAO,CAACjP,EAAUA,EAAS1E,OAAS,EAAE,GAItD,EACHZ,GApJoB+sB,GAAyB,aAlD1C5B,wBAAuBpvB,IAAAA,KAAAA,WAKvBoxB,iBAAgBpxB,IAAAA,MAAAA,WAehBiN,OAAMjN,IAAAA,OAAAA,WAEN6B,QAAO7B,IAAAA,MAAA,CAKHkxB,mBAAkBlxB,IAAAA,KAAAA,WAKlBwjB,oCAAmCxjB,IAAAA,KAAAA,WAKnCixB,uBAAsBjxB,IAAAA,KAAAA,aAAA+C,WAM1BoK,uBAAsBnN,IAAAA,KAAAA,aC5B1B,UAAeuB,EAAAA,EAAAA,UA9Bf,SAAyByB,GACrB,MAAMoG,GAAS6E,EAAAA,EAAAA,IAAUjL,GACnBiK,GAASoL,EAAAA,EAAAA,IAAiBrV,GAC1BosB,GAA0BnD,EAAAA,EAAAA,IAAoBjpB,EAAOiK,EAAQvL,EAAAA,GAAAA,iCAC7DmW,EAAgBD,GAAiB5U,GACjCouB,EAAmBje,OAAOoF,KAAKV,GACjClS,KAAKa,GAAQqR,EAAcrR,KAC3BgS,QAAQqY,GAAoBA,EAAgBngB,UAAYzD,IACtDE,EAA2D,SAAlC/D,EAAO+E,uBAEtC,MAAO,CACHijB,mBACA5iB,UAAUihB,EAAAA,GAAAA,IAAezsB,GACzBua,OAAOuP,EAAAA,EAAAA,IAAS9pB,GAChBiK,SACAmiB,0BACAjiB,yBAER,IAEA,SAA4BvJ,GACxB,MAAO,CACH/B,SAASgC,EAAAA,EAAAA,oBAAmB,CACxB2f,oCAAmC,GACnC0N,mBAAoBK,GAAAA,GACpBN,uBAAwBM,GAAAA,IACzB3tB,GAEX,GAEA,CAA4DktB,ICnD5D,SAAAU,GAAAttB,EAAAutB,GAAA,IAAAC,EAAAve,OAAAoF,KAAArU,GAAA,GAAAiP,OAAAwe,sBAAA,KAAA1Y,EAAA9F,OAAAwe,sBAAAztB,GAAAutB,IAAAxY,EAAAA,EAAAT,QAAA,SAAAiZ,GAAA,OAAAte,OAAAye,yBAAA1tB,EAAAutB,GAAApe,UAAA,KAAAqe,EAAAnrB,KAAAsrB,MAAAH,EAAAzY,EAAA,QAAAyY,CAAA,UAAAtY,GAAAlV,GAAA,QAAAutB,EAAA,EAAAA,EAAA5kB,UAAAhI,OAAA4sB,IAAA,KAAAC,EAAA,MAAA7kB,UAAA4kB,GAAA5kB,UAAA4kB,GAAA,GAAAA,EAAA,EAAAD,GAAAre,OAAAue,IAAA,GAAA9qB,SAAA,SAAA6qB,GAAAxtB,GAAAC,EAAAutB,EAAAC,EAAAD,GAAA,IAAAte,OAAA2e,0BAAA3e,OAAA4e,iBAAA7tB,EAAAiP,OAAA2e,0BAAAJ,IAAAF,GAAAre,OAAAue,IAAA9qB,SAAA,SAAA6qB,GAAAte,OAAAC,eAAAlP,EAAAutB,EAAAte,OAAAye,yBAAAF,EAAAD,GAAA,WAAAvtB,CAAA,UAAAD,GAAAoO,EAAA7L,EAAAtB,GAAA,OAAAsB,EAAA,SAAA8L,GAAA,IAAA9L,EAAA,SAAA+L,EAAAC,GAAA,oBAAAD,GAAA,OAAAA,EAAA,OAAAA,EAAA,IAAAE,EAAAF,EAAAG,OAAAC,aAAA,QAAAC,IAAAH,EAAA,KAAAI,EAAAJ,EAAAK,KAAAP,EAAAC,UAAA,oBAAAK,EAAA,OAAAA,EAAA,UAAAE,UAAA,uDAAAC,OAAAT,EAAA,CAAAU,CAAAX,GAAA,uBAAA9L,EAAAA,EAAAwM,OAAAxM,EAAA,CAAA0M,CAAA1M,MAAA6L,EAAAc,OAAAC,eAAAf,EAAA7L,EAAA,CAAAtB,MAAAA,EAAAmO,YAAA,EAAAC,cAAA,EAAAC,UAAA,IAAAlB,EAAA7L,GAAAtB,EAAAmN,CAAA,CAmBwE,IAwBnE2f,GAAgB,SAAhBA,GAAgB,OAAhBA,EAAgB,kBAAhBA,EAAgB,cAAhBA,EAAgB,wBAAhBA,EAAgB,sBAAhBA,EAAgB,cAAhBA,CAAgB,EAAhBA,IAAgB,IAQrB,MAiBMC,GAAwC,CAC1ChzB,GAAI,GACJW,KAAM,GACN8C,WAAY,GACZ8N,UAAW,EACXC,UAAW,EACX6Y,UAAW,GACXH,cAAe,GACfS,gBAAiB,GACjBD,WAAY,qBACZE,UAAW,IAGA,SAASqI,GAAgChyB,GACpD,MAAOiyB,EAAWC,GA/BQC,KAC1B,MAAMJ,EAAsB,CACxBryB,KAAMyyB,EAAWzyB,MAAQ,GACzB0yB,aAAcD,EAAWxI,UAAYwI,EAAWxI,UAAUhW,KAAK,MAAQ,GACvE0e,cAAeF,EAAWzI,iBAAmB,GAC7CP,SAAUgJ,EAAW/I,WAAa,GAClCC,aAAc8I,EAAWlJ,eAAiB,GAC1CqJ,UAAW,uBAGRxvB,EAAOuB,IAAYyN,EAAAA,EAAAA,UAASigB,GAEnC,OAAO7vB,EAAAA,EAAAA,UAAQ,IAAM,CAACY,EAAQyvB,IAC1BluB,GAAUmuB,GAAQtZ,GAAAA,GAAA,GAAUsZ,GAAaD,IAAW,IACpD,CAACzvB,GAAO,EAiBsB2vB,CAAqBzyB,EAAM0yB,mBAAqBX,KAE3EY,EAAaC,IAAY9gB,EAAAA,EAAAA,UAA0B,KACnD+gB,EAAiBC,IAAsBhhB,EAAAA,EAAAA,UAAiB,KAExDihB,EAAcC,IAAmBlhB,EAAAA,EAAAA,WAAS,IAC1CmhB,EAAkBC,IAAuBphB,EAAAA,EAAAA,UAA2BggB,GAAiBqB,UACrFC,EAAiBC,IAAsBvhB,EAAAA,EAAAA,WAAS,IAEhDwhB,EAAuBC,IAA4BzhB,EAAAA,EAAAA,WAAS,GAE7DjK,GAAOlJ,EAAAA,EAAAA,WACP+E,GAAW0gB,EAAAA,EAAAA,eAEXoP,GAAmBxzB,EAAM0yB,kBAEzBe,EAAaC,IACf,IAAKzB,EAAUvyB,KASX,OARAszB,GAAgB,QAChBJ,EACIh0B,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,8CACHC,eAAe,gDAO3B,IAAKizB,EAAU9I,SASX,OARA6J,GAAgB,QAChBJ,EACIh0B,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,mDACHC,eAAe,qDAO3B,IAAKw0B,GAAmBJ,KAAqBnB,EAAU5I,aASnD,OARA2J,GAAgB,QAChBJ,EACIh0B,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,uDACHC,eAAe,yDAO3B,IAAKizB,EAAUK,UASX,OARAU,GAAgB,QAChBJ,EACIh0B,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,oDACHC,eAAe,sDAO3B,IAAKizB,EAAUI,cASX,OARAW,GAAgB,QAChBJ,EACIh0B,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,yDACHC,eAAe,2DAO3B,MAAMozB,EAAe,GACrB,IAAK,IAAIuB,KAAe1B,EAAUG,aAAale,MAAM,MACjDyf,EAAcA,EAAYtuB,OAEtBsuB,EAAYhvB,OAAS,GACrBytB,EAAa/rB,KAAKstB,GAI1B,OAAID,GAA8C,IAAxBtB,EAAaztB,QACnCquB,GAAgB,QAChBJ,EACIh0B,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,sDACHC,eAAe,8CAOR,CACfU,KAAMuyB,EAAUvyB,KAChBiqB,UAAWyI,EACXhJ,UAAW6I,EAAU9I,SACrBF,cAAegJ,EAAU5I,aACzBI,WAAYwI,EAAUK,UACtB5I,gBAAiBuI,EAAUI,cAGd,EAOfuB,EAAwBA,KAC1BL,GAAyB,EAAM,EAQ7B9pB,EAAeA,KACjB,GAAIspB,EACA,OAGJ,MAAMZ,EAAasB,GAAU,GACxBtB,IAILS,EAAS,IAELK,IAAqBnB,GAAiB+B,YAAgBL,GAAmBP,IAAqBnB,GAAiBqB,SAC1GG,GAMTN,GAAgB,GAEJhzB,EAAM8zB,aAAa3B,GAC3B1tB,MAAK,IAAMuuB,GAAgB,MAlC/BO,GAAyB,GAkCa,EAkCpCQ,EAAkB/vB,IACpBA,SAAAA,EAAGC,iBAECgvB,IAAqBnB,GAAiBkC,OACtCd,EAAoBpB,GAAiBkC,OAGrCnB,GACAC,EAAmB,GACvB,EA2CEjiB,EAAiB7Q,EAAM8Q,OACvBC,EAAiB/Q,EAAMgR,OAE7B,IAAIijB,EACAr1B,IAAAA,cAAA,SACIG,GAAG,gBACH4I,KAAK,OACLid,aAAa,MACb/lB,UAAU,eACVmG,MAAOitB,EAAU5I,aACjBvhB,SApCoB9D,IACxB+vB,IAEA7B,EAAa,CACT7I,aAAcrlB,EAAEc,OAAOE,OACzB,IAwDN,OArBKwuB,GAAoBJ,IACrBa,EACIr1B,IAAAA,cAAAA,IAAAA,SAAA,KACIA,IAAAA,cAAA,SACIG,GAAG,gBACHuI,UAAU,EACVsd,aAAa,MACbjd,KAAK,OACL9I,UAAU,wBACVmG,MAAO,IAAIkvB,OAAO,MAEtBt1B,IAAAA,cAAA,QACI2B,QA9BiB4zB,KAC7Bd,GAAmB,EAAK,EA8BZx0B,UAAU,0CAEVD,IAAAA,cAAA,KAAGC,UAAU,gCAOzBD,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAACyM,EAAe,KACZzM,IAAAA,cAACW,EAAAA,KAAI,CAACC,GAAE,IAAAC,OAAMO,EAAMb,KAAKO,KAAI,8CACzBd,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,uCACHC,eAAe,gCAGvBJ,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAI8R,EAAe9R,GACnBC,eAAgB6R,EAAe7R,kBAGvCJ,IAAAA,cAAA,OAAKC,UAAU,kBACXD,IAAAA,cAAA,QAAMC,UAAU,mBACZD,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAAA,SACIC,UAAU,yBACVuM,QAAQ,QAERxM,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,2CACHC,eAAe,UAGvBJ,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,SACIG,GAAG,OACH4I,KAAK,OACL9I,UAAU,eACVmG,MAAOitB,EAAUvyB,KACjBoI,SA3GR9D,IAChBkuB,EAAa,CACTxyB,KAAMsE,EAAEc,OAAOE,OACjB,IA0GkBpG,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,0CACHC,eAAe,mDAK/BJ,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAAA,SACIC,UAAU,yBACVuM,QAAQ,aAERxM,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,gDACHC,eAAe,eAGvBJ,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,SACIG,GAAG,YACH4I,KAAK,OACLid,aAAa,MACb/lB,UAAU,eACVmG,MAAOitB,EAAU9I,SACjBrhB,SAhIJ9D,IACpB+vB,IAEA7B,EAAa,CACT/I,SAAUnlB,EAAEc,OAAOE,OACrB,IA6HkBpG,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,+CACHC,eAAe,wDAK/BJ,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAAA,SACIC,UAAU,yBACVuM,QAAQ,iBAERxM,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,oDACHC,eAAe,mBAGvBJ,IAAAA,cAAA,OAAKC,UAAU,qBACVo1B,EACDr1B,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,mDACHC,eAAe,4DAK/BJ,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAAA,SACIC,UAAU,yBACVuM,QAAQ,mBAERxM,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,sDACHC,eAAe,qBAGvBJ,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,SACIG,GAAG,YACH4I,KAAK,OACL9I,UAAU,eACVmG,MAAOitB,EAAUI,cACjBvqB,SA9JC9D,IACzB+vB,IAEA7B,EAAa,CACTG,cAAeruB,EAAEc,OAAOE,OAC1B,IA2JkBpG,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,qDACHC,eAAe,4DAGvBJ,IAAAA,cAAA,OAAKC,UAAU,uDACXD,IAAAA,cAACw1B,GAAc,CACX7zB,QAzOT6E,UAAwB,IAAAivB,EAG3C,GAFArwB,EAAEC,iBAEEgvB,IAAqBnB,GAAiBwC,WACtC,OAGJ1B,EAAS,IACTM,EAAoBpB,GAAiBwC,YAErC,MAAMnC,EAAasB,GAAU,GAC7B,IAAKtB,EAGD,YADAe,EAAoBpB,GAAiBqB,SAId,QAA3BkB,EAAIr0B,EAAM0yB,yBAAiB,IAAA2B,GAAvBA,EAAyBt1B,KACzBozB,EAAWpzB,GAAKiB,EAAM0yB,kBAAkB3zB,IAG5C,MAAM,MAAC8K,SAAenG,GAAS6wB,EAAAA,GAAAA,IAAgCv0B,EAAMb,KAAKJ,GAAIozB,IAE1EtoB,GACAqpB,EAAoBpB,GAAiB0C,OACrC1B,EAAmBjpB,EAAMhJ,UAEzBqyB,EAAoBpB,GAAiB+B,UACzC,EA8M4BE,eAAgBA,EAChBU,OAAQxB,OAKxBr0B,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAAA,SACIC,UAAU,yBACVuM,QAAQ,gBAERxM,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,mDACHC,eAAe,kCAGvBJ,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,YACIG,GAAG,eACHiW,KAAM,EACNnW,UAAU,eACVmG,MAAOitB,EAAUG,aACjBtqB,SAvLA9D,IACxBkuB,EAAa,CACTE,aAAcpuB,EAAEc,OAAOE,OACzB,IAsLkBpG,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,kDACHC,eAAe,2KAK/BJ,IAAAA,cAAA,OAAKC,UAAU,0BACXD,IAAAA,cAACkN,EAAAA,EAAS,CACNnE,KAAK,YACL8J,OAAQ,CAACzR,EAAM6P,YAAa8iB,KAEhC/zB,IAAAA,cAACW,EAAAA,KAAI,CACDV,UAAU,mBACVW,GAAE,IAAAC,OAAMO,EAAMb,KAAKO,KAAI,8CAEvBd,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,uCACHC,eAAe,YAGvBJ,IAAAA,cAACmN,GAAAA,EAAa,CACVlN,UAAU,kBACV8I,KAAK,SACLqE,SAAU+mB,EACV9mB,aAAcpE,EAAKnJ,cAAcsB,EAAMuF,SACvChF,QA3TQyD,IAC5BA,EAAEC,iBACFwF,GAAc,EA0TM1K,GAAG,kBAEHH,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAIgS,EAAehS,GACnBC,eAAgB+R,EAAe/R,kBAGtCgB,EAAMyU,eAInB7V,IAAAA,cAAA,OAAKC,UAAU,wCACXD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAI,mDACJC,eAAgB,qEAChBY,OAAQ,CACJ2M,KAAO6a,GACHxoB,IAAAA,cAAA,KAAGiP,KAAK,wDAAwDuZ,OAKhFxoB,IAAAA,cAACme,GAAAA,EAAY,CACTC,KAAMsW,EACNzyB,QAASgH,EAAKnJ,cAAc,CACxBK,GAAI,gEACJC,eAAgB,wEAEpBF,MAAO+I,EAAKnJ,cAAc,CACtBK,GAAI,6CACJC,eAAgB,mCAEpBiB,kBAAmB4H,EAAKnJ,cAAc,CAClCK,GAAI,4CACJC,eAAgB,gBAEpB01B,SAAUd,EACV1W,SAAU0W,EACV3yB,UAAWwI,IAI3B,CAACuoB,GAAAnyB,UAAA,CAphBG4U,YAAW3U,IAAAA,QACX+P,YAAW/P,IAAAA,OAAAA,WAIXg0B,aAAYh0B,IAAAA,KAAAA,YAuhBhB,MAAMs0B,GAAiBl1B,IAA4D,IAA3D,OAACu1B,EAAM,QAAEl0B,EAAO,eAAEwzB,GAAoC70B,EAC1E,OAAIu1B,IAAW3C,GAAiB0C,MAExB51B,IAAAA,cAAA,QACIC,UAAU,iEAEVD,IAAAA,cAAC+1B,GAAAA,iBAAgB,CAACtqB,KAAM,KACxBzL,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAI,iDACJC,eAAgB,gGAChBY,OAAQ,CACJ2M,KAAO6a,GAAiBxoB,IAAAA,cAAA,KAAG2B,QAASwzB,GAAiB3M,OAOrEqN,IAAW3C,GAAiB+B,UAExBj1B,IAAAA,cAAA,QACIC,UAAU,mEAEVD,IAAAA,cAACg2B,GAAAA,uBAAsB,CAACvqB,KAAM,KAC9BzL,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAI,qDACJC,eAAgB,0BAM5By1B,IAAW3C,GAAiBwC,WAExB11B,IAAAA,cAAA,QACIC,UAAU,gDAEVD,IAAAA,cAACkmB,GAAAA,EAAc,CACXsC,KACIxoB,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAI,2CACJC,eAAgB,qBASpCJ,IAAAA,cAAA,UACIC,UAAU,0BACV8I,KAAK,SACLpH,QAASA,EACTxB,GAAG,sBAEHH,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAI,yCACJC,eAAgB,wBAKP,EACvBo1B,GAAAv0B,UAAA,CArEE40B,OAAM30B,IAAAA,MAAA,sDAAA+C,WACNtC,QAAOT,IAAAA,KAAAA,WACPi0B,eAAcj0B,IAAAA,KAAAA,YCriBlB,MAAMutB,IAASwH,EAAAA,EAAAA,eAAc,CAAC91B,GAAI,oCAAqCC,eAAgB,QACjFsuB,IAASuH,EAAAA,EAAAA,eAAc,CAAC91B,GAAI,qCAAsCC,eAAgB,SAClFuuB,IAAUsH,EAAAA,EAAAA,eAAc,CAAC91B,GAAI,uCAAwCC,eAAgB,cAuC3F,GAjCmCE,IAAgC,IAA/B,KAACC,GAAYD,EAC7C,MAAMwE,GAAW0gB,EAAAA,EAAAA,eAEXjP,GAAUC,EAAAA,EAAAA,eAETvF,EAAagC,IAAkBC,EAAAA,EAAAA,UAAS,IAgB/C,OACIlT,IAAAA,cAACozB,GAA+B,CAC5B7yB,KAAMA,EACN2R,OAAQuc,GACRrc,OAAQsc,GACR/nB,QAASgoB,GACTuG,aApBO1uB,UACXyM,EAAe,IAEf,MAAM,KAACnN,EAAI,MAAEmF,SAAgBnG,GAASoxB,EAAAA,GAAAA,IAA2B31B,EAAKJ,GAAIozB,IACtEztB,EACAyQ,EAAQ9O,KAAK,IAAD5G,OAAKN,EAAKO,KAAI,8DAAAD,OAA6DiF,EAAK3F,KAI5F8K,GACAgI,EAAehI,EAAMhJ,QACzB,EAUIgP,YAAaA,GACf,EC/BJwd,IAASwH,EAAAA,EAAAA,eAAc,CAAC91B,GAAI,oBAAqBC,eAAgB,SACjEsuB,IAASuH,EAAAA,EAAAA,eAAc,CAAC91B,GAAI,wCAAyCC,eAAgB,WACrFuuB,IAAUsH,EAAAA,EAAAA,eAAc,CAAC91B,GAAI,0CAA2CC,eAAgB,gBA8H9F,GAnHqCgB,IACjC,MAAM+0B,GALyB/sB,EAKgBhI,EAAM8N,SAAS9F,OAJtD,IAAIua,gBAAgBva,GAASwa,IAAI,OAAS,IADnBxa,MAM/B,MACMgtB,GADc9Q,EAAAA,EAAAA,aAAYlM,IACO+c,IAEhCE,EAAeC,IAAoBpjB,EAAAA,EAAAA,UAASkjB,IAC5CtK,EAAkByK,IAAuBrjB,EAAAA,EAAAA,WAAS,IAClDjC,EAAagC,IAAkBC,EAAAA,EAAAA,UAAS,IAEzCzE,GAA6B6W,EAAAA,EAAAA,aAAYnW,EAAAA,IAAWI,2BAEpDzK,GAAW0gB,EAAAA,EAAAA,gBAEjBzb,EAAAA,EAAAA,YAAU,KACF0E,GACA3J,GAAS0xB,EAAAA,GAAAA,IAA2Bp1B,EAAMb,KAAKJ,GAAIg2B,GACvD,GACD,CAACA,EAAc1nB,EAA4BrN,EAAMb,KAAMuE,IAE1D,MAqBMqnB,EAAwBA,KAC1BoK,GAAoB,EAAM,EAGxBE,EAAgCjwB,UAClCyM,EAAe,IAEf,MAAMc,QAAYjP,GAAS4xB,EAAAA,GAAAA,IAA4Bt1B,EAAMb,KAAKJ,GAAIozB,IAEtE,GAAI,SAAUxf,GAAOA,EAAIjO,MACrB8F,EAAAA,GAAAA,KAAanE,KAAK,IAAD5G,OAAKO,EAAMb,KAAKO,KAAI,mDAMzC,GAFAqrB,IAEI,UAAWpY,EAAK,CAChB,MAAO9I,MAAOikB,GAAOnb,EACrBd,EAAeic,EAAIjtB,QACvB,GAsCJ,OAAKm0B,EAKDp2B,IAAAA,cAACozB,GAA+B,CAC5B7yB,KAAMa,EAAMb,KACZ2R,OAAQuc,GACRrc,OAAQsc,GACR/nB,QAASgoB,GACT9Y,YA7CYA,MAChB,MAAMmW,EACFhsB,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,wBACHC,eAAe,WAIjB6rB,EACFjsB,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,2CACHC,eAAe,mCAIjB8rB,EACFlsB,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,4CACHC,eAAe,sHAIvB,OACIJ,IAAAA,cAACme,GAAAA,EAAY,CACTje,MAAO+rB,EACPhqB,QAASiqB,EACT7qB,kBAAmB2qB,EACnBhqB,WAAW,+BACXoc,KAAM0N,EACNzpB,UAAWA,IAAMo0B,EAA8BJ,GAC/C/X,SAAU6N,GACZ,EAcWtW,GACbqf,aAzFoB1uB,UACxB8vB,EAAiB/C,GAEb6C,EAAmBj2B,KACnBozB,EAAWpzB,GAAKi2B,EAAmBj2B,IAGbi2B,EAAmBrL,UAAUhlB,SAAWwtB,EAAWxI,UAAUhlB,QACnFqwB,EAAmBrL,UAAU+D,OAAM,CAACC,EAAGlY,IAAMkY,IAAMwE,EAAWxI,UAAUlU,WAGlE4f,EAA8BlD,GAOxCgD,GAAoB,EAJpB,EA4EItlB,YAAaA,EACb6iB,kBAAmBsC,IAZhBp2B,IAAAA,cAAC4H,EAAAA,EAAa,KAanB,ECnIH,SAAS2U,GAAcwN,EAAkDrQ,GAC5E,OAAKA,GAIEqQ,EAAwBjpB,KAAKoK,cAAcwT,SAAShF,EAC/D,CAgBA,MAAMid,GAAoCv1B,IACtC,MAIM,wBAAC2oB,EAAuB,YAAEiH,GAAe5vB,EAE/C,IAAKmb,GAAcwN,EAAyB3oB,EAAMsY,QAC9C,OAAO,KAGX,IAAI5Y,EAEAA,EADAipB,EAAwBjpB,KACjBipB,EAAwBjpB,KAG3Bd,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,2DACHC,eAAe,sCAK3B,MAAM6wB,EACFjxB,IAAAA,cAAAA,IAAAA,SAAA,KACIA,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,QAAMC,UAAU,qCACZD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,uCACHC,eAAe,wBACfY,OAAQ,CACJiwB,KAAMlH,EAAwBgB,UAAUhW,KAAK,WAK7D/U,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,QAAMC,UAAU,qCACZD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,mCACHC,eAAe,mBACfY,OAAQ,CACJkmB,IAAK6C,EAAwBe,sBAQ/C/nB,EACF/C,IAAAA,cAAA,OAAKC,UAAU,gBACXD,IAAAA,cAACW,EAAAA,KAAI,CAACC,GAAE,IAAAC,OAAMO,EAAMb,KAAKO,KAAI,sDAAAD,OAAqDkpB,EAAwB5pB,KACtGH,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,8BACHC,eAAe,UAGtB,MACDJ,IAAAA,cAACmB,EAAqB,CAClBe,aACIlC,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,sDACHC,eAAe,oDACfY,OAAQ,CACJolB,eACIpmB,IAAAA,cAAA,cACKoB,EAAM2oB,wBAAwBjpB,SAMnDS,aACIvB,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,sDACHC,eAAe,kEAGvBqB,SA9ESgC,KACjBrC,EAAMK,SAASL,EAAM2oB,wBAAwB,KAkF3C6M,EACF52B,IAAAA,cAAAA,IAAAA,SAAA,KACIA,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,QAAMC,UAAU,uBACZD,IAAAA,cAAC4f,GAAAA,EAAwB,CACrBzf,GAAG,mCACHC,eAAe,4BACfY,OAAQ,CACJupB,SAAUR,EAAwBS,eAKlDxqB,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,QAAMC,UAAU,uBACZD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,qDACHC,eAAe,8BAIa,aAAvC2pB,EAAwBc,YACrB7qB,IAAAA,cAAAA,IAAAA,SAAA,KACIA,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,QAAMC,UAAU,uBACZD,IAAAA,cAAC4f,GAAAA,EAAwB,CACrBzf,GAAG,gDACHC,eAAe,2BACfY,OAAQ,CACJ0D,SAAUqlB,EAAwBW,0BAKlD1qB,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,QAAMC,UAAU,uBACZD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,gDACHC,eAAe,0BAOlC6wB,EACDjxB,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,QAAMC,UAAU,0BACZD,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,kCACHC,eAAe,iDACfY,OAAQ,CACJuD,QAASysB,EACTtE,SAAU3C,EAAwBrY,gBAQ1D,OACI1R,IAAAA,cAAA,OAAKC,UAAU,wBACXD,IAAAA,cAAA,OAAKC,UAAU,gBACXD,IAAAA,cAAA,OAAKC,UAAU,4EACXD,IAAAA,cAAA,UAAQC,UAAU,sBACba,GAEJiC,GAEJ6zB,GAEF,EAEbD,GAAA11B,UAAA,CAzKE+vB,YAAW9vB,IAAAA,OAAAA,WACXwY,OAAMxY,IAAAA,UAAA,CAAAA,IAAAA,OAAAA,IAAAA,MAAA,UAENO,SAAQP,IAAAA,KAAAA,YAwKZ,YC/CA,GArH2CE,IACvC,MAAOuF,EAASkwB,IAAc3jB,EAAAA,EAAAA,WAAS,GACjC4jB,GAAoCxR,EAAAA,EAAAA,cAAaphB,IAAUipB,EAAAA,EAAAA,IAAoBjpB,EAAsB9C,EAAMb,KAAKJ,GAAIyC,EAAAA,GAAAA,qCACpHgM,EAA4F,UAA1D0W,EAAAA,EAAAA,aAAYnW,EAAAA,IAAWK,+BACzDuW,GAAcT,EAAAA,EAAAA,aAAYlM,IAE1BtU,GAAW0gB,EAAAA,EAAAA,eACXvc,GAAOlJ,EAAAA,EAAAA,YAEbgK,EAAAA,EAAAA,YAAU,KACF+sB,GACChyB,EnCmGN,SAAiDqJ,GAA8E,IAA9D3I,EAAIuI,UAAAhI,OAAA,QAAA+N,IAAA/F,UAAA,GAAAA,UAAA,GAAG,EAAGyK,EAAOzK,UAAAhI,OAAA,QAAA+N,IAAA/F,UAAA,GAAAA,UAAA,GAAGkW,GACxF,OAAOzd,UACH,MAAM,KAACV,SAAchB,EAASsf,GAAAA,GAA+CjW,EAAQ3I,EAAMgT,IAQ5F,IAAiDuN,EAJhD,OAHIjgB,GACAhB,GAM4CihB,EANKjgB,EAOlDU,MAAO1B,EAAUwf,KACpB,MAAMpgB,EAAQogB,IACRC,EAA2C,CAAC,EAClD,IAAK,IAAI1N,EAAI,EAAGA,EAAIkP,EAAYhgB,OAAQ8Q,IAAK,CACzC,MAAMlC,EAAMoR,EAAYlP,IACnBrS,EAAAA,EAAAA,IAAQN,EAAOyQ,EAAI/Q,cACpB2gB,EAAe5P,EAAI/Q,aAAc,EAEzC,CAEA,MAAM4gB,EAAOnQ,OAAOoF,KAAK8K,GACzB,OAAoB,IAAhBC,EAAKze,QAITjB,GAAS2f,EAAAA,GAAAA,IAAiBD,IAHf,CAAC1e,KAAM,KAIC,IArBZ,CAACA,KAAM,KAAK,CAE3B,CmC3GsBixB,CAAwC31B,EAAMb,KAAKJ,KAAkC0F,MAC3F,IAAMgxB,GAAW,IAEzB,GACD,CAACC,EAAmC11B,EAAMb,KAAMuE,IAEnD,MAAMkyB,EAAsCzD,IACpCA,GAAcA,EAAWpzB,IACzB2E,GAASmyB,EAAAA,GAAAA,IAA8B1D,EAAWpzB,IACtD,EAGE+2B,EAAiCA,CAACxc,EAA4BC,KAChE,IAAIoS,EAAQrS,EAAE5Z,KAAK8wB,WACd7E,IACDA,EAAQ9jB,EAAKnJ,cAAc,CAACK,GAAI,2DAA4DC,eAAgB,uCAGhH,IAAI4sB,EAAQrS,EAAE7Z,KAAK8wB,WAKnB,OAJK5E,IACDA,EAAQ/jB,EAAKnJ,cAAc,CAACK,GAAI,2DAA4DC,eAAgB,uCAGzG2sB,EAAMnS,cAAcoS,EAAM,EAuBrC,IAAImK,EASJ,OAV4BvoB,GAAkCkoB,IAG1DK,EAAa,CACT3b,QAAS,IAAMpa,EAAMb,KAAKO,KAAO,gDACjC2a,QAASxS,EAAKnJ,cAAc,CAACK,GAAI,2CAA4CC,eAAgB,kCAC7Fsb,YAAa,+BAKjB1b,IAAAA,cAAC0f,GAAarL,OAAA4I,OAAA,CACV/K,OACIlS,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,8CACHC,eAAe,+BAGvBkc,SACItc,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,4CACHC,eAAe,qGACfY,OAAQ,CACJo2B,yBACIp3B,IAAAA,cAACgP,GAAAA,EAAY,CACTC,KAAMsU,GAAAA,GAAAA,aACNrU,SAAS,wCAETlP,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,qEACHC,eAAe,mCAOvCmb,UACIvb,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,6CACHC,eAAe,wCAGvBib,gBACIrb,IAAAA,cAAC4f,GAAAA,EAAwB,CACrBzf,GAAG,mDACHC,eAAe,qDAGvBya,kBAAmB5R,EAAKnJ,cAAc,CAACK,GAAI,8CAA+CC,eAAgB,sCAC1GuG,QAASA,GACLwwB,IAEFzd,IACE,MAAMjP,EAzEgBiP,IACfrF,OAAOrT,OAAO+kB,GACLrM,QAAQ6Z,GAAehX,GAAcgX,EAAY7Z,KACjDpJ,KAAK4mB,GACPrwB,KAAK0sB,GAEnBvzB,IAAAA,cAAC22B,GAAgC,CAC7BjvB,IAAK6rB,EAAWpzB,GAChB4pB,wBAAyBwJ,EACzB9xB,SAAUu1B,EACVz2B,KAAMa,EAAMb,KACZywB,YAAY,OA8DCoG,CAAyB1d,GAC1C,MAAO,CAACjP,EAAUA,EAAS1E,OAAS,EAAE,GAE9B,E,mDCjIxB,MAwCA,GAxC0BzF,IAA2D,IAA1D,KAACQ,EAAI,MAAEZ,EAAK,KAAE4V,EAAI,WAAEuhB,EAAU,SAAE5sB,EAAW,IAAUnK,EAC5E,MAAMqN,EAAO0pB,EAAa,IAAMv2B,EAEhC,OACId,IAAAA,cAAA,MAAIC,UAAU,+BACVD,IAAAA,cAACs3B,EAAAA,QAAO,CACJ12B,GAAI+M,EACJ1N,UAAU,iBACVs3B,gBAAgB,0BAEhBv3B,IAAAA,cAAA,KAAGC,UAAWu3B,KAAW,MAAO1hB,KAChC9V,IAAAA,cAAA,QAAMC,UAAU,wBACXC,IAILuK,GAAYA,EAAS1E,OAAS,GAC1B/F,IAAAA,cAACytB,EAAAA,MAAK,CACFC,KAAM/f,EACNrG,OAAQA,IACJtH,IAAAA,cAAA,MAAIC,UAAU,YAEND,IAAAA,SAAAA,IAAmByK,GAAWE,GACrBA,EAIE3K,IAAAA,aAAmB2K,EAAsB,CAC5C0sB,WAAY1pB,IAJLhD,OAYtC,ECIb,GAxCyBrK,IAAkF,IAAjF,KAACQ,EAAI,MAAEZ,EAAK,WAAEu3B,GAAa,EAAK,WAAEJ,EAAa,GAAE,SAAE5sB,EAAW,GAAE,GAAEtK,GAAUG,EAClG,MAAMqN,EAAO0pB,EAAa,IAAMv2B,EAEhC,IAAI42B,EAAiB,KACjBjtB,EAAS1E,OAAS,IAClB2xB,EACI13B,IAAAA,cAAA,MAAIC,UAAU,eAEND,IAAAA,SAAAA,IAAmByK,GAAWE,GACnB3K,IAAAA,aAAmB2K,EAAO,CAC7B0sB,WAAY1pB,EACZ8pB,YAAY,QAQpC,MAAMx3B,EAAYw3B,EAAa,aAAe,UAE9C,OACIz3B,IAAAA,cAAA,MACIC,UAAWA,EACXE,GAAIA,GAEJH,IAAAA,cAACs3B,EAAAA,QAAO,CACJr3B,UAAS,GAAAY,OAAKZ,EAAS,UACvBs3B,gBAAe,GAAA12B,OAAKZ,EAAS,kBAC7BW,GAAI+M,GAEJ3N,IAAAA,cAAA,QAAMC,UAAS,GAAAY,OAAKZ,EAAS,iBACxBC,IAGRw3B,EACA,ECxBE,MAAMC,WAAyB33B,IAAAA,cAC1C43B,iBAAAA,GACI,OACKryB,KAAKnE,MAAMy2B,mBACXtyB,KAAKnE,MAAM02B,6BAMZ93B,IAAAA,cAAC+3B,GAAiB,CACdj3B,KAAK,QACLu2B,WAAY,IAAM9xB,KAAKnE,MAAMb,KAAKO,KAClCgV,KAAK,aACL5V,MACIF,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,0BACHC,eAAe,mBAXpB,IAgBf,CAEA43B,kBAAAA,GACI,IAAKzyB,KAAKnE,MAAM62B,sBACZ,OAAO,KAGX,IAAIxH,EACAlrB,KAAKnE,MAAM6M,yBACXwiB,EACIzwB,IAAAA,cAACkO,GAAAA,EAAkB,CACfpK,YAAa,CAAClB,EAAAA,GAAAA,0BACduL,OAAQ5I,KAAKnE,MAAMb,KAAKJ,IAExBH,IAAAA,cAACk4B,GAAgB,CACbp3B,KAAK,oBACLu2B,WACI,IAAM9xB,KAAKnE,MAAMb,KAAKO,KAAO,gBAEjCZ,MACIF,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,mDACHC,eAAe,sBAGvBD,GAAG,uBAMnB,IAAImyB,EAAuC,KACvC/sB,KAAKnE,MAAMiN,yBAENH,GAAAA,EACiBtL,EAAAA,GAAAA,yBACN2C,KAAKnE,MAAMb,KAAKJ,GAKVoF,KAAKnE,MAAMb,KAAKO,KAGrBC,EAAAA,kBAWrB,IAAIkY,EAA+B,KAC/B1T,KAAKnE,MAAMmN,iBAENL,GAAAA,EACiBtL,EAAAA,GAAAA,sBACN2C,KAAKnE,MAAMb,KAAKJ,GAKVoF,KAAKnE,MAAMb,KAAKO,KAGrBC,EAAAA,kBAWrB,IAAIoY,EAAgC,KAChC5T,KAAKnE,MAAMqN,6BAENC,GAAAA,EAAmC9L,EAAAA,GAAAA,aAIlB2C,KAAKnE,MAAMb,KAAKO,KAGrBC,EAAAA,kBAchB2N,GAAAA,EAKyBnJ,KAAKnE,MAAMb,KAAKO,KAE7BC,EAAAA,iBAUjB,IAAIsY,EAA+C,KA0BnD,OAzBI9T,KAAKnE,MAAMwN,gCAEP5O,IAAAA,cAACkO,GAAAA,EAAkB,CACfpK,YAAa,CACTlB,EAAAA,GAAAA,mCAEJuL,OAAQ5I,KAAKnE,MAAMb,KAAKJ,IAExBH,IAAAA,cAACk4B,GAAgB,CACbp3B,KAAK,8BACLu2B,WACI,IAAM9xB,KAAKnE,MAAMb,KAAKO,KAAO,gBAEjCZ,MACIF,IAAAA,cAACe,EAAAA,iBAAgB,CACbZ,GAAG,0DACHC,eAAe,mCAGvBD,GAAG,8BAOfH,IAAAA,cAAAA,IAAAA,SAAA,KAoBR,CAEAsH,MAAAA,GACI,OACItH,IAAAA,cAAA,OAAKC,UAAU,qBACXD,IAAAA,cAAA,UACKuF,KAAKqyB,oBACLryB,KAAKyyB,sBAItB,G,4ZACH7yB,CAzMoBwyB,GAAgB,aAVjCE,kBAAiB32B,IAAAA,KAAAA,WACjB+M,uBAAsB/M,IAAAA,KAAAA,WACtBmN,uBAAsBnN,IAAAA,KAAAA,WACtBqN,eAAcrN,IAAAA,KAAAA,WACduN,2BAA0BvN,IAAAA,KAAAA,WAC1B0N,+BAA8B1N,IAAAA,KAAAA,WAC9B42B,6BAA4B52B,IAAAA,KAAAA,WAC5B+2B,sBAAqB/2B,IAAAA,KAAAA,a,oCCqBzB,MAAMi3B,GAAiB73B,IAAA,IAAE+sB,UAAWC,EAAS,WAAEC,GAAyCjtB,EAA1BktB,E,kXAAIzS,CAAAza,EAAA0a,IAAA,OAC9Dhb,IAAAA,cAACytB,EAAAA,MAAKpZ,OAAA4I,OAAA,GACEuQ,EAAI,CACRlmB,OAASlG,GACLpB,IAAAA,cAACstB,EAASjZ,OAAA4I,OAAA,GACFsQ,EACAnsB,MAGd,EA4LAg3B,IAAuBC,EAAAA,EAAAA,mBAAiB,uGCxL9C,IAAeC,EAAAA,EAAAA,aAAW71B,EAAAA,EAAAA,UA3C1B,SAAyByB,GACrB,MAAM6G,GAAOwtB,EAAAA,EAAAA,IAAer0B,GACtB3D,GAAOsE,EAAAA,EAAAA,IAAeX,GAEtBoG,GAAS6E,EAAAA,EAAAA,IAAUjL,GAEnB1D,EAAW8J,EAAOC,SAClBstB,EAAiD,SAA7BvtB,EAAOkuB,kBAC3BvqB,EAA2D,SAAlC3D,EAAO8E,uBAChCf,EAA2D,SAAlC/D,EAAO+E,uBAChCd,EAA2C,SAA1BjE,EAAOgF,eACxBb,EAAmE,SAAtCnE,EAAOiF,2BACpCX,EAA2E,SAA1CtE,EAAOkF,+BAE9C,IAAIsoB,GAAgC/T,EAAAA,EAAAA,IAAsB7f,EAAO,CAAC8f,WAAYphB,EAAAA,GAAAA,kBAA+BmhB,EAAAA,EAAAA,IAAsB7f,EAAO,CAAC8f,WAAYphB,EAAAA,GAAAA,gBACvJ,IAAKk1B,EACD,IAAK,MAAMlF,KAAK6F,EAAAA,EAAAA,IAAWv0B,GACvB,IAAIipB,EAAAA,EAAAA,IAAoBjpB,EAAO0uB,EAAEzyB,GAAIyC,EAAAA,GAAAA,iBAA8BuqB,EAAAA,EAAAA,IAAoBjpB,EAAO0uB,EAAEzyB,GAAIyC,EAAAA,GAAAA,eAA4B,CAC5Hk1B,GAA+B,EAC/B,KACJ,CAIR,MAAMY,GAA6BvL,EAAAA,EAAAA,IAAoBjpB,EAAO3D,aAAI,EAAJA,EAAMJ,GAAIyC,EAAAA,GAAAA,yBAAsCuqB,EAAAA,EAAAA,IAAoBjpB,EAAO3D,aAAI,EAAJA,EAAMJ,GAAIyC,EAAAA,GAAAA,gBAA6BuqB,EAAAA,EAAAA,IAAoBjpB,EAAO3D,aAAI,EAAJA,EAAMJ,GAAIyC,EAAAA,GAAAA,4BAAyCuqB,EAAAA,EAAAA,IAAoBjpB,EAAO3D,aAAI,EAAJA,EAAMJ,GAAIyC,EAAAA,GAAAA,0BAC7R+1B,GAAuB5U,EAAAA,EAAAA,IAAsB7f,EAAO,CAAC8f,WAAYphB,EAAAA,GAAAA,gBAA6BmhB,EAAAA,EAAAA,IAAsB7f,EAAO,CAAC8f,WAAYphB,EAAAA,GAAAA,qBAG9I,MAAO,CACHmI,OACAxK,OACAC,WACAq3B,oBACA5pB,yBACAI,yBACAE,iBACAE,6BACAG,iCACAkpB,+BACAG,sBAb0BS,GAA6BC,EAe/D,GAE0Bl2B,ED2BGrB,IACzB,MAAMw3B,GAAU5T,EAAAA,EAAAA,QAAuB,MAQvC,IAAK5jB,EAAMb,OAASa,EAAM2J,KACtB,OAAO,KAEX,MAAMwiB,EAAa,CACfhtB,KAAMa,EAAMb,KACZwK,KAAM3J,EAAM2J,KACZ9E,YAZgBA,KACZ2yB,EAAQxjB,UACRwjB,EAAQxjB,QAAQyjB,UAAY,EAChC,GAWJ,OACI74B,IAAAA,cAAAA,IAAAA,SAAA,KACIA,IAAAA,cAACK,GAAAA,EAAe,CACZE,KAAMa,EAAMb,KACZC,SAAUY,EAAMZ,WAEpBR,IAAAA,cAAA,OACIC,UAAU,iBACViW,IAAK0iB,GAEL54B,IAAAA,cAAC84B,GAAAA,QAAS,CAACC,cAAc,SACzB/4B,IAAAA,cAAC23B,GAAgB,CACbp3B,KAAMa,EAAMb,KACZs3B,kBAAmBz2B,EAAMy2B,kBACzB5pB,uBAAwB7M,EAAM6M,uBAC9BI,uBAAwBjN,EAAMiN,uBAC9BE,eAAgBnN,EAAMmN,eACtBE,2BAA4BrN,EAAMqN,2BAClCG,+BAAgCxN,EAAMwN,+BACtCkpB,6BAA8B12B,EAAM02B,6BACpCG,sBAAuB72B,EAAM62B,wBAEjCj4B,IAAAA,cAAC6tB,EAAAA,OAAM,KACH7tB,IAAAA,cAACm4B,GAAc,CACX5K,WAAYA,EACZO,OAAO,EACPJ,KAAM,sBACNL,UAAWvf,KAEf9N,IAAAA,cAACm4B,GAAc,CACX5K,WAAYA,EACZO,OAAO,EACPJ,KAAI,GAAA7sB,OAAKO,EAAMwd,MAAMsI,IAAG,sBACxBmG,UAAWyC,KAEf9vB,IAAAA,cAACm4B,GAAc,CACX5K,WAAYA,EACZG,KAAI,GAAA7sB,OAAKO,EAAMwd,MAAMsI,IAAG,0BACxBmG,UAAW2L,KAEfh5B,IAAAA,cAACm4B,GAAc,CACX5K,WAAYA,EACZG,KAAI,GAAA7sB,OAAKO,EAAMwd,MAAMsI,IAAG,2BACxBmG,UAAWY,KAEfjuB,IAAAA,cAACm4B,GAAc,CACX5K,WAAYA,EACZO,OAAO,EACPJ,KAAI,GAAA7sB,OAAKO,EAAMwd,MAAMsI,IAAG,sBACxBmG,UAAW6E,KAEflyB,IAAAA,cAACm4B,GAAc,CACX5K,WAAYA,EACZG,KAAI,GAAA7sB,OAAKO,EAAMwd,MAAMsI,IAAG,0BACxBmG,UAAW1V,KAEf3X,IAAAA,cAACm4B,GAAc,CACX5K,WAAYA,EACZG,KAAI,GAAA7sB,OAAKO,EAAMwd,MAAMsI,IAAG,2BACxBmG,UAAWgC,KAEfrvB,IAAAA,cAACm4B,GAAc,CACX5K,WAAYA,EACZG,KAAI,GAAA7sB,OAAKO,EAAMwd,MAAMsI,IAAG,aACxBmG,UAAWM,KAEf3tB,IAAAA,cAACm4B,GAAc,CACX5K,WAAYA,EACZO,OAAO,EACPJ,KAAI,GAAA7sB,OAAKO,EAAMwd,MAAMsI,IAAG,gBACxBmG,UAAW4L,KAEfj5B,IAAAA,cAACm4B,GAAc,CACX5K,WAAYA,EACZG,KAAI,GAAA7sB,OAAKO,EAAMwd,MAAMsI,IAAG,oBACxBmG,UAAW6L,KAEfl5B,IAAAA,cAACm4B,GAAc,CACX5K,WAAYA,EACZG,KAAI,GAAA7sB,OAAKO,EAAMwd,MAAMsI,IAAG,qBACxBmG,UAAW8L,KAEfn5B,IAAAA,cAACm4B,GAAc,CACX5K,WAAYA,EACZO,OAAO,EACPJ,KAAI,GAAA7sB,OAAKO,EAAMwd,MAAMsI,IAAG,gCACxBmG,UAAW+L,KAEfp5B,IAAAA,cAACm4B,GAAc,CACX5K,WAAYA,EACZO,OAAO,EACPJ,KAAI,GAAA7sB,OAAKO,EAAMwd,MAAMsI,IAAG,oCACxBmG,UAAWgM,KAEfr5B,IAAAA,cAACm4B,GAAc,CACX5K,WAAYA,EACZO,OAAO,EACPJ,KAAI,GAAA7sB,OAAKO,EAAMwd,MAAMsI,IAAG,qCACxBmG,UAAWiM,KAEft5B,IAAAA,cAACm4B,GAAc,CACX5K,WAAYA,EACZG,KAAI,GAAA7sB,OAAKO,EAAMwd,MAAMsI,IAAG,YACxBmG,UAAW/D,KAEftpB,IAAAA,cAACm4B,GAAc,CACX5K,WAAYA,EACZO,OAAO,EACPJ,KAAM,eACNL,UAAWznB,IAEf5F,IAAAA,cAACm4B,GAAc,CACX5K,WAAYA,EACZG,KAAI,GAAA7sB,OAAKO,EAAMwd,MAAMsI,IAAG,QACxBmG,UAAWziB,KAEf5K,IAAAA,cAACm4B,GAAc,CACX5K,WAAYA,EACZG,KAAI,GAAA7sB,OAAKO,EAAMwd,MAAMsI,IAAG,aACxBmG,UAAW5M,KAEfzgB,IAAAA,cAACm4B,GAAc,CACX5K,WAAYA,EACZG,KAAI,GAAA7sB,OAAKO,EAAMwd,MAAMsI,IAAG,cACxBmG,UAAW5M,KAEfzgB,IAAAA,cAACm4B,GAAc,CACX5K,WAAYA,EACZG,KAAI,GAAA7sB,OAAKO,EAAMwd,MAAMsI,IAAG,SACxBmG,UAAW9O,OAIvBve,IAAAA,cAACo4B,GAAoB,MACtB,I,0FExOX,MAaMmB,EAAsC,GAEtCrsB,EAA6B5M,IAO7B,IAP8B,MAChC2K,EAAQ,KAAI,OACZ4H,EAAS0mB,EAAgB,cACzBC,EAAa,OACbC,EAAM,cACNC,EAAa,KACb3wB,GACHzI,EACG,IAAK2K,GAA2B,IAAlB4H,EAAO9M,OACjB,OAAO,KAIX,IAAI9D,EAAUgJ,EAEd,IAAKhJ,EACD,IAAK,MAAMitB,KAAOrc,EACVqc,IACAjtB,EAAUitB,GAKtB,OAAKjtB,EAtCU,UA0CX8G,EAEI/I,IAAAA,cAAA,OAAKC,UAAU,cACXD,IAAAA,cAAA,SAAOC,UAAU,uBAAuBgC,IA5CjC,cAiDf8G,EAEI/I,IAAAA,cAAA,OAAKC,UAAU,uBACXD,IAAAA,cAAA,SAAOC,UAAU,iBAAiBgC,IAK1Cw3B,EAEIz5B,IAAAA,cAAA,OAAKC,UAAU,wBACXD,IAAAA,cAAA,SAAOC,UAAU,iBAAiBgC,IAM1CjC,IAAAA,cAAA,OAAKC,UAAS,aAAAY,OAAe64B,GAAiB,cAC1C15B,IAAAA,cAAA,SAAOC,UAAU,iBACbD,IAAAA,cAAA,KACIC,UAAS,MAAAY,OAAQ24B,GAAiB,2BACnC,IACFv3B,IAjCF,IAmCD,EAEZiL,EAAAjM,UAAA,CAvEE8H,KAAI7H,IAAAA,KACJ+J,MAAK/J,IAAAA,KACLw4B,cAAax4B,IAAAA,OACbs4B,cAAat4B,IAAAA,OACbu4B,OAAMv4B,IAAAA,KACN2R,OAAM3R,IAAAA,QAAAA,IAAAA,OAoEV,QAAelB,IAAAA,KAAWkN,E,8GCxE1B,MAAM9E,EAAW9H,IAAkC,IAAjC,oBAAC8B,GAA2B9B,EAC1C,MAAM,cAACR,IAAiBC,EAAAA,EAAAA,WAExB,OACIC,IAAAA,cAAA,KACIC,UAAWu3B,IAAW,0BAA2Bp1B,GACjDlC,MAAOJ,EAAc,CACjBK,GAAI,qBACJC,eAAgB,eAEtB,EAERgI,EAAAnH,UAAA,CAfEmB,oBAAmBlB,IAAAA,QAiBvB,QAAelB,IAAAA,KAAWoI,E,8GCd1B,MAAMS,EAAevI,IAAkC,IAAjC,oBAAC8B,GAA2B9B,EAC9C,MAAM,cAACR,IAAiBC,EAAAA,EAAAA,WAExB,OACIC,IAAAA,cAAA,KACIC,UAAWu3B,IAAW,yBAA0Bp1B,GAChDlC,MAAOJ,EAAc,CAACK,GAAI,yBAA0BC,eAAgB,mBACtE,EAERyI,EAAA5H,UAAA,CAZEmB,oBAAmBlB,IAAAA,QAcvB,QAAelB,IAAAA,KAAW6I,E,sEChBX,SAASC,IACpB,MAAM,cAAChJ,IAAiBC,EAAAA,EAAAA,WAExB,OACIC,IAAAA,cAAA,KACIC,UAAU,eACVC,MAAOJ,EAAc,CAACK,GAAI,uBAAwBC,eAAgB,iBAG9E,C,6GCJA,MAAM+B,EAAc7B,IAAkC,IAAjC,oBAAC8B,GAA2B9B,EAC7C,MAAM,cAACR,IAAiBC,EAAAA,EAAAA,WACxB,OACIC,IAAAA,cAAA,KACIC,UAAWu3B,IAAW,gBAAiBp1B,GACvClC,MAAOJ,EAAc,CAACK,GAAI,wBAAyBC,eAAgB,kBACrE,EAER+B,EAAAlB,UAAA,CAXEmB,oBAAmBlB,IAAAA,QAavB,QAAelB,IAAAA,KAAWmC,E,8ECZnB,MAAMw3B,EAAoC,CAAC,sBAE3C,SAAS9V,EAAe3f,GAC3B,OAAOA,EAAME,SAASua,KAAKib,QAC/B,CAEO,MAAM3Z,GAAsE/P,EAAAA,EAAAA,IAC/E,yBACA2T,EACAmK,EAAAA,IACA,CAACnO,EAAaga,KACV,MAAMC,EAAiC,CAAC,EAQxC,OAPAzlB,OAAOrT,OAAO6e,GAAa/X,SAASiyB,IAChC,MAAMC,EAAUH,EAAaE,EAAWloB,SACpCmoB,IAAYL,EAAwBjb,SAASsb,EAAQt1B,YACrDo1B,EAAUC,EAAWloB,SAAWkoB,EACpC,IAGGD,CAAS,G","sources":["webpack://mattermost-webapp/./src/components/widgets/icons/fa_back_icon.tsx","webpack://mattermost-webapp/./src/components/backstage/components/backstage_navbar.tsx","webpack://mattermost-webapp/./src/components/integrations/delete_integration_link/delete_integration_link.tsx","webpack://mattermost-webapp/./src/components/integrations/delete_integration_link/index.ts","webpack://mattermost-webapp/./src/components/emoji/emoji_list_item/delete_emoji_button.tsx","webpack://mattermost-webapp/./src/components/emoji/emoji_list_item/emoji_list_item.tsx","webpack://mattermost-webapp/./src/components/emoji/emoji_list_item/index.ts","webpack://mattermost-webapp/./src/components/emoji/emoji_list/emoji_list.tsx","webpack://mattermost-webapp/./src/components/emoji/emoji_list/index.ts","webpack://mattermost-webapp/./src/components/emoji/emoji_page.tsx","webpack://mattermost-webapp/./src/components/emoji/index.ts","webpack://mattermost-webapp/./src/components/backstage/components/backstage_header.tsx","webpack://mattermost-webapp/./src/components/emoji/add_emoji/add_emoji.tsx","webpack://mattermost-webapp/./src/components/emoji/add_emoji/index.ts","webpack://mattermost-webapp/./src/components/integrations/integration_option.tsx","webpack://mattermost-webapp/./src/components/integrations/integrations.tsx","webpack://mattermost-webapp/./src/components/integrations/index.ts","webpack://mattermost-webapp/./src/components/channel_select/channel_select.tsx","webpack://mattermost-webapp/./src/components/channel_select/index.ts","webpack://mattermost-webapp/./src/components/integrations/abstract_incoming_webhook.tsx","webpack://mattermost-webapp/./src/components/integrations/add_incoming_webhook/add_incoming_webhook.tsx","webpack://mattermost-webapp/./src/components/integrations/add_incoming_webhook/index.ts","webpack://mattermost-webapp/./src/components/integrations/abstract_oauth_app.tsx","webpack://mattermost-webapp/./src/components/integrations/add_oauth_app/add_oauth_app.tsx","webpack://mattermost-webapp/./src/components/integrations/add_oauth_app/index.ts","webpack://mattermost-webapp/./src/components/integrations/abstract_outgoing_webhook.tsx","webpack://mattermost-webapp/./src/components/integrations/add_outgoing_webhook/add_outgoing_webhook.tsx","webpack://mattermost-webapp/./src/components/integrations/add_outgoing_webhook/index.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/actions/bots.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/selectors/entities/integrations.ts","webpack://mattermost-webapp/./src/components/backstage/components/backstage_list.tsx","webpack://mattermost-webapp/./src/components/integrations/bots/bot.tsx","webpack://mattermost-webapp/./src/components/integrations/bots/bots.tsx","webpack://mattermost-webapp/./src/components/integrations/bots/index.ts","webpack://mattermost-webapp/./src/components/integrations/bots/add_bot/add_bot.tsx","webpack://mattermost-webapp/./src/components/integrations/bots/add_bot/index.ts","webpack://mattermost-webapp/./src/actions/integration_actions.tsx","webpack://mattermost-webapp/./src/components/integrations/outgoing_oauth_connections/oauth_connection_audience_input.tsx","webpack://mattermost-webapp/./src/components/integrations/abstract_command.tsx","webpack://mattermost-webapp/./src/components/integrations/add_command/add_command.tsx","webpack://mattermost-webapp/./src/components/integrations/add_command/index.ts","webpack://mattermost-webapp/./src/components/copy_text.tsx","webpack://mattermost-webapp/./src/components/integrations/confirm_integration/confirm_integration.tsx","webpack://mattermost-webapp/./src/components/integrations/confirm_integration/index.ts","webpack://mattermost-webapp/./src/components/integrations/edit_command/edit_command.tsx","webpack://mattermost-webapp/./src/components/integrations/edit_command/index.ts","webpack://mattermost-webapp/./src/components/integrations/installed_command.tsx","webpack://mattermost-webapp/./src/components/integrations/installed_commands/installed_commands.tsx","webpack://mattermost-webapp/./src/components/integrations/installed_commands/index.ts","webpack://mattermost-webapp/./src/components/integrations/commands_container/commands_container.tsx","webpack://mattermost-webapp/./src/components/integrations/commands_container/index.ts","webpack://mattermost-webapp/./src/components/integrations/edit_incoming_webhook/edit_incoming_webhook.tsx","webpack://mattermost-webapp/./src/components/integrations/edit_incoming_webhook/index.ts","webpack://mattermost-webapp/./src/components/integrations/edit_oauth_app/edit_oauth_app.tsx","webpack://mattermost-webapp/./src/components/integrations/edit_oauth_app/index.ts","webpack://mattermost-webapp/./src/components/integrations/edit_outgoing_webhook/edit_outgoing_webhook.tsx","webpack://mattermost-webapp/./src/components/integrations/edit_outgoing_webhook/index.ts","webpack://mattermost-webapp/./src/components/integrations/installed_incoming_webhook.tsx","webpack://mattermost-webapp/./src/components/integrations/installed_incoming_webhooks/installed_incoming_webhooks.tsx","webpack://mattermost-webapp/./src/components/integrations/installed_incoming_webhooks/index.ts","webpack://mattermost-webapp/./src/components/integrations/installed_oauth_app/installed_oauth_app.tsx","webpack://mattermost-webapp/./src/components/integrations/installed_oauth_app/index.ts","webpack://mattermost-webapp/./src/components/integrations/installed_oauth_apps/installed_oauth_apps.tsx","webpack://mattermost-webapp/./src/components/integrations/installed_oauth_apps/index.ts","webpack://mattermost-webapp/./src/components/integrations/installed_outgoing_webhook.tsx","webpack://mattermost-webapp/./src/components/integrations/installed_outgoing_webhooks/installed_outgoing_webhooks.tsx","webpack://mattermost-webapp/./src/components/integrations/installed_outgoing_webhooks/index.ts","webpack://mattermost-webapp/./src/components/integrations/outgoing_oauth_connections/abstract_outgoing_oauth_connection.tsx","webpack://mattermost-webapp/./src/components/integrations/outgoing_oauth_connections/add_outgoing_oauth_connection.tsx","webpack://mattermost-webapp/./src/components/integrations/outgoing_oauth_connections/edit_outgoing_oauth_connection.tsx","webpack://mattermost-webapp/./src/components/integrations/outgoing_oauth_connections/installed_outgoing_oauth_connection.tsx","webpack://mattermost-webapp/./src/components/integrations/outgoing_oauth_connections/installed_outgoing_oauth_connections.tsx","webpack://mattermost-webapp/./src/components/backstage/components/backstage_category.tsx","webpack://mattermost-webapp/./src/components/backstage/components/backstage_section.tsx","webpack://mattermost-webapp/./src/components/backstage/components/backstage_sidebar.tsx","webpack://mattermost-webapp/./src/components/backstage/backstage_controller.tsx","webpack://mattermost-webapp/./src/components/backstage/index.ts","webpack://mattermost-webapp/./src/components/form_error.tsx","webpack://mattermost-webapp/./src/components/widgets/icons/fa_next_icon.tsx","webpack://mattermost-webapp/./src/components/widgets/icons/fa_previous_icon.tsx","webpack://mattermost-webapp/./src/components/widgets/icons/fa_search_icon.tsx","webpack://mattermost-webapp/./src/components/widgets/icons/fa_warning_icon.tsx","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/selectors/entities/bots.ts"],"sourcesContent":["// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from 'react';\nimport {useIntl} from 'react-intl';\n\nexport default function BackIcon() {\n    const {formatMessage} = useIntl();\n    return (\n        <i\n            className='fa fa-angle-left'\n            title={formatMessage({id: 'generic_icons.back', defaultMessage: 'Back Icon'})}\n        />\n    );\n}\n\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\nimport {Link} from 'react-router-dom';\n\nimport type {Team} from '@mattermost/types/teams';\n\nimport BackIcon from 'components/widgets/icons/fa_back_icon';\n\ntype Props = {\n    team?: Team;\n    siteName?: string;\n}\n\nconst BackstageNavbar = ({team, siteName}: Props) => {\n    const teamExists = team?.delete_at === 0;\n\n    return (\n        <div className='backstage-navbar'>\n            <Link\n                className='backstage-navbar__back'\n                to={`/${teamExists ? team?.name : ''}`}\n            >\n                <BackIcon/>\n                <span>\n                    {teamExists ? (\n                        <FormattedMessage\n                            id='backstage_navbar.backToMattermost'\n                            defaultMessage='Back to {siteName}'\n                            values={{siteName: siteName ?? team?.name}}\n                        />\n                    ) : (\n                        <FormattedMessage\n                            id='backstage_navbar.back'\n                            defaultMessage='Back'\n                        />\n                    )}\n                </span>\n            </Link>\n        </div>\n    );\n};\n\nexport default BackstageNavbar;\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React, {useCallback} from 'react';\nimport {FormattedMessage} from 'react-intl';\n\nimport type {openModal as openModalAction} from 'actions/views/modals';\n\nimport ConfirmModalRedux from 'components/confirm_modal_redux';\nimport WarningIcon from 'components/widgets/icons/fa_warning_icon';\n\nconst ModalId = 'delete_integration_confirm';\n\ntype Props = {\n    confirmButtonText?: React.ReactNode;\n    linkText?: React.ReactNode;\n    subtitleText?: React.ReactNode;\n    modalMessage?: React.ReactNode;\n    modalTitle?: React.ReactNode;\n    onDelete: () => void;\n    openModal: typeof openModalAction;\n};\n\nexport default function DeleteIntegrationLink(props: Props) {\n    const {\n        confirmButtonText = (\n            <FormattedMessage\n                id='integrations.delete.confirm.button'\n                defaultMessage='Yes, delete it'\n            />\n        ),\n        linkText = (\n            <FormattedMessage\n                id='installed_integrations.delete'\n                defaultMessage='Delete'\n            />\n        ),\n        modalMessage,\n        modalTitle = (\n            <FormattedMessage\n                id='integrations.delete.confirm.title'\n                defaultMessage='Delete Integration'\n            />\n        ),\n        onDelete,\n        openModal,\n    } = props;\n\n    const onClick = useCallback(() => {\n        openModal({\n            modalId: ModalId,\n            dialogProps: {\n                confirmButtonText,\n                confirmButtonClass: 'btn btn-danger',\n                modalClass: 'integrations-backstage-modal',\n                message: (\n                    <>\n                        {props.subtitleText && (\n                            <p>\n                                {props.subtitleText}\n                            </p>\n                        )}\n                        <div className='alert alert-danger'>\n                            <WarningIcon additionalClassName='mr-1'/>\n                            <strong>\n                                {props.modalMessage}\n                            </strong>\n                        </div>\n                    </>\n                ),\n                onConfirm: onDelete,\n                title: modalTitle,\n            },\n            dialogType: ConfirmModalRedux,\n        });\n    }, [confirmButtonText, modalMessage, modalTitle, onDelete, openModal]);\n\n    return (\n        <button\n            className='color--link style--none'\n            onClick={onClick}\n        >\n            {linkText}\n        </button>\n    );\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\n\nimport {openModal} from 'actions/views/modals';\n\nimport DeleteIntegrationLink from './delete_integration_link';\n\nconst mapDispatchToProps = {\n    openModal,\n};\n\nexport default connect(null, mapDispatchToProps)(DeleteIntegrationLink);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\n\nimport DeleteIntegrationLink from 'components/integrations/delete_integration_link';\n\ntype Props = {\n    onDelete: () => void;\n}\n\nexport default function DeleteEmojiButton(props: Props) {\n    return (\n        <DeleteIntegrationLink\n            confirmButtonText={\n                <FormattedMessage\n                    id='emoji_list.delete.confirm.button'\n                    defaultMessage='Delete'\n                />\n            }\n            linkText={\n                <FormattedMessage\n                    id='emoji_list.delete'\n                    defaultMessage='Delete'\n                />\n            }\n            modalMessage={\n                <FormattedMessage\n                    id='emoji_list.delete.confirm.msg'\n                    defaultMessage='This action permanently deletes the custom emoji. Are you sure you want to delete it?'\n                />\n            }\n            modalTitle={\n                <FormattedMessage\n                    id='emoji_list.delete.confirm.title'\n                    defaultMessage='Delete Custom Emoji'\n                />\n            }\n            onDelete={props.onDelete}\n        />\n    );\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React, {useCallback, useMemo} from 'react';\n\nimport type {CustomEmoji} from '@mattermost/types/emojis';\n\nimport {Client4} from 'mattermost-redux/client';\nimport Permissions from 'mattermost-redux/constants/permissions';\n\nimport AnyTeamPermissionGate from 'components/permissions_gates/any_team_permission_gate';\n\nimport DeleteEmojiButton from './delete_emoji_button';\n\nexport type Props = {\n    emoji?: CustomEmoji;\n    emojiId?: string;\n    currentUserId?: string;\n    creatorDisplayName?: string;\n    creatorUsername?: string;\n    onDelete?: (emojiId: string) => void;\n    actions: {\n        deleteCustomEmoji: (emojiId: string) => void;\n    };\n};\n\nconst DELETE_PERMISSION = [Permissions.DELETE_EMOJIS];\nconst DELETE_OTHER_PERMISSION = [Permissions.DELETE_OTHERS_EMOJIS];\n\nconst EmojiListItem = ({\n    actions: {\n        deleteCustomEmoji,\n    },\n    onDelete,\n    emoji = {} as CustomEmoji,\n    creatorUsername,\n    currentUserId = '',\n    creatorDisplayName = '',\n}: Props) => {\n    const emoticonStyle = useMemo(() => {\n        return {backgroundImage: `url(${Client4.getCustomEmojiImageUrl(emoji.id)})`};\n    }, [emoji.id]);\n\n    const handleDelete = useCallback((): void => {\n        if (!emoji) {\n            return;\n        }\n        if (onDelete) {\n            onDelete(emoji.id);\n        }\n        deleteCustomEmoji(emoji.id);\n    }, [deleteCustomEmoji, emoji, onDelete]);\n\n    let displayName = creatorDisplayName;\n    if (creatorUsername && creatorUsername !== displayName) {\n        displayName += ' (@' + creatorUsername + ')';\n    }\n\n    let deleteButton = <DeleteEmojiButton onDelete={handleDelete}/>;\n\n    if (emoji.creator_id === currentUserId) {\n        deleteButton = (\n            <AnyTeamPermissionGate permissions={DELETE_PERMISSION}>\n                {deleteButton}\n            </AnyTeamPermissionGate>\n        );\n    } else {\n        deleteButton = (\n            <AnyTeamPermissionGate permissions={DELETE_PERMISSION}>\n                <AnyTeamPermissionGate permissions={DELETE_OTHER_PERMISSION}>\n                    {deleteButton}\n                </AnyTeamPermissionGate>\n            </AnyTeamPermissionGate>\n        );\n    }\n\n    return (\n        <tr className='backstage-list__item'>\n            <td className='emoji-list__name'>{':' + emoji.name + ':'}</td>\n            <td className='emoji-list__image'>\n                <span\n                    className='emoticon'\n                    style={emoticonStyle}\n                />\n            </td>\n            <td className='emoji-list__creator'>{displayName}</td>\n            <td className='emoji-list-item_actions'>{deleteButton}</td>\n        </tr>\n    );\n};\n\nexport default React.memo(EmojiListItem);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux';\nimport type {Dispatch} from 'redux';\n\nimport {deleteCustomEmoji} from 'mattermost-redux/actions/emojis';\nimport {getCurrentTeam} from 'mattermost-redux/selectors/entities/teams';\nimport {getUser, getCurrentUserId} from 'mattermost-redux/selectors/entities/users';\n\nimport {getDisplayNameByUser} from 'utils/utils';\n\nimport type {GlobalState} from 'types/store';\n\nimport EmojiListItem from './emoji_list_item';\nimport type {Props} from './emoji_list_item';\n\nfunction mapStateToProps(state: GlobalState, ownProps: Props) {\n    const emoji = state.entities.emojis.customEmoji[ownProps.emojiId!];\n    const creator = getUser(state, emoji.creator_id);\n\n    return {\n        emoji,\n        creatorDisplayName: getDisplayNameByUser(state, creator),\n        creatorUsername: creator ? creator.username : '',\n        currentUserId: getCurrentUserId(state),\n        currentTeam: getCurrentTeam(state),\n    };\n}\n\nfunction mapDispatchToProps(dispatch: Dispatch) {\n    return {\n        actions: bindActionCreators({\n            deleteCustomEmoji,\n        }, dispatch),\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EmojiListItem);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from 'react';\nimport type {ChangeEvent, ChangeEventHandler} from 'react';\nimport {FormattedMessage, injectIntl, type IntlShape} from 'react-intl';\n\nimport type {CustomEmoji} from '@mattermost/types/emojis';\n\nimport {deleteCustomEmoji} from 'mattermost-redux/actions/emojis';\nimport {Emoji} from 'mattermost-redux/constants';\nimport type {ActionResult} from 'mattermost-redux/types/actions';\n\nimport EmojiListItem from 'components/emoji/emoji_list_item';\nimport LoadingScreen from 'components/loading_screen';\nimport SaveButton from 'components/save_button';\nimport NextIcon from 'components/widgets/icons/fa_next_icon';\nimport PreviousIcon from 'components/widgets/icons/fa_previous_icon';\nimport SearchIcon from 'components/widgets/icons/fa_search_icon';\n\nconst EMOJI_PER_PAGE = 50;\nconst EMOJI_SEARCH_DELAY_MILLISECONDS = 200;\n\nexport interface Props {\n\n    /**\n     * Custom emojis on the system.\n     */\n    emojiIds: string[];\n\n    /**\n     * Function to scroll list to top.\n     */\n    scrollToTop: () => void;\n    intl: IntlShape;\n    actions: {\n\n        /**\n         * Get pages of custom emojis.\n         */\n        getCustomEmojis: (page?: number, perPage?: number, sort?: string, loadUsers?: boolean) => Promise<ActionResult<CustomEmoji[]>>;\n\n        /**\n         * Search custom emojis.\n         */\n        searchCustomEmojis: (term: string, options: any, loadUsers: boolean) => Promise<ActionResult<CustomEmoji[]>>;\n    };\n\n}\n\ninterface State {\n    loading: boolean;\n    page: number;\n    nextLoading: boolean;\n    searchEmojis: string[] | null;\n    missingPages: boolean;\n}\n\nclass EmojiList extends React.PureComponent<Props, State> {\n    private searchTimeout: NodeJS.Timeout | null;\n\n    constructor(props: Props) {\n        super(props);\n        this.searchTimeout = null;\n        this.state = {\n            loading: true,\n            page: 0,\n            nextLoading: false,\n            searchEmojis: null,\n            missingPages: true,\n        };\n    }\n\n    async componentDidMount(): Promise<void> {\n        this.props.actions.getCustomEmojis(0, EMOJI_PER_PAGE + 1, Emoji.SORT_BY_NAME, true).\n            then(({data}: ActionResult<CustomEmoji[]>) => {\n                this.setState({loading: false});\n                if (data && data.length < EMOJI_PER_PAGE) {\n                    this.setState({missingPages: false});\n                }\n            });\n    }\n\n    nextPage = (e: React.MouseEvent<HTMLButtonElement, MouseEvent>): void => {\n        if (e) {\n            e.preventDefault();\n        }\n\n        const next = this.state.page + 1;\n        this.setState({nextLoading: true});\n        this.props.actions.getCustomEmojis(next, EMOJI_PER_PAGE, Emoji.SORT_BY_NAME, true).\n            then(({data}: ActionResult<CustomEmoji[]>) => {\n                this.setState({page: next, nextLoading: false});\n                if (data && data.length < EMOJI_PER_PAGE) {\n                    this.setState({missingPages: false});\n                }\n\n                this.props.scrollToTop();\n            });\n    };\n    previousPage = (e: React.MouseEvent<HTMLButtonElement, MouseEvent>): void => {\n        if (e) {\n            e.preventDefault();\n        }\n\n        this.setState({\n            page: this.state.page - 1,\n            nextLoading: false,\n            missingPages: true,\n        });\n\n        this.props.scrollToTop();\n    };\n\n    onSearchChange: ChangeEventHandler = (e: ChangeEvent): void => {\n        if (!e || !e.target) {\n            return;\n        }\n\n        const term = (e.target as HTMLInputElement).value || '';\n\n        clearTimeout(this.searchTimeout!);\n\n        this.searchTimeout = setTimeout(async () => {\n            if (term.trim() === '') {\n                this.setState({searchEmojis: null, page: 0});\n                return;\n            }\n\n            this.setState({loading: true});\n\n            const {data} = await this.props.actions.searchCustomEmojis(\n                term,\n                {},\n                true,\n            );\n\n            if (data) {\n                this.setState({\n                    searchEmojis: data.map((em: CustomEmoji) => em.id),\n                    loading: false,\n                });\n            } else {\n                this.setState({searchEmojis: [], loading: false});\n            }\n        }, EMOJI_SEARCH_DELAY_MILLISECONDS);\n    };\n\n    deleteFromSearch = (emojiId: string): void => {\n        if (!this.state.searchEmojis) {\n            return;\n        }\n\n        const index = this.state.searchEmojis.indexOf(emojiId);\n\n        if (index < 0) {\n            return;\n        }\n\n        const newSearchEmojis = [...this.state.searchEmojis];\n        newSearchEmojis.splice(index, 1);\n        this.setState({searchEmojis: newSearchEmojis});\n    };\n\n    render(): JSX.Element {\n        const searchEmojis = this.state.searchEmojis;\n        const emojis = [];\n        let nextButton;\n        let previousButton;\n\n        if (this.state.loading) {\n            emojis.push(\n                <tr\n                    key='loading'\n                    className='backstage-list__item backstage-list__empty'\n                >\n                    <td colSpan={4}>\n                        <LoadingScreen key='loading'/>\n                    </td>\n                </tr>,\n            );\n        } else if (\n            this.props.emojiIds.length === 0 ||\n            (searchEmojis && searchEmojis.length === 0)\n        ) {\n            emojis.push(\n                <tr\n                    key='empty'\n                    className='backstage-list__item backstage-list__empty'\n                >\n                    <td colSpan={4}>\n                        <FormattedMessage\n                            id='emoji_list.empty'\n                            defaultMessage='No custom emoji found'\n                        />\n                    </td>\n                </tr>,\n            );\n        } else if (searchEmojis) {\n            searchEmojis.forEach((emojiId: string) => {\n                emojis.push(\n                    <EmojiListItem\n                        key={'emoji_search_item' + emojiId}\n                        emojiId={emojiId}\n                        onDelete={this.deleteFromSearch}\n                        actions={{deleteCustomEmoji}}\n                    />,\n                );\n            });\n        } else {\n            const pageStart = this.state.page * EMOJI_PER_PAGE;\n            const pageEnd = pageStart + EMOJI_PER_PAGE;\n            const emojisToDisplay = this.props.emojiIds.slice(pageStart, pageEnd);\n\n            emojisToDisplay.forEach((emojiId: string) => {\n                emojis.push(\n                    <EmojiListItem\n                        key={'emoji_list_item' + emojiId}\n                        emojiId={emojiId}\n                        actions={{deleteCustomEmoji}}\n                    />,\n                );\n            });\n\n            if (this.state.missingPages) {\n                const buttonContents = (\n                    <span>\n                        <FormattedMessage\n                            id='filtered_user_list.next'\n                            defaultMessage='Next'\n                        />\n                        <NextIcon additionalClassName='ml-2'/>\n                    </span>\n                );\n\n                nextButton = (\n                    <SaveButton\n                        btnClass='btn-tertiary'\n                        extraClasses='pull-right'\n                        onClick={this.nextPage}\n                        saving={this.state.nextLoading}\n                        disabled={this.state.nextLoading}\n                        defaultMessage={buttonContents}\n                        savingMessage={buttonContents}\n                    />\n                );\n            }\n\n            if (this.state.page > 0) {\n                previousButton = (\n                    <button\n                        className='btn btn-tertiary'\n                        onClick={this.previousPage}\n                    >\n                        <PreviousIcon additionalClassName='mr-2'/>\n                        <FormattedMessage\n                            id='filtered_user_list.prev'\n                            defaultMessage='Previous'\n                        />\n                    </button>\n                );\n            }\n        }\n\n        return (\n            <div>\n                <div className='backstage-filters'>\n                    <div className='backstage-filter__search'>\n                        <SearchIcon/>\n                        <input\n                            type='search'\n                            className='form-control'\n                            placeholder={this.props.intl.formatMessage({id: 'emoji_list.search', defaultMessage: 'Search Custom Emoji'})}\n                            onChange={this.onSearchChange}\n                            style={style.search}\n                        />\n                    </div>\n                </div>\n                <span className='backstage-list__help'>\n                    <p>\n                        <FormattedMessage\n                            id='emoji_list.help'\n                            defaultMessage=\"Custom emoji are available to everyone on your server. Type ':' followed by two characters in a message box to bring up the emoji selection menu.\"\n                        />\n                    </p>\n                    <p>\n                        <FormattedMessage\n                            id='emoji_list.help2'\n                            defaultMessage=\"Tip: If you add #, ##, or ### as the first character on a new line containing emoji, you can use larger sized emoji. To try it out, send a message such as: '# :smile:'.\"\n                        />\n                    </p>\n                </span>\n                <div className='backstage-list'>\n                    <table className='emoji-list__table'>\n                        <thead>\n                            <tr className='backstage-list__item emoji-list__table-header'>\n                                <th className='emoji-list__name'>\n                                    <FormattedMessage\n                                        id='emoji_list.name'\n                                        defaultMessage='Name'\n                                    />\n                                </th>\n                                <th className='emoji-list__image'>\n                                    <FormattedMessage\n                                        id='emoji_list.image'\n                                        defaultMessage='Image'\n                                    />\n                                </th>\n                                <th className='emoji-list__creator'>\n                                    <FormattedMessage\n                                        id='emoji_list.creator'\n                                        defaultMessage='Creator'\n                                    />\n                                </th>\n                                <th className='emoji-list_actions'>\n                                    <FormattedMessage\n                                        id='emoji_list.actions'\n                                        defaultMessage='Actions'\n                                    />\n                                </th>\n                            </tr>\n                        </thead>\n                        <tbody>{emojis}</tbody>\n                    </table>\n                </div>\n                <div className='filter-controls pt-3'>\n                    {previousButton}\n                    {nextButton}\n                </div>\n            </div>\n        );\n    }\n}\n\nconst style = {\n    search: {flexGrow: 0, flexShrink: 0},\n};\n\nexport default injectIntl(EmojiList);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux';\nimport type {Dispatch} from 'redux';\n\nimport type {GlobalState} from '@mattermost/types/store';\n\nimport {getCustomEmojis, searchCustomEmojis} from 'mattermost-redux/actions/emojis';\nimport {getCustomEmojiIdsSortedByName} from 'mattermost-redux/selectors/entities/emojis';\n\nimport EmojiList from './emoji_list';\n\nfunction mapStateToProps(state: GlobalState) {\n    return {\n        emojiIds: getCustomEmojiIdsSortedByName(state) || [],\n    };\n}\n\nfunction mapDispatchToProps(dispatch: Dispatch) {\n    return {\n        actions: bindActionCreators({\n            getCustomEmojis,\n            searchCustomEmojis,\n        }, dispatch),\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EmojiList);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React, { useEffect } from \"react\";\nimport { FormattedMessage, useIntl } from \"react-intl\";\nimport { Link } from \"react-router-dom\";\n\nimport Permissions from \"mattermost-redux/constants/permissions\";\nimport type { Theme } from \"mattermost-redux/selectors/entities/preferences\";\n\nimport AnyTeamPermissionGate from \"components/permissions_gates/any_team_permission_gate\";\n\nimport * as Utils from \"utils/utils\";\n\nimport EmojiList from \"./emoji_list\";\n\ntype Props = {\n    teamName?: string;\n    teamDisplayName?: string;\n    siteName?: string;\n    scrollToTop(): void;\n    currentTheme: Theme;\n    actions: {\n        loadRolesIfNeeded(roles: Iterable<string>): void;\n    };\n};\n\nconst CREATE_EMOJIS_PERMISSIONS = [Permissions.CREATE_EMOJIS];\nconst ROLES = [\"system_admin\", \"team_admin\", \"system_user\", \"team_user\"];\n\nexport default function EmojiPage({\n    teamDisplayName = \"\",\n    teamName = \"\",\n    siteName = \"\",\n    scrollToTop,\n    currentTheme,\n    actions,\n}: Props) {\n    const intl = useIntl();\n\n    useEffect(() => {\n        updateTitle();\n        actions.loadRolesIfNeeded(ROLES);\n        Utils.resetTheme();\n\n        return () => {\n            Utils.applyTheme(currentTheme);\n        };\n    }, []);\n\n    useEffect(() => {\n        updateTitle();\n    }, [siteName]);\n\n    const updateTitle = () => {\n        document.title = \"Infogito\";\n    };\n\n    return (\n        <div className=\"backstage-content emoji-list\">\n            <div className=\"backstage-header\">\n                <h1>\n                    <FormattedMessage\n                        id=\"emoji_list.header\"\n                        defaultMessage=\"Custom Emoji\"\n                    />\n                </h1>\n                <AnyTeamPermissionGate permissions={CREATE_EMOJIS_PERMISSIONS}>\n                    <Link\n                        className=\"add-link\"\n                        to={\"/\" + teamName + \"/emoji/add\"}\n                    >\n                        <button type=\"button\" className=\"btn btn-primary\">\n                            <FormattedMessage\n                                id=\"emoji_list.add\"\n                                defaultMessage=\"Add Custom Emoji\"\n                            />\n                        </button>\n                    </Link>\n                </AnyTeamPermissionGate>\n            </div>\n            <EmojiList scrollToTop={scrollToTop} />\n        </div>\n    );\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux';\nimport type {Dispatch} from 'redux';\n\nimport {loadRolesIfNeeded} from 'mattermost-redux/actions/roles';\nimport {getTheme} from 'mattermost-redux/selectors/entities/preferences';\nimport {getCurrentTeam} from 'mattermost-redux/selectors/entities/teams';\n\nimport EmojiPage from 'components/emoji/emoji_page';\n\nimport type {GlobalState} from 'types/store';\n\nfunction mapStateToProps(state: GlobalState) {\n    const team = getCurrentTeam(state);\n\n    return {\n        teamName: team?.name,\n        teamDisplayName: team?.display_name,\n        siteName: state.entities.general.config.SiteName,\n        currentTheme: getTheme(state),\n    };\n}\n\nfunction mapDispatchToProps(dispatch: Dispatch) {\n    return {\n        actions: bindActionCreators({\n            loadRolesIfNeeded,\n        }, dispatch),\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EmojiPage);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from 'react';\nimport type {ReactNode} from 'react';\nimport {useIntl} from 'react-intl';\n\ntype Props = {\n    children?: ReactNode;\n}\n\nconst BackstageHeader = ({children}: Props) => {\n    const {formatMessage} = useIntl();\n    const childrenElements: ReactNode[] = [];\n\n    React.Children.forEach(children, (child, index) => {\n        if (index !== 0) {\n            childrenElements.push(\n                <span\n                    key={'divider' + index}\n                    className='backstage-header__divider'\n                >\n                    <i\n                        className='fa fa-angle-right'\n                        title={formatMessage({id: 'generic_icons.breadcrumb', defaultMessage: 'Breadcrumb Icon'})}\n                    />\n                </span>,\n            );\n        }\n\n        childrenElements.push(child);\n    });\n\n    return (\n        <div className='backstage-header'>\n            <h1>\n                {childrenElements}\n            </h1>\n        </div>\n    );\n};\n\nexport default BackstageHeader;\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from 'react';\nimport type {ChangeEvent, FormEvent, SyntheticEvent} from 'react';\nimport {FormattedMessage} from 'react-intl';\nimport {Link} from 'react-router-dom';\n\nimport type {CustomEmoji} from '@mattermost/types/emojis';\nimport type {Team} from '@mattermost/types/teams';\nimport type {UserProfile} from '@mattermost/types/users';\n\nimport type {ActionResult} from 'mattermost-redux/types/actions';\n\nimport BackstageHeader from 'components/backstage/components/backstage_header';\nimport FormError from 'components/form_error';\nimport SpinnerButton from 'components/spinner_button';\n\nimport {getHistory} from 'utils/browser_history';\nimport {Constants} from 'utils/constants';\nimport type EmojiMap from 'utils/emoji_map';\nimport {localizeMessage} from 'utils/utils';\n\nexport interface AddEmojiProps {\n    actions: {\n        createCustomEmoji: (term: CustomEmoji, imageData: File) => Promise<ActionResult>;\n    };\n    emojiMap: EmojiMap;\n    user: UserProfile;\n    team: Team;\n}\n\ntype EmojiCreateArgs = {\n    creator_id: string;\n    name: string;\n};\n\ntype AddEmojiState = {\n    name: string;\n    image: File | null;\n    imageUrl: string | ArrayBuffer | null;\n    saving: boolean;\n    error: React.ReactNode;\n};\n\ninterface AddErrorResponse {\n    error: Error;\n}\n\ninterface AddEmojiResponse {\n    data: CustomEmoji;\n}\n\nexport default class AddEmoji extends React.PureComponent<AddEmojiProps, AddEmojiState> {\n    constructor(props: AddEmojiProps) {\n        super(props);\n\n        this.state = {\n            name: '',\n            image: null,\n            imageUrl: '',\n            saving: false,\n            error: null,\n        };\n    }\n\n    handleFormSubmit = async (e: FormEvent<HTMLFormElement>): Promise<void> => {\n        return this.handleSubmit(e);\n    };\n\n    handleSaveButtonClick = async (e: React.MouseEvent<HTMLButtonElement, MouseEvent>): Promise<void> => {\n        return this.handleSubmit(e);\n    };\n\n    handleSubmit = async (e: SyntheticEvent<unknown>): Promise<void> => {\n        const {actions, emojiMap, user, team} = this.props;\n        const {image, name, saving} = this.state;\n\n        e.preventDefault();\n\n        if (saving) {\n            return;\n        }\n\n        this.setState({\n            saving: true,\n            error: null,\n        });\n\n        const emoji: EmojiCreateArgs = {\n            creator_id: user.id,\n            name: name.trim().toLowerCase(),\n        };\n\n        // trim surrounding colons if the user accidentally included them in the name\n        if (emoji.name.startsWith(':') && emoji.name.endsWith(':')) {\n            emoji.name = emoji.name.substring(1, emoji.name.length - 1);\n        }\n\n        if (!emoji.name) {\n            this.setState({\n                saving: false,\n                error: (\n                    <FormattedMessage\n                        id='add_emoji.nameRequired'\n                        defaultMessage='A name is required for the emoji'\n                    />\n                ),\n            });\n\n            return;\n        }\n\n        if ((/[^a-z0-9+_-]/).test(emoji.name)) {\n            this.setState({\n                saving: false,\n                error: (\n                    <FormattedMessage\n                        id='add_emoji.nameInvalid'\n                        defaultMessage=\"An emoji's name can only contain lowercase letters, numbers, and the symbols '-', '+' and '_'.\"\n                    />\n                ),\n            });\n\n            return;\n        }\n\n        if (emojiMap.hasSystemEmoji(emoji.name)) {\n            this.setState({\n                saving: false,\n                error: (\n                    <FormattedMessage\n                        id='add_emoji.nameTaken'\n                        defaultMessage='This name is already in use by a system emoji. Please choose another name.'\n                    />\n                ),\n            });\n\n            return;\n        }\n\n        if (emojiMap.has(emoji.name)) {\n            this.setState({\n                saving: false,\n                error: (\n                    <FormattedMessage\n                        id='add_emoji.customNameTaken'\n                        defaultMessage='This name is already in use by a custom emoji. Please choose another name.'\n                    />\n                ),\n            });\n\n            return;\n        }\n\n        if (!image) {\n            this.setState({\n                saving: false,\n                error: (\n                    <FormattedMessage\n                        id='add_emoji.imageRequired'\n                        defaultMessage='An image is required for the emoji'\n                    />\n                ),\n            });\n\n            return;\n        }\n\n        const maxFileSizeBytes = 1024 * 1024;\n        if (image.size > maxFileSizeBytes) {\n            this.setState({\n                saving: false,\n                error: (\n                    <FormattedMessage\n                        id='add_emoji.imageTooLarge'\n                        defaultMessage='Unable to create emoji. Image must be less than 1 MB in size.'\n                    />\n                ),\n            });\n\n            return;\n        }\n\n        const response = await actions.createCustomEmoji(emoji as CustomEmoji, image);\n\n        if ('data' in response) {\n            const savedEmoji = response as AddEmojiResponse;\n            if (savedEmoji && savedEmoji.data.name === emoji.name) {\n                getHistory().push('/' + team.name + '/emoji');\n                return;\n            }\n        }\n\n        if ('error' in response) {\n            const responseError = response as AddErrorResponse;\n            if (responseError) {\n                this.setState({\n                    saving: false,\n                    error: responseError.error.message,\n                });\n\n                return;\n            }\n        }\n\n        const genericError = (\n            <FormattedMessage\n                id='add_emoji.failedToAdd'\n                defaultMessage='Something went wrong when adding the custom emoji.'\n            />\n        );\n\n        this.setState({\n            saving: false,\n            error: (genericError),\n        });\n    };\n\n    updateName = (e: ChangeEvent<HTMLInputElement>): void => {\n        this.setState({\n            name: e.target.value,\n        });\n    };\n\n    updateImage = (e: ChangeEvent<HTMLInputElement>): void => {\n        if (e.target.files == null || e.target.files.length === 0) {\n            this.setState({\n                image: null,\n                imageUrl: '',\n            });\n\n            return;\n        }\n\n        const image = e.target.files![0];\n\n        const reader = new FileReader();\n        reader.onload = () => {\n            this.setState({\n                image,\n                imageUrl: reader.result,\n            });\n        };\n        reader.readAsDataURL(image);\n    };\n\n    render(): JSX.Element {\n        let filename = null;\n        if (this.state.image) {\n            filename = (\n                <span className='add-emoji__filename'>\n                    {this.state.image.name}\n                </span>\n            );\n        }\n\n        let preview = null;\n        if (this.state.imageUrl) {\n            preview = (\n                <div className='form-group'>\n                    <label\n                        className='control-label col-sm-4'\n                        htmlFor='preview'\n                    >\n                        <FormattedMessage\n                            id='add_emoji.preview'\n                            defaultMessage='Preview'\n                        />\n                    </label>\n                    <div className='col-md-5 col-sm-8 add-emoji__preview'>\n                        <FormattedMessage\n                            id='add_emoji.preview.sentence'\n                            defaultMessage='This is a sentence with {image} in it.'\n                            values={{\n                                image: (\n                                    <span\n                                        className='emoticon'\n                                        style={{backgroundImage: 'url(' + this.state.imageUrl + ')'}}\n                                    />\n                                ),\n                            }}\n                        />\n                    </div>\n                </div>\n            );\n        }\n\n        return (\n            <div className='backstage-content row'>\n                <BackstageHeader>\n                    <Link to={'/' + this.props.team.name + '/emoji'}>\n                        <FormattedMessage\n                            id='emoji_list.header'\n                            defaultMessage='Custom Emoji'\n                        />\n                    </Link>\n                    <FormattedMessage\n                        id='add_emoji.header'\n                        defaultMessage='Add'\n                    />\n                </BackstageHeader>\n                <div className='backstage-form'>\n                    <form\n                        className='form-horizontal'\n                        onSubmit={this.handleFormSubmit}\n                    >\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='name'\n                            >\n                                <FormattedMessage\n                                    id='add_emoji.name'\n                                    defaultMessage='Name'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <input\n                                    id='name'\n                                    type='text'\n                                    maxLength={64}\n                                    className='form-control'\n                                    value={this.state.name}\n                                    onChange={this.updateName}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_emoji.name.help'\n                                        defaultMessage=\"Name your emoji. The name can be up to 64 characters, and can contain lowercase letters, numbers, and the symbols '-' and '_'.\"\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='image'\n                            >\n                                <FormattedMessage\n                                    id='add_emoji.image'\n                                    defaultMessage='Image'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <div>\n                                    <div className='add-emoji__upload'>\n                                        <button className='btn btn-primary'>\n                                            <FormattedMessage\n                                                id='add_emoji.image.button'\n                                                defaultMessage='Select'\n                                            />\n                                        </button>\n                                        <input\n                                            id='select-emoji'\n                                            type='file'\n                                            accept={Constants.ACCEPT_EMOJI_IMAGE}\n                                            multiple={false}\n                                            onChange={this.updateImage}\n                                        />\n                                    </div>\n                                    {filename}\n                                    <div className='form__help'>\n                                        <FormattedMessage\n                                            id='add_emoji.image.help'\n                                            defaultMessage='Specify a .gif, .png, or .jpg file of up to 64 KB for your emoji. The dimensions can be up to 128 pixels by 128 pixels.'\n                                        />\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        {preview}\n                        <div className='backstage-form__footer'>\n                            <FormError\n                                type='backstage'\n                                error={this.state.error}\n                            />\n                            <Link\n                                className='btn btn-tertiary'\n                                to={'/' + this.props.team.name + '/emoji'}\n                            >\n                                <FormattedMessage\n                                    id='add_emoji.cancel'\n                                    defaultMessage='Cancel'\n                                />\n                            </Link>\n                            <SpinnerButton\n                                data-testid='save-button'\n                                className='btn btn-primary'\n                                type='submit'\n                                spinning={this.state.saving}\n                                spinningText={localizeMessage('add_emoji.saving', 'Saving...')}\n                                onClick={this.handleSaveButtonClick}\n                            >\n                                <FormattedMessage\n                                    id='add_emoji.save'\n                                    defaultMessage='Save'\n                                />\n                            </SpinnerButton>\n                        </div>\n                    </form>\n                </div>\n            </div>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux';\nimport type {Dispatch} from 'redux';\n\nimport {createCustomEmoji} from 'mattermost-redux/actions/emojis';\n\nimport {getEmojiMap} from 'selectors/emojis';\n\nimport type {GlobalState} from 'types/store';\n\nimport AddEmoji from './add_emoji';\n\nfunction mapStateToProps(state: GlobalState) {\n    return {\n        emojiMap: getEmojiMap(state),\n    };\n}\n\nfunction mapDispatchToProps(dispatch: Dispatch) {\n    return {\n        actions: bindActionCreators({\n            createCustomEmoji,\n        }, dispatch),\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AddEmoji);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from 'react';\nimport {Link} from 'react-router-dom';\n\ntype Props = {\n    image: string;\n    title: JSX.Element;\n    description: JSX.Element;\n    link: string;\n}\n\nconst IntegrationOption = ({image, title, description, link}: Props) => {\n    return (\n        <Link\n            to={link}\n            className='integration-option'\n        >\n            <img\n                alt={'integration image'}\n                className='integration-option__image'\n                src={image}\n            />\n            <div className='integration-option__title'>\n                {title}\n            </div>\n            <div className='integration-option__description'>\n                {description}\n            </div>\n        </Link>\n    );\n};\n\nexport default React.memo(IntegrationOption);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from \"react\";\nimport { FormattedMessage } from \"react-intl\";\n\nimport type { Team } from \"@mattermost/types/teams\";\n\nimport { Permissions } from \"mattermost-redux/constants\";\n\nimport ExternalLink from \"components/external_link\";\nimport SystemPermissionGate from \"components/permissions_gates/system_permission_gate\";\nimport TeamPermissionGate from \"components/permissions_gates/team_permission_gate\";\n\nimport BotAccountsIcon from \"images/bot_default_icon.png\";\nimport IncomingWebhookIcon from \"images/incoming_webhook.jpg\";\nimport OAuthIcon from \"images/oauth_icon.png\";\nimport OutgoingOAuthConnectionsIcon from \"images/outgoing_oauth_connection.png\";\nimport OutgoingWebhookIcon from \"images/outgoing_webhook.jpg\";\nimport SlashCommandIcon from \"images/slash_command_icon.jpg\";\nimport * as Utils from \"utils/utils\";\n\nimport IntegrationOption from \"./integration_option\";\n\ntype Props = {\n    siteName: string | undefined;\n    enableIncomingWebhooks: boolean;\n    enableOutgoingWebhooks: boolean;\n    enableCommands: boolean;\n    enableOAuthServiceProvider: boolean;\n    enableOutgoingOAuthConnections: boolean;\n    team: Team;\n};\n\nexport default class Integrations extends React.PureComponent<Props> {\n    componentDidMount() {\n        this.updateTitle();\n    }\n\n    updateTitle = () => {\n        const currentSiteName = \"Infogito\";\n        document.title = \"Infogito\";\n    };\n\n    render() {\n        const options = [];\n\n        if (this.props.enableIncomingWebhooks) {\n            options.push(\n                <TeamPermissionGate\n                    teamId={this.props.team.id}\n                    permissions={[Permissions.MANAGE_INCOMING_WEBHOOKS]}\n                    key=\"incomingWebhookPermission\"\n                >\n                    <IntegrationOption\n                        key=\"incomingWebhook\"\n                        image={IncomingWebhookIcon}\n                        title={\n                            <FormattedMessage\n                                id=\"integrations.incomingWebhook.title\"\n                                defaultMessage=\"Incoming Webhooks\"\n                            />\n                        }\n                        description={\n                            <FormattedMessage\n                                id=\"integrations.incomingWebhook.description\"\n                                defaultMessage=\"Incoming webhooks allow external integrations to send messages\"\n                            />\n                        }\n                        link={\n                            \"/\" +\n                            this.props.team.name +\n                            \"/integrations/incoming_webhooks\"\n                        }\n                    />\n                </TeamPermissionGate>\n            );\n        }\n\n        if (this.props.enableOutgoingWebhooks) {\n            options.push(\n                <TeamPermissionGate\n                    teamId={this.props.team.id}\n                    permissions={[Permissions.MANAGE_OUTGOING_WEBHOOKS]}\n                    key=\"outgoingWebhookPermission\"\n                >\n                    <IntegrationOption\n                        key=\"outgoingWebhook\"\n                        image={OutgoingWebhookIcon}\n                        title={\n                            <FormattedMessage\n                                id=\"integrations.outgoingWebhook.title\"\n                                defaultMessage=\"Outgoing Webhooks\"\n                            />\n                        }\n                        description={\n                            <FormattedMessage\n                                id=\"integrations.outgoingWebhook.description\"\n                                defaultMessage=\"Outgoing webhooks allow external integrations to receive and respond to messages\"\n                            />\n                        }\n                        link={\n                            \"/\" +\n                            this.props.team.name +\n                            \"/integrations/outgoing_webhooks\"\n                        }\n                    />\n                </TeamPermissionGate>\n            );\n        }\n\n        if (this.props.enableCommands) {\n            options.push(\n                <TeamPermissionGate\n                    teamId={this.props.team.id}\n                    permissions={[Permissions.MANAGE_SLASH_COMMANDS]}\n                    key=\"commandPermission\"\n                >\n                    <IntegrationOption\n                        key=\"command\"\n                        image={SlashCommandIcon}\n                        title={\n                            <FormattedMessage\n                                id=\"integrations.command.title\"\n                                defaultMessage=\"Slash Commands\"\n                            />\n                        }\n                        description={\n                            <FormattedMessage\n                                id=\"integrations.command.description\"\n                                defaultMessage=\"Slash commands send events to an external integration\"\n                            />\n                        }\n                        link={\n                            \"/\" +\n                            this.props.team.name +\n                            \"/integrations/commands\"\n                        }\n                    />\n                </TeamPermissionGate>\n            );\n        }\n\n        if (this.props.enableOAuthServiceProvider) {\n            options.push(\n                <SystemPermissionGate\n                    permissions={[Permissions.MANAGE_OAUTH]}\n                    key=\"oauth2AppsPermission\"\n                >\n                    <IntegrationOption\n                        key=\"oauth2Apps\"\n                        image={OAuthIcon}\n                        title={\n                            <FormattedMessage\n                                id=\"integrations.oauthApps.title\"\n                                defaultMessage=\"OAuth 2.0 Applications\"\n                            />\n                        }\n                        description={\n                            <FormattedMessage\n                                id=\"integrations.oauthApps.description\"\n                                defaultMessage=\"Auth 2.0 allows external applications to make authorized requests to the Mattermost API\"\n                            />\n                        }\n                        link={\n                            \"/\" +\n                            this.props.team.name +\n                            \"/integrations/oauth2-apps\"\n                        }\n                    />\n                </SystemPermissionGate>\n            );\n        }\n\n        if (this.props.enableOutgoingOAuthConnections) {\n            options.push(\n                <TeamPermissionGate\n                    teamId={this.props.team.id}\n                    permissions={[\n                        Permissions.MANAGE_OUTGOING_OAUTH_CONNECTIONS,\n                    ]}\n                    key=\"outgoingOAuthConnectionsPermission\"\n                >\n                    <IntegrationOption\n                        key=\"outgoingOAuthConnections\"\n                        image={OutgoingOAuthConnectionsIcon}\n                        title={\n                            <FormattedMessage\n                                id=\"integrations.outgoingOAuthConnections.title\"\n                                defaultMessage=\"Outgoing OAuth Connections\"\n                            />\n                        }\n                        description={\n                            <FormattedMessage\n                                id=\"integrations.outgoingOAuthConnections.description\"\n                                defaultMessage=\"Outgoing OAuth Connections allow custom integrations to communicate to external systems\"\n                            />\n                        }\n                        link={\n                            \"/\" +\n                            this.props.team.name +\n                            \"/integrations/outgoing-oauth2-connections\"\n                        }\n                    />\n                </TeamPermissionGate>\n            );\n        }\n\n        options.push(\n            <SystemPermissionGate\n                permissions={[\"manage_bots\"]}\n                key=\"botsPermissions\"\n            >\n                <IntegrationOption\n                    image={BotAccountsIcon}\n                    title={\n                        <FormattedMessage\n                            id=\"bots.manage.header\"\n                            defaultMessage=\"Bot Accounts\"\n                        />\n                    }\n                    description={\n                        <FormattedMessage\n                            id=\"bots.manage.description\"\n                            defaultMessage=\"Use bot accounts to integrate with Mattermost through plugins or the API\"\n                        />\n                    }\n                    link={\"/\" + this.props.team.name + \"/integrations/bots\"}\n                />\n            </SystemPermissionGate>\n        );\n\n        return (\n            <div className=\"backstage-content row\">\n                <div className=\"backstage-header\">\n                    <h1>\n                        <FormattedMessage\n                            id=\"integrations.header\"\n                            defaultMessage=\"Integrations\"\n                        />\n                    </h1>\n                </div>\n                <div className=\"backstage-list__help\">\n                    <FormattedMessage\n                        id=\"integrations.help\"\n                        defaultMessage=\"Visit the {appDirectory} to find self-hosted, third-party apps and integrations for Mattermost.\"\n                        values={{\n                            appDirectory: (\n                                <ExternalLink\n                                    href=\"https://mattermost.com/marketplace\"\n                                    location=\"integrations\"\n                                >\n                                    <FormattedMessage\n                                        id=\"integrations.help.appDirectory\"\n                                        defaultMessage=\"App Directory\"\n                                    />\n                                </ExternalLink>\n                            ),\n                        }}\n                    />\n                </div>\n                <div className=\"integrations-list d-flex flex-wrap\">\n                    {options}\n                </div>\n            </div>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\n\nimport {getConfig} from 'mattermost-redux/selectors/entities/general';\n\nimport type {GlobalState} from 'types/store';\n\nimport Integrations from './integrations';\n\nfunction mapStateToProps(state: GlobalState) {\n    const config = getConfig(state);\n    const siteName = config.SiteName;\n    const enableIncomingWebhooks = config.EnableIncomingWebhooks === 'true';\n    const enableOutgoingWebhooks = config.EnableOutgoingWebhooks === 'true';\n    const enableCommands = config.EnableCommands === 'true';\n    const enableOAuthServiceProvider = config.EnableOAuthServiceProvider === 'true';\n    const enableOutgoingOAuthConnections = config.EnableOutgoingOAuthConnections === 'true';\n\n    return {\n        siteName,\n        enableIncomingWebhooks,\n        enableOutgoingWebhooks,\n        enableCommands,\n        enableOAuthServiceProvider,\n        enableOutgoingOAuthConnections,\n    };\n}\n\nexport default connect(mapStateToProps)(Integrations);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React, {memo} from 'react';\nimport type {ChangeEventHandler} from 'react';\nimport {useIntl} from 'react-intl';\n\nimport type {Channel} from '@mattermost/types/channels';\n\nimport Constants from 'utils/constants';\n\ntype Props = {\n    channels: Channel[];\n    onChange?: ChangeEventHandler<HTMLSelectElement>;\n    value?: string;\n    selectOpen: boolean;\n    selectPrivate: boolean;\n    selectDm: boolean;\n};\n\nconst ChannelSelect = ({\n    channels,\n    selectOpen,\n    selectPrivate,\n    selectDm,\n    value,\n    onChange,\n}: Props) => {\n    const intl = useIntl();\n\n    const options = [\n        <option\n            key=''\n            value=''\n        >\n            {intl.formatMessage({\n                id: 'channel_select.placeholder',\n                defaultMessage: '--- Select a channel ---',\n            })}\n        </option>,\n    ];\n\n    channels.forEach((channel: Channel) => {\n        const channelName = channel.display_name || channel.name;\n        if (channel.type === Constants.OPEN_CHANNEL && selectOpen) {\n            options.push(\n                <option\n                    key={channel.id}\n                    value={channel.id}\n                >\n                    {channelName}\n                </option>,\n            );\n        } else if (channel.type === Constants.PRIVATE_CHANNEL && selectPrivate) {\n            options.push(\n                <option\n                    key={channel.id}\n                    value={channel.id}\n                >\n                    {channelName}\n                </option>,\n            );\n        } else if (channel.type === Constants.DM_CHANNEL && selectDm) {\n            options.push(\n                <option\n                    key={channel.id}\n                    value={channel.id}\n                >\n                    {channelName}\n                </option>,\n            );\n        }\n    });\n\n    return (\n        <select\n            className='form-control'\n            value={value}\n            onChange={onChange}\n            id='channelSelect'\n        >\n            {options}\n        </select>\n    );\n};\n\nexport default memo(ChannelSelect);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\n\nimport type {GlobalState} from '@mattermost/types/store';\n\nimport {createSelector} from 'mattermost-redux/selectors/create_selector';\nimport {getMyChannels} from 'mattermost-redux/selectors/entities/channels';\nimport {getCurrentUserLocale} from 'mattermost-redux/selectors/entities/i18n';\nimport {sortChannelsByTypeAndDisplayName} from 'mattermost-redux/utils/channel_utils';\n\nimport ChannelSelect from './channel_select';\n\nconst getMyChannelsSorted = createSelector(\n    'getMyChannelsSorted',\n    getMyChannels,\n    getCurrentUserLocale,\n    (channels, locale) => {\n        return [...channels].sort(sortChannelsByTypeAndDisplayName.bind(null, locale));\n    },\n);\n\nfunction mapStateToProps(state: GlobalState) {\n    return {\n        channels: getMyChannelsSorted(state),\n    };\n}\n\nexport default connect(mapStateToProps)(ChannelSelect);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React, {PureComponent} from 'react';\nimport type {ChangeEventHandler, FormEvent, MouseEvent} from 'react';\nimport {FormattedMessage} from 'react-intl';\nimport type {MessageDescriptor} from 'react-intl';\nimport {Link} from 'react-router-dom';\n\nimport type {IncomingWebhook} from '@mattermost/types/integrations';\nimport type {Team} from '@mattermost/types/teams';\n\nimport BackstageHeader from 'components/backstage/components/backstage_header';\nimport ChannelSelect from 'components/channel_select';\nimport FormError from 'components/form_error';\nimport SpinnerButton from 'components/spinner_button';\n\nimport {localizeMessage} from 'utils/utils';\n\ninterface State {\n    displayName: string;\n    description: string;\n    channelId: string;\n    channelLocked: boolean;\n    username: string;\n    iconURL: string;\n    saving: boolean;\n    serverError: string;\n    clientError: JSX.Element | null;\n}\n\ninterface Props {\n\n    /**\n    * The current team\n    */\n    team: Team;\n\n    /**\n    * The header text to render, has id and defaultMessage\n    */\n    header: MessageDescriptor;\n\n    /**\n    * The footer text to render, has id and defaultMessage\n    */\n    footer: MessageDescriptor;\n\n    /**\n    * The spinner loading text to render, has id and defaultMessage\n    */\n    loading: MessageDescriptor;\n\n    /**\n    * The server error text after a failed action\n    */\n    serverError: string;\n\n    /**\n    * The hook used to set the initial state\n    */\n    initialHook?: IncomingWebhook;\n\n    /**\n    * Whether to allow configuration of the default post username.\n    */\n    enablePostUsernameOverride: boolean;\n\n    /**\n    * Whether to allow configuration of the default post icon.\n    */\n    enablePostIconOverride: boolean;\n\n    /**\n    * The async function to run when the action button is pressed\n    */\n    action: (hook: IncomingWebhook) => Promise<void>;\n}\n\nexport default class AbstractIncomingWebhook extends PureComponent<Props, State> {\n    constructor(props: Props | Readonly<Props>) {\n        super(props);\n\n        this.state = this.getStateFromHook(this.props.initialHook);\n    }\n\n    getStateFromHook = (hook?: IncomingWebhook) => {\n        return {\n            displayName: hook?.display_name || '',\n            description: hook?.description || '',\n            channelId: hook?.channel_id || '',\n            channelLocked: hook?.channel_locked || false,\n            username: hook?.username || '',\n            iconURL: hook?.icon_url || '',\n            saving: false,\n            serverError: '',\n            clientError: null,\n        };\n    };\n\n    handleSubmit = (e: MouseEvent<HTMLElement> | FormEvent<HTMLFormElement>) => {\n        e.preventDefault();\n\n        if (this.state.saving) {\n            return;\n        }\n\n        this.setState({\n            saving: true,\n            serverError: '',\n            clientError: null,\n        });\n\n        if (!this.state.channelId) {\n            this.setState({\n                saving: false,\n                clientError: (\n                    <FormattedMessage\n                        id='add_incoming_webhook.channelRequired'\n                        defaultMessage='A valid channel is required'\n                    />\n                ),\n            });\n\n            return;\n        }\n\n        const hook = {\n            channel_id: this.state.channelId,\n            channel_locked: this.state.channelLocked,\n            display_name: this.state.displayName,\n            description: this.state.description,\n            username: this.state.username,\n            icon_url: this.state.iconURL,\n            id: this.props.initialHook?.id || '',\n            create_at: this.props.initialHook?.create_at || 0,\n            update_at: this.props.initialHook?.update_at || 0,\n            delete_at: this.props.initialHook?.delete_at || 0,\n            team_id: this.props.initialHook?.team_id || '',\n            user_id: this.props.initialHook?.user_id || '',\n        };\n\n        this.props.action(hook).then(() => this.setState({saving: false}));\n    };\n\n    updateDisplayName: ChangeEventHandler<HTMLInputElement> = (e) => {\n        this.setState({\n            displayName: e.target.value,\n        });\n    };\n\n    updateDescription: ChangeEventHandler<HTMLInputElement> = (e) => {\n        this.setState({\n            description: e.target.value,\n        });\n    };\n\n    updateChannelId: ChangeEventHandler<HTMLSelectElement> = (e) => {\n        this.setState({\n            channelId: e.target.value,\n        });\n    };\n\n    updateChannelLocked: ChangeEventHandler<HTMLInputElement> = (e) => {\n        this.setState({\n            channelLocked: e.target.checked,\n        });\n    };\n\n    updateUsername: ChangeEventHandler<HTMLInputElement> = (e) => {\n        this.setState({\n            username: e.target.value,\n        });\n    };\n\n    updateIconURL: ChangeEventHandler<HTMLInputElement> = (e) => {\n        this.setState({\n            iconURL: e.target.value,\n        });\n    };\n\n    render() {\n        const headerToRender = this.props.header;\n        const footerToRender = this.props.footer;\n\n        return (\n            <div className='backstage-content'>\n                <BackstageHeader>\n                    <Link to={`/${this.props.team.name}/integrations/incoming_webhooks`}>\n                        <FormattedMessage\n                            id='incoming_webhooks.header'\n                            defaultMessage='Incoming Webhooks'\n                        />\n                    </Link>\n                    <FormattedMessage\n                        id={headerToRender.id}\n                        defaultMessage={headerToRender.defaultMessage}\n                    />\n                </BackstageHeader>\n                <div className='backstage-form'>\n                    <form\n                        className='form-horizontal'\n                        onSubmit={(e) => this.handleSubmit(e)}\n                    >\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='displayName'\n                            >\n                                <FormattedMessage\n                                    id='add_incoming_webhook.displayName'\n                                    defaultMessage='Title'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <input\n                                    id='displayName'\n                                    type='text'\n                                    maxLength={64}\n                                    className='form-control'\n                                    value={this.state.displayName}\n                                    onChange={this.updateDisplayName}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_incoming_webhook.displayName.help'\n                                        defaultMessage='Specify a title, of up to 64 characters, for the webhook settings page.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='description'\n                            >\n                                <FormattedMessage\n                                    id='add_incoming_webhook.description'\n                                    defaultMessage='Description'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <input\n                                    id='description'\n                                    type='text'\n                                    maxLength={500}\n                                    className='form-control'\n                                    value={this.state.description}\n                                    onChange={this.updateDescription}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_incoming_webhook.description.help'\n                                        defaultMessage='Describe your incoming webhook.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='channelId'\n                            >\n                                <FormattedMessage\n                                    id='add_incoming_webhook.channel'\n                                    defaultMessage='Channel'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <ChannelSelect\n                                    value={this.state.channelId}\n                                    onChange={this.updateChannelId}\n                                    selectOpen={true}\n                                    selectPrivate={true}\n                                    selectDm={false}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_incoming_webhook.channel.help'\n                                        defaultMessage='This is the default public or private channel that receives the webhook payloads. When setting up the webhook, you must belong to the private channel.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='channelLocked'\n                            >\n                                <FormattedMessage\n                                    id='add_incoming_webhook.channelLocked'\n                                    defaultMessage='Lock to this channel'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8 checkbox'>\n                                <input\n                                    id='channelLocked'\n                                    type='checkbox'\n                                    checked={this.state.channelLocked}\n                                    onChange={this.updateChannelLocked}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_incoming_webhook.channelLocked.help'\n                                        defaultMessage='If set, the incoming webhook can post only to the selected channel.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        { this.props.enablePostUsernameOverride &&\n                            <div className='form-group'>\n                                <label\n                                    className='control-label col-sm-4'\n                                    htmlFor='username'\n                                >\n                                    <FormattedMessage\n                                        id='add_incoming_webhook.username'\n                                        defaultMessage='Username'\n                                    />\n                                </label>\n                                <div className='col-md-5 col-sm-8'>\n                                    <input\n                                        id='username'\n                                        type='text'\n                                        maxLength={22}\n                                        className='form-control'\n                                        value={this.state.username}\n                                        onChange={this.updateUsername}\n                                    />\n                                    <div className='form__help'>\n                                        <FormattedMessage\n                                            id='add_incoming_webhook.username.help'\n                                            defaultMessage='Specify the username this integration will post as. Usernames can be up to 22 characters, and can contain lowercase letters, numbers and the symbols \\\"-\\\", \\\"_\\\", and \\\".\\\". If left blank, the name specified by the webhook creator is used.'\n                                        />\n                                    </div>\n                                </div>\n                            </div>\n                        }\n                        { this.props.enablePostIconOverride &&\n                            <div className='form-group'>\n                                <label\n                                    className='control-label col-sm-4'\n                                    htmlFor='iconURL'\n                                >\n                                    <FormattedMessage\n                                        id='add_incoming_webhook.icon_url'\n                                        defaultMessage='Profile Picture'\n                                    />\n                                </label>\n                                <div className='col-md-5 col-sm-8'>\n                                    <input\n                                        id='iconURL'\n                                        type='text'\n                                        maxLength={1024}\n                                        className='form-control'\n                                        value={this.state.iconURL}\n                                        onChange={this.updateIconURL}\n                                    />\n                                    <div className='form__help'>\n                                        <FormattedMessage\n                                            id='add_incoming_webhook.icon_url.help'\n                                            defaultMessage='Enter the URL of a .png or .jpg file for the profile picture of this integration when posting. The file should be at least 128 pixels by 128 pixels. If left blank, the profile picture specified by the webhook creator is used.'\n                                        />\n                                    </div>\n                                </div>\n                            </div>\n                        }\n                        <div className='backstage-form__footer'>\n                            <FormError\n                                type='backstage'\n                                errors={[this.props.serverError, this.state.clientError]}\n                            />\n                            <Link\n                                className='btn btn-tertiary'\n                                to={`/${this.props.team.name}/integrations/incoming_webhooks`}\n                            >\n                                <FormattedMessage\n                                    id='add_incoming_webhook.cancel'\n                                    defaultMessage='Cancel'\n                                />\n                            </Link>\n                            <SpinnerButton\n                                className='btn btn-primary'\n                                type='submit'\n                                spinning={this.state.saving}\n                                spinningText={localizeMessage(this.props.loading.id as string, this.props.loading.defaultMessage as string)}\n                                onClick={(e) => this.handleSubmit(e)}\n                                id='saveWebhook'\n                            >\n                                <FormattedMessage\n                                    id={footerToRender.id}\n                                    defaultMessage={footerToRender.defaultMessage}\n                                />\n                            </SpinnerButton>\n                        </div>\n                    </form>\n                </div>\n            </div>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React, {memo, useCallback, useState} from 'react';\nimport {defineMessages} from 'react-intl';\n\nimport type {IncomingWebhook} from '@mattermost/types/integrations';\nimport type {Team} from '@mattermost/types/teams';\n\nimport type {ActionResult} from 'mattermost-redux/types/actions';\n\nimport AbstractIncomingWebhook from 'components/integrations/abstract_incoming_webhook';\n\nimport {getHistory} from 'utils/browser_history';\n\nconst messages = defineMessages({\n    footer: {\n        id: 'add_incoming_webhook.save',\n        defaultMessage: 'Save',\n    },\n    header: {\n        id: 'integrations.add',\n        defaultMessage: 'Add',\n    },\n    loading: {\n        id: 'add_incoming_webhook.saving',\n        defaultMessage: 'Saving...',\n    },\n});\n\ntype Props = {\n\n    /**\n    * The current team\n    */\n    team: Team;\n\n    /**\n    * Whether to allow configuration of the default post username.\n    */\n    enablePostUsernameOverride: boolean;\n\n    /**\n    * Whether to allow configuration of the default post icon.\n    */\n    enablePostIconOverride: boolean;\n\n    actions: {\n\n        /**\n        * The function to call to add a new incoming webhook\n        */\n        createIncomingHook: (hook: IncomingWebhook) => Promise<ActionResult<IncomingWebhook>>;\n    };\n};\n\nconst AddIncomingWebhook = ({\n    team,\n    enablePostUsernameOverride,\n    enablePostIconOverride,\n    actions,\n}: Props) => {\n    const [serverError, setServerError] = useState('');\n\n    const addIncomingHook = useCallback(async (hook: IncomingWebhook) => {\n        setServerError('');\n\n        const {data, error} = await actions.createIncomingHook(hook);\n        if (data) {\n            getHistory().push(`/${team.name}/integrations/confirm?type=incoming_webhooks&id=${data.id}`);\n            return;\n        }\n        if (error) {\n            setServerError(error.message);\n        }\n    }, [actions, team.name]);\n\n    return (\n        <AbstractIncomingWebhook\n            team={team}\n            header={messages.header}\n            footer={messages.footer}\n            loading={messages.loading}\n            enablePostUsernameOverride={enablePostUsernameOverride}\n            enablePostIconOverride={enablePostIconOverride}\n            action={addIncomingHook}\n            serverError={serverError}\n        />\n    );\n};\nexport default memo(AddIncomingWebhook);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux';\nimport type {Dispatch} from 'redux';\n\nimport type {GlobalState} from '@mattermost/types/store';\n\nimport {createIncomingHook} from 'mattermost-redux/actions/integrations';\nimport {getConfig} from 'mattermost-redux/selectors/entities/general';\n\nimport AddIncomingWebhook from './add_incoming_webhook';\n\nfunction mapStateToProps(state: GlobalState) {\n    const config = getConfig(state);\n    const enablePostUsernameOverride = config.EnablePostUsernameOverride === 'true';\n    const enablePostIconOverride = config.EnablePostIconOverride === 'true';\n\n    return {\n        enablePostUsernameOverride,\n        enablePostIconOverride,\n    };\n}\n\nfunction mapDispatchToProps(dispatch: Dispatch) {\n    return {\n        actions: bindActionCreators({\n            createIncomingHook,\n        }, dispatch),\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AddIncomingWebhook);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport type {ChangeEvent, FormEvent} from 'react';\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\nimport type {MessageDescriptor} from 'react-intl';\nimport {Link} from 'react-router-dom';\n\nimport type {OAuthApp} from '@mattermost/types/integrations';\nimport type {Team} from '@mattermost/types/teams';\n\nimport {Permissions} from 'mattermost-redux/constants';\n\nimport BackstageHeader from 'components/backstage/components/backstage_header';\nimport FormError from 'components/form_error';\nimport SystemPermissionGate from 'components/permissions_gates/system_permission_gate';\nimport SpinnerButton from 'components/spinner_button';\n\nimport {localizeMessage} from 'utils/utils';\n\ntype Props = {\n\n    /**\n   * The current team\n   */\n    team: Team;\n\n    /**\n   * The header text to render, has id and defaultMessage\n   */\n    header: MessageDescriptor;\n\n    /**\n   * The footer text to render, has id and defaultMessage\n   */\n    footer: MessageDescriptor;\n\n    /**\n   * The spinner loading text to render, has id and defaultMessage\n   */\n    loading: MessageDescriptor;\n\n    /**\n   * Any extra component/node to render\n   */\n    renderExtra?: JSX.Element;\n\n    /**\n    * The server error text after a failed action\n    */\n    serverError: string;\n\n    /**\n   * The OAuthApp used to set the initial state\n   */\n    initialApp?: OAuthApp;\n\n    /**\n    * The async function to run when the action button is pressed\n    */\n    action: (app: OAuthApp) => Promise<void>;\n\n}\n\ntype State = {\n    name: string;\n    description: string;\n    homepage: string;\n    icon_url: string;\n    callbackUrls: string;\n    is_trusted: boolean;\n    has_icon: boolean;\n    saving: boolean;\n    clientError: JSX.Element | null | string;\n};\n\nexport default class AbstractOAuthApp extends React.PureComponent<Props, State> {\n    private image: HTMLImageElement;\n    private icon_url: React.RefObject<HTMLInputElement>;\n\n    constructor(props: Props) {\n        super(props);\n\n        this.image = new Image();\n        this.image.onload = this.imageLoaded;\n        this.icon_url = React.createRef();\n        this.state = this.getStateFromApp(this.props.initialApp || {} as OAuthApp);\n    }\n\n    getStateFromApp = (app: OAuthApp) => {\n        return {\n            name: app.name || '',\n            description: app.description || '',\n            homepage: app.homepage || '',\n            icon_url: app.icon_url || '',\n            callbackUrls: app.callback_urls ? app.callback_urls.join('\\n') : '',\n            is_trusted: app.is_trusted || false,\n            has_icon: Boolean(app.icon_url),\n            saving: false,\n            clientError: null,\n        };\n    };\n\n    imageLoaded = () => {\n        if (this.icon_url.current?.value) {\n            this.setState({\n                has_icon: true,\n                icon_url: this.icon_url.current.value,\n            });\n        }\n    };\n\n    handleSubmit = (e: FormEvent) => {\n        e.preventDefault();\n\n        if (this.state.saving) {\n            return;\n        }\n\n        this.setState({\n            saving: true,\n            clientError: '',\n        });\n\n        if (!this.state.name) {\n            this.setState({\n                saving: false,\n                clientError: (\n                    <FormattedMessage\n                        id='add_oauth_app.nameRequired'\n                        defaultMessage='Name for the OAuth 2.0 application is required.'\n                    />\n                ),\n            });\n\n            return;\n        }\n\n        if (!this.state.description) {\n            this.setState({\n                saving: false,\n                clientError: (\n                    <FormattedMessage\n                        id='add_oauth_app.descriptionRequired'\n                        defaultMessage='Description for the OAuth 2.0 application is required.'\n                    />\n                ),\n            });\n\n            return;\n        }\n\n        if (!this.state.homepage) {\n            this.setState({\n                saving: false,\n                clientError: (\n                    <FormattedMessage\n                        id='add_oauth_app.homepageRequired'\n                        defaultMessage='Homepage for the OAuth 2.0 application is required.'\n                    />\n                ),\n            });\n\n            return;\n        }\n\n        const callbackUrls = [];\n        for (let callbackUrl of this.state.callbackUrls.split('\\n')) {\n            callbackUrl = callbackUrl.trim();\n\n            if (callbackUrl.length > 0) {\n                callbackUrls.push(callbackUrl);\n            }\n        }\n\n        if (callbackUrls.length === 0) {\n            this.setState({\n                saving: false,\n                clientError: (\n                    <FormattedMessage\n                        id='add_oauth_app.callbackUrlsRequired'\n                        defaultMessage='One or more callback URLs are required.'\n                    />\n                ),\n            });\n\n            return;\n        }\n\n        const app = {\n            name: this.state.name,\n            callback_urls: callbackUrls,\n            homepage: this.state.homepage,\n            description: this.state.description,\n            is_trusted: this.state.is_trusted,\n            icon_url: this.state.icon_url,\n        } as OAuthApp;\n\n        this.props.action(app).then(() => this.setState({saving: false}));\n    };\n\n    updateName = (e: ChangeEvent<HTMLInputElement>) => {\n        this.setState({\n            name: e.target.value,\n        });\n    };\n\n    updateTrusted = (e: ChangeEvent<HTMLInputElement>) => {\n        this.setState({\n            is_trusted: e.target.value === 'true',\n        });\n    };\n\n    updateDescription = (e: ChangeEvent<HTMLInputElement>) => {\n        this.setState({\n            description: e.target.value,\n        });\n    };\n\n    updateHomepage = (e: ChangeEvent<HTMLInputElement>) => {\n        this.setState({\n            homepage: e.target.value,\n        });\n    };\n\n    updateIconUrl = (e: ChangeEvent<HTMLInputElement>) => {\n        this.setState({\n            has_icon: false,\n            icon_url: e.target.value,\n        });\n        this.image.src = e.target.value;\n    };\n\n    updateCallbackUrls = (e: ChangeEvent<HTMLTextAreaElement>) => {\n        this.setState({\n            callbackUrls: e.target.value,\n        });\n    };\n\n    render() {\n        const headerToRender = this.props.header;\n        const footerToRender = this.props.footer;\n        const renderExtra = this.props.renderExtra;\n\n        let icon;\n        if (this.state.has_icon) {\n            icon = (\n                <div className='integration__icon'>\n                    <img\n                        alt={'integration icon'}\n                        src={this.state.icon_url}\n                    />\n                </div>\n            );\n        }\n\n        const trusted = (\n            <SystemPermissionGate permissions={[Permissions.MANAGE_SYSTEM]}>\n                <div className='form-group'>\n                    <label\n                        className='control-label col-sm-4'\n                        htmlFor='is_trusted'\n                    >\n                        <FormattedMessage\n                            id='installed_oauth_apps.trusted'\n                            defaultMessage='Is Trusted'\n                        />\n                    </label>\n                    <div className='col-md-5 col-sm-8'>\n                        <label className='radio-inline'>\n                            <input\n                                type='radio'\n                                value='true'\n                                name='is_trusted'\n                                checked={this.state.is_trusted}\n                                onChange={this.updateTrusted}\n                            />\n                            <FormattedMessage\n                                id='installed_oauth_apps.trusted.yes'\n                                defaultMessage='Yes'\n                            />\n                        </label>\n                        <label className='radio-inline'>\n                            <input\n                                type='radio'\n                                value='false'\n                                name='is_trusted'\n                                checked={!this.state.is_trusted}\n                                onChange={this.updateTrusted}\n                            />\n                            <FormattedMessage\n                                id='installed_oauth_apps.trusted.no'\n                                defaultMessage='No'\n                            />\n                        </label>\n                        <div className='form__help'>\n                            <FormattedMessage\n                                id='add_oauth_app.trusted.help'\n                                defaultMessage='If true, the OAuth 2.0 application is considered trusted by the Mattermost server and does not require the user to accept authorization. If false, a window opens to ask the user to accept or deny the authorization.'\n                            />\n                        </div>\n                    </div>\n                </div>\n            </SystemPermissionGate>\n        );\n\n        return (\n            <div className='backstage-content'>\n                <BackstageHeader>\n                    <Link to={`/${this.props.team.name}/integrations/oauth2-apps`}>\n                        <FormattedMessage\n                            id='installed_oauth_apps.header'\n                            defaultMessage='Installed OAuth2 Apps'\n                        />\n                    </Link>\n                    <FormattedMessage\n                        id={headerToRender.id}\n                        defaultMessage={headerToRender.defaultMessage}\n                    />\n                </BackstageHeader>\n                <div className='backstage-form'>\n                    {icon}\n                    <form className='form-horizontal'>\n                        {trusted}\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='name'\n                            >\n                                <FormattedMessage\n                                    id='installed_oauth_apps.name'\n                                    defaultMessage='Display Name'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <input\n                                    id='name'\n                                    type='text'\n                                    maxLength={64}\n                                    className='form-control'\n                                    value={this.state.name}\n                                    onChange={this.updateName}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_oauth_app.name.help'\n                                        defaultMessage='Specify the display name, of up to 64 characters, for your OAuth 2.0 application.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='description'\n                            >\n                                <FormattedMessage\n                                    id='installed_oauth_apps.description'\n                                    defaultMessage='Description'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <input\n                                    id='description'\n                                    type='text'\n                                    maxLength={512}\n                                    className='form-control'\n                                    value={this.state.description}\n                                    onChange={this.updateDescription}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_oauth_app.description.help'\n                                        defaultMessage='Describe your OAuth 2.0 application.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='homepage'\n                            >\n                                <FormattedMessage\n                                    id='installed_oauth_apps.homepage'\n                                    defaultMessage='Homepage'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <input\n                                    id='homepage'\n                                    type='url'\n                                    maxLength={256}\n                                    className='form-control'\n                                    value={this.state.homepage}\n                                    onChange={this.updateHomepage}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_oauth_app.homepage.help'\n                                        defaultMessage='This is the URL for the homepage of the OAuth 2.0 application. Depending on your server configuration, use HTTP or HTTPS in the URL.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='icon_url'\n                            >\n                                <FormattedMessage\n                                    id='installed_oauth_apps.iconUrl'\n                                    defaultMessage='Icon URL'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <input\n                                    id='icon_url'\n                                    ref={this.icon_url}\n                                    type='url'\n                                    maxLength={512}\n                                    className='form-control'\n                                    value={this.state.icon_url}\n                                    onChange={this.updateIconUrl}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_oauth_app.icon.help'\n                                        defaultMessage='(Optional) The URL of the image used for your OAuth 2.0 application. Make sure you use HTTP or HTTPS in your URL.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='callbackUrls'\n                            >\n                                <FormattedMessage\n                                    id='installed_oauth_apps.callbackUrls'\n                                    defaultMessage='Callback URLs (One Per Line)'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <textarea\n                                    id='callbackUrls'\n                                    rows={3}\n                                    maxLength={1024}\n                                    className='form-control'\n                                    value={this.state.callbackUrls}\n                                    onChange={this.updateCallbackUrls}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_oauth_app.callbackUrls.help'\n                                        defaultMessage='The redirect URIs to which the service will redirect users after accepting or denying authorization of your application, and which will handle authorization codes or access tokens. Must be a valid URL and start with http:// or https://.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='backstage-form__footer'>\n                            <FormError\n                                type='backstage'\n                                errors={[this.props.serverError, this.state.clientError]}\n                            />\n                            <Link\n                                className='btn btn-tertiary'\n                                to={`/${this.props.team.name}/integrations/oauth2-apps`}\n                            >\n                                <FormattedMessage\n                                    id='installed_oauth_apps.cancel'\n                                    defaultMessage='Cancel'\n                                />\n                            </Link>\n                            <SpinnerButton\n                                className='btn btn-primary'\n                                type='submit'\n                                spinning={this.state.saving}\n                                spinningText={localizeMessage(this.props.loading?.id || '', (this.props.loading?.defaultMessage || '') as string)}\n                                onClick={this.handleSubmit}\n                                id='saveOauthApp'\n                            >\n                                <FormattedMessage\n                                    id={footerToRender.id}\n                                    defaultMessage={footerToRender.defaultMessage}\n                                />\n                            </SpinnerButton>\n                            {renderExtra}\n                        </div>\n                    </form>\n                </div>\n            </div>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React, {useState} from 'react';\nimport {defineMessages} from 'react-intl';\nimport {useHistory} from 'react-router-dom';\n\nimport type {OAuthApp} from '@mattermost/types/integrations';\nimport type {Team} from '@mattermost/types/teams';\n\nimport type {ActionResult} from 'mattermost-redux/types/actions.js';\n\nimport AbstractOAuthApp from '../abstract_oauth_app';\n\nconst messages = defineMessages({\n    footer: {\n        id: 'installed_oauth_apps.save',\n        defaultMessage: 'Save',\n    },\n    header: {\n        id: 'add_oauth_app.header',\n        defaultMessage: 'Add',\n    },\n    loading: {\n        id: 'installed_oauth_apps.saving',\n        defaultMessage: 'Saving...',\n    },\n});\n\nexport type Props = {\n\n    /**\n    * The team data\n    */\n    team: Team;\n\n    actions: {\n\n        /**\n        * The function to call to add new OAuthApp\n        */\n        addOAuthApp: (app: OAuthApp) => Promise<ActionResult<OAuthApp>>;\n    };\n};\n\nconst AddOAuthApp = ({team, actions}: Props): JSX.Element => {\n    const history = useHistory();\n\n    const [serverError, setServerError] = useState('');\n\n    const addOAuthApp = async (app: OAuthApp) => {\n        setServerError('');\n\n        const {data, error} = await actions.addOAuthApp(app);\n        if (data) {\n            history.push(`/${team.name}/integrations/confirm?type=oauth2-apps&id=${data.id}`);\n            return;\n        }\n\n        if (error) {\n            setServerError(error.message);\n        }\n    };\n\n    return (\n        <AbstractOAuthApp\n            team={team}\n            header={messages.header}\n            footer={messages.footer}\n            loading={messages.loading}\n            action={addOAuthApp}\n            serverError={serverError}\n        />\n    );\n};\n\nexport default AddOAuthApp;\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux';\nimport type {Dispatch} from 'redux';\n\nimport {addOAuthApp} from 'mattermost-redux/actions/integrations';\n\nimport AddOAuthApp from './add_oauth_app';\n\nfunction mapDispatchToProps(dispatch: Dispatch) {\n    return {\n        actions: bindActionCreators({\n            addOAuthApp,\n        }, dispatch),\n    };\n}\n\nexport default connect(null, mapDispatchToProps)(AddOAuthApp);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from 'react';\nimport type {ChangeEventHandler, FormEvent, MouseEvent} from 'react';\nimport {FormattedMessage} from 'react-intl';\nimport type {MessageDescriptor} from 'react-intl';\nimport {Link} from 'react-router-dom';\n\nimport type {OutgoingWebhook} from '@mattermost/types/integrations';\nimport type {Team} from '@mattermost/types/teams';\n\nimport BackstageHeader from 'components/backstage/components/backstage_header';\nimport ChannelSelect from 'components/channel_select';\nimport ExternalLink from 'components/external_link';\nimport FormError from 'components/form_error';\nimport SpinnerButton from 'components/spinner_button';\n\nimport {DocLinks} from 'utils/constants';\nimport {localizeMessage} from 'utils/utils';\n\ninterface State {\n    callbackUrls: string;\n    channelId: string;\n    clientError: JSX.Element | null;\n    contentType: string;\n    description: string;\n    displayName: string;\n    iconURL: string;\n    saving: boolean;\n    triggerWhen: number;\n    triggerWords: string;\n    username: string;\n}\n\ninterface Props {\n\n    /**\n     * The current team\n     */\n    team: Team;\n\n    /**\n     * The header text to render, has id and defaultMessage\n     */\n    header: MessageDescriptor;\n\n    /**\n     * The footer text to render, has id and defaultMessage\n     */\n    footer: MessageDescriptor;\n\n    /**\n    * The spinner loading text to render, has id and defaultMessage\n    */\n    loading: MessageDescriptor;\n\n    /**\n     * Any extra component/node to render\n     */\n    renderExtra: React.ReactNode;\n\n    /**\n     * The server error text after a failed action\n     */\n    serverError: string;\n\n    /**\n     * The hook used to set the initial state\n     */\n    initialHook?: OutgoingWebhook;\n\n    /**\n     * The async function to run when the action button is pressed\n     */\n    action: (hook: OutgoingWebhook) => Promise<void>;\n\n    /**\n     * Whether to allow configuration of the default post username.\n     */\n    enablePostUsernameOverride: boolean;\n\n    /**\n     * Whether to allow configuration of the default post icon.\n     */\n    enablePostIconOverride: boolean;\n}\n\nexport default class AbstractOutgoingWebhook extends React.PureComponent<Props, State> {\n    constructor(props: Props | Readonly<Props>) {\n        super(props);\n\n        this.state = this.getStateFromHook(this.props.initialHook);\n    }\n\n    getStateFromHook = (hook?: OutgoingWebhook) => {\n        let triggerWords = '';\n        if (hook?.trigger_words) {\n            let i = 0;\n            for (i = 0; i < hook.trigger_words.length; i++) {\n                triggerWords += hook.trigger_words[i] + '\\n';\n            }\n        }\n\n        let callbackUrls = '';\n        if (hook?.callback_urls) {\n            let i = 0;\n            for (i = 0; i < hook.callback_urls.length; i++) {\n                callbackUrls += hook.callback_urls[i] + '\\n';\n            }\n        }\n\n        return {\n            displayName: hook?.display_name || '',\n            description: hook?.description || '',\n            contentType: hook?.content_type || 'application/x-www-form-urlencoded',\n            channelId: hook?.channel_id || '',\n            triggerWords,\n            triggerWhen: hook?.trigger_when || 0,\n            callbackUrls,\n            saving: false,\n            clientError: null,\n            username: hook?.username || '',\n            iconURL: hook?.icon_url || '',\n        };\n    };\n\n    handleSubmit = (e: MouseEvent<HTMLElement> | FormEvent<HTMLFormElement>) => {\n        e.preventDefault();\n\n        if (this.state.saving) {\n            return;\n        }\n\n        this.setState({\n            saving: true,\n            clientError: null,\n        });\n\n        const triggerWords = [];\n        if (this.state.triggerWords) {\n            for (let triggerWord of this.state.triggerWords.split('\\n')) {\n                triggerWord = triggerWord.trim();\n\n                if (triggerWord.length > 0) {\n                    triggerWords.push(triggerWord);\n                }\n            }\n        }\n\n        if (!this.state.channelId && triggerWords.length === 0) {\n            this.setState({\n                saving: false,\n                clientError: (\n                    <FormattedMessage\n                        id='add_outgoing_webhook.triggerWordsOrChannelRequired'\n                        defaultMessage='A valid channel or a list of trigger words is required'\n                    />\n                ),\n            });\n\n            return;\n        }\n\n        const callbackUrls = [];\n        for (let callbackUrl of this.state.callbackUrls.split('\\n')) {\n            callbackUrl = callbackUrl.trim();\n\n            if (callbackUrl.length > 0) {\n                callbackUrls.push(callbackUrl);\n            }\n        }\n\n        if (callbackUrls.length === 0) {\n            this.setState({\n                saving: false,\n                clientError: (\n                    <FormattedMessage\n                        id='add_outgoing_webhook.callbackUrlsRequired'\n                        defaultMessage='One or more callback URLs are required'\n                    />\n                ),\n            });\n\n            return;\n        }\n\n        const hook = {\n            team_id: this.props.team.id,\n            channel_id: this.state.channelId,\n            trigger_words: triggerWords,\n            trigger_when: this.state.triggerWhen,\n            callback_urls: callbackUrls,\n            display_name: this.state.displayName,\n            content_type: this.state.contentType,\n            description: this.state.description,\n            username: this.state.username,\n            icon_url: this.state.iconURL,\n            id: this.props.initialHook?.id || '',\n            create_at: this.props.initialHook?.create_at || 0,\n            update_at: this.props.initialHook?.update_at || 0,\n            delete_at: this.props.initialHook?.delete_at || 0,\n            creator_id: this.props.initialHook?.creator_id || '',\n            token: this.props.initialHook?.token || '',\n        };\n\n        this.props.action(hook).then(() => this.setState({saving: false}));\n    };\n\n    updateDisplayName: ChangeEventHandler<HTMLInputElement> = (e) => {\n        this.setState({\n            displayName: e.target.value,\n        });\n    };\n\n    updateDescription: ChangeEventHandler<HTMLInputElement> = (e) => {\n        this.setState({\n            description: e.target.value,\n        });\n    };\n\n    updateContentType: ChangeEventHandler<HTMLSelectElement> = (e) => {\n        this.setState({\n            contentType: e.target.value,\n        });\n    };\n\n    updateChannelId: ChangeEventHandler<HTMLSelectElement> = (e) => {\n        this.setState({\n            channelId: e.target.value,\n        });\n    };\n\n    updateTriggerWords: ChangeEventHandler<HTMLTextAreaElement> = (e) => {\n        this.setState({\n            triggerWords: e.target.value,\n        });\n    };\n\n    updateTriggerWhen: ChangeEventHandler<HTMLSelectElement> = (e) => {\n        this.setState({\n            triggerWhen: parseInt(e.target.value, 10),\n        });\n    };\n\n    updateCallbackUrls: ChangeEventHandler<HTMLTextAreaElement> = (e) => {\n        this.setState({\n            callbackUrls: e.target.value,\n        });\n    };\n\n    updateUsername: ChangeEventHandler<HTMLInputElement> = (e) => {\n        this.setState({\n            username: e.target.value,\n        });\n    };\n\n    updateIconURL: ChangeEventHandler<HTMLInputElement> = (e) => {\n        this.setState({\n            iconURL: e.target.value,\n        });\n    };\n\n    render() {\n        const contentTypeOption1 = 'application/x-www-form-urlencoded';\n        const contentTypeOption2 = 'application/json';\n\n        const headerToRender = this.props.header;\n        const footerToRender = this.props.footer;\n        const renderExtra = this.props.renderExtra;\n\n        return (\n            <div className='backstage-content'>\n                <BackstageHeader>\n                    <Link to={`/${this.props.team.name}/integrations/outgoing_webhooks`}>\n                        <FormattedMessage\n                            id='add_outgoing_webhook.header'\n                            defaultMessage='Outgoing Webhooks'\n                        />\n                    </Link>\n                    <FormattedMessage\n                        id={headerToRender.id}\n                        defaultMessage={headerToRender.defaultMessage}\n                    />\n                </BackstageHeader>\n                <div className='backstage-form'>\n                    <form\n                        className='form-horizontal'\n                        onSubmit={this.handleSubmit}\n                    >\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='displayName'\n                            >\n                                <FormattedMessage\n                                    id='add_outgoing_webhook.displayName'\n                                    defaultMessage='Title'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <input\n                                    id='displayName'\n                                    type='text'\n                                    maxLength={64}\n                                    className='form-control'\n                                    value={this.state.displayName}\n                                    onChange={this.updateDisplayName}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_outgoing_webhook.displayName.help'\n                                        defaultMessage='Specify a title, of up to 64 characters, for the webhook settings page.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='description'\n                            >\n                                <FormattedMessage\n                                    id='add_outgoing_webhook.description'\n                                    defaultMessage='Description'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <input\n                                    id='description'\n                                    type='text'\n                                    maxLength={500}\n                                    className='form-control'\n                                    value={this.state.description}\n                                    onChange={this.updateDescription}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_outgoing_webhook.description.help'\n                                        defaultMessage='Describe your outgoing webhook.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='contentType'\n                            >\n                                <FormattedMessage\n                                    id='add_outgoing_webhook.content_Type'\n                                    defaultMessage='Content Type'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <select\n                                    className='form-control'\n                                    value={this.state.contentType}\n                                    onChange={this.updateContentType}\n                                >\n                                    <option\n                                        value={contentTypeOption1}\n                                    >\n                                        {contentTypeOption1}\n                                    </option>\n                                    <option\n                                        value={contentTypeOption2}\n                                    >\n                                        {contentTypeOption2}\n                                    </option>\n                                </select>\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_outgoing_webhook.contentType.help1'\n                                        defaultMessage='Specify the content type by which to send the request.'\n                                    />\n                                </div>\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_outgoing_webhook.contentType.help2'\n                                        defaultMessage='For the server to encode the parameters in a URL format in the request body, select application/x-www-form-urlencoded.'\n                                    />\n                                </div>\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_outgoing_webhook.contentType.help3'\n                                        defaultMessage='For the server to format the request body as JSON, select application/json.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='channelId'\n                            >\n                                <FormattedMessage\n                                    id='add_outgoing_webhook.channel'\n                                    defaultMessage='Channel'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <ChannelSelect\n                                    value={this.state.channelId}\n                                    onChange={this.updateChannelId}\n                                    selectOpen={true}\n                                    selectPrivate={false}\n                                    selectDm={false}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_outgoing_webhook.channel.help'\n                                        defaultMessage='This field is optional if you specify at least one trigger word. Specify the public channel that delivers the payload to the webhook.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='triggerWords'\n                            >\n                                <FormattedMessage\n                                    id='add_outgoing_webhook.triggerWords'\n                                    defaultMessage='Trigger Words (One Per Line)'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <textarea\n                                    id='triggerWords'\n                                    rows={3}\n                                    maxLength={1000}\n                                    className='form-control'\n                                    value={this.state.triggerWords}\n                                    onChange={this.updateTriggerWords}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_outgoing_webhook.triggerWords.help'\n                                        defaultMessage='Specify the trigger words that send an HTTP POST request to your application. The trigger can be for the channel, the outgoing webhook, or both. If you select only Channel, trigger words are optional. If you select both, the message must match both values.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='triggerWords'\n                            >\n                                <FormattedMessage\n                                    id='add_outgoing_webhook.triggerWordsTriggerWhen'\n                                    defaultMessage='Trigger When'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <select\n                                    id='triggerWhen'\n                                    className='form-control'\n                                    value={this.state.triggerWhen}\n                                    onChange={this.updateTriggerWhen}\n                                >\n                                    <option\n                                        value='0'\n                                    >\n                                        {localizeMessage('add_outgoing_webhook.triggerWordsTriggerWhenFullWord', 'First word matches a trigger word exactly')}\n                                    </option>\n                                    <option\n                                        value='1'\n                                    >\n                                        {localizeMessage('add_outgoing_webhook.triggerWordsTriggerWhenStartsWith', 'First word starts with a trigger word')}\n                                    </option>\n                                </select>\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_outgoing_webhook.triggerWordsTriggerWhen.help'\n                                        defaultMessage='Specify when to trigger the outgoing webhook.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='callbackUrls'\n                            >\n                                <FormattedMessage\n                                    id='add_outgoing_webhook.callbackUrls'\n                                    defaultMessage='Callback URLs (One Per Line)'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <textarea\n                                    id='callbackUrls'\n                                    rows={3}\n                                    maxLength={1000}\n                                    className='form-control'\n                                    value={this.state.callbackUrls}\n                                    onChange={this.updateCallbackUrls}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_outgoing_webhook.callbackUrls.help'\n                                        defaultMessage='Specify the URL that the messages will be sent to. If the URL is private, add it as a {link}.'\n                                        values={{\n                                            link: (\n                                                <ExternalLink\n                                                    href={DocLinks.TRUSTED_CONNECTION}\n                                                    location='abstract_outgoing_webhook'\n                                                >\n                                                    <FormattedMessage\n                                                        id='add_outgoing_webhook.callbackUrls.helpLinkText'\n                                                        defaultMessage='trusted internal connection'\n                                                    />\n                                                </ExternalLink>\n                                            ),\n                                        }}\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        {this.props.enablePostUsernameOverride &&\n                            <div className='form-group'>\n                                <label\n                                    className='control-label col-sm-4'\n                                    htmlFor='username'\n                                >\n                                    <FormattedMessage\n                                        id='add_outgoing_webhook.username'\n                                        defaultMessage='Username'\n                                    />\n                                </label>\n                                <div className='col-md-5 col-sm-8'>\n                                    <input\n                                        id='username'\n                                        type='text'\n                                        maxLength={22}\n                                        className='form-control'\n                                        value={this.state.username}\n                                        onChange={this.updateUsername}\n                                    />\n                                    <div className='form__help'>\n                                        <FormattedMessage\n                                            id='add_outgoing_webhook.username.help'\n                                            defaultMessage='Specify the username this integration will post as. Usernames can be up to 22 characters, and contain lowercase letters, numbers and the symbols \\\"-\\\", \\\"_\\\", and \\\".\\\". If left blank, the name specified by the webhook creator is used.'\n                                        />\n                                    </div>\n                                </div>\n                            </div>\n                        }\n                        {this.props.enablePostIconOverride &&\n                            <div className='form-group'>\n                                <label\n                                    className='control-label col-sm-4'\n                                    htmlFor='iconURL'\n                                >\n                                    <FormattedMessage\n                                        id='add_outgoing_webhook.icon_url'\n                                        defaultMessage='Profile Picture'\n                                    />\n                                </label>\n                                <div className='col-md-5 col-sm-8'>\n                                    <input\n                                        id='iconURL'\n                                        type='text'\n                                        maxLength={1024}\n                                        className='form-control'\n                                        value={this.state.iconURL}\n                                        onChange={this.updateIconURL}\n                                    />\n                                    <div className='form__help'>\n                                        <FormattedMessage\n                                            id='add_outgoing_webhook.icon_url.help'\n                                            defaultMessage='Enter the URL of a .png or .jpg file for this integration to use as the profile picture when posting. The file should be at least 128 pixels by 128 pixels. If left blank, the profile picture specified by the webhook creator is used.'\n                                        />\n                                    </div>\n                                </div>\n                            </div>\n                        }\n                        <div className='backstage-form__footer'>\n                            <FormError\n                                type='backstage'\n                                errors={[this.props.serverError, this.state.clientError]}\n                            />\n                            <Link\n                                className='btn btn-tertiary'\n                                to={`/${this.props.team.name}/integrations/outgoing_webhooks`}\n                            >\n                                <FormattedMessage\n                                    id='add_outgoing_webhook.cancel'\n                                    defaultMessage='Cancel'\n                                />\n                            </Link>\n                            <SpinnerButton\n                                className='btn btn-primary'\n                                type='submit'\n                                spinning={this.state.saving}\n                                spinningText={localizeMessage(this.props.loading.id as string, this.props.loading.defaultMessage as string)}\n                                onClick={this.handleSubmit}\n                                id='saveWebhook'\n                            >\n                                <FormattedMessage\n                                    id={footerToRender.id}\n                                    defaultMessage={footerToRender.defaultMessage}\n                                />\n                            </SpinnerButton>\n                            {renderExtra}\n                        </div>\n                    </form>\n                </div>\n            </div>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React, {useState} from 'react';\nimport {defineMessages} from 'react-intl';\nimport {useHistory} from 'react-router-dom';\n\nimport type {OutgoingWebhook} from '@mattermost/types/integrations';\nimport type {Team} from '@mattermost/types/teams';\n\nimport type {ActionResult} from 'mattermost-redux/types/actions';\n\nimport AbstractOutgoingWebhook from 'components/integrations/abstract_outgoing_webhook';\n\nconst messages = defineMessages({\n    footer: {\n        id: 'add_outgoing_webhook.save',\n        defaultMessage: 'Save',\n    },\n    header: {\n        id: 'integrations.add',\n        defaultMessage: 'Add',\n    },\n    loading: {\n        id: 'add_outgoing_webhook.saving',\n        defaultMessage: 'Saving...',\n    },\n});\n\nexport type Props = {\n\n    /**\n     * The current team\n     */\n    team: Team;\n\n    actions: {\n\n        /**\n        * The function to call to add a new outgoing webhook\n        */\n        createOutgoingHook: (hook: OutgoingWebhook) => Promise<ActionResult<OutgoingWebhook>>;\n    };\n\n    /**\n     * Whether to allow configuration of the default post username.\n     */\n    enablePostUsernameOverride: boolean;\n\n    /**\n     * Whether to allow configuration of the default post icon.\n     */\n    enablePostIconOverride: boolean;\n};\n\nconst AddOutgoingWebhook = ({team, actions, enablePostUsernameOverride, enablePostIconOverride}: Props): JSX.Element => {\n    const history = useHistory();\n\n    const [serverError, setServerError] = useState('');\n\n    const addOutgoingHook = async (hook: OutgoingWebhook) => {\n        setServerError('');\n\n        const {data, error} = await actions.createOutgoingHook(hook);\n        if (data) {\n            history.push(`/${team.name}/integrations/confirm?type=outgoing_webhooks&id=${data.id}`);\n            return;\n        }\n\n        if (error) {\n            setServerError(error.message);\n        }\n    };\n\n    return (\n        <AbstractOutgoingWebhook\n            team={team}\n            header={messages.header}\n            footer={messages.footer}\n            loading={messages.loading}\n            renderExtra={''}\n            action={addOutgoingHook}\n            serverError={serverError}\n            enablePostUsernameOverride={enablePostUsernameOverride}\n            enablePostIconOverride={enablePostIconOverride}\n        />\n    );\n};\n\nexport default AddOutgoingWebhook;\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux';\nimport type {Dispatch} from 'redux';\n\nimport {createOutgoingHook} from 'mattermost-redux/actions/integrations';\nimport {getConfig} from 'mattermost-redux/selectors/entities/general';\n\nimport type {GlobalState} from 'types/store';\n\nimport AddOutgoingWebhook from './add_outgoing_webhook';\n\nfunction mapStateToProps(state: GlobalState) {\n    const config = getConfig(state);\n    const enablePostUsernameOverride = config.EnablePostUsernameOverride === 'true';\n    const enablePostIconOverride = config.EnablePostIconOverride === 'true';\n    return {\n        enablePostUsernameOverride,\n        enablePostIconOverride,\n    };\n}\n\nfunction mapDispatchToProps(dispatch: Dispatch) {\n    return {\n        actions: bindActionCreators({\n            createOutgoingHook,\n        }, dispatch),\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AddOutgoingWebhook);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport type {Bot, BotPatch} from '@mattermost/types/bots';\n\nimport {BotTypes} from 'mattermost-redux/action_types';\nimport {Client4} from 'mattermost-redux/client';\n\nimport {bindClientFunc} from './helpers';\n\nconst BOTS_PER_PAGE_DEFAULT = 20;\n\nexport function createBot(bot: Partial<Bot>) {\n    return bindClientFunc({\n        clientFunc: Client4.createBot,\n        onSuccess: BotTypes.RECEIVED_BOT_ACCOUNT,\n        params: [\n            bot,\n        ],\n    });\n}\n\nexport function patchBot(botUserId: string, botPatch: Partial<BotPatch>) {\n    return bindClientFunc({\n        clientFunc: Client4.patchBot,\n        onSuccess: BotTypes.RECEIVED_BOT_ACCOUNT,\n        params: [\n            botUserId,\n            botPatch,\n        ],\n    });\n}\n\nexport function loadBot(botUserId: string) {\n    return bindClientFunc({\n        clientFunc: Client4.getBot,\n        onSuccess: BotTypes.RECEIVED_BOT_ACCOUNT,\n        params: [\n            botUserId,\n        ],\n    });\n}\n\nexport function loadBots(page = 0, perPage = BOTS_PER_PAGE_DEFAULT) {\n    return bindClientFunc({\n        clientFunc: Client4.getBotsIncludeDeleted,\n        onSuccess: BotTypes.RECEIVED_BOT_ACCOUNTS,\n        params: [\n            page,\n            perPage,\n        ],\n    });\n}\n\nexport function disableBot(botUserId: string) {\n    return bindClientFunc({\n        clientFunc: Client4.disableBot,\n        onSuccess: BotTypes.RECEIVED_BOT_ACCOUNT,\n        params: [\n            botUserId,\n        ],\n    });\n}\n\nexport function enableBot(botUserId: string) {\n    return bindClientFunc({\n        clientFunc: Client4.enableBot,\n        onSuccess: BotTypes.RECEIVED_BOT_ACCOUNT,\n        params: [\n            botUserId,\n        ],\n    });\n}\n\nexport function assignBot(botUserId: string, newOwnerId: string) {\n    return bindClientFunc({\n        clientFunc: Client4.assignBot,\n        onSuccess: BotTypes.RECEIVED_BOT_ACCOUNT,\n        params: [\n            botUserId,\n            newOwnerId,\n        ],\n    });\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport type {IncomingWebhook, OutgoingWebhook, Command} from '@mattermost/types/integrations';\nimport type {GlobalState} from '@mattermost/types/store';\nimport type {IDMappedObjects} from '@mattermost/types/utilities';\n\nimport {createSelector} from 'mattermost-redux/selectors/create_selector';\nimport {getCurrentTeamId} from 'mattermost-redux/selectors/entities/teams';\n\nimport {appsEnabled} from './apps';\n\nexport function getIncomingHooks(state: GlobalState) {\n    return state.entities.integrations.incomingHooks;\n}\n\nexport function getIncomingHooksTotalCount(state: GlobalState) {\n    return state.entities.integrations.incomingHooksTotalCount;\n}\n\nexport function getOutgoingHooks(state: GlobalState) {\n    return state.entities.integrations.outgoingHooks;\n}\n\nexport function getCommands(state: GlobalState) {\n    return state.entities.integrations.commands;\n}\n\nexport function getOAuthApps(state: GlobalState) {\n    return state.entities.integrations.oauthApps;\n}\n\nexport function getOutgoingOAuthConnections(state: GlobalState) {\n    return state.entities.integrations.outgoingOAuthConnections;\n}\n\nexport const getFilteredIncomingHooks: (state: GlobalState) => IncomingWebhook[] = createSelector(\n    'getFilteredIncomingHooks',\n    getCurrentTeamId,\n    getIncomingHooks,\n    (teamId, hooks) => {\n        return Object.keys(hooks).\n            map((key) => hooks[key]).\n            filter((incomingHook) => incomingHook.team_id === teamId);\n    },\n);\n\nexport const getAppsOAuthAppIDs: (state: GlobalState) => string[] = createSelector(\n    'getAppsOAuthAppIDs',\n    appsEnabled,\n    (state: GlobalState) => state.entities.integrations.appsOAuthAppIDs,\n    (apps, ids) => {\n        return apps ? ids : [];\n    },\n);\n\nexport const getAppsBotIDs: (state: GlobalState) => string[] = createSelector(\n    'getAppsBotIDs',\n    appsEnabled,\n    (state: GlobalState) => state.entities.integrations.appsBotIDs,\n    (apps, ids) => {\n        return apps ? ids : [];\n    },\n);\n\nexport function getSystemCommands(state: GlobalState) {\n    return state.entities.integrations.systemCommands;\n}\n\n/**\n * get outgoing hooks in current team\n */\nexport const getOutgoingHooksInCurrentTeam: (state: GlobalState) => OutgoingWebhook[] = createSelector(\n    'getOutgoingHooksInCurrentTeam',\n    getCurrentTeamId,\n    getOutgoingHooks,\n    (teamId, hooks) => {\n        return Object.values(hooks).filter((o) => o.team_id === teamId);\n    },\n);\n\nexport const getAllCommands: (state: GlobalState) => IDMappedObjects<Command> = createSelector(\n    'getAllCommands',\n    getCommands,\n    getSystemCommands,\n    (commands, systemCommands) => {\n        return {\n            ...commands,\n            ...systemCommands,\n        };\n    },\n);\n\nexport const getAutocompleteCommandsList: (state: GlobalState) => Command[] = createSelector(\n    'getAutocompleteCommandsList',\n    getAllCommands,\n    getCurrentTeamId,\n    (commands, currentTeamId) => {\n        return Object.values(commands).filter((command) => {\n            return command && (!command.team_id || command.team_id === currentTeamId) && command.auto_complete;\n        }).sort((a, b) => a.display_name.localeCompare(b.display_name));\n    },\n);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React, {useState} from 'react';\nimport type {ChangeEvent, ReactNode} from 'react';\nimport {FormattedMessage, useIntl} from 'react-intl';\nimport {Link} from 'react-router-dom';\n\nimport LoadingScreen from 'components/loading_screen';\nimport NextIcon from 'components/widgets/icons/fa_next_icon';\nimport PreviousIcon from 'components/widgets/icons/fa_previous_icon';\nimport SearchIcon from 'components/widgets/icons/fa_search_icon';\n\nimport {localizeMessage} from 'utils/utils';\n\nimport './backstage_list.scss';\n\ntype Props = {\n    children?: JSX.Element[] | ((filter: string) => [JSX.Element[], boolean]);\n    header: ReactNode;\n    addLink?: string;\n    addText?: ReactNode;\n    addButtonId?: string;\n    emptyText?: ReactNode;\n    emptyTextSearch?: JSX.Element;\n    helpText?: ReactNode;\n    loading: boolean;\n    searchPlaceholder?: string;\n    nextPage?: () => void;\n    previousPage?: () => void;\n    page?: number;\n    pageSize?: number;\n    total?: number;\n};\n\nconst getPaging = (remainingProps: Props, childCount: number, hasFilter: boolean) => {\n    const page = (hasFilter || !remainingProps.page) ? 0 : remainingProps.page;\n    const pageSize = (hasFilter || !remainingProps.pageSize) ? childCount : remainingProps.pageSize;\n    const total = (hasFilter || !remainingProps.total) ? childCount : remainingProps.total;\n\n    let startCount = (page * pageSize) + 1;\n    let endCount = (page + 1) * pageSize;\n    endCount = endCount > total ? total : endCount;\n    if (endCount === 0) {\n        startCount = 0;\n    }\n\n    const isFirstPage = startCount <= 1;\n    const isLastPage = endCount >= total;\n\n    return {startCount, endCount, total, isFirstPage, isLastPage};\n};\n\nconst BackstageList = ({searchPlaceholder = localizeMessage('backstage_list.search', 'Search'), ...remainingProps}: Props) => {\n    const {formatMessage} = useIntl();\n\n    const [filter, setFilter] = useState('');\n    const updateFilter = (e: ChangeEvent<HTMLInputElement>) => setFilter(e.target.value);\n    const filterLowered = filter.toLowerCase();\n\n    let children = [];\n    let childCount = 0;\n    if (remainingProps.loading) {\n        children = [\n            <LoadingScreen\n                key='loading'\n            />,\n        ];\n    } else {\n        let hasChildren = true;\n        if (typeof remainingProps.children === 'function') {\n            [children, hasChildren] = remainingProps.children(filterLowered);\n        } else {\n            children = remainingProps.children as JSX.Element[];\n        }\n        children = React.Children.map(children, (child) => {\n            return React.cloneElement(child, {filterLowered});\n        });\n        if (children.length === 0 || !hasChildren) {\n            if (!filterLowered) {\n                if (remainingProps.emptyText) {\n                    children = [(\n                        <div\n                            className='backstage-list__item backstage-list__empty'\n                            key='emptyText'\n                        >\n                            {remainingProps.emptyText}\n                        </div>\n                    )];\n                }\n            } else if (remainingProps.emptyTextSearch) {\n                children = [(\n                    <div\n                        className='backstage-list__item backstage-list__empty'\n                        id='emptySearchResultsMessage'\n                        key='emptyTextSearch'\n                    >\n                        {React.cloneElement(remainingProps.emptyTextSearch, {values: {searchTerm: filterLowered}})}\n                    </div>\n                )];\n            }\n        } else {\n            childCount = children.length;\n        }\n    }\n\n    let addLink = null;\n\n    if (remainingProps.addLink && remainingProps.addText) {\n        addLink = (\n            <Link\n                className='add-link'\n                to={remainingProps.addLink}\n            >\n                <button\n                    type='button'\n                    className='btn btn-primary'\n                    id={remainingProps.addButtonId}\n                >\n                    <span>\n                        {remainingProps.addText}\n                    </span>\n                </button>\n            </Link>\n        );\n    }\n\n    const hasFilter = filter.length > 0;\n    const {startCount, endCount, total, isFirstPage, isLastPage} = getPaging(remainingProps, childCount, hasFilter);\n    const childrenToDisplay = childCount > 0 ? children.slice(startCount - 1, endCount) : children;\n\n    let previousPageFn = remainingProps.previousPage;\n    let nextPageFn = remainingProps.nextPage;\n    if (isFirstPage) {\n        previousPageFn = () => {};\n    }\n    if (isLastPage) {\n        nextPageFn = () => {};\n    }\n\n    return (\n        <div className='backstage-content'>\n            <div className='backstage-header'>\n                <h1>\n                    {remainingProps.header}\n                </h1>\n                {addLink}\n            </div>\n            <div className='backstage-filters'>\n                <div className='backstage-filter__search'>\n                    <SearchIcon/>\n                    <input\n                        type='search'\n                        className='form-control'\n                        placeholder={searchPlaceholder}\n                        value={filter}\n                        onChange={updateFilter}\n                        id='searchInput'\n                    />\n                </div>\n            </div>\n            <span className='backstage-list__help'>\n                {remainingProps.helpText}\n            </span>\n            <div className='backstage-list'>\n                {childrenToDisplay}\n            </div>\n            <div className='backstage-footer'>\n                <div className='backstage-footer__cell'>\n                    <FormattedMessage\n                        id='backstage_list.paginatorCount'\n                        defaultMessage='{startCount, number} - {endCount, number} of {total, number}'\n                        values={{\n                            startCount,\n                            endCount,\n                            total,\n                        }}\n                    />\n                    <button\n                        type='button'\n                        className={'btn btn-quaternary btn-icon btn-sm ml-2 prev ' + (isFirstPage ? 'disabled' : '')}\n                        onClick={previousPageFn}\n                        aria-label={formatMessage({id: 'backstage_list.previousButton.ariaLabel', defaultMessage: 'Previous'})}\n                    >\n                        <PreviousIcon/>\n                    </button>\n                    <button\n                        type='button'\n                        className={'btn btn-quaternary btn-icon btn-sm next ' + (isLastPage ? 'disabled' : '')}\n                        onClick={nextPageFn}\n                        aria-label={formatMessage({id: 'backstage_list.nextButton.ariaLabel', defaultMessage: 'Next'})}\n                    >\n                        <NextIcon/>\n                    </button>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default BackstageList;\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from 'react';\nimport type {ChangeEvent, SyntheticEvent, ReactNode} from 'react';\nimport {FormattedMessage} from 'react-intl';\nimport {Link} from 'react-router-dom';\n\nimport type {Bot as BotType} from '@mattermost/types/bots';\nimport type {Team} from '@mattermost/types/teams';\nimport type {UserProfile, UserAccessToken} from '@mattermost/types/users';\n\nimport type {ActionResult} from 'mattermost-redux/types/actions';\n\nimport ConfirmModal from 'components/confirm_modal';\nimport Markdown from 'components/markdown';\nimport SaveButton from 'components/save_button';\nimport WarningIcon from 'components/widgets/icons/fa_warning_icon';\n\nimport * as Utils from 'utils/utils';\n\nexport function matchesFilter(bot: BotType, filter?: string, owner?: UserProfile): boolean {\n    if (!filter) {\n        return true;\n    }\n    const username = bot.username || '';\n    const description = bot.description || '';\n    const displayName = bot.display_name || '';\n\n    let ownerUsername = 'plugin';\n    if (owner && owner.username) {\n        ownerUsername = owner.username;\n    }\n    return !(username.toLowerCase().indexOf(filter) === -1 &&\n        displayName.toLowerCase().indexOf(filter) === -1 &&\n        description.toLowerCase().indexOf(filter) === -1 &&\n        ownerUsername.toLowerCase().indexOf(filter) === -1);\n}\n\ntype Props = {\n\n    /**\n    *  Bot that we are displaying\n    */\n    bot: BotType;\n\n    /**\n    * Owner of the bot we are displaying\n    */\n    owner?: UserProfile;\n\n    /**\n    * User of the bot we are displaying\n    */\n    user: UserProfile;\n\n    /**\n    * The access tokens of the bot user\n    */\n    accessTokens: Record<string, UserAccessToken>;\n\n    /**\n    * String used for filtering bot items\n    */\n    filter?: string;\n\n    /**\n     * Determine whether this bot is managed by the app framework\n     */\n    fromApp: boolean;\n\n    actions: {\n\n        /**\n        * Disable a bot\n        */\n        disableBot: (userId: string) => Promise<ActionResult>;\n\n        /**\n        * Enable a bot\n        */\n        enableBot: (userId: string) => Promise<ActionResult>;\n\n        /**\n        * Access token managment\n        */\n        createUserAccessToken: (userId: string, description: string) => Promise<ActionResult<UserAccessToken>>;\n\n        revokeUserAccessToken: (tokenId: string) => Promise<ActionResult>;\n        enableUserAccessToken: (tokenId: string) => Promise<ActionResult>;\n        disableUserAccessToken: (tokenId: string) => Promise<ActionResult>;\n    };\n\n    /**\n    *  Only used for routing since backstage is team based.\n    */\n    team: Team;\n}\n\ntype State = {\n    confirmingId: string;\n    creatingTokenState: string;\n    token: UserAccessToken | Record<string, any>;\n    error: ReactNode;\n}\n\nexport default class Bot extends React.PureComponent<Props, State> {\n    public constructor(props: Props) {\n        super(props);\n\n        this.state = {\n            confirmingId: '',\n            creatingTokenState: 'CLOSED',\n            token: {},\n            error: '',\n        };\n    }\n\n    enableBot = (): void => {\n        this.props.actions.enableBot(this.props.bot.user_id);\n    };\n\n    disableBot = (): void => {\n        this.props.actions.disableBot(this.props.bot.user_id);\n    };\n\n    enableUserAccessToken = (id: string): void => {\n        this.props.actions.enableUserAccessToken(id);\n    };\n\n    disableUserAccessToken = (id: string): void => {\n        this.props.actions.disableUserAccessToken(id);\n    };\n\n    confirmRevokeToken = (id: string): void => {\n        this.setState({confirmingId: id});\n    };\n\n    revokeTokenConfirmed = (): void => {\n        this.props.actions.revokeUserAccessToken(this.state.confirmingId);\n        this.closeConfirm();\n    };\n\n    closeConfirm = (): void => {\n        this.setState({confirmingId: ''});\n    };\n\n    openCreateToken = (): void => {\n        this.setState({\n            creatingTokenState: 'OPEN',\n            token: {\n                description: '',\n            },\n        });\n    };\n\n    closeCreateToken = (): void => {\n        this.setState({\n            creatingTokenState: 'CLOSED',\n            token: {\n                description: '',\n            },\n        });\n    };\n\n    handleUpdateDescription = (e: ChangeEvent<HTMLInputElement>): void => {\n        const target = e.target as HTMLInputElement;\n        this.setState({\n            token: Object.assign({}, this.state.token, {description: target.value}),\n        });\n    };\n\n    handleCreateToken = async (e: SyntheticEvent): Promise<void> => {\n        e.preventDefault();\n\n        if (this.state.token.description === '') {\n            this.setState({error: (\n                <FormattedMessage\n                    id='bot.token.error.description'\n                    defaultMessage='Please enter a description.'\n                />\n            )});\n            return;\n        }\n\n        const {data, error} = await this.props.actions.createUserAccessToken(this.props.bot.user_id, this.state.token.description);\n        if (data) {\n            this.setState({creatingTokenState: 'CREATED', token: data});\n        } else if (error) {\n            this.setState({error: error.message});\n        }\n    };\n\n    public render(): JSX.Element | null {\n        const username = this.props.bot.username || '';\n        const description = this.props.bot.description || '';\n        const displayName = this.props.bot.display_name || '';\n\n        let ownerUsername = 'plugin';\n        if (this.props.fromApp) {\n            ownerUsername = 'Apps Framework';\n        } else if (this.props.owner && this.props.owner.username) {\n            ownerUsername = this.props.owner.username;\n        }\n        const filter = this.props.filter ? this.props.filter.toLowerCase() : '';\n        if (!matchesFilter(this.props.bot, filter, this.props.owner)) {\n            return null;\n        }\n\n        const tokenList = [];\n        Object.values(this.props.accessTokens).forEach((token) => {\n            let activeLink;\n            let disableClass = '';\n            let disabledText;\n\n            if (token.is_active) {\n                activeLink = (\n                    <a\n                        id={token.id + '_deactivate'}\n                        href='#'\n                        onClick={(e) => {\n                            e.preventDefault();\n                            this.disableUserAccessToken(token.id);\n                        }}\n                    >\n                        <FormattedMessage\n                            id='user.settings.tokens.deactivate'\n                            defaultMessage='Disable'\n                        />\n                    </a>);\n            } else {\n                disableClass = 'light';\n                disabledText = (\n                    <span className='mr-2 light'>\n                        <FormattedMessage\n                            id='user.settings.tokens.deactivatedWarning'\n                            defaultMessage='(Disabled)'\n                        />\n                    </span>\n                );\n                activeLink = (\n                    <a\n                        id={token.id + '_activate'}\n                        href='#'\n                        onClick={(e) => {\n                            e.preventDefault();\n                            this.enableUserAccessToken(token.id);\n                        }}\n                    >\n                        <FormattedMessage\n                            id='user.settings.tokens.activate'\n                            defaultMessage='Enable'\n                        />\n                    </a>\n                );\n            }\n\n            tokenList.push(\n                <div\n                    key={token.id}\n                    className='bot-list__item'\n                >\n                    <div className='item-details__row d-flex justify-content-between'>\n                        <div className={disableClass}>\n                            <div className='whitespace--nowrap overflow--ellipsis'>\n                                <b>\n                                    <FormattedMessage\n                                        id='user.settings.tokens.tokenDesc'\n                                        defaultMessage='Token Description: '\n                                    />\n                                </b>\n                                {token.description}\n                            </div>\n                            <div className='setting-box__token-id whitespace--nowrap overflow--ellipsis'>\n                                <b>\n                                    <FormattedMessage\n                                        id='user.settings.tokens.tokenId'\n                                        defaultMessage='Token ID: '\n                                    />\n                                </b>\n                                {token.id}\n                            </div>\n                        </div>\n                        <div>\n                            {disabledText}\n                            {activeLink}\n                            {' - '}\n                            <a\n                                id={token.id + '_delete'}\n                                href='#'\n                                onClick={(e) => {\n                                    e.preventDefault();\n                                    this.confirmRevokeToken(token.id);\n                                }}\n                            >\n                                <FormattedMessage\n                                    id='user.settings.tokens.delete'\n                                    defaultMessage='Delete'\n                                />\n                            </a>\n                        </div>\n                    </div>\n                </div>,\n            );\n        });\n\n        let options;\n        if (ownerUsername !== 'plugin') {\n            options = (\n                <div className='item-actions'>\n                    <button\n                        id='createToken'\n                        className='style--none color--link'\n                        onClick={this.openCreateToken}\n                    >\n                        <FormattedMessage\n                            id='bot.manage.create_token'\n                            defaultMessage='Create New Token'\n                        />\n                    </button>\n                    {' - '}\n                    <Link to={`/${this.props.team.name}/integrations/bots/edit?id=${this.props.bot.user_id}`}>\n                        <FormattedMessage\n                            id='bots.manage.edit'\n                            defaultMessage='Edit'\n                        />\n                    </Link>\n                    {' - '}\n                    <button\n                        className='style--none color--link'\n                        onClick={this.disableBot}\n                    >\n                        <FormattedMessage\n                            id='bot.manage.disable'\n                            defaultMessage='Disable'\n                        />\n                    </button>\n                </div>\n            );\n        }\n        if (this.props.bot.delete_at !== 0) {\n            options = (\n                <div className='item-actions'>\n                    <button\n                        className='style--none color--link'\n                        onClick={this.enableBot}\n                    >\n                        <FormattedMessage\n                            id='bot.manage.enable'\n                            defaultMessage='Enable'\n                        />\n                    </button>\n                </div>\n            );\n        }\n\n        if (this.state.creatingTokenState === 'OPEN') {\n            tokenList.push(\n                <div\n                    key={'create'}\n                    className='bot-list__item'\n                >\n                    <div key={'create'}>\n                        <form\n                            className='form-horizontal'\n                            onSubmit={this.handleCreateToken}\n                        >\n                            <div className='row'>\n                                <label className='col-sm-auto control-label'>\n                                    <FormattedMessage\n                                        id='user.settings.tokens.name'\n                                        defaultMessage='Token Description: '\n                                    />\n                                </label>\n                                <div className='col-sm-4'>\n                                    <input\n                                        autoFocus={true}\n                                        className='form-control form-sm'\n                                        type='text'\n                                        maxLength={64}\n                                        value={this.state.token.description}\n                                        onChange={this.handleUpdateDescription}\n                                    />\n                                </div>\n                            </div>\n                            <div>\n                                <div className='pt-2 pb-2'>\n                                    <FormattedMessage\n                                        id='user.settings.tokens.nameHelp'\n                                        defaultMessage='Enter a description for your token to remember what it does.'\n                                    />\n                                </div>\n                                <label\n                                    id='clientError'\n                                    className='has-error is-empty'\n                                >\n                                    {this.state.error}\n                                </label>\n                                <div className='mt-2'>\n                                    <SaveButton\n                                        btnClass='btn-sm btn-primary'\n                                        savingMessage={\n                                            <FormattedMessage\n                                                id='user.settings.tokens.save'\n                                                defaultMessage='Save'\n                                            />\n                                        }\n                                        saving={false}\n                                    />\n                                    <button\n                                        className='btn btn-sm btn-tertiary'\n                                        onClick={this.closeCreateToken}\n                                    >\n                                        <FormattedMessage\n                                            id='user.settings.tokens.cancel'\n                                            defaultMessage='Cancel'\n                                        />\n                                    </button>\n                                </div>\n                            </div>\n                        </form>\n                    </div>\n                </div>,\n            );\n        } else if (this.state.creatingTokenState === 'CREATED') {\n            tokenList.push(\n                <div\n                    key={'created'}\n                    className='bot-list__item alert alert-warning'\n                >\n                    <div className='mb-2'>\n                        <WarningIcon additionalClassName='mr-2'/>\n                        <FormattedMessage\n                            id='user.settings.tokens.copy'\n                            defaultMessage=\"Please copy the access token below. You won't be able to see it again!\"\n                        />\n                    </div>\n                    <div className='whitespace--nowrap overflow--ellipsis'>\n                        <FormattedMessage\n                            id='user.settings.tokens.name'\n                            defaultMessage='Token Description: '\n                        />\n                        {this.state.token.description}\n                    </div>\n                    <div className='whitespace--nowrap overflow--ellipsis'>\n                        <FormattedMessage\n                            id='user.settings.tokens.id'\n                            defaultMessage='Token ID: '\n                        />\n                        {this.state.token.id}\n                    </div>\n                    <strong className='word-break--all'>\n                        <FormattedMessage\n                            id='user.settings.tokens.token'\n                            defaultMessage='Access Token: '\n                        />\n                        {this.state.token.token}\n                    </strong>\n                    <div className='mt-2'>\n                        <button\n                            className='btn btn-sm btn-primary'\n                            onClick={this.closeCreateToken}\n                        >\n                            <FormattedMessage\n                                id='bot.create_token.close'\n                                defaultMessage='Close'\n                            />\n                        </button>\n                    </div>\n                </div>,\n            );\n        }\n\n        const imageURL = Utils.imageURLForUser(this.props.user.id, this.props.user.last_picture_update);\n\n        return (\n            <div className='backstage-list__item'>\n                <div className={'bot-list-img-container'}>\n                    <img\n                        className={'bot-list-img'}\n                        alt={'bot image'}\n                        src={imageURL}\n                    />\n                </div>\n                <div className='item-details'>\n                    <div className='item-details__row d-flex flex-column flex-md-row justify-content-between'>\n                        <strong className='item-details__name'>\n                            {displayName + ' (@' + username + ')'}\n                        </strong>\n                        {options}\n                    </div>\n                    <div className='bot-details__description'>\n                        <Markdown message={description}/>\n                    </div>\n                    <div className='light small'>\n                        <FormattedMessage\n                            id='bots.managed_by'\n                            defaultMessage='Managed by '\n                        />\n                        {ownerUsername}\n                    </div>\n                    <div className='bot-list is-empty'>\n                        {tokenList}\n                    </div>\n                </div>\n                <ConfirmModal\n                    title={\n                        <FormattedMessage\n                            id='bots.token.delete'\n                            defaultMessage='Delete Token'\n                        />\n                    }\n                    message={\n                        <FormattedMessage\n                            id='bots.token.confirm_text'\n                            defaultMessage='Are you sure you want to delete the token?'\n                        />\n                    }\n                    confirmButtonText={\n                        <FormattedMessage\n                            id='bots.token.confirm'\n                            defaultMessage='Delete'\n                        />\n                    }\n                    modalClass='integrations-backstage-modal'\n                    show={this.state.confirmingId !== ''}\n                    onConfirm={this.revokeTokenConfirmed}\n                    onCancel={this.closeConfirm}\n                />\n            </div>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\n\nimport type {Bot as BotType} from '@mattermost/types/bots';\nimport type {Team} from '@mattermost/types/teams';\nimport type {UserProfile, UserAccessToken} from '@mattermost/types/users';\nimport type {RelationOneToOne} from '@mattermost/types/utilities';\n\nimport type {ActionResult} from 'mattermost-redux/types/actions';\n\nimport BackstageList from 'components/backstage/components/backstage_list';\nimport ExternalLink from 'components/external_link';\nimport FormattedMarkdownMessage from 'components/formatted_markdown_message';\n\nimport Constants from 'utils/constants';\nimport {getSiteURL} from 'utils/url';\nimport * as Utils from 'utils/utils';\n\nimport Bot, {matchesFilter} from './bot';\n\ntype Props = {\n\n    /**\n    *  Map from botUserId to bot.\n    */\n    bots: Record<string, BotType>;\n\n    /**\n     * List of bot IDs managed by the app framework\n     */\n    appsBotIDs: string[];\n\n    /**\n     * Whether apps framework is enabled\n     */\n    appsEnabled: boolean;\n\n    /**\n    *  Map from botUserId to accessTokens.\n    */\n    accessTokens?: RelationOneToOne<UserProfile, Record<string, UserAccessToken>>;\n\n    /**\n    *  Map from botUserId to owner.\n    */\n    owners: Record<string, UserProfile>;\n\n    /**\n    *  Map from botUserId to user.\n    */\n    users: Record<string, UserProfile>;\n    createBots?: boolean;\n\n    actions: {\n\n        /**\n         * Ensure we have bot accounts\n         */\n        loadBots: (page?: number, perPage?: number) => Promise<ActionResult<BotType[]>>;\n\n        /**\n        * Load access tokens for bot accounts\n        */\n        getUserAccessTokensForUser: (userId: string, page?: number, perPage?: number) => void;\n\n        /**\n        * Access token managment\n        */\n        createUserAccessToken: (userId: string, description: string) => Promise<ActionResult<UserAccessToken>>;\n\n        revokeUserAccessToken: (tokenId: string) => Promise<ActionResult>;\n        enableUserAccessToken: (tokenId: string) => Promise<ActionResult>;\n        disableUserAccessToken: (tokenId: string) => Promise<ActionResult>;\n\n        /**\n        * Load owner of bot account\n        */\n        getUser: (userId: string) => void;\n\n        /**\n        * Disable a bot\n        */\n        disableBot: (userId: string) => Promise<ActionResult>;\n\n        /**\n        * Enable a bot\n        */\n        enableBot: (userId: string) => Promise<ActionResult>;\n\n        /**\n         * Load bot IDs managed by the apps\n         */\n        fetchAppsBotIDs: () => Promise<ActionResult>;\n    };\n\n    /**\n    *  Only used for routing since backstage is team based.\n    */\n    team: Team;\n}\n\ntype State = {\n    loading: boolean;\n}\n\nexport default class Bots extends React.PureComponent<Props, State> {\n    public constructor(props: Props) {\n        super(props);\n\n        this.state = {\n            loading: true,\n        };\n    }\n\n    public componentDidMount(): void {\n        this.props.actions.loadBots(\n            Constants.Integrations.START_PAGE_NUM,\n            Constants.Integrations.PAGE_SIZE,\n        ).then(\n            (result) => {\n                if (result.data) {\n                    const promises = [];\n\n                    for (const bot of result.data) {\n                        // We don't need to wait for this and we need to accept failure in the case where bot.owner_id is a plugin id\n                        this.props.actions.getUser(bot.owner_id);\n\n                        // We want to wait for these.\n                        promises.push(this.props.actions.getUser(bot.user_id));\n                        promises.push(this.props.actions.getUserAccessTokensForUser(bot.user_id));\n                    }\n\n                    Promise.all(promises).then(() => {\n                        this.setState({loading: false});\n                    });\n                }\n            },\n        );\n        if (this.props.appsEnabled) {\n            this.props.actions.fetchAppsBotIDs();\n        }\n    }\n\n    DisabledSection(props: {hasDisabled: boolean; disabledBots: JSX.Element[]; filter?: string}): JSX.Element | null {\n        if (!props.hasDisabled) {\n            return null;\n        }\n        const botsToDisplay = React.Children.map(props.disabledBots, (child) => {\n            return React.cloneElement(child, {filter: props.filter});\n        });\n        return (\n            <React.Fragment>\n                <div className='bot-disabled'>\n                    <FormattedMessage\n                        id='bots.disabled'\n                        defaultMessage='Disabled'\n                    />\n                </div>\n                <div className='bot-list__disabled'>\n                    {botsToDisplay}\n                </div>\n            </React.Fragment>\n        );\n    }\n\n    EnabledSection(props: {enabledBots: JSX.Element[]; filter?: string}): JSX.Element {\n        const botsToDisplay = React.Children.map(props.enabledBots, (child) => {\n            return React.cloneElement(child, {filter: props.filter});\n        });\n        return (\n            <div>\n                {botsToDisplay}\n            </div>\n        );\n    }\n\n    botToJSX = (bot: BotType): JSX.Element => {\n        return (\n            <Bot\n                key={bot.user_id}\n                bot={bot}\n                owner={this.props.owners[bot.user_id]}\n                user={this.props.users[bot.user_id]}\n                accessTokens={(this.props.accessTokens && this.props.accessTokens[bot.user_id]) || {}}\n                actions={this.props.actions}\n                team={this.props.team}\n                fromApp={this.props.appsBotIDs.includes(bot.user_id)}\n            />\n        );\n    };\n\n    bots = (filter?: string): [JSX.Element[], boolean] => {\n        const bots = Object.values(this.props.bots).sort((a, b) => a.username.localeCompare(b.username));\n        const match = (bot: BotType) => matchesFilter(bot, filter, this.props.owners[bot.user_id]);\n        const enabledBots = bots.filter((bot) => bot.delete_at === 0).filter(match).map(this.botToJSX);\n        const disabledBots = bots.filter((bot) => bot.delete_at > 0).filter(match).map(this.botToJSX);\n        const sections = [(\n            <div key='sections'>\n                <this.EnabledSection\n                    enabledBots={enabledBots}\n                />\n                <this.DisabledSection\n                    hasDisabled={disabledBots.length > 0}\n                    disabledBots={disabledBots}\n                />\n            </div>\n        )];\n\n        return [sections, enabledBots.length > 0 || disabledBots.length > 0];\n    };\n\n    public render(): JSX.Element {\n        return (\n            <BackstageList\n                header={\n                    <FormattedMessage\n                        id='bots.manage.header'\n                        defaultMessage='Bot Accounts'\n                    />\n                }\n                addText={this.props.createBots &&\n                    <FormattedMessage\n                        id='bots.manage.add'\n                        defaultMessage='Add Bot Account'\n                    />\n                }\n                addLink={'/' + this.props.team.name + '/integrations/bots/add'}\n                addButtonId='addBotAccount'\n                emptyText={\n                    <FormattedMessage\n                        id='bots.manage.empty'\n                        defaultMessage='No bot accounts found'\n                    />\n                }\n                emptyTextSearch={\n                    <FormattedMarkdownMessage\n                        id='bots.manage.emptySearch'\n                        defaultMessage='No bot accounts match **{searchTerm}**'\n                    />\n                }\n                helpText={\n                    <React.Fragment>\n                        <FormattedMessage\n                            id='bots.manage.help1'\n                            defaultMessage='Use {botAccounts} to integrate with Mattermost through plugins or the API. Bot accounts are available to everyone on your server. '\n                            values={{\n                                botAccounts: (\n                                    <ExternalLink\n                                        href='https://mattermost.com/pl/default-bot-accounts'\n                                        location='bots'\n                                    >\n                                        <FormattedMessage\n                                            id='bots.manage.bot_accounts'\n                                            defaultMessage='Bot Accounts'\n                                        />\n                                    </ExternalLink>\n                                ),\n                            }}\n                        />\n                        <FormattedMarkdownMessage\n                            id='bots.manage.help2'\n                            defaultMessage={'Enable bot account creation in the [System Console]({siteURL}/admin_console/integrations/bot_accounts).'}\n                            values={{\n                                siteURL: getSiteURL(),\n                            }}\n                        />\n                    </React.Fragment>\n                }\n                searchPlaceholder={Utils.localizeMessage('bots.manage.search', 'Search Bot Accounts')}\n                loading={this.state.loading}\n            >\n                {this.bots}\n            </BackstageList>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux';\nimport type {Dispatch} from 'redux';\n\nimport type {Bot as BotType} from '@mattermost/types/bots';\nimport type {GlobalState} from '@mattermost/types/store';\nimport type {UserProfile} from '@mattermost/types/users';\n\nimport {loadBots, disableBot, enableBot} from 'mattermost-redux/actions/bots';\nimport {getAppsBotIDs as fetchAppsBotIDs} from 'mattermost-redux/actions/integrations';\nimport {createUserAccessToken, revokeUserAccessToken, enableUserAccessToken, disableUserAccessToken, getUserAccessTokensForUser, getUser} from 'mattermost-redux/actions/users';\nimport {appsEnabled} from 'mattermost-redux/selectors/entities/apps';\nimport {getExternalBotAccounts} from 'mattermost-redux/selectors/entities/bots';\nimport {getConfig} from 'mattermost-redux/selectors/entities/general';\nimport {getAppsBotIDs} from 'mattermost-redux/selectors/entities/integrations';\nimport * as UserSelectors from 'mattermost-redux/selectors/entities/users';\n\nimport Bots from './bots';\n\nfunction mapStateToProps(state: GlobalState) {\n    const config = getConfig(state);\n    const createBots = config.EnableBotAccountCreation === 'true';\n    const bots = getExternalBotAccounts(state);\n    const botValues = Object.values(bots);\n    const owners = botValues.\n        reduce((result: Record<string, UserProfile>, bot: BotType) => {\n            result[bot.user_id] = UserSelectors.getUser(state, bot.owner_id);\n            return result;\n        }, {});\n    const users = botValues.\n        reduce((result: Record<string, UserProfile>, bot: BotType) => {\n            result[bot.user_id] = UserSelectors.getUser(state, bot.user_id);\n            return result;\n        }, {});\n\n    return {\n        createBots,\n        bots,\n        accessTokens: state.entities.admin.userAccessTokensByUser,\n        owners,\n        users,\n        appsBotIDs: getAppsBotIDs(state),\n        appsEnabled: appsEnabled(state),\n    };\n}\n\nfunction mapDispatchToProps(dispatch: Dispatch) {\n    return {\n        actions: bindActionCreators({\n            fetchAppsBotIDs,\n            loadBots,\n            getUserAccessTokensForUser,\n            createUserAccessToken,\n            revokeUserAccessToken,\n            enableUserAccessToken,\n            disableUserAccessToken,\n            getUser,\n            disableBot,\n            enableBot,\n        }, dispatch),\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Bots);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from 'react';\nimport type {ChangeEvent, FormEvent} from 'react';\nimport {FormattedMessage} from 'react-intl';\nimport {Link} from 'react-router-dom';\n\nimport type {Bot, BotPatch} from '@mattermost/types/bots';\nimport type {Team} from '@mattermost/types/teams';\nimport type {UserAccessToken, UserProfile} from '@mattermost/types/users';\n\nimport {General} from 'mattermost-redux/constants';\nimport type {ActionResult} from 'mattermost-redux/types/actions';\nimport * as UserUtils from 'mattermost-redux/utils/user_utils';\n\nimport BackstageHeader from 'components/backstage/components/backstage_header';\nimport ExternalLink from 'components/external_link';\nimport FormError from 'components/form_error';\nimport SpinnerButton from 'components/spinner_button';\nimport WithTooltip from 'components/with_tooltip';\n\nimport BotDefaultIcon from 'images/bot_default_icon.png';\nimport {getHistory} from 'utils/browser_history';\nimport {AcceptedProfileImageTypes, Constants, DeveloperLinks, ValidationErrors} from 'utils/constants';\nimport * as FileUtils from 'utils/file_utils';\nimport * as Utils from 'utils/utils';\n\nconst roleOptionSystemAdmin = 'System Admin';\nconst roleOptionMember = 'Member';\n\nexport type Props = {\n\n    /**\n     *  Only used for routing since backstage is team based.\n     */\n    team: Team;\n\n    /**\n     *  Bot to edit (if editing)\n     */\n    bot?: Bot;\n\n    /**\n     *  Bot user\n     */\n    user?: UserProfile;\n\n    /**\n     *  Roles of the bot to edit (if editing)\n     */\n    roles?: string;\n\n    /**\n     * Maximum upload file size (for bot account profile picture)\n     */\n    maxFileSize: number;\n\n    /**\n     * Editing user has the MANAGE_SYSTEM permission\n     */\n    editingUserHasManageSystem: boolean;\n\n    /**\n     * Bot to edit\n     */\n    actions: {\n\n        /**\n         * Creates a new bot account.\n         */\n        createBot: (bot: Partial<Bot>) => Promise<ActionResult<Bot>>;\n\n        /**\n         * Patches an existing bot account.\n         */\n        patchBot: (botUserId: string, botPatch: Partial<BotPatch>) => Promise<ActionResult<Bot>>;\n\n        /**\n         * Uploads a user profile image\n         */\n        uploadProfileImage: (userId: string, image: File | string) => Promise<ActionResult>;\n\n        /**\n         * Set profile image to default\n         */\n        setDefaultProfileImage: (userId: string) => Promise<ActionResult>;\n\n        /**\n         * For creating default access token\n         */\n        createUserAccessToken: (userId: string, description: string) => Promise<ActionResult<UserAccessToken>>;\n\n        /**\n         * For creating setting bot to system admin or special posting permissions\n         */\n        updateUserRoles: (userId: string, roles: string) => Promise<ActionResult>;\n    };\n};\n\nexport type State = {\n    username: string;\n    displayName: string | undefined;\n    description: string | undefined;\n    role: string;\n    postAll: boolean;\n    postChannels: boolean;\n    error: JSX.Element | string;\n    adding: boolean;\n    image: string;\n    orientationStyles: { transform: string; transformOrigin: string };\n    pictureFile: File | null | string;\n};\n\nexport default class AddBot extends React.PureComponent<Props, State> {\n    previewBlob: string | null = null;\n    constructor(props: Props) {\n        super(props);\n\n        this.state = {\n            error: '',\n            username: this.props.bot ? this.props.bot.username : '',\n            displayName: this.props.bot ? this.props.bot.display_name : '',\n            description: this.props.bot ? this.props.bot.description : '',\n            adding: false,\n            image: BotDefaultIcon,\n            role: UserUtils.isSystemAdmin(this.props.roles || '') ? roleOptionSystemAdmin : roleOptionMember,\n            postAll: this.props.bot ? UserUtils.hasPostAllRole(this.props.roles || '') : false,\n            postChannels: this.props.bot ? UserUtils.hasPostAllPublicRole(this.props.roles || '') : false,\n            orientationStyles: {transform: '', transformOrigin: ''},\n            pictureFile: null,\n        };\n    }\n\n    updateUsername = (e: ChangeEvent<HTMLInputElement>) => {\n        this.setState({\n            username: e.target.value,\n        });\n    };\n\n    updateDisplayName = (e: ChangeEvent<HTMLInputElement>) => {\n        this.setState({\n            displayName: e.target.value,\n        });\n    };\n\n    updateDescription = (e: ChangeEvent<HTMLInputElement>) => {\n        this.setState({\n            description: e.target.value,\n        });\n    };\n\n    updateRole = (e: ChangeEvent<HTMLSelectElement>) => {\n        this.setState({\n            role: e.target.value,\n        });\n    };\n\n    updatePostAll = (e: ChangeEvent<HTMLInputElement>) => {\n        this.setState({\n            postAll: e.target.checked,\n        });\n    };\n\n    updatePostChannels = (e: ChangeEvent<HTMLInputElement>) => {\n        this.setState({\n            postChannels: e.target.checked,\n        });\n    };\n\n    updatePicture = (e: ChangeEvent<HTMLInputElement>) => {\n        if (e.target.files && e.target.files[0]) {\n            const pictureFile = e.target.files[0];\n            this.previewBlob = URL.createObjectURL(pictureFile);\n\n            const reader = new FileReader();\n            reader.onload = (e2) => {\n                const orientation = FileUtils.getExifOrientation(e2.target?.result as ArrayBuffer);\n                const orientationStyles = FileUtils.getOrientationStyles(orientation);\n\n                this.setState({\n                    image: this.previewBlob || '',\n                    orientationStyles,\n                });\n            };\n            reader.readAsArrayBuffer(pictureFile);\n            e.target.value = '';\n            this.setState({pictureFile});\n        } else {\n            this.setState({pictureFile: null, image: ''});\n        }\n    };\n\n    setDefault = () => {\n        this.setState({pictureFile: 'default', image: BotDefaultIcon});\n    };\n\n    isFile(file: File | string): file is File {\n        return (file as File).size !== undefined;\n    }\n\n    updateRoles = async (data: Bot) => {\n        let roles = General.SYSTEM_USER_ROLE;\n\n        if (this.state.role === roleOptionSystemAdmin) {\n            roles += ' ' + General.SYSTEM_ADMIN_ROLE;\n        } else if (this.state.postAll) {\n            roles += ' ' + General.SYSTEM_POST_ALL_ROLE;\n        } else if (this.state.postChannels) {\n            roles += ' ' + General.SYSTEM_POST_ALL_PUBLIC_ROLE;\n        }\n\n        const rolesResult = await this.props.actions.updateUserRoles(data.user_id, roles);\n        if (rolesResult) {\n            return rolesResult.error;\n        }\n\n        return null;\n    };\n\n    handleSubmit = async (e: FormEvent<HTMLButtonElement | HTMLFormElement>) => {\n        e.preventDefault();\n\n        if (this.state.adding) {\n            return;\n        }\n\n        if (!this.state.username || this.state.username.length < 3) {\n            this.setState({\n                error: (\n                    <FormattedMessage\n                        id='bots.manage.add.invalid_username'\n                        defaultMessage='Usernames have to begin with a lowercase letter and be 3-22 characters long. You can use lowercase letters, numbers, periods, dashes, and underscores.'\n                    />\n                ),\n            });\n            return;\n        }\n\n        if (this.state.pictureFile && this.isFile(this.state.pictureFile)) {\n            if (!AcceptedProfileImageTypes.includes(this.state.pictureFile.type)) {\n                this.setState({\n                    error: (\n                        <FormattedMessage\n                            id='user.settings.general.validImage'\n                            defaultMessage='Only BMP, JPG or PNG images may be used for profile pictures'\n                        />\n                    ),\n                });\n                return;\n            } else if (this.state.pictureFile.size > this.props.maxFileSize) {\n                this.setState({\n                    error: (\n                        <FormattedMessage\n                            id='user.settings.general.imageTooLarge'\n                            defaultMessage='Unable to upload profile image. File is too large.'\n                        />\n                    ),\n                });\n                return;\n            }\n        }\n\n        this.setState({\n            adding: true,\n            error: '',\n        });\n\n        const bot = {\n            username: this.state.username.toLowerCase().trim(),\n            display_name: this.state.displayName,\n            description: this.state.description,\n        };\n\n        let data: Bot | undefined;\n        let error;\n        if (this.props.bot) {\n            const result = await this.props.actions.patchBot(this.props.bot.user_id, bot);\n            if (result) {\n                data = result.data;\n                error = result.error;\n            } else {\n                error = Utils.localizeMessage('bot.edit_failed', 'Failed to edit bot');\n            }\n\n            if (!error && data) {\n                if (this.state.pictureFile && this.state.pictureFile !== 'default') {\n                    const imageResult = await this.props.actions.uploadProfileImage(data.user_id, this.state.pictureFile);\n                    error = imageResult.error;\n                } else if (this.state.pictureFile && this.state.pictureFile === 'default') {\n                    await this.props.actions.setDefaultProfileImage(data.user_id);\n                }\n            }\n\n            if (!error && data) {\n                error = this.updateRoles(data);\n            }\n\n            if (data) {\n                getHistory().push(`/${this.props.team.name}/integrations/bots`);\n                return;\n            }\n        } else {\n            const usernameError = Utils.isValidBotUsername(bot.username);\n            if (usernameError) {\n                let errObj;\n                if (usernameError.id === ValidationErrors.INVALID_LAST_CHARACTER) {\n                    errObj = {\n                        adding: false,\n                        error: (\n                            <FormattedMessage\n                                id='bots.manage.add.invalid_last_char'\n                                defaultMessage='Bot usernames cannot have a period as the last character'\n                            />\n                        ),\n                    };\n                } else {\n                    errObj = {\n                        adding: false,\n                        error: (\n                            <FormattedMessage\n                                id='bots.manage.add.invalid_username'\n                                defaultMessage='Usernames have to begin with a lowercase letter and be 3-22 characters long. You can use lowercase letters, numbers, periods, dashes, and underscores.'\n                            />\n                        ),\n                    };\n                }\n                this.setState(errObj);\n                return;\n            }\n\n            const result = await this.props.actions.createBot(bot);\n            if (result) {\n                data = result.data;\n                error = result.error;\n            } else {\n                error = Utils.localizeMessage('bot.create_failed', 'Failed to create bot');\n            }\n\n            let token = '';\n            if (!error && data) {\n                if (this.state.pictureFile && this.state.pictureFile !== 'default') {\n                    await this.props.actions.uploadProfileImage(data.user_id, this.state.pictureFile);\n                } else {\n                    await this.props.actions.setDefaultProfileImage(data.user_id);\n                }\n                const tokenResult = await this.props.actions.createUserAccessToken(data.user_id,\n                    Utils.localizeMessage('bot.token.default.description', 'Default Token'),\n                );\n\n                // On error just skip the confirmation because we have a bot without a token.\n                if (!tokenResult || tokenResult.error) {\n                    getHistory().push(`/${this.props.team.name}/integrations/bots`);\n                    return;\n                }\n\n                token = tokenResult.data!.token!;\n            }\n\n            if (!error && data) {\n                error = this.updateRoles(data);\n            }\n\n            if (data) {\n                getHistory().push(`/${this.props.team.name}/integrations/confirm?type=bots&id=${data.user_id}&token=${token}`);\n                return;\n            }\n        }\n\n        this.setState({\n            adding: false,\n        });\n\n        if (error) {\n            this.setState({\n                error: error.message,\n            });\n        }\n    };\n\n    render() {\n        let subtitle = (\n            <FormattedMessage\n                id='bots.manage.add.add'\n                defaultMessage='Add'\n            />\n        );\n        let buttonText = (\n            <FormattedMessage\n                id='bots.manage.add.create'\n                defaultMessage='Create Bot Account'\n            />\n        );\n        let buttonActiveText = (\n            <FormattedMessage\n                id='bots.manage.add.creating'\n                defaultMessage='Creating...'\n            />\n        );\n\n        // If we are editing\n        if (this.props.bot) {\n            subtitle = (\n                <FormattedMessage\n                    id='bots.manage.edit'\n                    defaultMessage='Edit'\n                />\n            );\n            buttonText = (\n                <FormattedMessage\n                    id='bots.manage.edit.title'\n                    defaultMessage='Update'\n                />\n            );\n            buttonActiveText = (\n                <FormattedMessage\n                    id='bots.manage.edit.editing'\n                    defaultMessage='Updating...'\n                />\n            );\n        }\n\n        let imageURL = '';\n        let removeImageIcon: JSX.Element | null = (\n            <WithTooltip\n                id='removeIcon'\n                placement='right'\n                title={\n                    <FormattedMessage\n                        id='bot.remove_profile_picture'\n                        defaultMessage='Remove Bot Icon'\n                    />\n                }\n            >\n                <a\n                    className={'bot-profile__remove'}\n                    onClick={this.setDefault}\n                >\n                    <span>{''}</span>\n                </a>\n            </WithTooltip>\n        );\n        let imageStyles;\n        if (this.props.bot && !this.state.pictureFile) {\n            if (this.props.user) {\n                imageURL = Utils.imageURLForUser(this.props.user.id, this.props.user.last_picture_update);\n            } else {\n                imageURL = Utils.imageURLForUser(this.props.bot.user_id);\n            }\n        } else {\n            imageURL = this.state.image;\n            imageStyles = this.state.orientationStyles;\n            if (this.state.image === BotDefaultIcon) {\n                removeImageIcon = null;\n            }\n        }\n\n        return (\n            <div className='backstage-content'>\n                <BackstageHeader>\n                    <Link to={`/${this.props.team.name}/integrations/bots`}>\n                        <FormattedMessage\n                            id='bots.manage.header'\n                            defaultMessage='Bot Accounts'\n                        />\n                    </Link>\n                    {subtitle}\n                </BackstageHeader>\n                <div className='backstage-form'>\n                    <form\n                        className='form-horizontal'\n                        onSubmit={this.handleSubmit}\n                    >\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='username'\n                            >\n                                <FormattedMessage\n                                    id='bots.add.username'\n                                    defaultMessage='Username'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <input\n                                    id='username'\n                                    type='text'\n                                    maxLength={22}\n                                    className='form-control'\n                                    value={this.state.username}\n                                    onChange={this.updateUsername}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='bot.add.username.help'\n                                        defaultMessage='You can use lowercase letters, numbers, periods, dashes, and underscores.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='boticon'\n                            >\n                                <FormattedMessage\n                                    id='bots.add.icon'\n                                    defaultMessage='Bot Icon'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <div className={'bot-img-container'}>\n                                    <img\n                                        className={'bot-img'}\n                                        alt={'bot image'}\n                                        src={imageURL}\n                                        style={imageStyles}\n                                    />\n                                    {removeImageIcon}\n                                </div>\n                                <div\n                                    className='btn btn-primary btn-file'\n                                >\n                                    <FormattedMessage\n                                        id='bots.image.upload'\n                                        defaultMessage='Upload Image'\n                                    />\n                                    <input\n                                        className='btn-file__input'\n                                        accept={Constants.ACCEPT_STATIC_IMAGE}\n                                        type='file'\n                                        onChange={this.updatePicture}\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='displayName'\n                            >\n                                <FormattedMessage\n                                    id='bots.add.displayName'\n                                    defaultMessage='Display Name'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <input\n                                    id='displayName'\n                                    type='text'\n                                    maxLength={64}\n                                    className='form-control'\n                                    value={this.state.displayName}\n                                    onChange={this.updateDisplayName}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='bot.add.display_name.help'\n                                        defaultMessage={'(Optional) You can choose to display your bot\\'s full name rather than its username.'}\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='description'\n                            >\n                                <FormattedMessage\n                                    id='bot.add.description'\n                                    defaultMessage='Description'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <input\n                                    id='description'\n                                    type='text'\n                                    maxLength={1024}\n                                    className='form-control'\n                                    value={this.state.description}\n                                    onChange={this.updateDescription}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='bot.add.description.help'\n                                        defaultMessage='(Optional) Let others know what this bot does.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='role'\n                            >\n                                <FormattedMessage\n                                    id='bot.add.role'\n                                    defaultMessage='Role'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <select\n                                    className='form-control'\n                                    value={this.state.role}\n                                    disabled={!this.props.editingUserHasManageSystem}\n                                    onChange={this.updateRole}\n                                >\n                                    <option\n                                        value={roleOptionMember}\n                                    >\n                                        {Utils.localizeMessage('bot.add.role.member', 'Member')}\n                                    </option>\n                                    <option\n                                        value={roleOptionSystemAdmin}\n                                    >\n                                        {Utils.localizeMessage('bot.add.role.admin', 'System Admin')}\n                                    </option>\n                                </select>\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='bot.add.role.help'\n                                        defaultMessage='Choose what role the bot should have.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='row bot-profile__section'>\n                            <div className='col-md-5 col-sm-8 col-sm-offset-4'>\n                                <FormattedMessage\n                                    id='admin.manage_roles.botAdditionalRoles'\n                                    defaultMessage='Select additional permissions for the account. <link>Read more about roles and permissions</link>.'\n                                    values={{\n                                        link: (msg: React.ReactNode) => (\n                                            <ExternalLink\n                                                href={DeveloperLinks.PERSONAL_ACCESS_TOKENS}\n                                                location='add_bot'\n                                            >\n                                                {msg}\n                                            </ExternalLink>\n                                        ),\n                                    }}\n                                />\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='postAll'\n                            >\n                                <FormattedMessage\n                                    id='bot.add.post_all'\n                                    defaultMessage='post:all'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8 checkbox'>\n                                <div className='checkbox no-padding'>\n                                    <label htmlFor='postAll'>\n                                        <input\n                                            id='postAll'\n                                            type='checkbox'\n                                            checked={this.state.postAll || this.state.role === roleOptionSystemAdmin}\n                                            onChange={this.updatePostAll}\n                                            disabled={!this.props.editingUserHasManageSystem || this.state.role === roleOptionSystemAdmin}\n                                        />\n                                        <FormattedMessage\n                                            id='bot.add.post_all.enabled'\n                                            defaultMessage='Enabled'\n                                        />\n                                    </label>\n                                </div>\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='bot.add.post_all.help'\n                                        defaultMessage='Bot will have access to post to all Mattermost channels including direct messages.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='postChannels'\n                            >\n                                <FormattedMessage\n                                    id='bot.add.post_channels'\n                                    defaultMessage='post:channels'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8 checkbox'>\n                                <div className='checkbox no-padding'>\n                                    <label htmlFor='postChannels'>\n                                        <input\n                                            id='postChannels'\n                                            type='checkbox'\n                                            checked={this.state.postChannels || this.state.role === roleOptionSystemAdmin || this.state.postAll}\n                                            onChange={this.updatePostChannels}\n                                            disabled={!this.props.editingUserHasManageSystem || this.state.role === roleOptionSystemAdmin || this.state.postAll}\n                                        />\n                                        <FormattedMessage\n                                            id='bot.add.post_channels.enabled'\n                                            defaultMessage='Enabled'\n                                        />\n                                    </label>\n                                </div>\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='bot.add.post_channels.help'\n                                        defaultMessage='Bot will have access to post to all Mattermost public channels.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='backstage-form__footer'>\n                            <FormError\n                                type='backstage'\n                                errors={[this.state.error]}\n                            />\n                            <Link\n                                className='btn btn-tertiary'\n                                to={`/${this.props.team.name}/integrations/bots`}\n                            >\n                                <FormattedMessage\n                                    id='bots.manage.add.cancel'\n                                    defaultMessage='Cancel'\n                                />\n                            </Link>\n                            <SpinnerButton\n                                className='btn btn-primary'\n                                type='submit'\n                                spinning={this.state.adding}\n                                spinningText={buttonActiveText}\n                                onClick={this.handleSubmit}\n                                id='saveBot'\n                            >\n                                {buttonText}\n                            </SpinnerButton>\n                        </div>\n                    </form>\n                </div>\n            </div>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport type {RouteComponentProps} from 'react-router-dom';\nimport {bindActionCreators} from 'redux';\nimport type {Dispatch} from 'redux';\n\nimport {createBot, patchBot} from 'mattermost-redux/actions/bots';\nimport {updateUserRoles, uploadProfileImage, setDefaultProfileImage, createUserAccessToken} from 'mattermost-redux/actions/users';\nimport {Permissions} from 'mattermost-redux/constants';\nimport {getBotAccounts} from 'mattermost-redux/selectors/entities/bots';\nimport {getConfig} from 'mattermost-redux/selectors/entities/general';\nimport {haveISystemPermission} from 'mattermost-redux/selectors/entities/roles';\nimport {getUser} from 'mattermost-redux/selectors/entities/users';\n\nimport type {GlobalState} from 'types/store';\n\nimport AddBot from './add_bot';\n\ntype OwnProps = {\n\n    /**\n     * Search query for the bot\n     */\n    location: RouteComponentProps['location'];\n}\n\nfunction mapStateToProps(state: GlobalState, ownProps: OwnProps) {\n    const config = getConfig(state);\n    const botId = (new URLSearchParams(ownProps.location.search)).get('id');\n    const bots = getBotAccounts(state);\n    const bot = (bots && botId) ? bots[botId] : undefined;\n    const user = bot ? getUser(state, bot.user_id) : undefined;\n    const roles = user ? user.roles : undefined;\n    return {\n        maxFileSize: parseInt(config.MaxFileSize!, 10),\n        bot,\n        roles,\n        editingUserHasManageSystem: haveISystemPermission(state, {permission: Permissions.MANAGE_SYSTEM}),\n        user,\n    };\n}\n\nfunction mapDispatchToProps(dispatch: Dispatch) {\n    return {\n        actions: bindActionCreators({\n            createBot,\n            patchBot,\n            uploadProfileImage,\n            setDefaultProfileImage,\n            createUserAccessToken,\n            updateUserRoles,\n        }, dispatch),\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AddBot);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport type {IncomingWebhook, IncomingWebhooksWithCount, OutgoingWebhook, Command, OAuthApp, OutgoingOAuthConnection} from '@mattermost/types/integrations';\n\nimport * as IntegrationActions from 'mattermost-redux/actions/integrations';\nimport {getProfilesByIds} from 'mattermost-redux/actions/users';\nimport {appsEnabled} from 'mattermost-redux/selectors/entities/apps';\nimport {getUser} from 'mattermost-redux/selectors/entities/users';\nimport type {ActionFuncAsync} from 'mattermost-redux/types/actions';\n\nconst DEFAULT_PAGE_SIZE = 100;\n\nexport function loadIncomingHooksAndProfilesForTeam(teamId: string, page = 0, perPage = DEFAULT_PAGE_SIZE, includeTotalCount = false): ActionFuncAsync<IncomingWebhook[] | IncomingWebhooksWithCount> {\n    return async (dispatch) => {\n        const {data} = await dispatch(IntegrationActions.getIncomingHooks(teamId, page, perPage, includeTotalCount));\n        if (data) {\n            const isWebhooksWithCount = IntegrationActions.isIncomingWebhooksWithCount(data);\n            const hooks = isWebhooksWithCount ? (data as IncomingWebhooksWithCount).incoming_webhooks : data;\n            dispatch(loadProfilesForIncomingHooks(hooks as IncomingWebhook[]));\n        }\n        return {data};\n    };\n}\n\nexport function loadProfilesForIncomingHooks(hooks: IncomingWebhook[]): ActionFuncAsync {\n    return async (dispatch, getState) => {\n        const state = getState();\n        const profilesToLoad: {[key: string]: boolean} = {};\n        for (let i = 0; i < hooks.length; i++) {\n            const hook = hooks[i];\n            if (!getUser(state, hook.user_id)) {\n                profilesToLoad[hook.user_id] = true;\n            }\n        }\n\n        const list = Object.keys(profilesToLoad);\n        if (list.length === 0) {\n            return {data: null};\n        }\n\n        dispatch(getProfilesByIds(list));\n        return {data: null};\n    };\n}\n\nexport function loadOutgoingHooksAndProfilesForTeam(teamId: string, page = 0, perPage = DEFAULT_PAGE_SIZE): ActionFuncAsync<OutgoingWebhook[]> {\n    return async (dispatch) => {\n        const {data} = await dispatch(IntegrationActions.getOutgoingHooks('', teamId, page, perPage));\n        if (data) {\n            dispatch(loadProfilesForOutgoingHooks(data));\n        }\n        return {data};\n    };\n}\n\nexport function loadProfilesForOutgoingHooks(hooks: OutgoingWebhook[]): ActionFuncAsync {\n    return async (dispatch, getState) => {\n        const state = getState();\n        const profilesToLoad: {[key: string]: boolean} = {};\n        for (let i = 0; i < hooks.length; i++) {\n            const hook = hooks[i];\n            if (!getUser(state, hook.creator_id)) {\n                profilesToLoad[hook.creator_id] = true;\n            }\n        }\n\n        const list = Object.keys(profilesToLoad);\n        if (list.length === 0) {\n            return {data: null};\n        }\n\n        dispatch(getProfilesByIds(list));\n        return {data: null};\n    };\n}\n\nexport function loadCommandsAndProfilesForTeam(teamId: string): ActionFuncAsync {\n    return async (dispatch) => {\n        const {data} = await dispatch(IntegrationActions.getCustomTeamCommands(teamId));\n        if (data) {\n            dispatch(loadProfilesForCommands(data));\n        }\n        return {data};\n    };\n}\n\nexport function loadProfilesForCommands(commands: Command[]): ActionFuncAsync {\n    return async (dispatch, getState) => {\n        const state = getState();\n        const profilesToLoad: {[key: string]: boolean} = {};\n        for (let i = 0; i < commands.length; i++) {\n            const command = commands[i];\n            if (!getUser(state, command.creator_id)) {\n                profilesToLoad[command.creator_id] = true;\n            }\n        }\n\n        const list = Object.keys(profilesToLoad);\n        if (list.length === 0) {\n            return {data: null};\n        }\n\n        dispatch(getProfilesByIds(list));\n        return {data: null};\n    };\n}\n\nexport function loadOAuthAppsAndProfiles(page = 0, perPage = DEFAULT_PAGE_SIZE): ActionFuncAsync {\n    return async (dispatch, getState) => {\n        if (appsEnabled(getState())) {\n            dispatch(IntegrationActions.getAppsOAuthAppIDs());\n        }\n        const {data} = await dispatch(IntegrationActions.getOAuthApps(page, perPage));\n        if (data) {\n            dispatch(loadProfilesForOAuthApps(data));\n        }\n        return {data: null};\n    };\n}\n\nexport function loadProfilesForOAuthApps(apps: OAuthApp[]): ActionFuncAsync {\n    return async (dispatch, getState) => {\n        const state = getState();\n        const profilesToLoad: {[key: string]: boolean} = {};\n        for (let i = 0; i < apps.length; i++) {\n            const app = apps[i];\n            if (!getUser(state, app.creator_id)) {\n                profilesToLoad[app.creator_id] = true;\n            }\n        }\n\n        const list = Object.keys(profilesToLoad);\n        if (list.length === 0) {\n            return {data: null};\n        }\n\n        dispatch(getProfilesByIds(list));\n        return {data: null};\n    };\n}\n\nexport function loadOutgoingOAuthConnectionsAndProfiles(teamId: string, page = 0, perPage = DEFAULT_PAGE_SIZE): ActionFuncAsync<null> {\n    return async (dispatch) => {\n        const {data} = await dispatch(IntegrationActions.getOutgoingOAuthConnections(teamId, page, perPage));\n        if (data) {\n            dispatch(loadProfilesForOutgoingOAuthConnections(data));\n        }\n        return {data: null};\n    };\n}\n\nexport function loadProfilesForOutgoingOAuthConnections(connections: OutgoingOAuthConnection[]): ActionFuncAsync<null> {\n    return async (dispatch, getState) => {\n        const state = getState();\n        const profilesToLoad: {[key: string]: boolean} = {};\n        for (let i = 0; i < connections.length; i++) {\n            const app = connections[i];\n            if (!getUser(state, app.creator_id)) {\n                profilesToLoad[app.creator_id] = true;\n            }\n        }\n\n        const list = Object.keys(profilesToLoad);\n        if (list.length === 0) {\n            return {data: null};\n        }\n\n        dispatch(getProfilesByIds(list));\n        return {data: null};\n    };\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport debounce from 'lodash/debounce';\nimport React, {useCallback, useEffect, useMemo, useRef, useState} from 'react';\nimport {FormattedMessage} from 'react-intl';\nimport {useDispatch, useSelector} from 'react-redux';\n\nimport {OauthIcon, InformationOutlineIcon} from '@mattermost/compass-icons/components';\nimport type {OutgoingOAuthConnection} from '@mattermost/types/integrations';\n\nimport {\n    getOutgoingOAuthConnectionsForAudience as fetchOutgoingOAuthConnectionsForAudience,\n    getOutgoingOAuthConnections as fetchOutgoingOAuthConnections,\n} from 'mattermost-redux/actions/integrations';\nimport {getConfig} from 'mattermost-redux/selectors/entities/general';\nimport {getOutgoingOAuthConnections} from 'mattermost-redux/selectors/entities/integrations';\nimport {getCurrentTeamId} from 'mattermost-redux/selectors/entities/teams';\n\nimport LoadingSpinner from 'components/widgets/loading/loading_spinner';\n\ntype Props = {\n    value: string;\n    onChange: (e: React.ChangeEvent<HTMLInputElement>) => void;\n    placeholder: string;\n}\n\nconst OAuthConnectionAudienceInput = (props: Props) => {\n    const mounted = useRef(false);\n    const [matchedConnection, setMatchingOAuthConnection] = useState<OutgoingOAuthConnection | null>(null);\n    const [loadingAudienceMatch, setLoadingAudienceMatch] = useState(false);\n\n    const oauthConnections = useSelector(getOutgoingOAuthConnections);\n    const oauthConnectionsEnabled = useSelector(getConfig).EnableOutgoingOAuthConnections === 'true';\n    const teamId = useSelector(getCurrentTeamId);\n\n    const dispatch = useDispatch();\n\n    const matchConnectionsOnInput = useCallback(async (inputValue: string) => {\n        const res = await dispatch(fetchOutgoingOAuthConnectionsForAudience(teamId, inputValue));\n        setLoadingAudienceMatch(false);\n\n        if (res.data && res.data.length) {\n            setMatchingOAuthConnection(res.data[0]);\n        } else {\n            setMatchingOAuthConnection(null);\n        }\n    }, [dispatch, teamId]);\n\n    const debouncedMatchConnections = useMemo(() => {\n        return debounce((inputValue: string) => matchConnectionsOnInput(inputValue), 1000);\n    }, [matchConnectionsOnInput]);\n\n    useEffect(() => {\n        if (mounted.current) {\n            return;\n        }\n        mounted.current = true;\n\n        if (oauthConnectionsEnabled) {\n            dispatch(fetchOutgoingOAuthConnections(teamId));\n            if (props.value) {\n                setLoadingAudienceMatch(true);\n                matchConnectionsOnInput(props.value);\n            }\n        }\n    }, [oauthConnectionsEnabled, props.value, teamId, matchConnectionsOnInput, dispatch, mounted]);\n\n    const onChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        props.onChange(e);\n\n        if (oauthConnectionsEnabled) {\n            setLoadingAudienceMatch(true);\n            debouncedMatchConnections(e.target.value);\n        }\n    };\n\n    const connections = Object.values(oauthConnections);\n\n    const input = (\n        <input\n            autoComplete='off'\n            id='url'\n            maxLength={1024}\n            className='form-control'\n            value={props.value}\n            onChange={onChange}\n            placeholder={props.placeholder}\n        />\n    );\n\n    if (!connections.length) {\n        return input;\n    }\n\n    let oauthMessage: React.ReactNode;\n\n    if (loadingAudienceMatch) {\n        oauthMessage = (\n            <span>\n                <LoadingSpinner/>\n            </span>\n        );\n    } else if (matchedConnection) {\n        oauthMessage = (\n            <>\n                <span>\n                    <OauthIcon\n                        size={20}\n                    />\n                </span>\n                <span className='outgoing-oauth-audience-match-message'>\n                    <FormattedMessage\n                        id='add_outgoing_oauth_connection.connected'\n                        defaultMessage='Connected to \"{connectionName}\"'\n                        values={{\n                            connectionName: matchedConnection.name,\n                        }}\n                    />\n                </span>\n            </>\n        );\n    } else {\n        oauthMessage = (\n            <>\n                <span>\n                    <InformationOutlineIcon\n                        size={20}\n                    />\n                </span>\n                <span className='outgoing-oauth-audience-match-message'>\n                    <FormattedMessage\n                        id='add_outgoing_oauth_connection.not_connected'\n                        defaultMessage='Not linked to an OAuth connection'\n                    />\n                </span>\n            </>\n        );\n    }\n\n    return (\n        <>\n            {input}\n            <div className='outgoing-oauth-audience-match-message-container'>\n                {oauthMessage}\n            </div>\n        </>\n    );\n};\n\nexport default OAuthConnectionAudienceInput;\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from 'react';\nimport type {ChangeEvent} from 'react';\nimport {FormattedMessage, type MessageDescriptor, injectIntl, type IntlShape} from 'react-intl';\nimport {Link} from 'react-router-dom';\n\nimport type {Command} from '@mattermost/types/integrations';\nimport type {Team} from '@mattermost/types/teams';\n\nimport BackstageHeader from 'components/backstage/components/backstage_header';\nimport ExternalLink from 'components/external_link';\nimport FormError from 'components/form_error';\nimport SpinnerButton from 'components/spinner_button';\n\nimport {Constants, DeveloperLinks} from 'utils/constants';\nimport * as Utils from 'utils/utils';\n\nimport OAuthConnectionAudienceInput from './outgoing_oauth_connections/oauth_connection_audience_input';\n\nconst REQUEST_POST = 'P';\nconst REQUEST_GET = 'G';\n\ntype Props = {\n\n    /**\n    * The current team\n    */\n    team: Team;\n\n    /**\n    * The header text to render, has id and defaultMessage\n    */\n    header: MessageDescriptor | string;\n\n    /**\n    * The footer text to render, has id and defaultMessage\n    */\n    footer: MessageDescriptor | string;\n\n    /**\n    * The spinner loading text to render, has id and defaultMessage\n    */\n    loading: MessageDescriptor | string;\n\n    /**\n    * Any extra component/node to render\n    */\n    renderExtra?: JSX.Element;\n\n    /**\n    * The server error text after a failed action\n    */\n    serverError: string;\n\n    /**\n    * The Command used to set the initial state\n    */\n    initialCommand?: Partial<Command>;\n\n    /**\n    * The async function to run when the action button is pressed\n    */\n    action: (command: Command) => Promise<void>;\n\n    intl: IntlShape;\n}\n\ntype State = {\n    saving: boolean;\n    clientError: null | JSX.Element | string;\n    trigger: string;\n    displayName: string;\n    description: string;\n    url: string;\n    method: 'P' | 'G' | '';\n    username: string;\n    iconUrl: string;\n    autocomplete: boolean;\n    autocompleteHint: string;\n    autocompleteDescription: string;\n}\n\nexport class AbstractCommand extends React.PureComponent<Props, State> {\n    constructor(props: Props) {\n        super(props);\n\n        this.state = this.getStateFromCommand(this.props.initialCommand || {});\n    }\n\n    getStateFromCommand = (command: Props['initialCommand']): State => {\n        return {\n            displayName: command?.display_name ?? '',\n            description: command?.description ?? '',\n            trigger: command?.trigger ?? '',\n            url: command?.url ?? '',\n            method: command?.method ?? REQUEST_POST,\n            username: command?.username ?? '',\n            iconUrl: command?.icon_url ?? '',\n            autocomplete: command?.auto_complete ?? false,\n            autocompleteHint: command?.auto_complete_hint ?? '',\n            autocompleteDescription: command?.auto_complete_desc ?? '',\n            saving: false,\n            clientError: null,\n        };\n    };\n\n    getBackstageHeader = () => {\n        if (typeof this.props.header === 'string') {\n            return <span>{this.props.header}</span>;\n        }\n\n        return (\n            <FormattedMessage\n                id={this.props.header.id}\n                defaultMessage={this.props.header.defaultMessage}\n            />\n        );\n    };\n\n    getBackstageFooter = () => {\n        if (typeof this.props.footer === 'string') {\n            return <span>{this.props.footer}</span>;\n        }\n\n        return (\n            <FormattedMessage\n                id={this.props.footer.id}\n                defaultMessage={this.props.footer.defaultMessage}\n            />\n        );\n    };\n\n    handleSubmit = (e: React.FormEvent) => {\n        e.preventDefault();\n\n        if (this.state.saving) {\n            return;\n        }\n\n        this.setState({\n            saving: true,\n            clientError: '',\n        });\n\n        let triggerWord = this.state.trigger.trim().toLowerCase();\n        if (triggerWord.indexOf('/') === 0) {\n            triggerWord = triggerWord.substr(1);\n        }\n\n        const command = {\n            display_name: this.state.displayName,\n            description: this.state.description,\n            trigger: triggerWord,\n            url: this.state.url.trim(),\n            method: this.state.method,\n            username: this.state.username,\n            icon_url: this.state.iconUrl,\n            auto_complete: this.state.autocomplete,\n            team_id: this.props.team.id,\n            auto_complete_desc: '',\n            auto_complete_hint: '',\n            token: '',\n            create_at: 0,\n            update_at: 0,\n            delete_at: 0,\n            id: '',\n            creator_id: '',\n        };\n\n        if (command.auto_complete) {\n            command.auto_complete_desc = this.state.autocompleteDescription ?? '';\n            command.auto_complete_hint = this.state.autocompleteHint ?? '';\n        }\n\n        if (!command.trigger) {\n            this.setState({\n                saving: false,\n                clientError: (\n                    <FormattedMessage\n                        id='add_command.triggerRequired'\n                        defaultMessage='A trigger word is required'\n                    />\n                ),\n            });\n\n            return;\n        }\n\n        if (command.trigger.indexOf('/') === 0) {\n            this.setState({\n                saving: false,\n                clientError: (\n                    <FormattedMessage\n                        id='add_command.triggerInvalidSlash'\n                        defaultMessage='A trigger word cannot begin with a /'\n                    />\n                ),\n            });\n\n            return;\n        }\n\n        if (command.trigger.indexOf(' ') !== -1) {\n            this.setState({\n                saving: false,\n                clientError: (\n                    <FormattedMessage\n                        id='add_command.triggerInvalidSpace'\n                        defaultMessage='A trigger word must not contain spaces'\n                    />\n                ),\n            });\n            return;\n        }\n\n        if (command.trigger.length < Constants.MIN_TRIGGER_LENGTH ||\n            command.trigger.length > Constants.MAX_TRIGGER_LENGTH) {\n            this.setState({\n                saving: false,\n                clientError: (\n                    <FormattedMessage\n                        id='add_command.triggerInvalidLength'\n                        defaultMessage='A trigger word must contain between {min} and {max} characters'\n                        values={{\n                            min: Constants.MIN_TRIGGER_LENGTH,\n                            max: Constants.MAX_TRIGGER_LENGTH,\n                        }}\n                    />\n                ),\n            });\n\n            return;\n        }\n\n        if (!command.url) {\n            this.setState({\n                saving: false,\n                clientError: (\n                    <FormattedMessage\n                        id='add_command.urlRequired'\n                        defaultMessage='A request URL is required'\n                    />\n                ),\n            });\n\n            return;\n        }\n\n        this.props.action(command).then(() => this.setState({saving: false}));\n    };\n\n    updateDisplayName = (e: ChangeEvent<HTMLInputElement>) => {\n        this.setState({\n            displayName: e.target.value,\n        });\n    };\n\n    updateDescription = (e: ChangeEvent<HTMLInputElement>) => {\n        this.setState({\n            description: e.target.value,\n        });\n    };\n\n    updateTrigger = (e: ChangeEvent<HTMLInputElement>) => {\n        this.setState({\n            trigger: e.target.value,\n        });\n    };\n\n    updateUrl = (e: ChangeEvent<HTMLInputElement>) => {\n        this.setState({\n            url: e.target.value,\n        });\n    };\n\n    updateMethod = (e: ChangeEvent<HTMLSelectElement>) => {\n        const methodValue = e.target.value;\n        if (methodValue === 'P' || methodValue === 'G' || methodValue === '') {\n            this.setState({\n                method: methodValue,\n            });\n        }\n    };\n\n    updateUsername = (e: ChangeEvent<HTMLInputElement>) => {\n        this.setState({\n            username: e.target.value,\n        });\n    };\n\n    updateIconUrl = (e: ChangeEvent<HTMLInputElement>) => {\n        this.setState({\n            iconUrl: e.target.value,\n        });\n    };\n\n    updateAutocomplete = (e: ChangeEvent<HTMLInputElement>) => {\n        this.setState({\n            autocomplete: e.target.checked,\n        });\n    };\n\n    updateAutocompleteHint = (e: ChangeEvent<HTMLInputElement>) => {\n        this.setState({\n            autocompleteHint: e.target.value,\n        });\n    };\n\n    updateAutocompleteDescription = (e: ChangeEvent<HTMLInputElement>) => {\n        this.setState({\n            autocompleteDescription: e.target.value,\n        });\n    };\n\n    render() {\n        let autocompleteHint = null;\n        let autocompleteDescription = null;\n\n        if (this.state.autocomplete) {\n            autocompleteHint = (\n                <div className='form-group'>\n                    <label\n                        className='control-label col-sm-4'\n                        htmlFor='autocompleteHint'\n                    >\n                        <FormattedMessage\n                            id='add_command.autocompleteHint'\n                            defaultMessage='Autocomplete Hint'\n                        />\n                    </label>\n                    <div className='col-md-5 col-sm-8'>\n                        <input\n                            id='autocompleteHint'\n                            type='text'\n                            maxLength={1024}\n                            className='form-control'\n                            value={this.state.autocompleteHint}\n                            onChange={this.updateAutocompleteHint}\n                            placeholder={this.props.intl.formatMessage({\n                                id: 'add_command.autocompleteHint.placeholder',\n                                defaultMessage: 'Example: [Patient Name]',\n                            })}\n                        />\n                        <div className='form__help'>\n                            <FormattedMessage\n                                id='add_command.autocompleteHint.help'\n                                defaultMessage='(Optional) Specify the arguments associated with your slash command. These are displayed as help on the autocomplete list.'\n                            />\n                        </div>\n                    </div>\n                </div>\n            );\n\n            autocompleteDescription = (\n                <div className='form-group'>\n                    <label\n                        className='control-label col-sm-4'\n                        htmlFor='autocompleteDescription'\n                    >\n                        <FormattedMessage\n                            id='add_command.autocompleteDescription'\n                            defaultMessage='Autocomplete Description'\n                        />\n                    </label>\n                    <div className='col-md-5 col-sm-8'>\n                        <input\n                            id='description'\n                            type='text'\n                            maxLength={128}\n                            className='form-control'\n                            value={this.state.autocompleteDescription}\n                            onChange={this.updateAutocompleteDescription}\n                            placeholder={this.props.intl.formatMessage({\n                                id: 'add_command.autocompleteDescription.placeholder',\n                                defaultMessage: 'Example: \"Returns search results for patient records\"',\n                            })}\n                        />\n                        <div className='form__help'>\n                            <FormattedMessage\n                                id='add_command.autocompleteDescription.help'\n                                defaultMessage='(Optional) Describe your slash command for the autocomplete list.'\n                            />\n                        </div>\n                    </div>\n                </div>\n            );\n        }\n\n        return (\n            <div className='backstage-content row'>\n                <BackstageHeader>\n                    <Link to={'/' + this.props.team.name + '/integrations/commands'}>\n                        <FormattedMessage\n                            id='installed_command.header'\n                            defaultMessage='Slash Commands'\n                        />\n                    </Link>\n                    {this.getBackstageHeader()}\n                </BackstageHeader>\n                <div className='backstage-form'>\n                    <form\n                        className='form-horizontal'\n                        onSubmit={this.handleSubmit}\n                    >\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='displayName'\n                            >\n                                <FormattedMessage\n                                    id='add_command.displayName'\n                                    defaultMessage='Title'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <input\n                                    id='displayName'\n                                    type='text'\n                                    maxLength={64}\n                                    className='form-control'\n                                    value={this.state.displayName}\n                                    onChange={this.updateDisplayName}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_command.displayName.help'\n                                        defaultMessage='Specify a title, of up to 64 characters, for the slash command settings page.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='description'\n                            >\n                                <FormattedMessage\n                                    id='add_command.description'\n                                    defaultMessage='Description'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <input\n                                    id='description'\n                                    type='text'\n                                    maxLength={128}\n                                    className='form-control'\n                                    value={this.state.description}\n                                    onChange={this.updateDescription}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_command.description.help'\n                                        defaultMessage='Describe your slash command.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='trigger'\n                            >\n                                <FormattedMessage\n                                    id='add_command.trigger'\n                                    defaultMessage='Command Trigger Word'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <input\n                                    id='trigger'\n                                    type='text'\n                                    maxLength={Constants.MAX_TRIGGER_LENGTH}\n                                    className='form-control'\n                                    value={this.state.trigger}\n                                    onChange={this.updateTrigger}\n                                    placeholder={this.props.intl.formatMessage({\n                                        id: 'add_command.trigger.placeholder',\n                                        defaultMessage: 'Command trigger e.g. \"hello\" not including the slash',\n                                    })}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_command.trigger.help'\n                                        defaultMessage='Specify a trigger word that is not a built-in command, does not contain spaces, and does not begin with the slash character.'\n                                    />\n                                </div>\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_command.trigger.helpExamples'\n                                        defaultMessage='Examples: client, employee, patient, weather'\n                                    />\n                                </div>\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_command.trigger.helpReserved'\n                                        defaultMessage='Reserved: {link}'\n                                        values={{\n                                            link: (\n                                                <ExternalLink\n                                                    href={DeveloperLinks.CUSTOM_SLASH_COMMANDS}\n                                                    location='abstract_command'\n                                                >\n                                                    <FormattedMessage\n                                                        id='add_command.trigger.helpReservedLinkText'\n                                                        defaultMessage='See built-in slash commands'\n                                                    />\n                                                </ExternalLink>\n                                            ),\n                                        }}\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='url'\n                            >\n                                <FormattedMessage\n                                    id='add_command.url'\n                                    defaultMessage='Request URL'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <OAuthConnectionAudienceInput\n                                    value={this.state.url}\n                                    onChange={this.updateUrl}\n                                    placeholder={this.props.intl.formatMessage({\n                                        id: 'add_command.url.placeholder',\n                                        defaultMessage: 'Must start with http:// or https://',\n                                    })}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_command.url.help'\n                                        defaultMessage='Specify the callback URL to receive the HTTP POST or GET event request when the slash command is run.'\n                                    />\n                                </div>\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id={'add_command.outgoing_oauth_connections.help_text'}\n                                        defaultMessage={'You can connect commands to <link>outgoing OAuth connections</link>.'}\n                                        values={{\n                                            link: (text: string) => (\n                                                <a href='https://mattermost.com/pl/outgoing-oauth-connections'>{text}</a>\n                                            ),\n                                        }}\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='method'\n                            >\n                                <FormattedMessage\n                                    id='add_command.method'\n                                    defaultMessage='Request Method'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <select\n                                    id='method'\n                                    className='form-control'\n                                    value={this.state.method}\n                                    onChange={this.updateMethod}\n                                >\n                                    <option value={REQUEST_POST}>\n                                        {Utils.localizeMessage('add_command.method.post', 'POST')}\n                                    </option>\n                                    <option value={REQUEST_GET}>\n                                        {Utils.localizeMessage('add_command.method.get', 'GET')}\n                                    </option>\n                                </select>\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_command.method.help'\n                                        defaultMessage='Specify the type of request, either POST or GET, sent to the endpoint that Mattermost hits to reach your application.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='username'\n                            >\n                                <FormattedMessage\n                                    id='add_command.username'\n                                    defaultMessage='Response Username'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <input\n                                    id='username'\n                                    type='text'\n                                    maxLength={64}\n                                    className='form-control'\n                                    value={this.state.username}\n                                    onChange={this.updateUsername}\n                                    placeholder={this.props.intl.formatMessage({\n                                        id: 'add_command.username.placeholder',\n                                        defaultMessage: 'Username',\n                                    })}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_command.username.help'\n                                        defaultMessage='(Optional) Specify the name to use when posting responses for this slash command. Usernames can be up to 22 characters, and contain lowercase letters, numbers, and the symbols \\\"-\\\", \\\"_\\\", and \\\".\\\". If left blank, your Mattermost username is used.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='iconUrl'\n                            >\n                                <FormattedMessage\n                                    id='add_command.iconUrl'\n                                    defaultMessage='Response Icon'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <input\n                                    id='iconUrl'\n                                    type='text'\n                                    maxLength={1024}\n                                    className='form-control'\n                                    value={this.state.iconUrl}\n                                    onChange={this.updateIconUrl}\n                                    placeholder={this.props.intl.formatMessage({\n                                        id: 'add_command.iconUrl.placeholder',\n                                        defaultMessage: 'https://www.example.com/myicon.png',\n                                    })}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_command.iconUrl.help'\n                                        defaultMessage='(Optional) Enter the URL of a .png or .jpg file to use as the icon when posting responses to this slash command. The file must be at least 128 pixels by 128 pixels. If left blank, your profile picture is used.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='autocomplete'\n                            >\n                                <FormattedMessage\n                                    id='add_command.autocomplete'\n                                    defaultMessage='Autocomplete'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8 checkbox'>\n                                <input\n                                    id='autocomplete'\n                                    type='checkbox'\n                                    checked={this.state.autocomplete}\n                                    onChange={this.updateAutocomplete}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_command.autocomplete.help'\n                                        defaultMessage='(Optional) Show your slash command on the autocomplete list when someone types \"/\" in the input box.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        {autocompleteHint}\n                        {autocompleteDescription}\n                        <div className='backstage-form__footer'>\n                            <FormError\n                                type='backstage'\n                                errors={[this.props.serverError, this.state.clientError]}\n                            />\n                            <Link\n                                className='btn btn-tertiary'\n                                to={'/' + this.props.team.name + '/integrations/commands'}\n                            >\n                                <FormattedMessage\n                                    id='add_command.cancel'\n                                    defaultMessage='Cancel'\n                                />\n                            </Link>\n                            <SpinnerButton\n                                className='btn btn-primary'\n                                type='submit'\n                                spinning={this.state.saving}\n                                spinningText={typeof this.props.loading === 'string' ? this.props.loading : Utils.localizeMessage(this.props.loading?.id ?? '', this.props.loading?.defaultMessage as string)}\n                                onClick={this.handleSubmit}\n                                id='saveCommand'\n                            >\n                                {this.getBackstageFooter()}\n                            </SpinnerButton>\n                            {this.props.renderExtra}\n                        </div>\n                    </form>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default injectIntl(AbstractCommand);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React, {useState} from 'react';\nimport {useIntl} from 'react-intl';\nimport type {MessageDescriptor} from 'react-intl';\nimport {useHistory} from 'react-router-dom';\n\nimport type {Command} from '@mattermost/types/integrations';\nimport type {Team} from '@mattermost/types/teams';\n\nimport type {ActionResult} from 'mattermost-redux/types/actions.js';\n\nimport AbstractCommand from '../abstract_command';\n\nexport type Props = {\n\n    /**\n    * The team data\n    */\n    team: Team;\n\n    actions: {\n\n        /**\n        * The function to call to add new command\n        */\n        addCommand: (command: Command) => Promise<ActionResult<Command>>;\n    };\n};\n\nconst AddCommand = ({team, actions}: Props) => {\n    const history = useHistory();\n    const {formatMessage} = useIntl();\n    const headerMessage = formatMessage({id: ('integrations.add'), defaultMessage: 'Add'}) as MessageDescriptor;\n    const footerMessage = formatMessage({id: ('add_command.save'), defaultMessage: 'Save'}) as MessageDescriptor;\n    const loadingMessage = formatMessage({id: ('add_command.saving'), defaultMessage: 'Saving...'}) as MessageDescriptor;\n    const [serverError, setServerError] = useState('');\n\n    const addCommand = async (command: Command) => {\n        setServerError('');\n\n        const {data, error} = await actions.addCommand(command);\n        if (data) {\n            history.push(`/${team.name}/integrations/commands/confirm?type=commands&id=${data.id}`);\n            return;\n        }\n\n        if (error) {\n            setServerError(error.message);\n        }\n    };\n\n    return (\n        <AbstractCommand\n            team={team}\n            header={headerMessage}\n            footer={footerMessage}\n            loading={loadingMessage}\n            action={addCommand}\n            serverError={serverError}\n        />\n    );\n};\n\nexport default AddCommand;\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux';\nimport type {Dispatch} from 'redux';\n\nimport {addCommand} from 'mattermost-redux/actions/integrations';\n\nimport AddCommand from './add_command';\n\nfunction mapDispatchToProps(dispatch: Dispatch) {\n    return {\n        actions: bindActionCreators({\n            addCommand,\n        }, dispatch),\n    };\n}\n\nexport default connect(null, mapDispatchToProps)(AddCommand);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport type {ReactNode} from 'react';\nimport React, {useCallback} from 'react';\nimport {FormattedMessage} from 'react-intl';\n\nimport WithTooltip from 'components/with_tooltip';\n\nimport {copyToClipboard} from 'utils/utils';\n\ntype Props = {\n    value: string;\n    tooltip?: ReactNode;\n};\n\nconst CopyText = ({\n    value,\n    tooltip,\n}: Props) => {\n    const copyText = useCallback((e: React.MouseEvent<HTMLAnchorElement, MouseEvent>) => {\n        e.preventDefault();\n        copyToClipboard(value);\n    }, [value]);\n\n    if (!document.queryCommandSupported('copy')) {\n        return null;\n    }\n\n    return (\n        <WithTooltip\n            id='copyTextTooltip'\n            placement='top'\n            title={\n                tooltip || (\n                    <FormattedMessage\n                        id='copyTextTooltip.copy'\n                        defaultMessage='Copy'\n                    />\n                )\n            }\n        >\n            <a\n                href='#'\n                data-testid='copyText'\n                className='fa fa-copy ml-2'\n                onClick={copyText}\n            />\n        </WithTooltip>\n    );\n};\n\nexport default React.memo(CopyText);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React, {useEffect} from 'react';\nimport {FormattedMessage} from 'react-intl';\nimport {Link, useHistory} from 'react-router-dom';\n\nimport type {Bot} from '@mattermost/types/bots';\nimport type {Command, IncomingWebhook, OAuthApp, OutgoingOAuthConnection, OutgoingWebhook} from '@mattermost/types/integrations';\nimport type {Team} from '@mattermost/types/teams';\nimport type {IDMappedObjects} from '@mattermost/types/utilities';\n\nimport BackstageHeader from 'components/backstage/components/backstage_header';\nimport CopyText from 'components/copy_text';\nimport ExternalLink from 'components/external_link';\nimport FormattedMarkdownMessage from 'components/formatted_markdown_message';\n\nimport {Constants, DeveloperLinks, ErrorPageTypes} from 'utils/constants';\nimport {getSiteURL} from 'utils/url';\n\ntype Props = {\n    team: Team;\n    location: {search: string};\n    commands: IDMappedObjects<Command>;\n    oauthApps: IDMappedObjects<OAuthApp>;\n    incomingHooks: IDMappedObjects<IncomingWebhook>;\n    outgoingHooks: IDMappedObjects<OutgoingWebhook>;\n    bots: Record<string, Bot>;\n    outgoingOAuthConnections: Record<string, OutgoingOAuthConnection>;\n}\n\nconst ConfirmIntegration = ({team, location, commands, oauthApps, incomingHooks, outgoingHooks, bots, outgoingOAuthConnections}: Props): JSX.Element | null => {\n    const history = useHistory();\n\n    const type = (new URLSearchParams(location.search)).get('type') || '';\n    const id = (new URLSearchParams(location.search)).get('id') || '';\n\n    useEffect(() => {\n        window.addEventListener('keypress', handleKeyPress);\n\n        return () => {\n            window.removeEventListener('keypress', handleKeyPress);\n        };\n    });\n\n    const handleKeyPress = (e: KeyboardEvent) => {\n        if (e.key === 'Enter') {\n            history.push('/' + team.name + '/integrations/' + type);\n        }\n    };\n\n    let headerText: JSX.Element;\n    let helpText: JSX.Element | JSX.Element[];\n    let tokenText: JSX.Element;\n\n    const command = commands[id];\n    const incomingHook = incomingHooks[id];\n    const outgoingHook = outgoingHooks[id];\n    const oauthApp = oauthApps[id];\n    const outgoingOAuthConnection = outgoingOAuthConnections[id];\n    const bot = bots[id];\n\n    if (type === Constants.Integrations.COMMAND && command) {\n        const commandToken = command.token;\n\n        headerText = (\n            <FormattedMessage\n                id={'slash_commands.header'}\n                defaultMessage='Slash Commands'\n            />\n        );\n        helpText = (\n            <p>\n                <FormattedMessage\n                    id='add_command.doneHelp'\n                    defaultMessage='Your slash command is set up. The following token will be sent in the outgoing payload. Please use it to verify the request came from your Mattermost team (details at <link>Slash Commands</link>).'\n                    values={{\n                        link: (msg: string) => (\n                            <ExternalLink\n                                href={DeveloperLinks.SETUP_CUSTOM_SLASH_COMMANDS}\n                                location='confirm_integration'\n                            >\n                                {msg}\n                            </ExternalLink>\n                        ),\n                    }}\n                />\n            </p>\n        );\n        tokenText = (\n            <p className='word-break--all'>\n                <FormattedMarkdownMessage\n                    id='add_command.token'\n                    defaultMessage='**Token**: {token}'\n                    values={{token: commandToken}}\n                />\n                <CopyText value={commandToken}/>\n            </p>\n        );\n    } else if (type === Constants.Integrations.INCOMING_WEBHOOK && incomingHook) {\n        const incomingHookToken = getSiteURL() + '/hooks/' + incomingHook.id;\n\n        headerText = (\n            <FormattedMessage\n                id={'incoming_webhooks.header'}\n                defaultMessage='Incoming Webhooks'\n            />\n        );\n        helpText = (\n            <p>\n                <FormattedMessage\n                    id='add_incoming_webhook.doneHelp'\n                    defaultMessage='Your incoming webhook is set up. Please send data to the following URL (details at <link>Incoming Webhooks</link>).'\n                    values={{\n                        link: (msg: string) => (\n                            <ExternalLink\n                                href={DeveloperLinks.SETUP_INCOMING_WEBHOOKS}\n                                location='confirm_integration'\n                            >\n                                {msg}\n                            </ExternalLink>\n                        ),\n                    }}\n                />\n            </p>\n        );\n        tokenText = (\n            <p className='word-break--all'>\n                <FormattedMarkdownMessage\n                    id='add_incoming_webhook.url'\n                    defaultMessage='**URL**: {url}'\n                    values={{url: '`' + incomingHookToken + '`'}}\n                />\n                <CopyText value={incomingHookToken}/>\n            </p>\n        );\n    } else if (type === Constants.Integrations.OUTGOING_WEBHOOK && outgoingHook) {\n        const outgoingHookToken = outgoingHook.token;\n\n        headerText = (\n            <FormattedMessage\n                id={'add_outgoing_webhook.header'}\n                defaultMessage='Outgoing Webhooks'\n            />\n        );\n        helpText = (\n            <p>\n                <FormattedMessage\n                    id='add_outgoing_webhook.doneHelp'\n                    defaultMessage='Your outgoing webhook is set up. The following token will be sent in the outgoing payload. Please use it to verify that the request came from your Mattermost team (details at <link>Outgoing Webhooks</link>).'\n                    values={{\n                        link: (msg: string) => (\n                            <ExternalLink\n                                href={DeveloperLinks.SETUP_OUTGOING_WEBHOOKS}\n                                location='confirm_integration'\n                            >\n                                {msg}\n                            </ExternalLink>\n                        ),\n                    }}\n                />\n            </p>\n        );\n        tokenText = (\n            <p className='word-break--all'>\n                <FormattedMarkdownMessage\n                    id='add_outgoing_webhook.token'\n                    defaultMessage='**Token**: {token}'\n                    values={{token: outgoingHookToken}}\n                />\n                <CopyText value={outgoingHookToken}/>\n            </p>\n        );\n    } else if (type === Constants.Integrations.OAUTH_APP && oauthApp) {\n        const oauthAppToken = oauthApp.id;\n        const oauthAppSecret = oauthApp.client_secret;\n\n        headerText = (\n            <FormattedMessage\n                id={'installed_oauth2_apps.header'}\n                defaultMessage='OAuth 2.0 Applications'\n            />\n        );\n\n        helpText = [];\n        helpText.push(\n            <p key='add_oauth_app.doneHelp'>\n                <FormattedMessage\n                    id='add_oauth_app.doneHelp'\n                    defaultMessage='Your OAuth 2.0 application is set up. Please use the following Client ID and Client Secret when requesting authorization for your application (details at <link>oAuth 2 Applications</link>).'\n                    values={{\n                        link: (msg: string) => (\n                            <ExternalLink\n                                href={DeveloperLinks.SETUP_OAUTH2}\n                                location='confirm_integration'\n                            >\n                                {msg}\n                            </ExternalLink>\n                        ),\n                    }}\n                />\n            </p>,\n        );\n        helpText.push(\n            <p key='add_oauth_app.clientId'>\n                <FormattedMarkdownMessage\n                    id='add_oauth_app.clientId'\n                    defaultMessage='**Client ID**: {id}'\n                    values={{id: oauthAppToken}}\n                />\n                <CopyText\n                    tooltip={\n                        <FormattedMessage\n                            id='integrations.copy_client_id'\n                            defaultMessage='Copy Client Id'\n                        />\n                    }\n                    value={oauthAppToken}\n                />\n                <br/>\n                <FormattedMarkdownMessage\n                    id='add_oauth_app.clientSecret'\n                    defaultMessage='**Client Secret**: {secret}'\n                    values={{secret: oauthAppSecret}}\n                />\n                <CopyText\n                    tooltip={\n                        <FormattedMessage\n                            id='integrations.copy_client_secret'\n                            defaultMessage='Copy Client Secret'\n                        />\n                    }\n                    value={oauthAppSecret}\n                />\n            </p>,\n        );\n\n        helpText.push(\n            <p key='add_oauth_app.doneUrlHelp'>\n                <FormattedMessage\n                    id='add_oauth_app.doneUrlHelp'\n                    defaultMessage='Here are your authorized redirect URLs.'\n                />\n            </p>,\n        );\n\n        tokenText = (\n            <p className='word-break--all'>\n                <FormattedMarkdownMessage\n                    id='add_oauth_app.url'\n                    defaultMessage='**URL(s)**: {url}'\n                    values={{url: oauthApp.callback_urls.join(', ')}}\n                />\n            </p>\n        );\n    } else if (type === Constants.Integrations.OUTGOING_OAUTH_CONNECTIONS && outgoingOAuthConnection) {\n        const clientId = outgoingOAuthConnection.client_id;\n        const clientSecret = outgoingOAuthConnection.client_secret;\n        const username = outgoingOAuthConnection.credentials_username;\n        const password = outgoingOAuthConnection.credentials_password;\n\n        headerText = (\n            <FormattedMessage\n                id='installed_outgoing_oauth_connections.header'\n                defaultMessage='Outgoing OAuth 2.0 Connections'\n            />\n        );\n\n        helpText = [];\n        helpText.push(\n            <p key='add_outgoing_oauth_connection.doneHelp'>\n                <FormattedMessage\n                    id='add_outgoing_oauth_connection.doneHelp'\n                    defaultMessage='Your Outgoing OAuth 2.0 Connection is set up. When a request is sent to one of the following Audience URLs, the Client ID and Client Secret will now be used to retrieve a token from the Token URL, before sending the integration request (details at <link>Outgoing OAuth 2.0 Connections</link>).'\n                    values={{\n                        link: (msg: string) => (\n                            <ExternalLink\n                                href={DeveloperLinks.SETUP_OAUTH2} // TODO: dev docs for outgoing oauth connections feature\n                                location='confirm_integration'\n                            >\n                                {msg}\n                            </ExternalLink>\n                        ),\n                    }}\n                />\n            </p>,\n        );\n        helpText.push(\n            <p key='add_outgoing_oauth_connection.clientId'>\n                <FormattedMarkdownMessage\n                    id='add_outgoing_oauth_connection.clientId'\n                    defaultMessage='**Client ID**: {id}'\n                    values={{id: clientId}}\n                />\n                <br/>\n                <FormattedMarkdownMessage\n                    id='add_outgoing_oauth_connection.clientSecret'\n                    defaultMessage='**Client Secret**: \\*\\*\\*\\*\\*\\*\\*\\*'\n                    values={{secret: clientSecret}}\n                />\n            </p>,\n        );\n\n        if (outgoingOAuthConnection.grant_type === 'password') {\n            helpText.push(\n                <p key='add_outgoing_oauth_connection.username'>\n                    <FormattedMarkdownMessage\n                        id='add_outgoing_oauth_connection.username'\n                        defaultMessage='**Username**: {username}'\n                        values={{username}}\n                    />\n                    <CopyText\n                        tooltip={\n                            <FormattedMessage\n                                id='integrations.copy_username'\n                                defaultMessage='Copy Username'\n                            />\n                        }\n                        value={username || ''}\n                    />\n                    <br/>\n                    <FormattedMarkdownMessage\n                        id='add_outgoing_oauth_connection.password'\n                        defaultMessage='**Password**: {password}'\n                        values={{password}}\n                    />\n                </p>,\n            );\n        }\n\n        tokenText = (\n            <>\n                <p className='word-break--all'>\n                    <FormattedMarkdownMessage\n                        id='add_outgoing_oauth_connection.token_url'\n                        defaultMessage='**Token URL**: `{url}`'\n                        values={{url: outgoingOAuthConnection.oauth_token_url}}\n                    />\n                </p>\n                <p className='word-break--all'>\n                    <FormattedMarkdownMessage\n                        id='add_outgoing_oauth_connection.audience_urls'\n                        defaultMessage='**Audience URL(s)**: `{url}`'\n                        values={{url: outgoingOAuthConnection.audiences.join(', ')}}\n                    />\n                </p>\n            </>\n        );\n    } else if (type === Constants.Integrations.BOT && bot) {\n        const botToken = (new URLSearchParams(location.search)).get('token') || '';\n\n        headerText = (\n            <FormattedMessage\n                id='bots.manage.header'\n                defaultMessage='Bot Accounts'\n            />\n        );\n        helpText = (\n            <p>\n                <FormattedMessage\n                    id='bots.manage.created.text'\n                    defaultMessage='Your bot account **{botname}** has been created successfully. Please use the following access token to connect to the bot (see [documentation](https://mattermost.com/pl/default-bot-accounts) for further details).'\n                    values={{\n                        botname: bot.display_name || bot.username,\n                        strong: (msg: string) => <strong>{msg}</strong>,\n                        link: (msg: string) => (\n                            <ExternalLink\n                                href='https://mattermost.com/pl/default-bot-accounts'\n                                location='confirm_integration'\n                            >\n                                {msg}\n                            </ExternalLink>\n                        ),\n                    }}\n                />\n            </p>\n        );\n        tokenText = (\n            <p className='word-break--all'>\n                <FormattedMarkdownMessage\n                    id='add_outgoing_webhook.token'\n                    defaultMessage='**Token**: {token}'\n                    values={{token: botToken}}\n                />\n                <CopyText value={botToken}/>\n                <br/>\n                <br/>\n                <FormattedMessage\n                    id='add_outgoing_webhook.token.message'\n                    defaultMessage='Make sure to add this bot account to teams and channels you want it to interact in. See <link>documentation</link> to learn more.'\n                    values={{\n                        link: (msg: string) => (\n                            <ExternalLink\n                                href='https://mattermost.com/pl/default-bot-accounts'\n                                location='confirm_integration'\n                            >\n                                {msg}\n                            </ExternalLink>\n                        ),\n                    }}\n                />\n            </p>\n        );\n    } else {\n        history.replace(`/error?type=${ErrorPageTypes.PAGE_NOT_FOUND}`);\n        return null;\n    }\n\n    return (\n        <div className='backstage-content row'>\n            <BackstageHeader>\n                <Link to={'/' + team.name + '/integrations/' + type}>\n                    {headerText}\n                </Link>\n                <FormattedMessage\n                    id='integrations.add'\n                    defaultMessage='Add'\n                />\n            </BackstageHeader>\n            <div className='backstage-form backstage-form__confirmation'>\n                <h4\n                    className='backstage-form__title'\n                    id='formTitle'\n                >\n                    <FormattedMessage\n                        id='integrations.successful'\n                        defaultMessage='Setup Successful'\n                    />\n                </h4>\n                {helpText}\n                {tokenText}\n                <div className='backstage-form__footer'>\n                    <Link\n                        className='btn btn-primary'\n                        type='submit'\n                        to={'/' + team.name + '/integrations/' + type}\n                        id='doneButton'\n                    >\n                        <FormattedMessage\n                            id='integrations.done'\n                            defaultMessage='Done'\n                        />\n                    </Link>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default ConfirmIntegration;\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\n\nimport {getBotAccounts} from 'mattermost-redux/selectors/entities/bots';\nimport {getCommands, getOAuthApps, getIncomingHooks, getOutgoingHooks, getOutgoingOAuthConnections} from 'mattermost-redux/selectors/entities/integrations';\n\nimport type {GlobalState} from 'types/store';\n\nimport ConfirmIntegration from './confirm_integration';\n\nfunction mapStateToProps(state: GlobalState) {\n    return {\n        commands: getCommands(state),\n        oauthApps: getOAuthApps(state),\n        incomingHooks: getIncomingHooks(state),\n        outgoingHooks: getOutgoingHooks(state),\n        bots: getBotAccounts(state),\n        outgoingOAuthConnections: getOutgoingOAuthConnections(state),\n    };\n}\n\nexport default connect(mapStateToProps)(ConfirmIntegration);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from 'react';\nimport {FormattedMessage, defineMessages} from 'react-intl';\n\nimport type {Command} from '@mattermost/types/integrations';\nimport type {Team} from '@mattermost/types/teams';\nimport type {RelationOneToOne} from '@mattermost/types/utilities';\n\nimport type {ActionResult} from 'mattermost-redux/types/actions';\n\nimport ConfirmModal from 'components/confirm_modal';\nimport LoadingScreen from 'components/loading_screen';\n\nimport {getHistory} from 'utils/browser_history';\n\nimport AbstractCommand from '../abstract_command';\n\nconst messages = defineMessages({\n    footer: {\n        id: 'edit_command.update',\n        defaultMessage: 'Update',\n    },\n    header: {\n        id: 'integrations.edit',\n        defaultMessage: 'Edit',\n    },\n    loading: {\n        id: 'edit_command.updating',\n        defaultMessage: 'Updating...',\n    },\n});\n\ntype Props = {\n\n    /**\n    * The current team\n    */\n    team: Team;\n\n    /**\n    * The id of the command to edit\n    */\n    commandId: string | null;\n\n    /**\n    * Installed slash commands to display\n    */\n    commands: RelationOneToOne<Command, Command>;\n    actions: {\n\n        /**\n        * The function to call to fetch team commands\n        */\n        getCustomTeamCommands: (teamId: string) => Promise<ActionResult>;\n\n        /**\n        * The function to call to edit command\n        */\n        editCommand: (command: Command) => Promise<ActionResult>;\n    };\n\n    /**\n    * Whether or not commands are enabled.\n    */\n    enableCommands: boolean;\n}\n\ntype State = {\n    originalCommand: Command | null;\n    showConfirmModal: boolean;\n    serverError: string;\n}\n\nexport default class EditCommand extends React.PureComponent<Props, State> {\n    private newCommand?: Command;\n\n    public constructor(props: Props) {\n        super(props);\n        this.newCommand = undefined;\n\n        this.state = {\n            originalCommand: null,\n            showConfirmModal: false,\n            serverError: '',\n        };\n    }\n\n    public componentDidMount(): void {\n        if (this.props.enableCommands) {\n            this.props.actions.getCustomTeamCommands(this.props.team.id).then(\n                () => {\n                    this.setState({\n                        originalCommand: Object.values(this.props.commands).filter((command) => command.id === this.props.commandId)[0],\n                    });\n                },\n            );\n        }\n    }\n\n    public editCommand = async (command: Command): Promise<void> => {\n        this.newCommand = command;\n\n        if (this.state.originalCommand?.id) {\n            command.id = this.state.originalCommand.id;\n        }\n\n        if (this.state.originalCommand?.url !== this.newCommand.url ||\n            this.state.originalCommand?.trigger !== this.newCommand.trigger ||\n            this.state.originalCommand?.method !== this.newCommand.method) {\n            this.handleConfirmModal();\n        } else {\n            await this.submitCommand();\n        }\n    };\n\n    public handleConfirmModal = (): void => {\n        this.setState({showConfirmModal: true});\n    };\n\n    public confirmModalDismissed = (): void => {\n        this.setState({showConfirmModal: false});\n    };\n\n    public submitCommand = async (): Promise<void> => {\n        this.setState({serverError: ''});\n\n        const {data, error} = await this.props.actions.editCommand(this.newCommand!);\n\n        if (data) {\n            getHistory().push(`/${this.props.team.name}/integrations/commands`);\n            return;\n        }\n\n        this.setState({showConfirmModal: false});\n\n        if (error) {\n            this.setState({serverError: error.message});\n        }\n    };\n\n    public renderExtra = (): JSX.Element => {\n        const confirmButton = (\n            <FormattedMessage\n                id='update_command.update'\n                defaultMessage='Update'\n            />\n        );\n\n        const confirmTitle = (\n            <FormattedMessage\n                id='update_command.confirm'\n                defaultMessage='Edit Slash Command'\n            />\n        );\n\n        const confirmMessage = (\n            <FormattedMessage\n                id='update_command.question'\n                defaultMessage='Your changes may break the existing slash command. Are you sure you would like to update it?'\n            />\n        );\n\n        return (\n            <ConfirmModal\n                title={confirmTitle}\n                message={confirmMessage}\n                confirmButtonText={confirmButton}\n                modalClass='integrations-backstage-modal'\n                show={this.state.showConfirmModal}\n                onConfirm={this.submitCommand}\n                onCancel={this.confirmModalDismissed}\n            />\n        );\n    };\n\n    public render(): JSX.Element {\n        if (!this.state.originalCommand) {\n            return <LoadingScreen/>;\n        }\n\n        return (\n            <AbstractCommand\n                team={this.props.team}\n                header={messages.header}\n                footer={messages.footer}\n                loading={messages.loading}\n                renderExtra={this.renderExtra()}\n                action={this.editCommand}\n                serverError={this.state.serverError}\n                initialCommand={this.state.originalCommand}\n            />\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux';\nimport type {Dispatch} from 'redux';\n\nimport type {GlobalState} from '@mattermost/types/store';\n\nimport {editCommand, getCustomTeamCommands} from 'mattermost-redux/actions/integrations';\nimport {getConfig} from 'mattermost-redux/selectors/entities/general';\nimport {getCommands} from 'mattermost-redux/selectors/entities/integrations';\n\nimport EditCommand from './edit_command';\n\ntype Props = {\n    location: Location;\n}\n\nfunction mapStateToProps(state: GlobalState, ownProps: Props) {\n    const config = getConfig(state);\n    const commandId = (new URLSearchParams(ownProps.location.search)).get('id');\n    const enableCommands = config.EnableCommands === 'true';\n\n    return {\n        commandId,\n        commands: getCommands(state),\n        enableCommands,\n    };\n}\n\nfunction mapDispatchToProps(dispatch: Dispatch) {\n    return {\n        actions: bindActionCreators({\n            getCustomTeamCommands,\n            editCommand,\n        }, dispatch),\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EditCommand);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\nimport {Link} from 'react-router-dom';\n\nimport type {Command} from '@mattermost/types/integrations';\nimport type {Team} from '@mattermost/types/teams';\nimport type {UserProfile} from '@mattermost/types/users';\n\nimport CopyText from 'components/copy_text';\n\nimport DeleteIntegrationLink from './delete_integration_link';\n\ntype Props = {\n\n    /**\n     * The team data\n     */\n    team: Team;\n\n    /**\n     * Installed slash command to display\n     */\n    command: Command;\n\n    /**\n     * The function to call when Regenerate Token link is clicked\n     */\n    onRegenToken: (command: Command) => void ;\n\n    /**\n     * The function to call when Delete link is clicked\n     */\n    onDelete: (command: Command) => void ;\n\n    /**\n     * Set to filter command, comes from BackstageList\n     */\n    filter?: string;\n\n    /**\n     * The creator user data\n     */\n    creator: UserProfile;\n\n    /**\n     * Set to show edit link\n     */\n    canChange: boolean;\n}\n\nexport function matchesFilter(command: Command, filter?: string) {\n    if (!filter) {\n        return true;\n    }\n\n    return command.display_name.toLowerCase().indexOf(filter) !== -1 ||\n        command.description.toLowerCase().indexOf(filter) !== -1 ||\n        command.trigger.toLowerCase().indexOf(filter) !== -1;\n}\n\nexport default class InstalledCommand extends React.PureComponent<Props> {\n    handleRegenToken = (e: React.MouseEvent) => {\n        e.preventDefault();\n\n        this.props.onRegenToken(this.props.command);\n    };\n\n    handleDelete = () => {\n        this.props.onDelete(this.props.command);\n    };\n\n    render() {\n        const command = this.props.command;\n        const filter = this.props.filter ? this.props.filter.toLowerCase() : '';\n\n        if (!matchesFilter(command, filter)) {\n            return null;\n        }\n\n        let name;\n\n        if (command.display_name) {\n            name = command.display_name;\n        } else {\n            name = (\n                <FormattedMessage\n                    id='installed_commands.unnamed_command'\n                    defaultMessage='Unnamed Slash Command'\n                />\n            );\n        }\n\n        let description = null;\n        if (command.description) {\n            description = (\n                <div className='item-details__row'>\n                    <span className='item-details__description'>\n                        {command.description}\n                    </span>\n                </div>\n            );\n        }\n\n        let trigger = '- /' + command.trigger;\n        if (command.auto_complete && command.auto_complete_hint) {\n            trigger += ' ' + command.auto_complete_hint;\n        }\n\n        let actions = null;\n        if (this.props.canChange) {\n            actions = (\n                <div className='item-actions'>\n                    <button\n                        className='style--none color--link'\n                        onClick={this.handleRegenToken}\n                    >\n                        <FormattedMessage\n                            id='installed_integrations.regenToken'\n                            defaultMessage='Regenerate Token'\n                        />\n                    </button>\n                    {' - '}\n                    <Link to={`/${this.props.team.name}/integrations/commands/edit?id=${command.id}`}>\n                        <FormattedMessage\n                            id='installed_integrations.edit'\n                            defaultMessage='Edit'\n                        />\n                    </Link>\n                    {' - '}\n                    <DeleteIntegrationLink\n                        modalMessage={\n                            <FormattedMessage\n                                id='installed_commands.delete.confirm'\n                                defaultMessage='This action permanently deletes the slash command and breaks any integrations using it. Are you sure you want to delete it?'\n                            />\n                        }\n                        onDelete={this.handleDelete}\n                    />\n                </div>\n            );\n        }\n\n        const commandToken = command.token;\n\n        return (\n            <div className='backstage-list__item'>\n                <div className='item-details'>\n                    <div className='item-details__row d-flex flex-column flex-md-row justify-content-between'>\n                        <div className='item-details__name'>\n                            <strong>\n                                {name}\n                            </strong>\n                        </div>\n                        <span className='item-details__trigger'>\n                            {trigger}\n                        </span>\n                        {actions}\n                    </div>\n                    {description}\n                    <div className='item-details__row'>\n                        <span className='item-details__token'>\n                            <FormattedMessage\n                                id='installed_integrations.token'\n                                defaultMessage='Token: {token}'\n                                values={{\n                                    token: commandToken,\n                                }}\n                            />\n                            <CopyText\n                                value={commandToken}\n                            />\n                        </span>\n                    </div>\n                    <div className='item-details__row'>\n                        <span className='item-details__creation'>\n                            <FormattedMessage\n                                id='installed_integrations.creation'\n                                defaultMessage='Created by {creator} on {createAt, date, full}'\n                                values={{\n                                    creator: this.props.creator.username,\n                                    createAt: command.create_at,\n                                }}\n                            />\n                        </span>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\n\nimport type {Command} from '@mattermost/types/integrations';\nimport type {Team} from '@mattermost/types/teams';\nimport type {UserProfile} from '@mattermost/types/users';\nimport type {RelationOneToOne} from '@mattermost/types/utilities';\n\nimport type {ActionResult} from 'mattermost-redux/types/actions';\n\nimport BackstageList from 'components/backstage/components/backstage_list';\nimport ExternalLink from 'components/external_link';\nimport FormattedMarkdownMessage from 'components/formatted_markdown_message';\n\nimport {DeveloperLinks} from 'utils/constants';\nimport * as Utils from 'utils/utils';\n\nimport InstalledCommand, {matchesFilter} from '../installed_command';\n\ntype Props = {\n    team: Team;\n    user: UserProfile;\n    users: RelationOneToOne<UserProfile, UserProfile>;\n\n    // Installed slash commands to display\n    commands: Command[];\n    loading: boolean;\n\n    // Set to allow changes to installed slash commands\n    canManageOthersSlashCommands: boolean;\n    actions: {\n\n        // The function to call when Regenerate Token link is clicked\n        regenCommandToken: (id: string) => Promise<ActionResult>;\n\n        // The function to call when Delete link is clicked\n        deleteCommand: (id: string) => Promise<ActionResult>;\n    };\n}\n\nexport default class InstalledCommands extends React.PureComponent<Props> {\n    public regenCommandToken = (command: Command): void => {\n        this.props.actions.regenCommandToken(command.id);\n    };\n\n    public deleteCommand = (command: Command): void => {\n        this.props.actions.deleteCommand(command.id);\n    };\n\n    private commandCompare(a: Command, b: Command) {\n        let nameA = a.display_name;\n        if (!nameA) {\n            nameA = Utils.localizeMessage('installed_commands.unnamed_command', 'Unnamed Slash Command');\n        }\n\n        let nameB = b.display_name;\n        if (!nameB) {\n            nameB = Utils.localizeMessage('installed_commands.unnamed_command', 'Unnamed Slash Command');\n        }\n\n        return nameA.localeCompare(nameB);\n    }\n\n    public render(): JSX.Element {\n        const commands = (filter: string) => this.props.commands.\n            filter((command) => command.team_id === this.props.team.id).\n            filter((command) => matchesFilter(command, filter)).\n            sort(this.commandCompare).map((command) => {\n                const canChange = this.props.canManageOthersSlashCommands || this.props.user.id === command.creator_id;\n\n                return (\n                    <InstalledCommand\n                        key={command.id}\n                        team={this.props.team}\n                        command={command}\n                        onRegenToken={this.regenCommandToken}\n                        onDelete={this.deleteCommand}\n                        creator={this.props.users[command.creator_id] || {}}\n                        canChange={canChange}\n                    />\n                );\n            });\n\n        return (\n            <BackstageList\n                header={\n                    <FormattedMessage\n                        id='installed_commands.header'\n                        defaultMessage='Installed Slash Commands'\n                    />\n                }\n                addText={\n                    <FormattedMessage\n                        id='installed_commands.add'\n                        defaultMessage='Add Slash Command'\n                    />\n                }\n                addLink={'/' + this.props.team.name + '/integrations/commands/add'}\n                addButtonId='addSlashCommand'\n                emptyText={\n                    <FormattedMessage\n                        id='installed_commands.empty'\n                        defaultMessage='No slash commands found'\n                    />\n                }\n                emptyTextSearch={\n                    <FormattedMarkdownMessage\n                        id='installed_commands.emptySearch'\n                        defaultMessage='No slash commands match {searchTerm}'\n                    />\n                }\n                helpText={\n                    <FormattedMessage\n                        id='installed_commands.help'\n                        defaultMessage='Use slash commands to connect external tools to Mattermost. {buildYourOwn} or visit the {appDirectory} to find self-hosted, third-party apps and integrations.'\n                        values={{\n                            buildYourOwn: (\n                                <ExternalLink\n                                    href={DeveloperLinks.SETUP_CUSTOM_SLASH_COMMANDS}\n                                    location='installed_commands'\n                                >\n                                    <FormattedMessage\n                                        id='installed_commands.help.buildYourOwn'\n                                        defaultMessage='Build Your Own'\n                                    />\n                                </ExternalLink>\n                            ),\n                            appDirectory: (\n                                <ExternalLink\n                                    href='https://mattermost.com/marketplace'\n                                    location='installed_commands'\n                                >\n                                    <FormattedMessage\n                                        id='installed_commands.help.appDirectory'\n                                        defaultMessage='App Directory'\n                                    />\n                                </ExternalLink>\n                            ),\n                        }}\n                    />\n                }\n                searchPlaceholder={Utils.localizeMessage('installed_commands.search', 'Search Slash Commands')}\n                loading={this.props.loading}\n            >\n                {(filter: string) => {\n                    const children = commands(filter);\n                    return [children, children.length > 0];\n                }}\n            </BackstageList>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux';\nimport type {Dispatch} from 'redux';\n\nimport type {GlobalState} from '@mattermost/types/store';\n\nimport {deleteCommand, regenCommandToken} from 'mattermost-redux/actions/integrations';\nimport {Permissions} from 'mattermost-redux/constants';\nimport {haveITeamPermission} from 'mattermost-redux/selectors/entities/roles';\n\nimport InstalledCommands from './installed_commands';\n\ntype Props = {\n    team: {\n        id: string;\n    };\n}\n\nfunction mapStateToProps(state: GlobalState, ownProps: Props) {\n    const canManageOthersSlashCommands = haveITeamPermission(state, ownProps.team.id, Permissions.MANAGE_OTHERS_SLASH_COMMANDS);\n\n    return {\n        canManageOthersSlashCommands,\n    };\n}\n\nfunction mapDispatchToProps(dispatch: Dispatch) {\n    return {\n        actions: bindActionCreators({\n            regenCommandToken,\n            deleteCommand,\n        }, dispatch),\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(InstalledCommands);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from 'react';\nimport {Route, Switch, Redirect} from 'react-router-dom';\n\nimport type {Command} from '@mattermost/types/integrations';\nimport type {Team} from '@mattermost/types/teams';\nimport type {UserProfile} from '@mattermost/types/users';\nimport type {RelationOneToOne} from '@mattermost/types/utilities';\n\nimport type {ActionResult} from 'mattermost-redux/types/actions';\n\nimport AddCommand from 'components/integrations/add_command';\nimport ConfirmIntegration from 'components/integrations/confirm_integration';\nimport EditCommand from 'components/integrations/edit_command';\nimport InstalledCommands from 'components/integrations/installed_commands';\n\ninterface IProps {\n    component: any;\n    extraProps: {\n        loading: boolean;\n        commands: Command[];\n        users?: RelationOneToOne<UserProfile, UserProfile>;\n        team?: Team;\n        user?: UserProfile;\n    };\n    path: string;\n}\n\nconst CommandRoute = ({component: Component, extraProps, ...rest}: IProps) => (\n    <Route\n        {...rest}\n        render={(props) => (\n            <Component\n                {...extraProps}\n                {...props}\n            />\n        )}\n    />\n);\n\ntype Props = {\n\n    /**\n     * The team data needed to pass into child components\n     */\n    team?: Team;\n\n    /**\n     * The user data needed to pass into child components\n     */\n    user?: UserProfile;\n\n    /**\n     * The users collection\n     */\n    users?: RelationOneToOne<UserProfile, UserProfile>;\n\n    /**\n     * Installed slash commands to display\n     */\n    commands: Command[];\n\n    /**\n     * Object from react-router\n     */\n    match: {\n        url: string;\n    };\n\n    actions: {\n\n        /**\n         * The function to call to fetch team commands\n         */\n        loadCommandsAndProfilesForTeam: (teamId: string) => Promise<ActionResult>;\n    };\n\n    /**\n     * Whether or not commands are enabled.\n     */\n    enableCommands?: boolean;\n};\n\ntype State = {\n    loading: boolean;\n};\n\nexport default class CommandsContainer extends React.PureComponent<Props, State> {\n    constructor(props: Props) {\n        super(props);\n        this.state = {\n            loading: true,\n        };\n    }\n\n    componentDidMount() {\n        if (this.props.enableCommands) {\n            this.props.actions.loadCommandsAndProfilesForTeam(this.props.team?.id || '').then(\n                () => this.setState({loading: false}),\n            );\n        }\n    }\n\n    render() {\n        const extraProps = {\n            loading: this.state.loading,\n            commands: this.props.commands || [],\n            users: this.props.users,\n            team: this.props.team,\n            user: this.props.user,\n        };\n        return (\n            <div>\n                <Switch>\n                    <Route\n                        exact={true}\n                        path={`${this.props.match.url}/`}\n                        render={() => (<Redirect to={`${this.props.match.url}/installed`}/>)}\n                    />\n                    <CommandRoute\n                        extraProps={extraProps}\n                        path={`${this.props.match.url}/installed`}\n                        component={InstalledCommands}\n                    />\n                    <CommandRoute\n                        extraProps={extraProps}\n                        path={`${this.props.match.url}/add`}\n                        component={AddCommand}\n                    />\n                    <CommandRoute\n                        extraProps={extraProps}\n                        path={`${this.props.match.url}/edit`}\n                        component={EditCommand}\n                    />\n                    <CommandRoute\n                        extraProps={extraProps}\n                        path={`${this.props.match.url}/confirm`}\n                        component={ConfirmIntegration}\n                    />\n                </Switch>\n            </div>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux';\nimport type {AnyAction, Dispatch} from 'redux';\n\nimport type {GlobalState} from '@mattermost/types/store';\n\nimport {getConfig} from 'mattermost-redux/selectors/entities/general';\nimport {getCommands} from 'mattermost-redux/selectors/entities/integrations';\nimport {getUsers} from 'mattermost-redux/selectors/entities/users';\n\nimport {loadCommandsAndProfilesForTeam} from 'actions/integration_actions';\n\nimport CommandsContainer from './commands_container';\n\nfunction mapStateToProps(state: GlobalState) {\n    const config = getConfig(state);\n    const enableCommands = config.EnableCommands === 'true';\n\n    return {\n        commands: Object.values(getCommands(state)),\n        users: getUsers(state),\n        enableCommands,\n    };\n}\n\nfunction mapDispatchToProps(dispatch: Dispatch<AnyAction>) {\n    return {\n        actions: bindActionCreators({\n            loadCommandsAndProfilesForTeam,\n        }, dispatch),\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CommandsContainer);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from 'react';\nimport {defineMessages} from 'react-intl';\n\nimport type {IncomingWebhook} from '@mattermost/types/integrations';\nimport type {Team} from '@mattermost/types/teams';\n\nimport type {ActionResult} from 'mattermost-redux/types/actions';\n\nimport AbstractIncomingWebhook from 'components/integrations/abstract_incoming_webhook';\nimport LoadingScreen from 'components/loading_screen';\n\nimport {getHistory} from 'utils/browser_history';\n\nconst messages = defineMessages({\n    footer: {\n        id: 'update_incoming_webhook.update',\n        defaultMessage: 'Update',\n    },\n    header: {\n        id: 'integrations.edit',\n        defaultMessage: 'Edit',\n    },\n    loading: {\n        id: 'update_incoming_webhook.updating',\n        defaultMessage: 'Updating...',\n    },\n});\n\ntype Props = {\n\n    /**\n     * The current team\n     */\n    team: Team;\n\n    /**\n     * The incoming webhook to edit\n     */\n    hook?: IncomingWebhook;\n\n    /**\n     * The id of the incoming webhook to edit\n     */\n    hookId: string;\n\n    /**\n     * Whether or not incoming webhooks are enabled.\n     */\n    enableIncomingWebhooks: boolean;\n\n    /**\n     * Whether to allow configuration of the default post username.\n     */\n    enablePostUsernameOverride: boolean;\n\n    /**\n     * Whether to allow configuration of the default post icon.\n     */\n    enablePostIconOverride: boolean;\n\n    actions: {\n\n        /**\n         * The function to call to update an incoming webhook\n         */\n        updateIncomingHook: (hook: IncomingWebhook) => Promise<ActionResult>;\n\n        /**\n         * The function to call to get an incoming webhook\n         */\n        getIncomingHook: (hookId: string) => Promise<ActionResult>;\n    };\n};\n\ntype State = {\n    serverError: string;\n};\n\nexport default class EditIncomingWebhook extends React.PureComponent<Props, State> {\n    private newHook?: IncomingWebhook;\n\n    constructor(props: Props) {\n        super(props);\n\n        this.state = {\n            serverError: '',\n        };\n    }\n\n    componentDidMount() {\n        if (this.props.enableIncomingWebhooks) {\n            this.props.actions.getIncomingHook(this.props.hookId);\n        }\n    }\n\n    editIncomingHook = async (hook: IncomingWebhook) => {\n        this.newHook = hook;\n\n        if (this.props.hook?.id) {\n            hook.id = this.props.hook.id;\n        }\n\n        await this.submitHook();\n    };\n\n    submitHook = async () => {\n        this.setState({serverError: ''});\n\n        if (!this.newHook) {\n            return;\n        }\n\n        const result = await this.props.actions.updateIncomingHook(this.newHook);\n\n        if ('data' in result) {\n            getHistory().push(`/${this.props.team.name}/integrations/incoming_webhooks`);\n            return;\n        }\n\n        if ('error' in result) {\n            const {error} = result;\n            this.setState({serverError: error.message});\n        }\n    };\n\n    render() {\n        if (!this.props.hook) {\n            return <LoadingScreen/>;\n        }\n\n        return (\n            <AbstractIncomingWebhook\n                team={this.props.team}\n                header={messages.header}\n                footer={messages.footer}\n                loading={messages.loading}\n                enablePostUsernameOverride={this.props.enablePostUsernameOverride}\n                enablePostIconOverride={this.props.enablePostIconOverride}\n                action={this.editIncomingHook}\n                serverError={this.state.serverError}\n                initialHook={this.props.hook}\n            />\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux';\nimport type {Dispatch} from 'redux';\n\nimport type {GlobalState} from '@mattermost/types/store';\n\nimport {getIncomingHook, updateIncomingHook} from 'mattermost-redux/actions/integrations';\nimport {getConfig} from 'mattermost-redux/selectors/entities/general';\n\nimport EditIncomingWebhook from './edit_incoming_webhook';\n\ntype Props = {\n    location: Location;\n}\n\nfunction mapStateToProps(state: GlobalState, ownProps: Props) {\n    const config = getConfig(state);\n    const enableIncomingWebhooks = config.EnableIncomingWebhooks === 'true';\n    const enablePostUsernameOverride = config.EnablePostUsernameOverride === 'true';\n    const enablePostIconOverride = config.EnablePostIconOverride === 'true';\n    const hookId = (new URLSearchParams(ownProps.location.search)).get('id') || '';\n\n    return {\n        hookId,\n        hook: state.entities.integrations.incomingHooks[hookId],\n        enableIncomingWebhooks,\n        enablePostUsernameOverride,\n        enablePostIconOverride,\n    };\n}\n\nfunction mapDispatchToProps(dispatch: Dispatch) {\n    return {\n        actions: bindActionCreators({\n            updateIncomingHook,\n            getIncomingHook,\n        }, dispatch),\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EditIncomingWebhook);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\n\nimport type {OAuthApp} from '@mattermost/types/integrations';\nimport type {Team} from '@mattermost/types/teams';\n\nimport type {ActionResult} from 'mattermost-redux/types/actions';\n\nimport ConfirmModal from 'components/confirm_modal';\nimport LoadingScreen from 'components/loading_screen';\n\nimport {getHistory} from 'utils/browser_history';\n\nimport AbstractOAuthApp from '../abstract_oauth_app';\n\nconst HEADER = {id: 'integrations.edit', defaultMessage: 'Edit'};\nconst FOOTER = {id: 'update_incoming_webhook.update', defaultMessage: 'Update'};\nconst LOADING = {id: 'update_incoming_webhook.updating', defaultMessage: 'Updating...'};\n\ntype Actions = {\n    getOAuthApp: (id: string) => void;\n    editOAuthApp: (app: OAuthApp) => Promise<ActionResult>;\n};\n\ntype Props = {\n    team: Team;\n    oauthAppId: string;\n    oauthApp: OAuthApp;\n    actions: Actions;\n    enableOAuthServiceProvider: boolean;\n};\n\ntype State = {\n    showConfirmModal: boolean;\n    serverError: string;\n};\n\nexport default class EditOAuthApp extends React.PureComponent<Props, State> {\n    newApp: OAuthApp;\n\n    constructor(props: Props) {\n        super(props);\n\n        this.state = {\n            showConfirmModal: false,\n            serverError: '',\n        };\n        this.newApp = this.props.oauthApp;\n    }\n\n    componentDidMount() {\n        if (this.props.enableOAuthServiceProvider) {\n            this.props.actions.getOAuthApp(this.props.oauthAppId);\n        }\n    }\n\n    editOAuthApp = async (app: OAuthApp) => {\n        this.newApp = app;\n\n        if (this.props.oauthApp.id) {\n            app.id = this.props.oauthApp.id;\n        }\n\n        const callbackUrlsSame = (this.props.oauthApp.callback_urls.length === app.callback_urls.length) &&\n            this.props.oauthApp.callback_urls.every((v, i) => v === app.callback_urls[i]);\n\n        if (callbackUrlsSame === false) {\n            this.handleConfirmModal();\n        } else {\n            await this.submitOAuthApp();\n        }\n    };\n\n    handleConfirmModal = () => {\n        this.setState({showConfirmModal: true});\n    };\n\n    confirmModalDismissed = () => {\n        this.setState({showConfirmModal: false});\n    };\n\n    submitOAuthApp = async () => {\n        this.setState({serverError: ''});\n\n        const res = await this.props.actions.editOAuthApp(this.newApp);\n\n        if ('data' in res && res.data) {\n            getHistory().push(`/${this.props.team.name}/integrations/oauth2-apps`);\n            return;\n        }\n\n        this.setState({showConfirmModal: false});\n\n        if ('error' in res) {\n            const {error: err} = res;\n            this.setState({serverError: err.message});\n        }\n    };\n\n    renderExtra = () => {\n        const confirmButton = (\n            <FormattedMessage\n                id='update_command.update'\n                defaultMessage='Update'\n            />\n        );\n\n        const confirmTitle = (\n            <FormattedMessage\n                id='update_oauth_app.confirm'\n                defaultMessage='Edit OAuth 2.0 application'\n            />\n        );\n\n        const confirmMessage = (\n            <FormattedMessage\n                id='update_oauth_app.question'\n                defaultMessage='Your changes may break the existing OAuth 2.0 application. Are you sure you would like to update it?'\n            />\n        );\n\n        return (\n            <ConfirmModal\n                title={confirmTitle}\n                message={confirmMessage}\n                confirmButtonText={confirmButton}\n                modalClass='integrations-backstage-modal'\n                show={this.state.showConfirmModal}\n                onConfirm={this.submitOAuthApp}\n                onCancel={this.confirmModalDismissed}\n            />\n        );\n    };\n\n    render() {\n        if (!this.props.oauthApp) {\n            return <LoadingScreen/>;\n        }\n\n        return (\n            <AbstractOAuthApp\n                team={this.props.team}\n                header={HEADER}\n                footer={FOOTER}\n                loading={LOADING}\n                renderExtra={this.renderExtra()}\n                action={this.editOAuthApp}\n                serverError={this.state.serverError}\n                initialApp={this.props.oauthApp}\n            />\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\n// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux';\nimport type {Dispatch} from 'redux';\n\nimport type {GlobalState} from '@mattermost/types/store';\n\nimport {getOAuthApp, editOAuthApp} from 'mattermost-redux/actions/integrations';\nimport {getConfig} from 'mattermost-redux/selectors/entities/general';\n\nimport EditOAuthApp from './edit_oauth_app';\n\ntype Props = {\n    location: Location;\n};\n\nfunction mapStateToProps(state: GlobalState, ownProps: Props) {\n    const config = getConfig(state);\n    const oauthAppId: string = (new URLSearchParams(ownProps.location.search)).get('id') || '';\n    const enableOAuthServiceProvider = config.EnableOAuthServiceProvider === 'true';\n\n    return {\n        oauthAppId,\n        oauthApp: state.entities.integrations.oauthApps[oauthAppId],\n        enableOAuthServiceProvider,\n    };\n}\n\nfunction mapDispatchToProps(dispatch: Dispatch) {\n    return {\n        actions: bindActionCreators({\n            getOAuthApp,\n            editOAuthApp,\n        }, dispatch),\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EditOAuthApp);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\n\nimport type {OutgoingWebhook} from '@mattermost/types/integrations';\nimport type {Team} from '@mattermost/types/teams';\n\nimport type {ActionResult} from 'mattermost-redux/types/actions';\n\nimport ConfirmModal from 'components/confirm_modal';\nimport AbstractOutgoingWebhook from 'components/integrations/abstract_outgoing_webhook';\nimport LoadingScreen from 'components/loading_screen';\n\nimport {getHistory} from 'utils/browser_history';\n\nconst HEADER = {id: 'integrations.edit', defaultMessage: 'Edit'};\nconst FOOTER = {id: 'update_outgoing_webhook.update', defaultMessage: 'Update'};\nconst LOADING = {id: 'update_outgoing_webhook.updating', defaultMessage: 'Updating...'};\n\nexport interface Props {\n\n    /**\n     * The current team\n     */\n    team: Team;\n\n    /**\n     * The outgoing webhook to edit\n     */\n    hook?: OutgoingWebhook;\n\n    /**\n     * The id of the outgoing webhook to edit\n     */\n    hookId: string;\n    actions: {\n\n        /**\n         * The function to call to update an outgoing webhook\n         */\n        updateOutgoingHook: (hook: OutgoingWebhook) => Promise<ActionResult<OutgoingWebhook>>;\n\n        /**\n         * The function to call to get an outgoing webhook\n         */\n        getOutgoingHook: (hookId: string) => Promise<ActionResult<OutgoingWebhook>>;\n    };\n\n    /**\n     * Whether or not outgoing webhooks are enabled.\n     */\n    enableOutgoingWebhooks?: boolean;\n\n    /**\n     * Whether to allow configuration of the default post username.\n     */\n    enablePostUsernameOverride: boolean;\n\n    /**\n     * Whether to allow configuration of the default post icon.\n     */\n    enablePostIconOverride: boolean;\n}\n\ninterface State {\n    showConfirmModal: boolean;\n    serverError: string;\n}\n\nexport default class EditOutgoingWebhook extends React.PureComponent<Props, State> {\n    private newHook: OutgoingWebhook | undefined;\n\n    constructor(props: Props) {\n        super(props);\n        this.state = {\n            showConfirmModal: false,\n            serverError: '',\n        };\n    }\n\n    componentDidMount(): void {\n        if (this.props.enableOutgoingWebhooks) {\n            this.props.actions.getOutgoingHook(this.props.hookId);\n        }\n    }\n\n    editOutgoingHook = async (hook: OutgoingWebhook): Promise<void> => {\n        this.newHook = hook;\n\n        if (this.props.hook!.id) {\n            hook.id = this.props.hook!.id;\n        }\n\n        if (this.props.hook!.token) {\n            hook.token = this.props.hook!.token;\n        }\n\n        const triggerWordsSame = (this.props.hook!.trigger_words.length === hook!.trigger_words.length) &&\n            this.props.hook!.trigger_words.every((v, i) => v === hook.trigger_words[i]);\n\n        const callbackUrlsSame = (this.props.hook!.callback_urls.length === hook!.callback_urls.length) &&\n            this.props.hook!.callback_urls.every((v, i) => v === hook.callback_urls[i]);\n\n        if (this.props.hook!.content_type !== hook.content_type ||\n            !triggerWordsSame || !callbackUrlsSame) {\n            this.handleConfirmModal();\n        } else {\n            await this.submitHook();\n        }\n    };\n\n    handleConfirmModal = (): void => {\n        this.setState({showConfirmModal: true});\n    };\n\n    confirmModalDismissed = (): void => {\n        this.setState({showConfirmModal: false});\n    };\n\n    submitHook = async (): Promise<void> => {\n        this.setState({serverError: ''});\n\n        const {data, error} = await this.props.actions.updateOutgoingHook(this.newHook!);\n\n        if (data) {\n            getHistory().push(`/${this.props.team.name}/integrations/outgoing_webhooks`);\n            return;\n        }\n\n        this.setState({showConfirmModal: false});\n\n        if (error) {\n            this.setState({serverError: error.message});\n        }\n    };\n\n    renderExtra = (): JSX.Element => {\n        const confirmButton = (\n            <FormattedMessage\n                id='update_outgoing_webhook.update'\n                defaultMessage='Update'\n            />\n        );\n\n        const confirmTitle = (\n            <FormattedMessage\n                id='update_outgoing_webhook.confirm'\n                defaultMessage='Edit Outgoing Webhook'\n            />\n        );\n\n        const confirmMessage = (\n            <FormattedMessage\n                id='update_outgoing_webhook.question'\n                defaultMessage='Your changes may break the existing outgoing webhook. Are you sure you would like to update it?'\n            />\n        );\n\n        return (\n            <ConfirmModal\n                title={confirmTitle}\n                message={confirmMessage}\n                confirmButtonText={confirmButton}\n                modalClass='integrations-backstage-modal'\n                show={this.state.showConfirmModal}\n                onConfirm={this.submitHook}\n                onCancel={this.confirmModalDismissed}\n            />\n        );\n    };\n\n    render(): JSX.Element {\n        if (!this.props.hook) {\n            return <LoadingScreen/>;\n        }\n\n        return (\n            <AbstractOutgoingWebhook\n                team={this.props.team}\n                header={HEADER}\n                footer={FOOTER}\n                loading={LOADING}\n                renderExtra={this.renderExtra()}\n                action={this.editOutgoingHook}\n                serverError={this.state.serverError}\n                initialHook={this.props.hook}\n                enablePostUsernameOverride={this.props.enablePostUsernameOverride}\n                enablePostIconOverride={this.props.enablePostIconOverride}\n            />\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux';\nimport type {Dispatch} from 'redux';\n\nimport type {GlobalState} from '@mattermost/types/store';\n\nimport {getOutgoingHook, updateOutgoingHook} from 'mattermost-redux/actions/integrations';\nimport {getConfig} from 'mattermost-redux/selectors/entities/general';\n\nimport EditOutgoingWebhook from './edit_outgoing_webhook';\n\ntype OwnProps = {\n    location: {\n        search: string | string[][] | Record<string, string> | URLSearchParams | undefined;\n    };\n}\n\nfunction mapStateToProps(state: GlobalState, ownProps: OwnProps) {\n    const config = getConfig(state);\n    const hookId = (new URLSearchParams(ownProps.location.search)).get('id');\n    const enableOutgoingWebhooks = config.EnableOutgoingWebhooks === 'true';\n    const enablePostUsernameOverride = config.EnablePostUsernameOverride === 'true';\n    const enablePostIconOverride = config.EnablePostIconOverride === 'true';\n\n    return {\n        hookId: hookId!,\n        hook: state.entities.integrations.outgoingHooks[hookId!],\n        enableOutgoingWebhooks,\n        enablePostUsernameOverride,\n        enablePostIconOverride,\n    };\n}\n\nfunction mapDispatchToProps(dispatch: Dispatch) {\n    return {\n        actions: bindActionCreators({\n            updateOutgoingHook,\n            getOutgoingHook,\n        }, dispatch),\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EditOutgoingWebhook);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\nimport {Link} from 'react-router-dom';\n\nimport type {Channel} from '@mattermost/types/channels';\nimport type {IncomingWebhook} from '@mattermost/types/integrations';\nimport type {Team} from '@mattermost/types/teams';\n\nimport CopyText from 'components/copy_text';\n\nimport {getSiteURL} from 'utils/url';\n\nimport DeleteIntegrationLink from './delete_integration_link';\n\nexport function matchesFilter(incomingWebhook: IncomingWebhook, channel: Channel, filter: string) {\n    if (!filter) {\n        return true;\n    }\n\n    if (incomingWebhook.display_name.toLowerCase().indexOf(filter) !== -1 ||\n        incomingWebhook.description.toLowerCase().indexOf(filter) !== -1) {\n        return true;\n    }\n\n    if (incomingWebhook.channel_id) {\n        if (channel && channel.name.toLowerCase().indexOf(filter) !== -1) {\n            return true;\n        }\n    }\n\n    return false;\n}\n\ntype Props = {\n\n    /**\n     * Data used for showing webhook details\n     */\n    incomingWebhook: IncomingWebhook;\n\n    /**\n     * Function to call when webhook delete button is pressed\n     */\n    onDelete: (incomingWebhook: IncomingWebhook) => void;\n\n    /**\n     * String used for filtering webhook item\n     */\n    filter?: string;\n\n    /**\n     * Data used for showing created by details\n     */\n    creator: {\n        username: string;\n    };\n\n    /**\n     *  Set to show available actions on webhook\n     */\n    canChange: boolean;\n\n    /**\n     *  Data used in routing of webhook for modifications\n     */\n    team: Team;\n\n    /**\n     *  Data used for filtering of webhook based on filter prop\n     */\n    channel: Channel;\n}\n\nexport default class InstalledIncomingWebhook extends React.PureComponent<Props> {\n    handleDelete = () => {\n        this.props.onDelete(this.props.incomingWebhook);\n    };\n\n    render() {\n        const incomingWebhook = this.props.incomingWebhook;\n        const channel = this.props.channel;\n        const filter = this.props.filter ? this.props.filter.toLowerCase() : '';\n\n        if (!matchesFilter(incomingWebhook, channel, filter)) {\n            return null;\n        }\n\n        let displayName;\n        if (incomingWebhook.display_name) {\n            displayName = incomingWebhook.display_name;\n        } else if (channel) {\n            displayName = channel.display_name;\n        } else {\n            displayName = (\n                <FormattedMessage\n                    id='installed_incoming_webhooks.unknown_channel'\n                    defaultMessage='A Private Webhook'\n                />\n            );\n        }\n\n        let description = null;\n        if (incomingWebhook.description) {\n            description = (\n                <div className='item-details__row'>\n                    <span className='item-details__description'>\n                        {incomingWebhook.description}\n                    </span>\n                </div>\n            );\n        }\n\n        let actions = null;\n        if (this.props.canChange) {\n            actions = (\n                <div className='item-actions'>\n                    <Link to={`/${this.props.team.name}/integrations/incoming_webhooks/edit?id=${incomingWebhook.id}`}>\n                        <FormattedMessage\n                            id='installed_integrations.edit'\n                            defaultMessage='Edit'\n                        />\n                    </Link>\n                    {' - '}\n                    <DeleteIntegrationLink\n                        modalMessage={\n                            <FormattedMessage\n                                id='installed_incoming_webhooks.delete.confirm'\n                                defaultMessage='This action permanently deletes the incoming webhook and breaks any integrations using it. Are you sure you want to delete it?'\n                            />\n                        }\n                        onDelete={this.handleDelete}\n                    />\n                </div>\n            );\n        }\n\n        const incomingWebhookId = getSiteURL() + '/hooks/' + incomingWebhook.id;\n\n        return (\n            <div className='backstage-list__item'>\n                <div className='item-details'>\n                    <div className='item-details__row d-flex flex-column flex-md-row justify-content-between'>\n                        <strong className='item-details__name'>\n                            {displayName}\n                        </strong>\n                        {actions}\n                    </div>\n                    {description}\n                    <div className='item-details__row'>\n                        <span className='item-details__url word-break--all'>\n                            <FormattedMessage\n                                id='installed_integrations.url'\n                                defaultMessage='URL: {url}'\n                                values={{\n                                    url: incomingWebhookId,\n                                }}\n                            />\n                            <span>\n                                <CopyText\n                                    value={incomingWebhookId}\n                                />\n                            </span>\n                        </span>\n                    </div>\n                    <div className='item-details__row'>\n                        <span className='item-details__creation'>\n                            <FormattedMessage\n                                id='installed_integrations.creation'\n                                defaultMessage='Created by {creator} on {createAt, date, full}'\n                                values={{\n                                    creator: this.props.creator.username,\n                                    createAt: incomingWebhook.create_at,\n                                }}\n                            />\n                        </span>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\n\nimport type {Channel} from '@mattermost/types/channels';\nimport type {IncomingWebhook, IncomingWebhooksWithCount} from '@mattermost/types/integrations';\nimport type {Team} from '@mattermost/types/teams';\nimport type {UserProfile} from '@mattermost/types/users';\nimport type {IDMappedObjects} from '@mattermost/types/utilities';\n\nimport type {ActionResult} from 'mattermost-redux/types/actions';\n\nimport BackstageList from 'components/backstage/components/backstage_list';\nimport ExternalLink from 'components/external_link';\nimport FormattedMarkdownMessage from 'components/formatted_markdown_message';\nimport InstalledIncomingWebhook, {matchesFilter} from 'components/integrations/installed_incoming_webhook';\n\nimport {DeveloperLinks} from 'utils/constants';\nimport * as Utils from 'utils/utils';\n\nconst PAGE_SIZE = 200;\n\ntype Props = {\n    team: Team;\n    user: UserProfile;\n    incomingHooks: IncomingWebhook[];\n    incomingHooksTotalCount: number;\n    channels: IDMappedObjects<Channel>;\n    users: IDMappedObjects<UserProfile>;\n    canManageOthersWebhooks: boolean;\n    enableIncomingWebhooks: boolean;\n    actions: {\n        removeIncomingHook: (hookId: string) => Promise<ActionResult>;\n        loadIncomingHooksAndProfilesForTeam: (teamId: string, startPageNumber: number,\n            pageSize: number, includeTotalCount: boolean) => Promise<ActionResult<IncomingWebhook[] | IncomingWebhooksWithCount>>;\n    };\n}\n\ntype State = {\n    page: number;\n    loading: boolean;\n}\n\nexport default class InstalledIncomingWebhooks extends React.PureComponent<Props, State> {\n    constructor(props: Props) {\n        super(props);\n\n        this.state = {\n            page: 0,\n            loading: true,\n        };\n    }\n\n    componentDidMount() {\n        this.loadPage(0);\n    }\n\n    deleteIncomingWebhook = (incomingWebhook: IncomingWebhook) => {\n        this.props.actions.removeIncomingHook(incomingWebhook.id);\n    };\n\n    loadPage = async (pageToLoad: number) => {\n        if (this.props.enableIncomingWebhooks) {\n            this.setState({loading: true},\n                async () => {\n                    await this.props.actions.loadIncomingHooksAndProfilesForTeam(\n                        this.props.team.id,\n                        pageToLoad,\n                        PAGE_SIZE,\n                        true,\n                    );\n                    this.setState({page: pageToLoad, loading: false});\n                },\n            );\n        }\n    };\n\n    nextPage = () => {\n        this.loadPage(this.state.page + 1);\n    };\n\n    previousPage = () => {\n        this.loadPage(this.state.page - 1);\n    };\n\n    incomingWebhookCompare = (a: IncomingWebhook, b: IncomingWebhook) => {\n        let displayNameA = a.display_name;\n        if (!displayNameA) {\n            const channelA = this.props.channels[a.channel_id];\n            if (channelA) {\n                displayNameA = channelA.display_name;\n            } else {\n                displayNameA = Utils.localizeMessage('installed_incoming_webhooks.unknown_channel', 'A Private Webhook');\n            }\n        }\n\n        const displayNameB = b.display_name;\n        return displayNameA.localeCompare(displayNameB);\n    };\n\n    incomingWebhooks = (filter: string) => this.props.incomingHooks.\n        sort(this.incomingWebhookCompare).\n        filter((incomingWebhook: IncomingWebhook) => matchesFilter(incomingWebhook, this.props.channels[incomingWebhook.channel_id], filter)).\n        map((incomingWebhook: IncomingWebhook) => {\n            const canChange = this.props.canManageOthersWebhooks || this.props.user.id === incomingWebhook.user_id;\n            const channel = this.props.channels[incomingWebhook.channel_id];\n            return (\n                <InstalledIncomingWebhook\n                    key={incomingWebhook.id}\n                    incomingWebhook={incomingWebhook}\n                    onDelete={this.deleteIncomingWebhook}\n                    creator={this.props.users[incomingWebhook.user_id] || {}}\n                    canChange={canChange}\n                    team={this.props.team}\n                    channel={channel}\n                />\n            );\n        });\n\n    render() {\n        return (\n            <BackstageList\n                header={\n                    <FormattedMessage\n                        id='installed_incoming_webhooks.header'\n                        defaultMessage='Installed Incoming Webhooks'\n                    />\n                }\n                addText={\n                    <FormattedMessage\n                        id='installed_incoming_webhooks.add'\n                        defaultMessage='Add Incoming Webhook'\n                    />\n                }\n                addLink={'/' + this.props.team.name + '/integrations/incoming_webhooks/add'}\n                addButtonId='addIncomingWebhook'\n                emptyText={\n                    <FormattedMessage\n                        id='installed_incoming_webhooks.empty'\n                        defaultMessage='No incoming webhooks found'\n                    />\n                }\n                emptyTextSearch={\n                    <FormattedMarkdownMessage\n                        id='installed_incoming_webhooks.emptySearch'\n                        defaultMessage='No incoming webhooks match {searchTerm}'\n                    />\n                }\n                helpText={\n                    <FormattedMessage\n                        id='installed_incoming_webhooks.help'\n                        defaultMessage='Use incoming webhooks to connect external tools to Mattermost. {buildYourOwn} or visit the {appDirectory} to find self-hosted, third-party apps and integrations.'\n                        values={{\n                            buildYourOwn: (\n                                <ExternalLink\n                                    location='installed_incoming_webhooks'\n                                    href={DeveloperLinks.SETUP_INCOMING_WEBHOOKS}\n                                >\n                                    <FormattedMessage\n                                        id='installed_incoming_webhooks.help.buildYourOwn'\n                                        defaultMessage='Build Your Own'\n                                    />\n                                </ExternalLink>\n                            ),\n                            appDirectory: (\n                                <ExternalLink\n                                    href='https://mattermost.com/marketplace'\n                                    location='installed_incoming_webhooks'\n                                >\n                                    <FormattedMessage\n                                        id='installed_incoming_webhooks.help.appDirectory'\n                                        defaultMessage='App Directory'\n                                    />\n                                </ExternalLink>\n                            ),\n                        }}\n                    />\n                }\n                searchPlaceholder={Utils.localizeMessage('installed_incoming_webhooks.search', 'Search Incoming Webhooks')}\n                loading={this.state.loading}\n                nextPage={this.nextPage}\n                previousPage={this.previousPage}\n                page={this.state.page}\n                pageSize={PAGE_SIZE}\n                total={this.props.incomingHooksTotalCount}\n            >\n                {(filter: string) => {\n                    const children = this.incomingWebhooks(filter);\n                    return [children, children.length > 0];\n                }}\n            </BackstageList>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux';\nimport type {Dispatch} from 'redux';\n\nimport type {GlobalState} from '@mattermost/types/store';\n\nimport {removeIncomingHook} from 'mattermost-redux/actions/integrations';\nimport {Permissions} from 'mattermost-redux/constants';\nimport {getAllChannels} from 'mattermost-redux/selectors/entities/channels';\nimport {getConfig} from 'mattermost-redux/selectors/entities/general';\nimport {getFilteredIncomingHooks, getIncomingHooksTotalCount} from 'mattermost-redux/selectors/entities/integrations';\nimport {haveITeamPermission} from 'mattermost-redux/selectors/entities/roles';\nimport {getCurrentTeamId} from 'mattermost-redux/selectors/entities/teams';\nimport {getUsers} from 'mattermost-redux/selectors/entities/users';\n\nimport {loadIncomingHooksAndProfilesForTeam} from 'actions/integration_actions';\n\nimport InstalledIncomingWebhooks from './installed_incoming_webhooks';\n\nfunction mapStateToProps(state: GlobalState) {\n    const teamId = getCurrentTeamId(state);\n    const incomingHooks = getFilteredIncomingHooks(state);\n    const incomingHooksTotalCount = getIncomingHooksTotalCount(state);\n    const config = getConfig(state);\n    const canManageOthersWebhooks = haveITeamPermission(state, teamId, Permissions.MANAGE_OTHERS_INCOMING_WEBHOOKS);\n    const enableIncomingWebhooks = config.EnableIncomingWebhooks === 'true';\n\n    return {\n        incomingHooks,\n        incomingHooksTotalCount,\n        channels: getAllChannels(state),\n        users: getUsers(state),\n        canManageOthersWebhooks,\n        enableIncomingWebhooks,\n    };\n}\n\nfunction mapDispatchToProps(dispatch: Dispatch) {\n    return {\n        actions: bindActionCreators({\n            loadIncomingHooksAndProfilesForTeam,\n            removeIncomingHook,\n        }, dispatch),\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(InstalledIncomingWebhooks);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\nimport {Link} from 'react-router-dom';\n\nimport type {OAuthApp} from '@mattermost/types/integrations';\nimport type {Team} from '@mattermost/types/teams';\n\nimport CopyText from 'components/copy_text';\nimport FormError from 'components/form_error';\nimport FormattedMarkdownMessage from 'components/formatted_markdown_message';\n\nimport * as Utils from 'utils/utils';\n\nimport DeleteIntegrationLink from '../delete_integration_link';\n\nconst FAKE_SECRET = '***************';\n\nexport function matchesFilter(oauthApp: OAuthApp, filter?: string | null): boolean {\n    if (!filter) {\n        return true;\n    }\n\n    return oauthApp.name.toLowerCase().includes(filter);\n}\n\nexport type InstalledOAuthAppProps = {\n\n    /**\n     * The team data\n     */\n    team?: Team;\n\n    /**\n     * The oauthApp data\n     */\n    oauthApp: OAuthApp;\n\n    /**\n     * Whether the oauth app is created by an App\n     */\n    fromApp: boolean;\n\n    creatorName: string;\n\n    /**\n     * The function to call when Regenerate Secret link is clicked\n     */\n    onRegenerateSecret: (oauthAppId: string) => Promise<{ error?: { message: string } }>;\n\n    /**\n     * The function to call when Delete link is clicked\n     */\n    onDelete: (oauthApp: OAuthApp) => void;\n\n    /**\n     * Set to filter OAuthApp\n     */\n    filter?: string | null;\n}\n\nexport type InstalleOAuthAppState = {\n    clientSecret: string;\n    error?: string | null;\n}\n\nexport default class InstalledOAuthApp extends React.PureComponent<InstalledOAuthAppProps, InstalleOAuthAppState> {\n    constructor(props: InstalledOAuthAppProps) {\n        super(props);\n\n        this.state = {\n            clientSecret: FAKE_SECRET,\n        };\n    }\n\n    handleShowClientSecret = (e?: React.MouseEvent): void => {\n        if (e && e.preventDefault) {\n            e.preventDefault();\n        }\n        this.setState({clientSecret: this.props.oauthApp.client_secret});\n    };\n\n    handleHideClientSecret = (e: React.MouseEvent): void => {\n        e.preventDefault();\n        this.setState({clientSecret: FAKE_SECRET});\n    };\n\n    handleRegenerate = (e: React.MouseEvent): void => {\n        e.preventDefault();\n        this.props.onRegenerateSecret(this.props.oauthApp.id).then(\n            ({error}) => {\n                if (error) {\n                    this.setState({error: error.message});\n                } else {\n                    this.setState({error: null});\n                    this.handleShowClientSecret();\n                }\n            },\n        );\n    };\n\n    handleDelete = (): void => {\n        this.props.onDelete(this.props.oauthApp);\n    };\n\n    render(): React.ReactNode {\n        const {oauthApp, creatorName} = this.props;\n        let error;\n\n        if (this.state.error) {\n            error = (\n                <FormError\n                    error={this.state.error}\n                />\n            );\n        }\n\n        if (!matchesFilter(oauthApp, this.props.filter)) {\n            return null;\n        }\n\n        let name;\n        if (oauthApp.name) {\n            name = oauthApp.name;\n        } else {\n            name = (\n                <FormattedMessage\n                    id='installed_integrations.unnamed_oauth_app'\n                    defaultMessage='Unnamed OAuth 2.0 Application'\n                />\n            );\n        }\n\n        let description;\n        if (oauthApp.description) {\n            description = (\n                <div className='item-details__row'>\n                    <span className='item-details__description'>\n                        {oauthApp.description}\n                    </span>\n                </div>\n            );\n        }\n\n        const urls = (\n            <div className='item-details__row'>\n                <span className='item-details__url word-break--all'>\n                    <FormattedMessage\n                        id='installed_integrations.callback_urls'\n                        defaultMessage='Callback URLs: {urls}'\n                        values={{\n                            urls: oauthApp.callback_urls.join(', '),\n                        }}\n                    />\n                </span>\n            </div>\n        );\n\n        let isTrusted;\n        if (oauthApp.is_trusted) {\n            isTrusted = Utils.localizeMessage('installed_oauth_apps.trusted.yes', 'Yes');\n        } else {\n            isTrusted = Utils.localizeMessage('installed_oauth_apps.trusted.no', 'No');\n        }\n\n        let showHide;\n        let clientSecret;\n        if (this.state.clientSecret === FAKE_SECRET) {\n            showHide = (\n                <button\n                    id='showSecretButton'\n                    className='style--none color--link'\n                    onClick={this.handleShowClientSecret}\n                >\n                    <FormattedMessage\n                        id='installed_integrations.showSecret'\n                        defaultMessage='Show Secret'\n                    />\n                </button>\n            );\n            clientSecret = (\n                <span className='item-details__token'>\n                    <FormattedMessage\n                        id='installed_integrations.client_secret'\n                        defaultMessage='Client Secret: **{clientSecret}**'\n                        values={{\n                            clientSecret: this.state.clientSecret,\n                        }}\n                    />\n                </span>\n            );\n        } else {\n            showHide = (\n                <button\n                    id='hideSecretButton'\n                    className='style--none color--link'\n                    onClick={this.handleHideClientSecret}\n                >\n                    <FormattedMessage\n                        id='installed_integrations.hideSecret'\n                        defaultMessage='Hide Secret'\n                    />\n                </button>\n            );\n            clientSecret = (\n                <span className='item-details__token'>\n                    <FormattedMarkdownMessage\n                        id='installed_integrations.client_secret'\n                        defaultMessage='Client Secret: **{clientSecret}**'\n                        values={{\n                            clientSecret: this.state.clientSecret,\n                        }}\n                    />\n                    <CopyText\n                        tooltip={\n                            <FormattedMessage\n                                id='integrations.copy_client_secret'\n                                defaultMessage='Copy Client Secret'\n                            />\n                        }\n                        value={this.state.clientSecret}\n                    />\n                </span>\n            );\n        }\n\n        const regen = (\n            <button\n                id='regenerateSecretButton'\n                className='style--none color--link'\n                onClick={this.handleRegenerate}\n            >\n                <FormattedMessage\n                    id='installed_integrations.regenSecret'\n                    defaultMessage='Regenerate Secret'\n                />\n            </button>\n        );\n\n        let icon;\n        if (oauthApp.icon_url) {\n            icon = (\n                <div className='integration__icon integration-list__icon'>\n                    <img\n                        alt={'get app screenshot'}\n                        src={oauthApp.icon_url}\n                    />\n                </div>\n            );\n        }\n\n        let actions;\n        if (!this.props.fromApp) {\n            actions = (\n                <div className='item-actions'>\n                    {showHide}\n                    {' - '}\n                    {regen}\n                    {' - '}\n                    <Link to={`/${this.props.team?.name}/integrations/oauth2-apps/edit?id=${oauthApp.id}`}>\n                        <FormattedMessage\n                            id='installed_integrations.edit'\n                            defaultMessage='Edit'\n                        />\n                    </Link>\n                    {' - '}\n                    <DeleteIntegrationLink\n                        modalMessage={\n                            <FormattedMessage\n                                id='installed_oauth_apps.delete.confirm'\n                                defaultMessage='This action permanently deletes the OAuth 2.0 application and breaks any integrations using it. Are you sure you want to delete it?'\n                            />\n                        }\n                        onDelete={this.handleDelete}\n                    />\n                </div>\n            );\n        }\n\n        let appInfo = (\n            <div className='item-details__row'>\n                <span className='item-details__creation'>\n                    <FormattedMessage\n                        id='installed_integrations.fromApp'\n                        defaultMessage='Managed by Apps Framework'\n                    />\n                </span>\n            </div>\n        );\n        if (!this.props.fromApp) {\n            appInfo = (\n                <>\n                    <div className='item-details__row'>\n                        <span className='item-details__url word-break--all'>\n                            <FormattedMarkdownMessage\n                                id='installed_oauth_apps.is_trusted'\n                                defaultMessage='Is Trusted: **{isTrusted}**'\n                                values={{\n                                    isTrusted,\n                                }}\n                            />\n                        </span>\n                    </div>\n                    <div className='item-details__row'>\n                        <span className='item-details__token'>\n                            <FormattedMarkdownMessage\n                                id='installed_integrations.client_id'\n                                defaultMessage='Client ID: **{clientId}**'\n                                values={{\n                                    clientId: oauthApp.id,\n                                }}\n                            />\n                            <CopyText\n                                tooltip={\n                                    <FormattedMessage\n                                        id='integrations.copy_client_id'\n                                        defaultMessage='Copy Client Id'\n                                    />\n                                }\n                                value={oauthApp.id}\n                            />\n                        </span>\n                    </div>\n                    <div className='item-details__row'>\n                        {clientSecret}\n                    </div>\n                    {urls}\n                    <div className='item-details__row'>\n                        <span className='item-details__creation'>\n                            <FormattedMessage\n                                id='installed_integrations.creation'\n                                defaultMessage='Created by {creator} on {createAt, date, full}'\n                                values={{\n                                    creator: creatorName,\n                                    createAt: oauthApp.create_at,\n                                }}\n                            />\n                        </span>\n                    </div>\n                </>\n            );\n        }\n\n        return (\n            <div className='backstage-list__item'>\n                {icon}\n                <div className='item-details'>\n                    <div className='item-details__row d-flex flex-column flex-md-row justify-content-between'>\n                        <strong className='item-details__name'>\n                            {name}\n                        </strong>\n                        {actions}\n                    </div>\n                    {error}\n                    {description}\n                    {appInfo}\n                </div>\n            </div>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\n\nimport {getUser} from 'mattermost-redux/selectors/entities/users';\n\nimport {getDisplayNameByUser} from 'utils/utils';\n\nimport type {GlobalState} from 'types/store';\n\nimport InstalledOAuthApp from './installed_oauth_app';\nimport type {InstalledOAuthAppProps} from './installed_oauth_app';\n\nfunction mapStateToProps(state: GlobalState, ownProps: InstalledOAuthAppProps) {\n    const oauthApp = ownProps.oauthApp || {};\n    return {\n        creatorName: getDisplayNameByUser(state, getUser(state, oauthApp.creator_id)),\n    };\n}\n\nexport default connect(mapStateToProps)(InstalledOAuthApp);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\n\nimport type {OAuthApp} from '@mattermost/types/integrations';\nimport type {Team} from '@mattermost/types/teams';\n\nimport type {ActionResult} from 'mattermost-redux/types/actions';\n\nimport BackstageList from 'components/backstage/components/backstage_list';\nimport ExternalLink from 'components/external_link';\nimport FormattedMarkdownMessage from 'components/formatted_markdown_message';\n\nimport {DeveloperLinks} from 'utils/constants';\nimport {localizeMessage} from 'utils/utils';\n\nimport InstalledOAuthApp from '../installed_oauth_app';\nimport {matchesFilter} from '../installed_oauth_app/installed_oauth_app';\n\ntype Props = {\n\n    /**\n    * The team data\n    */\n    team?: Team;\n\n    /**\n    * The oauthApps data\n    */\n    oauthApps: {\n        [key: string]: OAuthApp;\n    };\n\n    /**\n     * List of IDs for apps managed by the App Framwork\n     */\n    appsOAuthAppIDs: string[];\n\n    /**\n    * Set if user can manage oath\n    */\n    canManageOauth: boolean;\n\n    /**\n    * Whether or not OAuth applications are enabled.\n    */\n    enableOAuthServiceProvider: boolean;\n\n    actions: ({\n\n        /**\n        * The function to call to fetch OAuth apps\n        */\n        loadOAuthAppsAndProfiles: (page?: number, perPage?: number) => Promise<ActionResult>;\n\n        /**\n        * The function to call when Regenerate Secret link is clicked\n        */\n        regenOAuthAppSecret: (appId: string) => Promise<ActionResult>;\n\n        /**\n        * The function to call when Delete link is clicked\n        */\n        deleteOAuthApp: (appId: string) => Promise<ActionResult>;\n    });\n};\n\ntype State = {\n    loading: boolean;\n};\n\nexport default class InstalledOAuthApps extends React.PureComponent<Props, State> {\n    constructor(props: Props) {\n        super(props);\n        this.state = {\n            loading: true,\n        };\n    }\n\n    componentDidMount(): void {\n        if (this.props.enableOAuthServiceProvider) {\n            this.props.actions.loadOAuthAppsAndProfiles().then(\n                () => this.setState({loading: false}),\n            );\n        }\n    }\n\n    deleteOAuthApp = (app: OAuthApp): void => {\n        if (app && app.id) {\n            this.props.actions.deleteOAuthApp(app.id);\n        }\n    };\n\n    oauthAppCompare(a: OAuthApp, b: OAuthApp): number {\n        let nameA = a.name.toString();\n        if (!nameA) {\n            nameA = localizeMessage('installed_integrations.unnamed_oauth_app', 'Unnamed OAuth 2.0 Application');\n        }\n\n        let nameB = b.name.toString();\n        if (!nameB) {\n            nameB = localizeMessage('installed_integrations.unnamed_oauth_app', 'Unnamed OAuth 2.0 Application');\n        }\n\n        return nameA.localeCompare(nameB);\n    }\n\n    oauthApps = (filter?: string) => Object.values(this.props.oauthApps).\n        filter((app) => matchesFilter(app, filter)).\n        sort(this.oauthAppCompare).\n        map((app) => {\n            return (\n                <InstalledOAuthApp\n                    key={app.id}\n                    oauthApp={app}\n                    onRegenerateSecret={this.props.actions.regenOAuthAppSecret}\n                    onDelete={this.deleteOAuthApp}\n                    team={this.props.team}\n                    creatorName=''\n                    fromApp={this.props.appsOAuthAppIDs.includes(app.id)}\n                />\n            );\n        });\n\n    render() {\n        if (!this.props.team) {\n            return null;\n        }\n        const integrationsEnabled = this.props.enableOAuthServiceProvider && this.props.canManageOauth;\n        let props;\n        if (integrationsEnabled) {\n            props = {\n                addLink: '/' + this.props.team.name + '/integrations/oauth2-apps/add',\n                addText: localizeMessage('installed_oauth_apps.add', 'Add OAuth 2.0 Application'),\n                addButtonId: 'addOauthApp',\n            };\n        }\n\n        return (\n            <BackstageList\n                header={\n                    <FormattedMessage\n                        id='installed_oauth2_apps.header'\n                        defaultMessage='OAuth 2.0 Applications'\n                    />\n                }\n                helpText={\n                    <FormattedMessage\n                        id='installed_oauth_apps.help'\n                        defaultMessage='Create {oauthApplications} to securely integrate bots and third-party apps with Mattermost. Visit the {appDirectory} to find available self-hosted apps.'\n                        values={{\n                            oauthApplications: (\n                                <ExternalLink\n                                    href={DeveloperLinks.SETUP_OAUTH2}\n                                    location='installed_oauth_apps'\n                                >\n                                    <FormattedMessage\n                                        id='installed_oauth_apps.help.oauthApplications'\n                                        defaultMessage='OAuth 2.0 applications'\n                                    />\n                                </ExternalLink>\n                            ),\n                            appDirectory: (\n                                <ExternalLink\n                                    href='https://mattermost.com/marketplace/'\n                                    location='installed_oauth_apps'\n                                >\n                                    <FormattedMessage\n                                        id='installed_oauth_apps.help.appDirectory'\n                                        defaultMessage='App Directory'\n                                    />\n                                </ExternalLink>\n                            ),\n                        }}\n                    />\n                }\n                emptyText={\n                    <FormattedMessage\n                        id='installed_oauth_apps.empty'\n                        defaultMessage='No OAuth 2.0 Applications found'\n                    />\n                }\n                emptyTextSearch={\n                    <FormattedMarkdownMessage\n                        id='installed_oauth_apps.emptySearch'\n                        defaultMessage='No OAuth 2.0 Applications match {searchTerm}'\n                    />\n                }\n                searchPlaceholder={localizeMessage('installed_oauth_apps.search', 'Search OAuth 2.0 Applications')}\n                loading={this.state.loading}\n                {...props}\n            >\n                {(filter: string) => {\n                    const children = this.oauthApps(filter);\n                    return [children, children.length > 0];\n                }}\n            </BackstageList>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux';\nimport type {Dispatch} from 'redux';\n\nimport type {GlobalState} from '@mattermost/types/store';\n\nimport {regenOAuthAppSecret, deleteOAuthApp} from 'mattermost-redux/actions/integrations';\nimport {Permissions} from 'mattermost-redux/constants';\nimport {getConfig} from 'mattermost-redux/selectors/entities/general';\nimport {getAppsOAuthAppIDs, getOAuthApps} from 'mattermost-redux/selectors/entities/integrations';\nimport {haveISystemPermission} from 'mattermost-redux/selectors/entities/roles';\nimport {getCurrentTeam} from 'mattermost-redux/selectors/entities/teams';\n\nimport {loadOAuthAppsAndProfiles} from 'actions/integration_actions';\n\nimport InstalledOAuthApps from './installed_oauth_apps';\n\nfunction mapStateToProps(state: GlobalState) {\n    const config = getConfig(state);\n    const enableOAuthServiceProvider = config.EnableOAuthServiceProvider === 'true';\n\n    return {\n        canManageOauth: haveISystemPermission(state, {permission: Permissions.MANAGE_OAUTH}),\n        oauthApps: getOAuthApps(state),\n        appsOAuthAppIDs: getAppsOAuthAppIDs(state),\n        enableOAuthServiceProvider,\n        team: getCurrentTeam(state),\n    };\n}\n\nfunction mapDispatchToProps(dispatch: Dispatch) {\n    return {\n        actions: bindActionCreators({\n            loadOAuthAppsAndProfiles,\n            regenOAuthAppSecret,\n            deleteOAuthApp,\n        }, dispatch),\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(InstalledOAuthApps);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\nimport {Link} from 'react-router-dom';\n\nimport type {Channel} from '@mattermost/types/channels';\nimport type {OutgoingWebhook} from '@mattermost/types/integrations';\nimport type {Team} from '@mattermost/types/teams';\nimport type {UserProfile} from '@mattermost/types/users';\n\nimport CopyText from 'components/copy_text';\n\nimport DeleteIntegrationLink from './delete_integration_link';\n\nexport function matchesFilter(outgoingWebhook: OutgoingWebhook, channel: Channel, filter: string) {\n    if (!filter) {\n        return true;\n    }\n\n    const {\n        display_name: displayName,\n        description,\n        trigger_words: triggerWords,\n    } = outgoingWebhook;\n\n    if (\n        (displayName && displayName.toLowerCase().indexOf(filter) !== -1) ||\n        (description && description.toLowerCase().indexOf(filter) !== -1)\n    ) {\n        return true;\n    }\n\n    if (triggerWords) {\n        for (const triggerWord of triggerWords) {\n            if (triggerWord.toLowerCase().indexOf(filter) !== -1) {\n                return true;\n            }\n        }\n    }\n\n    if (channel && channel.name) {\n        if (channel.name.toLowerCase().indexOf(filter) !== -1) {\n            return true;\n        }\n    }\n\n    return false;\n}\n\ntype Props = {\n    outgoingWebhook: OutgoingWebhook;\n    onRegenToken: (outgoingWebhook: OutgoingWebhook) => void;\n    onDelete: (outgoingWebhook: OutgoingWebhook) => void;\n    team: Team;\n    creator: UserProfile;\n    channel: Channel;\n    canChange: boolean;\n    filter?: string;\n}\n\nexport default class InstalledOutgoingWebhook extends React.PureComponent<Props> {\n    handleRegenToken = (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\n        e.preventDefault();\n\n        this.props.onRegenToken(this.props.outgoingWebhook);\n    };\n\n    handleDelete = () => {\n        this.props.onDelete(this.props.outgoingWebhook);\n    };\n\n    makeDisplayName(outgoingWebhook: OutgoingWebhook, channel: Channel) {\n        if (outgoingWebhook.display_name) {\n            return outgoingWebhook.display_name;\n        } else if (channel) {\n            return channel.display_name;\n        }\n        return (\n            <FormattedMessage\n                id='installed_outgoing_webhooks.unknown_channel'\n                defaultMessage='A Private Webhook'\n            />\n        );\n    }\n\n    render() {\n        const outgoingWebhook = this.props.outgoingWebhook;\n        const channel = this.props.channel;\n        const filter = this.props.filter ? this.props.filter.toLowerCase() : '';\n        const triggerWordsFull = 0;\n        const triggerWordsStartsWith = 1;\n\n        if (outgoingWebhook && !matchesFilter(outgoingWebhook, channel, filter)) {\n            return null;\n        }\n\n        const displayName = this.makeDisplayName(outgoingWebhook, channel);\n\n        let description = null;\n        if (outgoingWebhook.description) {\n            description = (\n                <div className='item-details__row'>\n                    <span className='item-details__description'>\n                        {outgoingWebhook.description}\n                    </span>\n                </div>\n            );\n        }\n\n        let triggerWords = null;\n        if (outgoingWebhook.trigger_words && outgoingWebhook.trigger_words.length > 0) {\n            triggerWords = (\n                <div className='item-details__row'>\n                    <span className='item-details__trigger-words'>\n                        <FormattedMessage\n                            id='installed_integrations.triggerWords'\n                            defaultMessage='Trigger Words: {triggerWords}'\n                            values={{\n                                triggerWords: outgoingWebhook.trigger_words.join(', '),\n                            }}\n                        />\n                    </span>\n                </div>\n            );\n        }\n\n        const urls = (\n            <div className='item-details__row'>\n                <span className='item-details__url word-break--all'>\n                    <FormattedMessage\n                        id='installed_integrations.callback_urls'\n                        defaultMessage='Callback URLs: {urls}'\n                        values={{\n                            urls: outgoingWebhook.callback_urls.join(', '),\n                        }}\n                    />\n                </span>\n            </div>\n        );\n\n        let triggerWhen;\n        if (outgoingWebhook.trigger_when === triggerWordsFull) {\n            triggerWhen = (\n                <FormattedMessage\n                    id='add_outgoing_webhook.triggerWordsTriggerWhenFullWord'\n                    defaultMessage='First word matches a trigger word exactly'\n                />\n            );\n        } else if (outgoingWebhook.trigger_when === triggerWordsStartsWith) {\n            triggerWhen = (\n                <FormattedMessage\n                    id='add_outgoing_webhook.triggerWordsTriggerWhenStartsWith'\n                    defaultMessage='First word starts with a trigger word'\n                />\n            );\n        }\n\n        let actions = null;\n        if (this.props.canChange) {\n            actions = (\n                <div className='item-actions'>\n                    <button\n                        className='style--none color--link'\n                        onClick={this.handleRegenToken}\n                    >\n                        <FormattedMessage\n                            id='installed_integrations.regenToken'\n                            defaultMessage='Regenerate Token'\n                        />\n                    </button>\n                    {' - '}\n                    <Link to={`/${this.props.team.name}/integrations/outgoing_webhooks/edit?id=${outgoingWebhook.id}`}>\n                        <FormattedMessage\n                            id='installed_integrations.edit'\n                            defaultMessage='Edit'\n                        />\n                    </Link>\n                    {' - '}\n                    <DeleteIntegrationLink\n                        modalMessage={\n                            <FormattedMessage\n                                id='installed_outgoing_webhooks.delete.confirm'\n                                defaultMessage='This action permanently deletes the outgoing webhook and breaks any integrations using it. Are you sure you want to delete it?'\n                            />\n                        }\n                        onDelete={this.handleDelete}\n                    />\n                </div>\n            );\n        }\n\n        return (\n            <div className='backstage-list__item'>\n                <div className='item-details'>\n                    <div className='item-details__row d-flex flex-column flex-md-row justify-content-between'>\n                        <strong className='item-details__name'>\n                            {displayName}\n                        </strong>\n                        {actions}\n                    </div>\n                    {description}\n                    <div className='item-details__row'>\n                        <span className='item-details__content_type'>\n                            <FormattedMessage\n                                id='installed_integrations.content_type'\n                                defaultMessage='Content-Type: {contentType}'\n                                values={{\n                                    contentType: outgoingWebhook.content_type || 'application/x-www-form-urlencoded',\n                                }}\n                            />\n                        </span>\n                    </div>\n                    {triggerWords}\n                    <div className='item-details__row'>\n                        <span className='item-details__trigger-when'>\n                            <FormattedMessage\n                                id='installed_integrations.triggerWhen'\n                                defaultMessage='Trigger When: {triggerWhen}'\n                                values={{\n                                    triggerWhen,\n                                }}\n                            />\n                        </span>\n                    </div>\n                    <div className='item-details__row'>\n                        <span className='item-details__token'>\n                            <FormattedMessage\n                                id='installed_integrations.token'\n                                defaultMessage='Token: {token}'\n                                values={{\n                                    token: outgoingWebhook.token,\n                                }}\n                            />\n                            <CopyText\n                                value={outgoingWebhook.token}\n                            />\n                        </span>\n                    </div>\n                    <div className='item-details__row'>\n                        <span className='item-details__creation'>\n                            <FormattedMessage\n                                id='installed_integrations.creation'\n                                defaultMessage='Created by {creator} on {createAt, date, full}'\n                                values={{\n                                    creator: this.props.creator.username,\n                                    createAt: outgoingWebhook.create_at,\n                                }}\n                            />\n                        </span>\n                    </div>\n                    {urls}\n                </div>\n            </div>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\n\nimport type {Channel} from '@mattermost/types/channels';\nimport type {OutgoingWebhook} from '@mattermost/types/integrations';\nimport type {Team} from '@mattermost/types/teams';\nimport type {UserProfile} from '@mattermost/types/users';\nimport type {IDMappedObjects} from '@mattermost/types/utilities';\n\nimport type {ActionResult} from 'mattermost-redux/types/actions';\n\nimport BackstageList from 'components/backstage/components/backstage_list';\nimport ExternalLink from 'components/external_link';\nimport FormattedMarkdownMessage from 'components/formatted_markdown_message';\nimport InstalledOutgoingWebhook, {matchesFilter} from 'components/integrations/installed_outgoing_webhook';\n\nimport {Constants, DeveloperLinks} from 'utils/constants';\nimport {localizeMessage} from 'utils/utils';\n\nexport type Props = {\n\n    /**\n    *  Data used in passing down as props for webhook modifications\n    */\n    team: Team;\n\n    /**\n    * Data used for checking if webhook is created by current user\n    */\n    user: UserProfile;\n\n    /**\n    *  Data used for checking modification privileges\n    */\n    canManageOthersWebhooks: boolean;\n\n    /**\n    * Data used in passing down as props for showing webhook details\n    */\n    outgoingWebhooks: OutgoingWebhook[];\n\n    /**\n    * Data used in sorting for displaying list and as props channel details\n    */\n    channels: IDMappedObjects<Channel>;\n\n    /**\n    *  Data used in passing down as props for webhook -created by label\n    */\n    users: IDMappedObjects<UserProfile>;\n\n    /**\n    *  Data used in passing as argument for loading webhooks\n    */\n    teamId: string;\n\n    actions: {\n\n        /**\n        * The function to call for removing outgoingWebhook\n        */\n        removeOutgoingHook: (hookId: string) => Promise<ActionResult>;\n\n        /**\n        * The function to call for outgoingWebhook List and for the status of api\n        */\n        loadOutgoingHooksAndProfilesForTeam: (teamId: string, page: number, perPage: number) => Promise<ActionResult>;\n\n        /**\n        * The function to call for regeneration of webhook token\n        */\n        regenOutgoingHookToken: (hookId: string) => Promise<ActionResult>;\n    };\n\n    /**\n    * Whether or not outgoing webhooks are enabled.\n    */\n    enableOutgoingWebhooks: boolean;\n}\n\ntype State = {\n    loading: boolean;\n};\n\nexport default class InstalledOutgoingWebhooks extends React.PureComponent<Props, State> {\n    constructor(props: Props) {\n        super(props);\n\n        this.state = {\n            loading: true,\n        };\n    }\n\n    componentDidMount() {\n        if (this.props.enableOutgoingWebhooks) {\n            this.props.actions.loadOutgoingHooksAndProfilesForTeam(\n                this.props.teamId,\n                Constants.Integrations.START_PAGE_NUM,\n                Constants.Integrations.PAGE_SIZE,\n            ).then(\n                () => this.setState({loading: false}),\n            );\n        }\n    }\n\n    regenOutgoingWebhookToken = (outgoingWebhook: OutgoingWebhook) => {\n        this.props.actions.regenOutgoingHookToken(outgoingWebhook.id);\n    };\n\n    removeOutgoingHook = (outgoingWebhook: OutgoingWebhook) => {\n        this.props.actions.removeOutgoingHook(outgoingWebhook.id);\n    };\n\n    outgoingWebhookCompare = (a: OutgoingWebhook, b: OutgoingWebhook) => {\n        let displayNameA = a.display_name;\n        if (!displayNameA) {\n            const channelA = this.props.channels[a.channel_id];\n            if (channelA) {\n                displayNameA = channelA.display_name;\n            } else {\n                displayNameA = localizeMessage('installed_outgoing_webhooks.unknown_channel', 'A Private Webhook');\n            }\n        }\n\n        let displayNameB = b.display_name;\n        if (!displayNameB) {\n            const channelB = this.props.channels[b.channel_id];\n            if (channelB) {\n                displayNameB = channelB.display_name;\n            } else {\n                displayNameB = localizeMessage('installed_outgoing_webhooks.unknown_channel', 'A Private Webhook');\n            }\n        }\n        return displayNameA.localeCompare(displayNameB);\n    };\n\n    outgoingWebhooks = (filter: string) => this.props.outgoingWebhooks.\n        sort(this.outgoingWebhookCompare).\n        filter((outgoingWebhook) => matchesFilter(outgoingWebhook, this.props.channels[outgoingWebhook.channel_id], filter)).\n        map((outgoingWebhook) => {\n            const canChange = this.props.canManageOthersWebhooks || this.props.user.id === outgoingWebhook.creator_id;\n            const channel = this.props.channels[outgoingWebhook.channel_id];\n            return (\n                <InstalledOutgoingWebhook\n                    key={outgoingWebhook.id}\n                    outgoingWebhook={outgoingWebhook}\n                    onRegenToken={this.regenOutgoingWebhookToken}\n                    onDelete={this.removeOutgoingHook}\n                    creator={this.props.users[outgoingWebhook.creator_id] || {}}\n                    canChange={canChange}\n                    team={this.props.team}\n                    channel={channel}\n                />\n            );\n        });\n\n    render() {\n        return (\n            <BackstageList\n                header={\n                    <FormattedMessage\n                        id='installed_outgoing_webhooks.header'\n                        defaultMessage='Installed Outgoing Webhooks'\n                    />\n                }\n                addText={\n                    <FormattedMessage\n                        id='installed_outgoing_webhooks.add'\n                        defaultMessage='Add Outgoing Webhook'\n                    />\n                }\n                addLink={\n                    '/' +\n                    this.props.team.name +\n                    '/integrations/outgoing_webhooks/add'\n                }\n                addButtonId='addOutgoingWebhook'\n                emptyText={\n                    <FormattedMessage\n                        id='installed_outgoing_webhooks.empty'\n                        defaultMessage='No outgoing webhooks found'\n                    />\n                }\n                emptyTextSearch={\n                    <FormattedMarkdownMessage\n                        id='installed_outgoing_webhooks.emptySearch'\n                        defaultMessage='No outgoing webhooks match {searchTerm}'\n                    />\n                }\n                helpText={\n                    <FormattedMessage\n                        id='installed_outgoing_webhooks.help'\n                        defaultMessage='Use outgoing webhooks to connect external tools to Mattermost. {buildYourOwn} or visit the {appDirectory} to find self-hosted, third-party apps and integrations.'\n                        values={{\n                            buildYourOwn: (\n                                <ExternalLink\n                                    href={DeveloperLinks.SETUP_OUTGOING_WEBHOOKS}\n                                    location='installed_outgoing_webhooks'\n                                >\n                                    <FormattedMessage\n                                        id='installed_outgoing_webhooks.help.buildYourOwn'\n                                        defaultMessage='Build your own'\n                                    />\n                                </ExternalLink>\n                            ),\n                            appDirectory: (\n                                <ExternalLink\n                                    href='https://mattermost.com/marketplace'\n                                    location='installed_outgoing_webhooks'\n                                >\n                                    <FormattedMessage\n                                        id='installed_outgoing_webhooks.help.appDirectory'\n                                        defaultMessage='App Directory'\n                                    />\n                                </ExternalLink>\n                            ),\n                        }}\n                    />\n                }\n                searchPlaceholder={localizeMessage(\n                    'installed_outgoing_webhooks.search',\n                    'Search Outgoing Webhooks',\n                )}\n                loading={this.state.loading}\n            >\n                {(filter: string) => {\n                    const children = this.outgoingWebhooks(filter);\n                    return [children, children.length > 0];\n                }}\n            </BackstageList>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux';\nimport type {Dispatch} from 'redux';\n\nimport * as Actions from 'mattermost-redux/actions/integrations';\nimport {Permissions} from 'mattermost-redux/constants';\nimport {getAllChannels} from 'mattermost-redux/selectors/entities/channels';\nimport {getConfig} from 'mattermost-redux/selectors/entities/general';\nimport {getOutgoingHooks} from 'mattermost-redux/selectors/entities/integrations';\nimport {haveITeamPermission} from 'mattermost-redux/selectors/entities/roles';\nimport {getCurrentTeamId} from 'mattermost-redux/selectors/entities/teams';\nimport {getUsers} from 'mattermost-redux/selectors/entities/users';\n\nimport {loadOutgoingHooksAndProfilesForTeam} from 'actions/integration_actions';\n\nimport type {GlobalState} from 'types/store';\n\nimport InstalledOutgoingWebhook from './installed_outgoing_webhooks';\n\nfunction mapStateToProps(state: GlobalState) {\n    const config = getConfig(state);\n    const teamId = getCurrentTeamId(state);\n    const canManageOthersWebhooks = haveITeamPermission(state, teamId, Permissions.MANAGE_OTHERS_OUTGOING_WEBHOOKS);\n    const outgoingHooks = getOutgoingHooks(state);\n    const outgoingWebhooks = Object.keys(outgoingHooks).\n        map((key) => outgoingHooks[key]).\n        filter((outgoingWebhook) => outgoingWebhook.team_id === teamId);\n    const enableOutgoingWebhooks = config.EnableOutgoingWebhooks === 'true';\n\n    return {\n        outgoingWebhooks,\n        channels: getAllChannels(state),\n        users: getUsers(state),\n        teamId,\n        canManageOthersWebhooks,\n        enableOutgoingWebhooks,\n    };\n}\n\nfunction mapDispatchToProps(dispatch: Dispatch) {\n    return {\n        actions: bindActionCreators({\n            loadOutgoingHooksAndProfilesForTeam,\n            removeOutgoingHook: Actions.removeOutgoingHook,\n            regenOutgoingHookToken: Actions.regenOutgoingHookToken,\n        }, dispatch),\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(InstalledOutgoingWebhook);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport type {ChangeEvent, FormEvent} from 'react';\nimport React, {useMemo, useState} from 'react';\nimport {FormattedMessage, useIntl} from 'react-intl';\nimport type {MessageDescriptor} from 'react-intl';\nimport {useDispatch} from 'react-redux';\nimport {Link} from 'react-router-dom';\n\nimport {AlertOutlineIcon, CheckCircleOutlineIcon} from '@mattermost/compass-icons/components';\nimport type {OutgoingOAuthConnection} from '@mattermost/types/integrations';\nimport type {Team} from '@mattermost/types/teams';\n\nimport {validateOutgoingOAuthConnection} from 'mattermost-redux/actions/integrations';\n\nimport BackstageHeader from 'components/backstage/components/backstage_header';\nimport ConfirmModal from 'components/confirm_modal';\nimport FormError from 'components/form_error';\nimport SpinnerButton from 'components/spinner_button';\nimport LoadingSpinner from 'components/widgets/loading/loading_spinner';\n\ntype Props = {\n    team: Team;\n    header: MessageDescriptor;\n    footer: MessageDescriptor;\n    loading: MessageDescriptor;\n    renderExtra?: JSX.Element;\n    serverError: string;\n\n    initialConnection?: OutgoingOAuthConnection;\n\n    submitAction: (connection: OutgoingOAuthConnection) => Promise<void>;\n}\n\ntype State = {\n    name: string;\n    oauthTokenUrl: string;\n    grantType: OutgoingOAuthConnection['grant_type'];\n    clientId: string;\n    clientSecret: string;\n    audienceUrls: string;\n};\n\nenum ValidationStatus {\n    INITIAL = 'initial',\n    DIRTY = 'dirty',\n    VALIDATING = 'validating',\n    VALIDATED = 'validated',\n    ERROR = 'error',\n}\n\nconst useOutgoingOAuthForm = (connection: OutgoingOAuthConnection): [State, (state: Partial<State>) => void] => {\n    const initialState: State = {\n        name: connection.name || '',\n        audienceUrls: connection.audiences ? connection.audiences.join('\\n') : '',\n        oauthTokenUrl: connection.oauth_token_url || '',\n        clientId: connection.client_id || '',\n        clientSecret: connection.client_secret || '',\n        grantType: 'client_credentials',\n    };\n\n    const [state, setState] = useState(initialState);\n\n    return useMemo(() => [state, (newState: Partial<State>) => {\n        setState((oldState) => ({...oldState, ...newState}));\n    }], [state]);\n};\n\nconst initialState: OutgoingOAuthConnection = {\n    id: '',\n    name: '',\n    creator_id: '',\n    create_at: 0,\n    update_at: 0,\n    client_id: '',\n    client_secret: '',\n    oauth_token_url: '',\n    grant_type: 'client_credentials',\n    audiences: [],\n};\n\nexport default function AbstractOutgoingOAuthConnection(props: Props) {\n    const [formState, setFormState] = useOutgoingOAuthForm(props.initialConnection || initialState);\n\n    const [storedError, setError] = useState<React.ReactNode>('');\n    const [validationError, setValidationError] = useState<string>('');\n\n    const [isSubmitting, setIsSubmitting] = useState(false);\n    const [validationStatus, setValidationStatus] = useState<ValidationStatus>(ValidationStatus.INITIAL);\n    const [isEditingSecret, setIsEditingSecret] = useState(false);\n\n    const [isValidationModalOpen, setIsValidationModalOpen] = useState(false);\n\n    const intl = useIntl();\n    const dispatch = useDispatch();\n\n    const isNewConnection = !props.initialConnection;\n\n    const parseForm = (requireAudienceUrl: boolean): OutgoingOAuthConnection | undefined => {\n        if (!formState.name) {\n            setIsSubmitting(false);\n            setError(\n                <FormattedMessage\n                    id='add_outgoing_oauth_connection.name.required'\n                    defaultMessage='Name for the OAuth connection is required.'\n                />,\n            );\n\n            return undefined;\n        }\n\n        if (!formState.clientId) {\n            setIsSubmitting(false);\n            setError(\n                <FormattedMessage\n                    id='add_outgoing_oauth_connection.client_id.required'\n                    defaultMessage='Client Id for the OAuth connection is required.'\n                />,\n            );\n\n            return undefined;\n        }\n\n        if ((isNewConnection || isEditingSecret) && !formState.clientSecret) {\n            setIsSubmitting(false);\n            setError(\n                <FormattedMessage\n                    id='add_outgoing_oauth_connection.client_secret.required'\n                    defaultMessage='Client Secret for the OAuth connection is required.'\n                />,\n            );\n\n            return undefined;\n        }\n\n        if (!formState.grantType) {\n            setIsSubmitting(false);\n            setError(\n                <FormattedMessage\n                    id='add_outgoing_oauth_connection.grant_type.required'\n                    defaultMessage='Grant Type for the OAuth connection is required.'\n                />,\n            );\n\n            return undefined;\n        }\n\n        if (!formState.oauthTokenUrl) {\n            setIsSubmitting(false);\n            setError(\n                <FormattedMessage\n                    id='add_outgoing_oauth_connection.oauth_token_url.required'\n                    defaultMessage='OAuth Token URL for the OAuth connection is required.'\n                />,\n            );\n\n            return undefined;\n        }\n\n        const audienceUrls = [];\n        for (let audienceUrl of formState.audienceUrls.split('\\n')) {\n            audienceUrl = audienceUrl.trim();\n\n            if (audienceUrl.length > 0) {\n                audienceUrls.push(audienceUrl);\n            }\n        }\n\n        if (requireAudienceUrl && audienceUrls.length === 0) {\n            setIsSubmitting(false);\n            setError(\n                <FormattedMessage\n                    id='add_outgoing_oauth_connection.audienceUrls.required'\n                    defaultMessage='One or more audience URLs are required.'\n                />,\n            );\n\n            return undefined;\n        }\n\n        const connection = {\n            name: formState.name,\n            audiences: audienceUrls,\n            client_id: formState.clientId,\n            client_secret: formState.clientSecret,\n            grant_type: formState.grantType,\n            oauth_token_url: formState.oauthTokenUrl,\n        } as OutgoingOAuthConnection;\n\n        return connection;\n    };\n\n    const showSkipValidateModal = () => {\n        setIsValidationModalOpen(true);\n    };\n\n    const hideSkipValidateModal = () => {\n        setIsValidationModalOpen(false);\n    };\n\n    const handleSubmitFromButton = (e: FormEvent) => {\n        e.preventDefault();\n        handleSubmit();\n    };\n\n    const handleSubmit = () => {\n        if (isSubmitting) {\n            return;\n        }\n\n        const connection = parseForm(true);\n        if (!connection) {\n            return;\n        }\n\n        setError('');\n\n        if (validationStatus !== ValidationStatus.VALIDATED && !(!isNewConnection && validationStatus === ValidationStatus.INITIAL)) {\n            if (!isValidationModalOpen) {\n                showSkipValidateModal();\n                return;\n            }\n        }\n\n        setIsSubmitting(true);\n\n        const res = props.submitAction(connection);\n        res.then(() => setIsSubmitting(false));\n    };\n\n    const handleValidate = async (e: FormEvent) => {\n        e.preventDefault();\n\n        if (validationStatus === ValidationStatus.VALIDATING) {\n            return;\n        }\n\n        setError('');\n        setValidationStatus(ValidationStatus.VALIDATING);\n\n        const connection = parseForm(false);\n        if (!connection) {\n            // Defer to the form validation error\n            setValidationStatus(ValidationStatus.INITIAL);\n            return;\n        }\n\n        if (props.initialConnection?.id) {\n            connection.id = props.initialConnection.id;\n        }\n\n        const {error} = await dispatch(validateOutgoingOAuthConnection(props.team.id, connection));\n\n        if (error) {\n            setValidationStatus(ValidationStatus.ERROR);\n            setValidationError(error.message);\n        } else {\n            setValidationStatus(ValidationStatus.VALIDATED);\n        }\n    };\n\n    const setUnvalidated = (e?: React.FormEvent) => {\n        e?.preventDefault();\n\n        if (validationStatus !== ValidationStatus.DIRTY) {\n            setValidationStatus(ValidationStatus.DIRTY);\n        }\n\n        if (validationError) {\n            setValidationError('');\n        }\n    };\n\n    const updateName = (e: ChangeEvent<HTMLInputElement>) => {\n        setFormState({\n            name: e.target.value,\n        });\n    };\n\n    const updateClientId = (e: ChangeEvent<HTMLInputElement>) => {\n        setUnvalidated();\n\n        setFormState({\n            clientId: e.target.value,\n        });\n    };\n\n    const updateClientSecret = (e: ChangeEvent<HTMLInputElement>) => {\n        setUnvalidated();\n\n        setFormState({\n            clientSecret: e.target.value,\n        });\n    };\n\n    const updateOAuthTokenURL = (e: ChangeEvent<HTMLInputElement>) => {\n        setUnvalidated();\n\n        setFormState({\n            oauthTokenUrl: e.target.value,\n        });\n    };\n\n    const updateAudienceUrls = (e: ChangeEvent<HTMLTextAreaElement>) => {\n        setFormState({\n            audienceUrls: e.target.value,\n        });\n    };\n\n    const startEditingClientSecret = () => {\n        setIsEditingSecret(true);\n    };\n\n    const headerToRender = props.header;\n    const footerToRender = props.footer;\n\n    let clientSecretSection = (\n        <input\n            id='client_secret'\n            type='text'\n            autoComplete='off'\n            className='form-control'\n            value={formState.clientSecret}\n            onChange={updateClientSecret}\n        />\n    );\n\n    if (!isNewConnection && !isEditingSecret) {\n        clientSecretSection = (\n            <>\n                <input\n                    id='client_secret'\n                    disabled={true}\n                    autoComplete='off'\n                    type='text'\n                    className='form-control disabled'\n                    value={''.repeat(40)}\n                />\n                <span\n                    onClick={startEditingClientSecret}\n                    className='outgoing-oauth-connections-edit-secret'\n                >\n                    <i className='icon icon-pencil-outline'/>\n                </span>\n            </>\n        );\n    }\n\n    return (\n        <div className='backstage-content'>\n            <BackstageHeader>\n                <Link to={`/${props.team.name}/integrations/outgoing-oauth2-connections`}>\n                    <FormattedMessage\n                        id='add_outgoing_oauth_connection.header'\n                        defaultMessage='Outgoing OAuth Connections'\n                    />\n                </Link>\n                <FormattedMessage\n                    id={headerToRender.id}\n                    defaultMessage={headerToRender.defaultMessage}\n                />\n            </BackstageHeader>\n            <div className='backstage-form'>\n                <form className='form-horizontal'>\n                    <div className='form-group'>\n                        <label\n                            className='control-label col-sm-4'\n                            htmlFor='name'\n                        >\n                            <FormattedMessage\n                                id='add_outgoing_oauth_connection.name.label'\n                                defaultMessage='Name'\n                            />\n                        </label>\n                        <div className='col-md-5 col-sm-8'>\n                            <input\n                                id='name'\n                                type='text'\n                                className='form-control'\n                                value={formState.name}\n                                onChange={updateName}\n                            />\n                            <div className='form__help'>\n                                <FormattedMessage\n                                    id='add_outgoing_oauth_connection.name.help'\n                                    defaultMessage='Specify the name for your OAuth connection.'\n                                />\n                            </div>\n                        </div>\n                    </div>\n                    <div className='form-group'>\n                        <label\n                            className='control-label col-sm-4'\n                            htmlFor='client_id'\n                        >\n                            <FormattedMessage\n                                id='add_outgoing_oauth_connection.client_id.label'\n                                defaultMessage='Client ID'\n                            />\n                        </label>\n                        <div className='col-md-5 col-sm-8'>\n                            <input\n                                id='client_id'\n                                type='text'\n                                autoComplete='off'\n                                className='form-control'\n                                value={formState.clientId}\n                                onChange={updateClientId}\n                            />\n                            <div className='form__help'>\n                                <FormattedMessage\n                                    id='add_outgoing_oauth_connection.client_id.help'\n                                    defaultMessage='Specify the Client ID for your OAuth connection.'\n                                />\n                            </div>\n                        </div>\n                    </div>\n                    <div className='form-group'>\n                        <label\n                            className='control-label col-sm-4'\n                            htmlFor='client_secret'\n                        >\n                            <FormattedMessage\n                                id='add_outgoing_oauth_connection.client_secret.label'\n                                defaultMessage='Client Secret'\n                            />\n                        </label>\n                        <div className='col-md-5 col-sm-8'>\n                            {clientSecretSection}\n                            <div className='form__help'>\n                                <FormattedMessage\n                                    id='add_outgoing_oauth_connection.client_secret.help'\n                                    defaultMessage='Specify the Client Secret for your OAuth connection.'\n                                />\n                            </div>\n                        </div>\n                    </div>\n                    <div className='form-group'>\n                        <label\n                            className='control-label col-sm-4'\n                            htmlFor='oauth_token_url'\n                        >\n                            <FormattedMessage\n                                id='add_outgoing_oauth_connection.oauth_token_url.label'\n                                defaultMessage='OAuth Token URL'\n                            />\n                        </label>\n                        <div className='col-md-5 col-sm-8'>\n                            <input\n                                id='token_url'\n                                type='text'\n                                className='form-control'\n                                value={formState.oauthTokenUrl}\n                                onChange={updateOAuthTokenURL}\n                            />\n                            <div className='form__help'>\n                                <FormattedMessage\n                                    id='add_outgoing_oauth_connection.oauth_token_url.help'\n                                    defaultMessage='Specify the OAuth Token URL for your OAuth connection.'\n                                />\n                            </div>\n                            <div className='outgoing-oauth-connection-validate-button-container'>\n                                <ValidateButton\n                                    onClick={handleValidate}\n                                    setUnvalidated={setUnvalidated}\n                                    status={validationStatus}\n                                />\n                            </div>\n                        </div>\n                    </div>\n                    <div className='form-group'>\n                        <label\n                            className='control-label col-sm-4'\n                            htmlFor='audienceUrls'\n                        >\n                            <FormattedMessage\n                                id='add_outgoing_oauth_connection.audienceUrls.label'\n                                defaultMessage='Audience URLs (One Per Line)'\n                            />\n                        </label>\n                        <div className='col-md-5 col-sm-8'>\n                            <textarea\n                                id='audienceUrls'\n                                rows={3}\n                                className='form-control'\n                                value={formState.audienceUrls}\n                                onChange={updateAudienceUrls}\n                            />\n                            <div className='form__help'>\n                                <FormattedMessage\n                                    id='add_outgoing_oauth_connection.audienceUrls.help'\n                                    defaultMessage='The URLs which will receive requests with the OAuth token, e.g. your custom slash command handler endpoint. Must be a valid URL and start with http:// or https://.'\n                                />\n                            </div>\n                        </div>\n                    </div>\n                    <div className='backstage-form__footer'>\n                        <FormError\n                            type='backstage'\n                            errors={[props.serverError, storedError]}\n                        />\n                        <Link\n                            className='btn btn-tertiary'\n                            to={`/${props.team.name}/integrations/outgoing-oauth2-connections`}\n                        >\n                            <FormattedMessage\n                                id='add_outgoing_oauth_connection.cancel'\n                                defaultMessage='Cancel'\n                            />\n                        </Link>\n                        <SpinnerButton\n                            className='btn btn-primary'\n                            type='submit'\n                            spinning={isSubmitting}\n                            spinningText={intl.formatMessage(props.loading)}\n                            onClick={handleSubmitFromButton}\n                            id='saveConnection'\n                        >\n                            <FormattedMessage\n                                id={footerToRender.id}\n                                defaultMessage={footerToRender.defaultMessage}\n                            />\n                        </SpinnerButton>\n                        {props.renderExtra}\n                    </div>\n                </form>\n            </div>\n            <div className='outgoing-oauth-connections-docs-link'>\n                <FormattedMessage\n                    id={'add_outgoing_oauth_connection.documentation_link'}\n                    defaultMessage={'Get help with <link>configuring outgoing OAuth connections</link>.'}\n                    values={{\n                        link: (text: string) => (\n                            <a href='https://mattermost.com/pl/outgoing-oauth-connections'>{text}</a>\n                        ),\n                    }}\n                />\n            </div>\n            <ConfirmModal\n                show={isValidationModalOpen}\n                message={intl.formatMessage({\n                    id: 'add_outgoing_oauth_connection.save_without_validation_warning',\n                    defaultMessage: 'This connection has not been validated, Do you want to save anyway?',\n                })}\n                title={intl.formatMessage({\n                    id: 'add_outgoing_oauth_connection.confirm_save',\n                    defaultMessage: 'Save Outgoing OAuth Connection',\n                })}\n                confirmButtonText={intl.formatMessage({\n                    id: 'add_outgoing_oauth_connection.save_anyway',\n                    defaultMessage: 'Save anyway',\n                })}\n                onExited={hideSkipValidateModal}\n                onCancel={hideSkipValidateModal}\n                onConfirm={handleSubmit}\n            />\n        </div>\n    );\n}\n\ntype ValidateButtonProps = {\n    status: ValidationStatus;\n    onClick: (e: FormEvent) => void;\n    setUnvalidated: (e: FormEvent) => void;\n}\n\nconst ValidateButton = ({status, onClick, setUnvalidated}: ValidateButtonProps) => {\n    if (status === ValidationStatus.ERROR) {\n        return (\n            <span\n                className='outgoing-oauth-connection-validation-message validation-error'\n            >\n                <AlertOutlineIcon size={20}/>\n                <FormattedMessage\n                    id={'add_outgoing_oauth_connection.validation_error'}\n                    defaultMessage={'Connection not validated. Please check the server logs for details or <link>try again</link>.'}\n                    values={{\n                        link: (text: string) => <a onClick={setUnvalidated}>{text}</a>,\n                    }}\n                />\n            </span>\n        );\n    }\n\n    if (status === ValidationStatus.VALIDATED) {\n        return (\n            <span\n                className='outgoing-oauth-connection-validation-message validation-success'\n            >\n                <CheckCircleOutlineIcon size={20}/>\n                <FormattedMessage\n                    id={'add_outgoing_oauth_connection.validated_connection'}\n                    defaultMessage={'Validated connection'}\n                />\n            </span>\n        );\n    }\n\n    if (status === ValidationStatus.VALIDATING) {\n        return (\n            <span\n                className='outgoing-oauth-connection-validation-message'\n            >\n                <LoadingSpinner\n                    text={(\n                        <FormattedMessage\n                            id={'add_outgoing_oauth_connection.validating'}\n                            defaultMessage={'Validating...'}\n                        />\n                    )}\n                />\n            </span>\n        );\n    }\n\n    const validateButton = (\n        <button\n            className='btn btn-tertiary btn-sm'\n            type='button'\n            onClick={onClick}\n            id='validateConnection'\n        >\n            <FormattedMessage\n                id={'add_outgoing_oauth_connection.validate'}\n                defaultMessage={'Validate Connection'}\n            />\n        </button>\n    );\n\n    return validateButton;\n};\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React, {useState} from 'react';\nimport {defineMessage} from 'react-intl';\nimport {useDispatch} from 'react-redux';\nimport {useHistory} from 'react-router-dom';\n\nimport type {OutgoingOAuthConnection} from '@mattermost/types/integrations';\nimport type {Team} from '@mattermost/types/teams';\n\nimport {addOutgoingOAuthConnection} from 'mattermost-redux/actions/integrations';\n\nimport AbstractOutgoingOAuthConnection from './abstract_outgoing_oauth_connection';\n\nconst HEADER = defineMessage({id: 'add_outgoing_oauth_connection.add', defaultMessage: 'Add'});\nconst FOOTER = defineMessage({id: 'add_outgoing_oauth_connection.save', defaultMessage: 'Save'});\nconst LOADING = defineMessage({id: 'add_outgoing_oauth_connection.saving', defaultMessage: 'Saving...'});\n\nexport type Props = {\n    team: Team;\n};\n\nconst AddOutgoingOAuthConnection = ({team}: Props): JSX.Element => {\n    const dispatch = useDispatch();\n\n    const history = useHistory();\n\n    const [serverError, setServerError] = useState('');\n\n    const submit = async (connection: OutgoingOAuthConnection) => {\n        setServerError('');\n\n        const {data, error} = (await dispatch(addOutgoingOAuthConnection(team.id, connection))) as unknown as {data: OutgoingOAuthConnection; error: Error};\n        if (data) {\n            history.push(`/${team.name}/integrations/confirm?type=outgoing-oauth2-connections&id=${data.id}`);\n            return;\n        }\n\n        if (error) {\n            setServerError(error.message);\n        }\n    };\n\n    return (\n        <AbstractOutgoingOAuthConnection\n            team={team}\n            header={HEADER}\n            footer={FOOTER}\n            loading={LOADING}\n            submitAction={submit}\n            serverError={serverError}\n        />\n    );\n};\n\nexport default AddOutgoingOAuthConnection;\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React, {useEffect, useState} from 'react';\nimport {FormattedMessage, defineMessage} from 'react-intl';\nimport {useDispatch, useSelector} from 'react-redux';\n\nimport type {OutgoingOAuthConnection} from '@mattermost/types/integrations';\nimport type {Team} from '@mattermost/types/teams';\n\nimport {editOutgoingOAuthConnection, getOutgoingOAuthConnection} from 'mattermost-redux/actions/integrations';\nimport {getConfig} from 'mattermost-redux/selectors/entities/general';\nimport {getOutgoingOAuthConnections} from 'mattermost-redux/selectors/entities/integrations';\n\nimport ConfirmModal from 'components/confirm_modal';\nimport LoadingScreen from 'components/loading_screen';\n\nimport {getHistory} from 'utils/browser_history';\n\nimport AbstractOutgoingOAuthConnection from './abstract_outgoing_oauth_connection';\n\nconst HEADER = defineMessage({id: 'integrations.edit', defaultMessage: 'Edit'});\nconst FOOTER = defineMessage({id: 'edit_outgoing_oauth_connection.update', defaultMessage: 'Update'});\nconst LOADING = defineMessage({id: 'edit_outgoing_oauth_connection.updating', defaultMessage: 'Updating...'});\n\ntype Props = {\n    team: Team;\n    location: Location;\n};\n\nconst getConnectionIdFromSearch = (search: string): string => {\n    return (new URLSearchParams(search)).get('id') || '';\n};\n\nconst EditOutgoingOAuthConnection = (props: Props) => {\n    const connectionId = getConnectionIdFromSearch(props.location.search);\n    const connections = useSelector(getOutgoingOAuthConnections);\n    const existingConnection = connections[connectionId];\n\n    const [newConnection, setNewConnection] = useState(existingConnection);\n    const [showConfirmModal, setShowConfirmModal] = useState(false);\n    const [serverError, setServerError] = useState('');\n\n    const enableOAuthServiceProvider = useSelector(getConfig).EnableOAuthServiceProvider;\n\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        if (enableOAuthServiceProvider) {\n            dispatch(getOutgoingOAuthConnection(props.team.id, connectionId));\n        }\n    }, [connectionId, enableOAuthServiceProvider, props.team, dispatch]);\n\n    const handleInitialSubmit = async (connection: OutgoingOAuthConnection) => {\n        setNewConnection(connection);\n\n        if (existingConnection.id) {\n            connection.id = existingConnection.id;\n        }\n\n        const audienceUrlsSame = (existingConnection.audiences.length === connection.audiences.length) &&\n            existingConnection.audiences.every((v, i) => v === connection.audiences[i]);\n\n        if (audienceUrlsSame) {\n            await createOutgoingOAuthConnection(connection);\n        } else {\n            handleConfirmModal();\n        }\n    };\n\n    const handleConfirmModal = () => {\n        setShowConfirmModal(true);\n    };\n\n    const confirmModalDismissed = () => {\n        setShowConfirmModal(false);\n    };\n\n    const createOutgoingOAuthConnection = async (connection: OutgoingOAuthConnection) => {\n        setServerError('');\n\n        const res = await dispatch(editOutgoingOAuthConnection(props.team.id, connection));\n\n        if ('data' in res && res.data) {\n            getHistory().push(`/${props.team.name}/integrations/outgoing-oauth2-connections`);\n            return;\n        }\n\n        confirmModalDismissed();\n\n        if ('error' in res) {\n            const {error: err} = res as {error: Error};\n            setServerError(err.message);\n        }\n    };\n\n    const renderExtra = () => {\n        const confirmButton = (\n            <FormattedMessage\n                id='update_command.update'\n                defaultMessage='Update'\n            />\n        );\n\n        const confirmTitle = (\n            <FormattedMessage\n                id='update_outgoing_oauth_connection.confirm'\n                defaultMessage='Edit Outgoing OAuth Connection'\n            />\n        );\n\n        const confirmMessage = (\n            <FormattedMessage\n                id='update_outgoing_oauth_connection.question'\n                defaultMessage='Your changes may break any existing integrations using this connection. Are you sure you would like to update it?'\n            />\n        );\n\n        return (\n            <ConfirmModal\n                title={confirmTitle}\n                message={confirmMessage}\n                confirmButtonText={confirmButton}\n                modalClass='integrations-backstage-modal'\n                show={showConfirmModal}\n                onConfirm={() => createOutgoingOAuthConnection(newConnection)}\n                onCancel={confirmModalDismissed}\n            />\n        );\n    };\n\n    if (!existingConnection) {\n        return <LoadingScreen/>;\n    }\n\n    return (\n        <AbstractOutgoingOAuthConnection\n            team={props.team}\n            header={HEADER}\n            footer={FOOTER}\n            loading={LOADING}\n            renderExtra={renderExtra()}\n            submitAction={handleInitialSubmit}\n            serverError={serverError}\n            initialConnection={existingConnection}\n        />\n    );\n};\n\nexport default EditOutgoingOAuthConnection;\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\nimport {Link} from 'react-router-dom';\n\nimport type {OutgoingOAuthConnection} from '@mattermost/types/integrations';\nimport type {Team} from '@mattermost/types/teams';\n\nimport FormattedMarkdownMessage from 'components/formatted_markdown_message';\n\nimport DeleteIntegrationLink from '../delete_integration_link';\n\nexport function matchesFilter(outgoingOAuthConnection: OutgoingOAuthConnection, filter?: string | null): boolean {\n    if (!filter) {\n        return true;\n    }\n\n    return outgoingOAuthConnection.name.toLowerCase().includes(filter);\n}\n\nexport type InstalledOutgoingOAuthConnectionProps = {\n    team: Partial<Team>;\n    outgoingOAuthConnection: OutgoingOAuthConnection;\n    creatorName: string;\n    filter?: string | null;\n\n    onDelete: (outgoingOAuthConnection: OutgoingOAuthConnection) => void;\n}\n\nexport type InstalledOutgoingOAuthConnectionState = {\n    clientSecret: string;\n    error?: string | null;\n}\n\nconst InstalledOutgoingOAuthConnection = (props: InstalledOutgoingOAuthConnectionProps) => {\n    const handleDelete = (): void => {\n        props.onDelete(props.outgoingOAuthConnection);\n    };\n\n    const {outgoingOAuthConnection, creatorName} = props;\n\n    if (!matchesFilter(outgoingOAuthConnection, props.filter)) {\n        return null;\n    }\n\n    let name;\n    if (outgoingOAuthConnection.name) {\n        name = outgoingOAuthConnection.name;\n    } else {\n        name = (\n            <FormattedMessage\n                id='installed_integrations.unnamed_outgoing_oauth_connection'\n                defaultMessage='Unnamed Outgoing OAuth Connection'\n            />\n        );\n    }\n\n    const urls = (\n        <>\n            <div className='item-details__row'>\n                <span className='item-details__url word-break--all'>\n                    <FormattedMessage\n                        id='installed_integrations.audience_urls'\n                        defaultMessage='Audience URLs: {urls}'\n                        values={{\n                            urls: outgoingOAuthConnection.audiences.join(', '),\n                        }}\n                    />\n                </span>\n            </div>\n            <div className='item-details__row'>\n                <span className='item-details__url word-break--all'>\n                    <FormattedMessage\n                        id='installed_integrations.token_url'\n                        defaultMessage='Token URL: {url}'\n                        values={{\n                            url: outgoingOAuthConnection.oauth_token_url,\n                        }}\n                    />\n                </span>\n            </div>\n        </>\n    );\n\n    const actions = (\n        <div className='item-actions'>\n            <Link to={`/${props.team.name}/integrations/outgoing-oauth2-connections/edit?id=${outgoingOAuthConnection.id}`}>\n                <FormattedMessage\n                    id='installed_integrations.edit'\n                    defaultMessage='Edit'\n                />\n            </Link>\n            {' - '}\n            <DeleteIntegrationLink\n                subtitleText={\n                    <FormattedMessage\n                        id='installed_outgoing_oauth_connections.delete.confirm'\n                        defaultMessage='Are you sure you want to delete {connectionName}?'\n                        values={{\n                            connectionName: (\n                                <strong>\n                                    {props.outgoingOAuthConnection.name}\n                                </strong>\n                            ),\n                        }}\n                    />\n                }\n                modalMessage={\n                    <FormattedMessage\n                        id='installed_outgoing_oauth_connections.delete.wanring'\n                        defaultMessage='Deleting this connection will break any integrations using it'\n                    />\n                }\n                onDelete={handleDelete}\n            />\n        </div>\n    );\n\n    const connectionInfo = (\n        <>\n            <div className='item-details__row'>\n                <span className='item-details__token'>\n                    <FormattedMarkdownMessage\n                        id='installed_integrations.client_id'\n                        defaultMessage='Client ID: **{clientId}**'\n                        values={{\n                            clientId: outgoingOAuthConnection.client_id,\n                        }}\n                    />\n                </span>\n            </div>\n            <div className='item-details__row'>\n                <span className='item-details__token'>\n                    <FormattedMessage\n                        id='installed_outgoing_oauth_connections.client_secret'\n                        defaultMessage='Client Secret: ********'\n                    />\n                </span>\n            </div>\n            {outgoingOAuthConnection.grant_type === 'password' && (\n                <>\n                    <div className='item-details__row'>\n                        <span className='item-details__token'>\n                            <FormattedMarkdownMessage\n                                id='installed_outgoing_oauth_connections.username'\n                                defaultMessage='Username: **{username}**'\n                                values={{\n                                    username: outgoingOAuthConnection.credentials_username,\n                                }}\n                            />\n                        </span>\n                    </div>\n                    <div className='item-details__row'>\n                        <span className='item-details__token'>\n                            <FormattedMessage\n                                id='installed_outgoing_oauth_connections.password'\n                                defaultMessage='Password: ********'\n                            />\n                        </span>\n                    </div>\n                </>\n            )}\n\n            {urls}\n            <div className='item-details__row'>\n                <span className='item-details__creation'>\n                    <FormattedMessage\n                        id='installed_integrations.creation'\n                        defaultMessage='Created by {creator} on {createAt, date, full}'\n                        values={{\n                            creator: creatorName,\n                            createAt: outgoingOAuthConnection.create_at,\n                        }}\n                    />\n                </span>\n            </div>\n        </>\n    );\n\n    return (\n        <div className='backstage-list__item' >\n            <div className='item-details' >\n                <div className='item-details__row d-flex flex-column flex-md-row justify-content-between'>\n                    <strong className='item-details__name'>\n                        {name}\n                    </strong>\n                    {actions}\n                </div>\n                {connectionInfo}\n            </div>\n        </div >\n    );\n};\n\nexport default InstalledOutgoingOAuthConnection;\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React, {useEffect, useState} from 'react';\nimport {FormattedMessage, useIntl} from 'react-intl';\nimport {useDispatch, useSelector} from 'react-redux';\n\nimport type {OutgoingOAuthConnection} from '@mattermost/types/integrations';\nimport type {Team} from '@mattermost/types/teams';\n\nimport {deleteOutgoingOAuthConnection} from 'mattermost-redux/actions/integrations';\nimport {Permissions} from 'mattermost-redux/constants';\nimport {getConfig} from 'mattermost-redux/selectors/entities/general';\nimport {getOutgoingOAuthConnections} from 'mattermost-redux/selectors/entities/integrations';\nimport {haveITeamPermission} from 'mattermost-redux/selectors/entities/roles';\n\nimport {loadOutgoingOAuthConnectionsAndProfiles} from 'actions/integration_actions';\n\nimport BackstageList from 'components/backstage/components/backstage_list';\nimport ExternalLink from 'components/external_link';\nimport FormattedMarkdownMessage from 'components/formatted_markdown_message';\n\nimport {DeveloperLinks} from 'utils/constants';\n\nimport type {GlobalState} from 'types/store';\n\nimport InstalledOutgoingOAuthConnection, {matchesFilter} from './installed_outgoing_oauth_connection';\n\ntype Props = {\n    team: Team;\n};\n\nconst InstalledOutgoingOAuthConnections = (props: Props) => {\n    const [loading, setLoading] = useState(true);\n    const canManageOutgoingOAuthConnections = useSelector((state) => haveITeamPermission(state as GlobalState, props.team.id, Permissions.MANAGE_OUTGOING_OAUTH_CONNECTIONS));\n    const enableOutgoingOAuthConnections = (useSelector(getConfig).EnableOutgoingOAuthConnections === 'true');\n    const connections = useSelector(getOutgoingOAuthConnections);\n\n    const dispatch = useDispatch();\n    const intl = useIntl();\n\n    useEffect(() => {\n        if (canManageOutgoingOAuthConnections) {\n            (dispatch(loadOutgoingOAuthConnectionsAndProfiles(props.team.id)) as unknown as Promise<void>).then(\n                () => setLoading(false),\n            );\n        }\n    }, [canManageOutgoingOAuthConnections, props.team, dispatch]);\n\n    const deleteOutgoingOAuthConnectionLocal = (connection: OutgoingOAuthConnection): void => {\n        if (connection && connection.id) {\n            dispatch(deleteOutgoingOAuthConnection(connection.id));\n        }\n    };\n\n    const outgoingOauthConnectionCompare = (a: OutgoingOAuthConnection, b: OutgoingOAuthConnection): number => {\n        let nameA = a.name.toString();\n        if (!nameA) {\n            nameA = intl.formatMessage({id: 'installed_integrations.unnamed_outgoing_oauth_connection', defaultMessage: 'Unnamed Outgoing OAuth Connection'});\n        }\n\n        let nameB = b.name.toString();\n        if (!nameB) {\n            nameB = intl.formatMessage({id: 'installed_integrations.unnamed_outgoing_oauth_connection', defaultMessage: 'Unnamed Outgoing OAuth Connection'});\n        }\n\n        return nameA.localeCompare(nameB);\n    };\n\n    const outgoingOauthConnections = (filter?: string) => {\n        const values = Object.values(connections);\n        const filtered = values.filter((connection) => matchesFilter(connection, filter));\n        const sorted = filtered.sort(outgoingOauthConnectionCompare);\n        const mapped = sorted.map((connection) => {\n            return (\n                <InstalledOutgoingOAuthConnection\n                    key={connection.id}\n                    outgoingOAuthConnection={connection}\n                    onDelete={deleteOutgoingOAuthConnectionLocal}\n                    team={props.team}\n                    creatorName=''\n                />\n            );\n        });\n\n        return mapped;\n    };\n\n    const integrationsEnabled = enableOutgoingOAuthConnections && canManageOutgoingOAuthConnections;\n    let childProps;\n    if (integrationsEnabled) {\n        childProps = {\n            addLink: '/' + props.team.name + '/integrations/outgoing-oauth2-connections/add',\n            addText: intl.formatMessage({id: 'installed_outgoing_oauth_connections.add', defaultMessage: 'Add Outgoing OAuth Connection'}),\n            addButtonId: 'addOutgoingOauthConnection',\n        };\n    }\n\n    return (\n        <BackstageList\n            header={\n                <FormattedMessage\n                    id='installed_outgoing_oauth_connections.header'\n                    defaultMessage='Outgoing OAuth Connections'\n                />\n            }\n            helpText={\n                <FormattedMessage\n                    id='installed_outgoing_oauth_connections.help'\n                    defaultMessage='Create {outgoingOauthConnections} to securely integrate bots and third-party apps with Mattermost.'\n                    values={{\n                        outgoingOauthConnections: (\n                            <ExternalLink\n                                href={DeveloperLinks.SETUP_OAUTH2}\n                                location='installed_outgoing_oauth_connections'\n                            >\n                                <FormattedMessage\n                                    id='installed_outgoing_oauth_connections.help.outgoingOauthConnections'\n                                    defaultMessage='Outgoing OAuth Connections'\n                                />\n                            </ExternalLink>\n                        ),\n                    }}\n                />\n            }\n            emptyText={\n                <FormattedMessage\n                    id='installed_outgoing_oauth_connections.empty'\n                    defaultMessage='No Outgoing OAuth Connections found'\n                />\n            }\n            emptyTextSearch={\n                <FormattedMarkdownMessage\n                    id='installed_outgoing_oauth_connections.emptySearch'\n                    defaultMessage='No Outgoing OAuth Connections match {searchTerm}'\n                />\n            }\n            searchPlaceholder={intl.formatMessage({id: 'installed_outgoing_oauth_connections.search', defaultMessage: 'Search Outgoing OAuth Connections'})}\n            loading={loading}\n            {...childProps}\n        >\n            {(filter: string) => {\n                const children = outgoingOauthConnections(filter);\n                return [children, children.length > 0];\n            }}\n        </BackstageList>\n    );\n};\n\nexport default InstalledOutgoingOAuthConnections;\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport classNames from 'classnames';\nimport React from 'react';\nimport type {ReactNode} from 'react';\nimport {Route, NavLink} from 'react-router-dom';\n\ntype Props = {\n    name: string;\n    title: ReactNode;\n    icon: string;\n    parentLink?: string;\n    children?: ReactNode[];\n}\n\nconst BackstageCategory = ({name, title, icon, parentLink, children = []}: Props) => {\n    const link = parentLink + '/' + name;\n\n    return (\n        <li className='backstage-sidebar__category'>\n            <NavLink\n                to={link}\n                className='category-title'\n                activeClassName='category-title--active'\n            >\n                <i className={classNames('fa ', icon)}/>\n                <span className='category-title__text'>\n                    {title}\n                </span>\n            </NavLink>\n            {\n                children && children.length > 0 &&\n                    <Route\n                        path={link}\n                        render={() => (\n                            <ul className='sections'>\n                                {\n                                    React.Children.map(children, (child) => {\n                                        if (!child) {\n                                            return child;\n                                        }\n\n                                        return React.cloneElement(child as JSX.Element, {\n                                            parentLink: link,\n                                        });\n                                    })\n                                }\n                            </ul>\n                        )}\n                    />\n            }\n        </li>\n    );\n};\n\nexport default BackstageCategory;\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from 'react';\nimport type {ReactNode} from 'react';\nimport {NavLink} from 'react-router-dom';\n\ntype Props = {\n    name: string;\n    title: ReactNode;\n    subsection?: boolean;\n    parentLink?: string;\n    children?: JSX.Element[];\n    id?: string;\n}\n\nconst BackstageSection = ({name, title, subsection = false, parentLink = '', children = [], id}: Props) => {\n    const link = parentLink + '/' + name;\n\n    let clonedChildren = null;\n    if (children.length > 0) {\n        clonedChildren = (\n            <ul className='subsections'>\n                {\n                    React.Children.map(children, (child) => {\n                        return React.cloneElement(child, {\n                            parentLink: link,\n                            subsection: true,\n                        });\n                    })\n                }\n            </ul>\n        );\n    }\n\n    const className = subsection ? 'subsection' : 'section';\n\n    return (\n        <li\n            className={className}\n            id={id}\n        >\n            <NavLink\n                className={`${className}-title`}\n                activeClassName={`${className}-title--active`}\n                to={link}\n            >\n                <span className={`${className}-title__text`}>\n                    {title}\n                </span>\n            </NavLink>\n            {clonedChildren}\n        </li>\n    );\n};\n\nexport default BackstageSection;\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from \"react\";\nimport { FormattedMessage } from \"react-intl\";\n\nimport type { Team } from \"@mattermost/types/teams\";\n\nimport { Permissions } from \"mattermost-redux/constants\";\n\nimport SystemPermissionGate from \"components/permissions_gates/system_permission_gate\";\nimport TeamPermissionGate from \"components/permissions_gates/team_permission_gate\";\n\nimport BackstageCategory from \"./backstage_category\";\nimport BackstageSection from \"./backstage_section\";\n\ntype Props = {\n    team: Team;\n    enableCustomEmoji: boolean;\n    enableIncomingWebhooks: boolean;\n    enableOutgoingWebhooks: boolean;\n    enableCommands: boolean;\n    enableOAuthServiceProvider: boolean;\n    enableOutgoingOAuthConnections: boolean;\n    canCreateOrDeleteCustomEmoji: boolean;\n    canManageIntegrations: boolean;\n};\n\nexport default class BackstageSidebar extends React.PureComponent<Props> {\n    renderCustomEmoji() {\n        if (\n            !this.props.enableCustomEmoji ||\n            !this.props.canCreateOrDeleteCustomEmoji\n        ) {\n            return null;\n        }\n\n        return (\n            <BackstageCategory\n                name=\"emoji\"\n                parentLink={\"/\" + this.props.team.name}\n                icon=\"fa-smile-o\"\n                title={\n                    <FormattedMessage\n                        id=\"backstage_sidebar.emoji\"\n                        defaultMessage=\"Custom Emoji\"\n                    />\n                }\n            />\n        );\n    }\n\n    renderIntegrations() {\n        if (!this.props.canManageIntegrations) {\n            return null;\n        }\n\n        let incomingWebhooks;\n        if (this.props.enableIncomingWebhooks) {\n            incomingWebhooks = (\n                <TeamPermissionGate\n                    permissions={[Permissions.MANAGE_INCOMING_WEBHOOKS]}\n                    teamId={this.props.team.id}\n                >\n                    <BackstageSection\n                        name=\"incoming_webhooks\"\n                        parentLink={\n                            \"/\" + this.props.team.name + \"/integrations\"\n                        }\n                        title={\n                            <FormattedMessage\n                                id=\"backstage_sidebar.integrations.incoming_webhooks\"\n                                defaultMessage=\"Incoming Webhooks\"\n                            />\n                        }\n                        id=\"incomingWebhooks\"\n                    />\n                </TeamPermissionGate>\n            );\n        }\n\n        let outgoingWebhooks: JSX.Element | null = null;\n        if (this.props.enableOutgoingWebhooks) {\n            outgoingWebhooks = (\n                <TeamPermissionGate\n                    permissions={[Permissions.MANAGE_OUTGOING_WEBHOOKS]}\n                    teamId={this.props.team.id}\n                >\n                    <BackstageSection\n                        name=\"outgoing_webhooks\"\n                        parentLink={\n                            \"/\" + this.props.team.name + \"/integrations\"\n                        }\n                        title={\n                            <FormattedMessage\n                                id=\"backstage_sidebar.integrations.outgoing_webhooks\"\n                                defaultMessage=\"Outgoing Webhooks\"\n                            />\n                        }\n                        id=\"outgoingWebhooks\"\n                    />\n                </TeamPermissionGate>\n            );\n        }\n\n        let commands: JSX.Element | null = null;\n        if (this.props.enableCommands) {\n            commands = (\n                <TeamPermissionGate\n                    permissions={[Permissions.MANAGE_SLASH_COMMANDS]}\n                    teamId={this.props.team.id}\n                >\n                    <BackstageSection\n                        name=\"commands\"\n                        parentLink={\n                            \"/\" + this.props.team.name + \"/integrations\"\n                        }\n                        title={\n                            <FormattedMessage\n                                id=\"backstage_sidebar.integrations.commands\"\n                                defaultMessage=\"Slash Commands\"\n                            />\n                        }\n                        id=\"slashCommands\"\n                    />\n                </TeamPermissionGate>\n            );\n        }\n\n        let oauthApps: JSX.Element | null = null;\n        if (this.props.enableOAuthServiceProvider) {\n            oauthApps = (\n                <SystemPermissionGate permissions={[Permissions.MANAGE_OAUTH]}>\n                    <BackstageSection\n                        name=\"oauth2-apps\"\n                        parentLink={\n                            \"/\" + this.props.team.name + \"/integrations\"\n                        }\n                        title={\n                            <FormattedMessage\n                                id=\"backstage_sidebar.integrations.oauthApps\"\n                                defaultMessage=\"OAuth 2.0 Applications\"\n                            />\n                        }\n                        id=\"oauthApps\"\n                    />\n                </SystemPermissionGate>\n            );\n        }\n\n        // Note that we allow managing bot accounts even if bot account creation is disabled: only\n        // a permissions check is required.\n        const botAccounts = (\n            <SystemPermissionGate\n                permissions={[\"manage_bots\", \"manage_others_bots\"]}\n            >\n                <BackstageSection\n                    name=\"bots\"\n                    parentLink={\"/\" + this.props.team.name + \"/integrations\"}\n                    title={\n                        <FormattedMessage\n                            id=\"backstage_sidebar.bots\"\n                            defaultMessage=\"Bot Accounts\"\n                        />\n                    }\n                    id=\"botAccounts\"\n                />\n            </SystemPermissionGate>\n        );\n\n        let outgoingOAuthConnections: JSX.Element | null = null;\n        if (this.props.enableOutgoingOAuthConnections) {\n            outgoingOAuthConnections = (\n                <TeamPermissionGate\n                    permissions={[\n                        Permissions.MANAGE_OUTGOING_OAUTH_CONNECTIONS,\n                    ]}\n                    teamId={this.props.team.id}\n                >\n                    <BackstageSection\n                        name=\"outgoing-oauth2-connections\"\n                        parentLink={\n                            \"/\" + this.props.team.name + \"/integrations\"\n                        }\n                        title={\n                            <FormattedMessage\n                                id=\"backstage_sidebar.integrations.outgoingOauthConnections\"\n                                defaultMessage=\"Outgoing OAuth 2.0 Connections\"\n                            />\n                        }\n                        id=\"outgoingOauthConnections\"\n                    />\n                </TeamPermissionGate>\n            );\n        }\n\n        return (\n            <></>\n            // <BackstageCategory\n            //     name=\"integrations\"\n            //     icon=\"fa-link\"\n            //     parentLink={\"/\" + this.props.team.name}\n            //     title={\n            //         <FormattedMessage\n            //             id=\"backstage_sidebar.integrations\"\n            //             defaultMessage=\"Integrations\"\n            //         />\n            //     }\n            // >\n            //     {incomingWebhooks}\n            //     {outgoingWebhooks}\n            //     {commands}\n            //     {oauthApps}\n            //     {botAccounts}\n            //     {outgoingOAuthConnections}\n            // </BackstageCategory>\n        );\n    }\n\n    render() {\n        return (\n            <div className=\"backstage-sidebar\">\n                <ul>\n                    {this.renderCustomEmoji()}\n                    {this.renderIntegrations()}\n                </ul>\n            </div>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React, {useRef} from 'react';\nimport type {ComponentType} from 'react';\nimport {Route, Switch} from 'react-router-dom';\nimport type {match} from 'react-router-dom';\nimport {createGlobalStyle} from 'styled-components';\n\nimport type {Team} from '@mattermost/types/teams';\nimport type {UserProfile} from '@mattermost/types/users';\n\nimport Emoji from 'components/emoji';\nimport AddEmoji from 'components/emoji/add_emoji';\nimport Integrations from 'components/integrations';\nimport AddIncomingWehook from 'components/integrations/add_incoming_webhook';\nimport AddOauthApp from 'components/integrations/add_oauth_app';\nimport AddOutgoingWebhook from 'components/integrations/add_outgoing_webhook';\nimport Bots from 'components/integrations/bots';\nimport AddBot from 'components/integrations/bots/add_bot';\nimport CommandsContainer from 'components/integrations/commands_container';\nimport ConfirmIntegration from 'components/integrations/confirm_integration';\nimport EditIncomingWebhook from 'components/integrations/edit_incoming_webhook';\nimport EditOauthApp from 'components/integrations/edit_oauth_app';\nimport EditOutgoingWebhook from 'components/integrations/edit_outgoing_webhook';\nimport InstalledIncomingWebhooks from 'components/integrations/installed_incoming_webhooks';\nimport InstalledOauthApps from 'components/integrations/installed_oauth_apps';\nimport InstalledOutgoingWebhooks from 'components/integrations/installed_outgoing_webhooks';\nimport AddOutgoingOAuthConnection from 'components/integrations/outgoing_oauth_connections/add_outgoing_oauth_connection';\nimport EditOutgoingOAuthConnection from 'components/integrations/outgoing_oauth_connections/edit_outgoing_oauth_connection';\nimport InstalledOutgoingOAuthConnections from 'components/integrations/outgoing_oauth_connections/installed_outgoing_oauth_connections';\n\nimport Pluggable from 'plugins/pluggable';\n\nimport BackstageNavbar from './components/backstage_navbar';\nimport BackstageSidebar from './components/backstage_sidebar';\n\ntype ExtraProps = Pick<Props, 'user' | 'team'> & {scrollToTop: () => void}\n\ntype BackstageRouteProps = {\n    component: ComponentType<any>;\n    extraProps: ExtraProps;\n    path: string;\n    exact?: boolean;\n}\n\nconst BackstageRoute = ({component: Component, extraProps, ...rest}: BackstageRouteProps) => (\n    <Route\n        {...rest}\n        render={(props) => (\n            <Component\n                {...extraProps}\n                {...props}\n            />\n        )}\n    />\n);\n\ntype Props = {\n\n    /**\n     * Current user.\n     */\n    user: UserProfile;\n\n    /**\n     * Current team.\n     */\n    team?: Team;\n\n    /**\n     * Object from react-router\n     */\n    match: match<{url: string}>;\n\n    siteName?: string;\n    enableCustomEmoji: boolean;\n    enableIncomingWebhooks: boolean;\n    enableOutgoingWebhooks: boolean;\n    enableCommands: boolean;\n    enableOAuthServiceProvider: boolean;\n    enableOutgoingOAuthConnections: boolean;\n    canCreateOrDeleteCustomEmoji: boolean;\n    canManageIntegrations: boolean;\n}\n\nconst BackstageController = (props: Props) => {\n    const listRef = useRef<HTMLDivElement>(null);\n\n    const scrollToTop = () => {\n        if (listRef.current) {\n            listRef.current.scrollTop = 0;\n        }\n    };\n\n    if (!props.team || !props.user) {\n        return null;\n    }\n    const extraProps = {\n        team: props.team,\n        user: props.user,\n        scrollToTop,\n    };\n    return (\n        <>\n            <BackstageNavbar\n                team={props.team}\n                siteName={props.siteName}\n            />\n            <div\n                className='backstage-body'\n                ref={listRef}\n            >\n                <Pluggable pluggableName='Root'/>\n                <BackstageSidebar\n                    team={props.team}\n                    enableCustomEmoji={props.enableCustomEmoji}\n                    enableIncomingWebhooks={props.enableIncomingWebhooks}\n                    enableOutgoingWebhooks={props.enableOutgoingWebhooks}\n                    enableCommands={props.enableCommands}\n                    enableOAuthServiceProvider={props.enableOAuthServiceProvider}\n                    enableOutgoingOAuthConnections={props.enableOutgoingOAuthConnections}\n                    canCreateOrDeleteCustomEmoji={props.canCreateOrDeleteCustomEmoji}\n                    canManageIntegrations={props.canManageIntegrations}\n                />\n                <Switch>\n                    <BackstageRoute\n                        extraProps={extraProps}\n                        exact={true}\n                        path={'/:team/integrations'}\n                        component={Integrations}\n                    />\n                    <BackstageRoute\n                        extraProps={extraProps}\n                        exact={true}\n                        path={`${props.match.url}/incoming_webhooks`}\n                        component={InstalledIncomingWebhooks}\n                    />\n                    <BackstageRoute\n                        extraProps={extraProps}\n                        path={`${props.match.url}/incoming_webhooks/add`}\n                        component={AddIncomingWehook}\n                    />\n                    <BackstageRoute\n                        extraProps={extraProps}\n                        path={`${props.match.url}/incoming_webhooks/edit`}\n                        component={EditIncomingWebhook}\n                    />\n                    <BackstageRoute\n                        extraProps={extraProps}\n                        exact={true}\n                        path={`${props.match.url}/outgoing_webhooks`}\n                        component={InstalledOutgoingWebhooks}\n                    />\n                    <BackstageRoute\n                        extraProps={extraProps}\n                        path={`${props.match.url}/outgoing_webhooks/add`}\n                        component={AddOutgoingWebhook}\n                    />\n                    <BackstageRoute\n                        extraProps={extraProps}\n                        path={`${props.match.url}/outgoing_webhooks/edit`}\n                        component={EditOutgoingWebhook}\n                    />\n                    <BackstageRoute\n                        extraProps={extraProps}\n                        path={`${props.match.url}/commands`}\n                        component={CommandsContainer}\n                    />\n                    <BackstageRoute\n                        extraProps={extraProps}\n                        exact={true}\n                        path={`${props.match.url}/oauth2-apps`}\n                        component={InstalledOauthApps}\n                    />\n                    <BackstageRoute\n                        extraProps={extraProps}\n                        path={`${props.match.url}/oauth2-apps/add`}\n                        component={AddOauthApp}\n                    />\n                    <BackstageRoute\n                        extraProps={extraProps}\n                        path={`${props.match.url}/oauth2-apps/edit`}\n                        component={EditOauthApp}\n                    />\n                    <BackstageRoute\n                        extraProps={extraProps}\n                        exact={true}\n                        path={`${props.match.url}/outgoing-oauth2-connections`}\n                        component={InstalledOutgoingOAuthConnections}\n                    />\n                    <BackstageRoute\n                        extraProps={extraProps}\n                        exact={true}\n                        path={`${props.match.url}/outgoing-oauth2-connections/add`}\n                        component={AddOutgoingOAuthConnection}\n                    />\n                    <BackstageRoute\n                        extraProps={extraProps}\n                        exact={true}\n                        path={`${props.match.url}/outgoing-oauth2-connections/edit`}\n                        component={EditOutgoingOAuthConnection}\n                    />\n                    <BackstageRoute\n                        extraProps={extraProps}\n                        path={`${props.match.url}/confirm`}\n                        component={ConfirmIntegration}\n                    />\n                    <BackstageRoute\n                        extraProps={extraProps}\n                        exact={true}\n                        path={'/:team/emoji'}\n                        component={Emoji}\n                    />\n                    <BackstageRoute\n                        extraProps={extraProps}\n                        path={`${props.match.url}/add`}\n                        component={AddEmoji}\n                    />\n                    <BackstageRoute\n                        extraProps={extraProps}\n                        path={`${props.match.url}/bots/add`}\n                        component={AddBot}\n                    />\n                    <BackstageRoute\n                        extraProps={extraProps}\n                        path={`${props.match.url}/bots/edit`}\n                        component={AddBot}\n                    />\n                    <BackstageRoute\n                        extraProps={extraProps}\n                        path={`${props.match.url}/bots`}\n                        component={Bots}\n                    />\n                </Switch>\n            </div>\n            <BackstageGlobalStyle/>\n        </>\n    );\n};\n\nexport default BackstageController;\n\nconst BackstageGlobalStyle = createGlobalStyle`\n    #root {\n        > #global-header,\n        > .team-sidebar,\n        > .main-wrapper .sidebar--right,\n        > .app-bar {\n            display: none;\n        }\n    }\n`;\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {withRouter} from 'react-router-dom';\n\nimport {Permissions} from 'mattermost-redux/constants';\nimport {getConfig} from 'mattermost-redux/selectors/entities/general';\nimport {haveITeamPermission, haveISystemPermission} from 'mattermost-redux/selectors/entities/roles';\nimport {getMyTeams, getCurrentTeam} from 'mattermost-redux/selectors/entities/teams';\nimport {getCurrentUser} from 'mattermost-redux/selectors/entities/users';\n\nimport type {GlobalState} from 'types/store';\n\nimport BackstageController from './backstage_controller';\n\nfunction mapStateToProps(state: GlobalState) {\n    const user = getCurrentUser(state);\n    const team = getCurrentTeam(state);\n\n    const config = getConfig(state);\n\n    const siteName = config.SiteName;\n    const enableCustomEmoji = config.EnableCustomEmoji === 'true';\n    const enableIncomingWebhooks = config.EnableIncomingWebhooks === 'true';\n    const enableOutgoingWebhooks = config.EnableOutgoingWebhooks === 'true';\n    const enableCommands = config.EnableCommands === 'true';\n    const enableOAuthServiceProvider = config.EnableOAuthServiceProvider === 'true';\n    const enableOutgoingOAuthConnections = config.EnableOutgoingOAuthConnections === 'true';\n\n    let canCreateOrDeleteCustomEmoji = (haveISystemPermission(state, {permission: Permissions.CREATE_EMOJIS}) || haveISystemPermission(state, {permission: Permissions.DELETE_EMOJIS}));\n    if (!canCreateOrDeleteCustomEmoji) {\n        for (const t of getMyTeams(state)) {\n            if (haveITeamPermission(state, t.id, Permissions.CREATE_EMOJIS) || haveITeamPermission(state, t.id, Permissions.DELETE_EMOJIS)) {\n                canCreateOrDeleteCustomEmoji = true;\n                break;\n            }\n        }\n    }\n\n    const canManageTeamIntegrations = (haveITeamPermission(state, team?.id, Permissions.MANAGE_SLASH_COMMANDS) || haveITeamPermission(state, team?.id, Permissions.MANAGE_OAUTH) || haveITeamPermission(state, team?.id, Permissions.MANAGE_INCOMING_WEBHOOKS) || haveITeamPermission(state, team?.id, Permissions.MANAGE_OUTGOING_WEBHOOKS));\n    const canManageSystemBots = (haveISystemPermission(state, {permission: Permissions.MANAGE_BOTS}) || haveISystemPermission(state, {permission: Permissions.MANAGE_OTHERS_BOTS}));\n    const canManageIntegrations = canManageTeamIntegrations || canManageSystemBots;\n\n    return {\n        user,\n        team,\n        siteName,\n        enableCustomEmoji,\n        enableIncomingWebhooks,\n        enableOutgoingWebhooks,\n        enableCommands,\n        enableOAuthServiceProvider,\n        enableOutgoingOAuthConnections,\n        canCreateOrDeleteCustomEmoji,\n        canManageIntegrations,\n    };\n}\n\nexport default withRouter(connect(mapStateToProps)(BackstageController));\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from 'react';\n\nconst TYPE_MODAL = 'modal';\nconst TYPE_BACKSTAGE = 'backstage';\n\n// accepts either a single error or an array of errors\ntype Props = {\n    type?: React.ReactNode;\n    error?: React.ReactNode;\n    textClassName?: string;\n    iconClassName?: string;\n    margin?: boolean;\n    errors?: React.ReactNode[];\n};\n\nconst EMPTY_ERROR_LIST: React.ReactNode[] = [];\n\nconst FormError: React.FC<Props> = ({\n    error = null,\n    errors = EMPTY_ERROR_LIST,\n    iconClassName,\n    margin,\n    textClassName,\n    type,\n}) => {\n    if (!error && errors.length === 0) {\n        return null;\n    }\n\n    // look for the first truthy error to display\n    let message = error;\n\n    if (!message) {\n        for (const err of errors) {\n            if (err) {\n                message = err;\n            }\n        }\n    }\n\n    if (!message) {\n        return null;\n    }\n\n    if (type === TYPE_MODAL) {\n        return (\n            <div className='form-group'>\n                <label className='col-sm-12 has-error'>{message}</label>\n            </div>\n        );\n    }\n\n    if (type === TYPE_BACKSTAGE) {\n        return (\n            <div className='pull-left has-error'>\n                <label className='control-label'>{message}</label>\n            </div>\n        );\n    }\n\n    if (margin) {\n        return (\n            <div className='form-group has-error'>\n                <label className='control-label'>{message}</label>\n            </div>\n        );\n    }\n\n    return (\n        <div className={`col-sm-12 ${textClassName || 'has-error'}`}>\n            <label className='control-label'>\n                <i\n                    className={`fa ${iconClassName || 'fa-exclamation-circle'}`}\n                />{' '}\n                {message}\n            </label>\n        </div>\n    );\n};\n\nexport default React.memo(FormError);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport classNames from 'classnames';\nimport React from 'react';\nimport {useIntl} from 'react-intl';\n\ntype Props = {\n    additionalClassName?: string;\n}\n\nconst NextIcon = ({additionalClassName}: Props) => {\n    const {formatMessage} = useIntl();\n\n    return (\n        <i\n            className={classNames('icon icon-chevron-right', additionalClassName)}\n            title={formatMessage({\n                id: 'generic_icons.next',\n                defaultMessage: 'Next Icon',\n            })}\n        />\n    );\n};\n\nexport default React.memo(NextIcon);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport classNames from 'classnames';\nimport React from 'react';\nimport {useIntl} from 'react-intl';\n\ntype Props = {\n    additionalClassName?: string;\n}\n\nconst PreviousIcon = ({additionalClassName}: Props) => {\n    const {formatMessage} = useIntl();\n\n    return (\n        <i\n            className={classNames('icon icon-chevron-left', additionalClassName)}\n            title={formatMessage({id: 'generic_icons.previous', defaultMessage: 'Previous Icon'})}\n        />\n    );\n};\n\nexport default React.memo(PreviousIcon);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from 'react';\nimport {useIntl} from 'react-intl';\n\nexport default function SearchIcon() {\n    const {formatMessage} = useIntl();\n\n    return (\n        <i\n            className='fa fa-search'\n            title={formatMessage({id: 'generic_icons.search', defaultMessage: 'Search Icon'})}\n        />\n    );\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport classNames from 'classnames';\nimport React from 'react';\nimport {useIntl} from 'react-intl';\n\ntype Props = {\n    additionalClassName?: string;\n}\n\nconst WarningIcon = ({additionalClassName}: Props) => {\n    const {formatMessage} = useIntl();\n    return (\n        <i\n            className={classNames('fa fa-warning', additionalClassName)}\n            title={formatMessage({id: 'generic_icons.warning', defaultMessage: 'Warning Icon'})}\n        />\n    );\n};\n\nexport default React.memo(WarningIcon);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport type {Bot} from '@mattermost/types/bots';\nimport type {GlobalState} from '@mattermost/types/store';\n\nimport {createSelector} from 'mattermost-redux/selectors/create_selector';\nimport {getUsers} from 'mattermost-redux/selectors/entities/common';\n\nexport const ExternalBotAccountNames: string[] = ['mattermost-advisor'];\n\nexport function getBotAccounts(state: GlobalState) {\n    return state.entities.bots.accounts;\n}\n\nexport const getExternalBotAccounts: (state: GlobalState) => Record<string, Bot> = createSelector(\n    'getExternalBotAccounts',\n    getBotAccounts,\n    getUsers,\n    (botAccounts, userProfiles) => {\n        const nextState: Record<string, Bot> = {};\n        Object.values(botAccounts).forEach((botAccount) => {\n            const botUser = userProfiles[botAccount.user_id];\n            if (botUser && !ExternalBotAccountNames.includes(botUser.username)) {\n                nextState[botAccount.user_id] = botAccount;\n            }\n        });\n\n        return nextState;\n    },\n);\n"],"names":["BackIcon","formatMessage","useIntl","React","className","title","id","defaultMessage","BackstageNavbar","_ref","team","siteName","teamExists","delete_at","Link","to","concat","name","FormattedMessage","values","propTypes","_pt","DeleteIntegrationLink","props","confirmButtonText","linkText","modalMessage","modalTitle","onDelete","openModal","onClick","useCallback","modalId","dialogProps","confirmButtonClass","modalClass","message","subtitleText","WarningIcon","additionalClassName","onConfirm","dialogType","ConfirmModalRedux","mapDispatchToProps","connect","DeleteEmojiButton","DELETE_PERMISSION","Permissions","DELETE_OTHER_PERMISSION","EmojiListItem","actions","deleteCustomEmoji","emoji","creatorUsername","currentUserId","creatorDisplayName","emoticonStyle","useMemo","backgroundImage","Client4","handleDelete","displayName","deleteButton","creator_id","AnyTeamPermissionGate","permissions","style","emojiId","isRequired","state","ownProps","entities","emojis","customEmoji","creator","getUser","getDisplayNameByUser","username","getCurrentUserId","currentTeam","getCurrentTeam","dispatch","bindActionCreators","EmojiList","constructor","super","_defineProperty","e","preventDefault","next","this","page","setState","nextLoading","getCustomEmojis","Emoji","then","data","length","missingPages","scrollToTop","target","term","value","clearTimeout","searchTimeout","setTimeout","async","trim","searchEmojis","loading","searchCustomEmojis","map","em","index","indexOf","newSearchEmojis","splice","componentDidMount","EMOJI_PER_PAGE","_ref2","render","nextButton","previousButton","push","key","colSpan","LoadingScreen","emojiIds","forEach","deleteFromSearch","pageStart","pageEnd","slice","buttonContents","NextIcon","SaveButton","btnClass","extraClasses","nextPage","saving","disabled","savingMessage","previousPage","PreviousIcon","SearchIcon","type","placeholder","intl","onChange","onSearchChange","search","flexGrow","flexShrink","injectIntl","getCustomEmojiIdsSortedByName","CREATE_EMOJIS_PERMISSIONS","ROLES","EmojiPage","teamDisplayName","teamName","currentTheme","useEffect","updateTitle","loadRolesIfNeeded","Utils","document","display_name","general","config","SiteName","getTheme","children","childrenElements","child","AddEmoji","handleSubmit","emojiMap","user","image","error","toLowerCase","startsWith","endsWith","substring","test","hasSystemEmoji","has","size","response","createCustomEmoji","getHistory","responseError","genericError","files","imageUrl","reader","FileReader","onload","result","readAsDataURL","filename","preview","htmlFor","BackstageHeader","onSubmit","handleFormSubmit","maxLength","updateName","accept","Constants","multiple","updateImage","FormError","SpinnerButton","spinning","spinningText","localizeMessage","handleSaveButtonClick","getEmojiMap","IntegrationOption","description","link","alt","src","Integrations","arguments","options","enableIncomingWebhooks","TeamPermissionGate","teamId","IncomingWebhookIcon","enableOutgoingWebhooks","OutgoingWebhookIcon","enableCommands","SlashCommandIcon","enableOAuthServiceProvider","SystemPermissionGate","OAuthIcon","enableOutgoingOAuthConnections","OutgoingOAuthConnectionsIcon","BotAccountsIcon","appDirectory","ExternalLink","href","location","getConfig","EnableIncomingWebhooks","EnableOutgoingWebhooks","EnableCommands","EnableOAuthServiceProvider","EnableOutgoingOAuthConnections","ChannelSelect","channels","selectOpen","selectPrivate","selectDm","channel","channelName","memo","getMyChannelsSorted","createSelector","getMyChannels","getCurrentUserLocale","locale","sort","sortChannelsByTypeAndDisplayName","AbstractIncomingWebhook","PureComponent","hook","channelId","channel_id","channelLocked","channel_locked","iconURL","icon_url","serverError","clientError","_this$props$initialHo","_this$props$initialHo2","_this$props$initialHo3","_this$props$initialHo4","_this$props$initialHo5","_this$props$initialHo6","initialHook","create_at","update_at","team_id","user_id","action","checked","getStateFromHook","headerToRender","header","footerToRender","footer","updateDisplayName","updateDescription","updateChannelId","updateChannelLocked","enablePostUsernameOverride","updateUsername","enablePostIconOverride","updateIconURL","errors","messages","defineMessages","AddIncomingWebhook","setServerError","useState","addIncomingHook","createIncomingHook","EnablePostUsernameOverride","EnablePostIconOverride","obj","arg","input","hint","prim","Symbol","toPrimitive","undefined","res","call","TypeError","String","_toPrimitive","_toPropertyKey","Object","defineProperty","enumerable","configurable","writable","AbstractOAuthApp","app","homepage","callbackUrls","callback_urls","join","is_trusted","has_icon","Boolean","_this$icon_url$curren","current","callbackUrl","split","Image","imageLoaded","getStateFromApp","initialApp","_this$props$loading","_this$props$loading2","renderExtra","icon","trusted","updateTrusted","updateHomepage","ref","updateIconUrl","rows","updateCallbackUrls","AddOAuthApp","history","useHistory","addOAuthApp","AbstractOutgoingWebhook","triggerWords","trigger_words","i","contentType","content_type","triggerWhen","trigger_when","triggerWord","token","parseInt","contentTypeOption1","contentTypeOption2","updateContentType","updateTriggerWords","updateTriggerWhen","DocLinks","AddOutgoingWebhook","createOutgoingHook","createBot","bot","bindClientFunc","clientFunc","onSuccess","BotTypes","params","patchBot","botUserId","botPatch","loadBots","perPage","disableBot","enableBot","getIncomingHooks","integrations","incomingHooks","getOutgoingHooks","outgoingHooks","getCommands","commands","getOAuthApps","oauthApps","getOutgoingOAuthConnections","outgoingOAuthConnections","getFilteredIncomingHooks","getCurrentTeamId","hooks","keys","filter","incomingHook","getAppsOAuthAppIDs","appsEnabled","appsOAuthAppIDs","apps","ids","getAppsBotIDs","appsBotIDs","o","getAllCommands","systemCommands","_objectSpread","currentTeamId","command","auto_complete","a","b","localeCompare","searchPlaceholder","remainingProps","_objectWithoutProperties","_excluded","setFilter","filterLowered","childCount","hasChildren","emptyTextSearch","searchTerm","emptyText","addLink","addText","addButtonId","hasFilter","startCount","endCount","total","isFirstPage","isLastPage","getPaging","pageSize","childrenToDisplay","previousPageFn","nextPageFn","helpText","matchesFilter","owner","ownerUsername","Bot","enableUserAccessToken","disableUserAccessToken","confirmingId","revokeUserAccessToken","closeConfirm","creatingTokenState","assign","createUserAccessToken","fromApp","tokenList","accessTokens","activeLink","disabledText","disableClass","is_active","confirmRevokeToken","openCreateToken","handleCreateToken","autoFocus","handleUpdateDescription","closeCreateToken","imageURL","last_picture_update","Markdown","ConfirmModal","show","revokeTokenConfirmed","onCancel","Bots","owners","users","includes","bots","match","enabledBots","botToJSX","disabledBots","EnabledSection","DisabledSection","hasDisabled","promises","owner_id","getUserAccessTokensForUser","Promise","all","fetchAppsBotIDs","botsToDisplay","BackstageList","createBots","FormattedMarkdownMessage","botAccounts","siteURL","getSiteURL","EnableBotAccountCreation","getExternalBotAccounts","botValues","reduce","UserSelectors","admin","userAccessTokensByUser","roleOptionSystemAdmin","roleOptionMember","AddBot","role","postAll","postChannels","pictureFile","previewBlob","URL","createObjectURL","e2","_e2$target","orientation","FileUtils","orientationStyles","readAsArrayBuffer","BotDefaultIcon","roles","General","rolesResult","updateUserRoles","adding","isFile","AcceptedProfileImageTypes","maxFileSize","uploadProfileImage","setDefaultProfileImage","updateRoles","usernameError","errObj","ValidationErrors","tokenResult","UserUtils","transform","transformOrigin","file","subtitle","buttonText","buttonActiveText","imageStyles","removeImageIcon","WithTooltip","placement","setDefault","updatePicture","editingUserHasManageSystem","updateRole","msg","DeveloperLinks","updatePostAll","updatePostChannels","botId","URLSearchParams","get","getBotAccounts","MaxFileSize","haveISystemPermission","permission","DEFAULT_PAGE_SIZE","loadIncomingHooksAndProfilesForTeam","includeTotalCount","IntegrationActions","incoming_webhooks","getState","profilesToLoad","list","getProfilesByIds","loadOutgoingHooksAndProfilesForTeam","loadCommandsAndProfilesForTeam","loadOAuthAppsAndProfiles","loadProfilesForOAuthApps","OAuthConnectionAudienceInput","mounted","useRef","matchedConnection","setMatchingOAuthConnection","loadingAudienceMatch","setLoadingAudienceMatch","oauthConnections","useSelector","oauthConnectionsEnabled","useDispatch","matchConnectionsOnInput","fetchOutgoingOAuthConnectionsForAudience","inputValue","debouncedMatchConnections","debounce","fetchOutgoingOAuthConnections","connections","autoComplete","oauthMessage","LoadingSpinner","OauthIcon","connectionName","InformationOutlineIcon","AbstractCommand","_command$display_name","_command$description","_command$trigger","_command$url","_command$method","_command$username","_command$icon_url","_command$auto_complet","_command$auto_complet2","_command$auto_complet3","trigger","url","method","iconUrl","autocomplete","autocompleteHint","auto_complete_hint","autocompleteDescription","auto_complete_desc","substr","_this$state$autocompl","_this$state$autocompl2","min","max","methodValue","getStateFromCommand","initialCommand","_this$props$loading$i","updateAutocompleteHint","updateAutocompleteDescription","getBackstageHeader","updateTrigger","updateUrl","text","updateMethod","updateAutocomplete","getBackstageFooter","AddCommand","headerMessage","footerMessage","loadingMessage","addCommand","CopyText","tooltip","copyText","copyToClipboard","queryCommandSupported","ConfirmIntegration","window","addEventListener","handleKeyPress","removeEventListener","headerText","tokenText","outgoingHook","oauthApp","outgoingOAuthConnection","commandToken","incomingHookToken","outgoingHookToken","oauthAppToken","oauthAppSecret","client_secret","secret","clientId","client_id","clientSecret","credentials_username","password","credentials_password","grant_type","oauth_token_url","audiences","replace","ErrorPageTypes","botToken","botname","strong","EditCommand","_this$state$originalC","_this$state$originalC2","_this$state$originalC3","_this$state$originalC4","newCommand","originalCommand","handleConfirmModal","submitCommand","showConfirmModal","editCommand","confirmButton","confirmTitle","confirmMessage","confirmModalDismissed","getCustomTeamCommands","commandId","InstalledCommand","onRegenToken","canChange","handleRegenToken","createAt","InstalledCommands","regenCommandToken","deleteCommand","commandCompare","nameA","nameB","canManageOthersSlashCommands","buildYourOwn","haveITeamPermission","CommandRoute","component","Component","extraProps","rest","Route","path","CommandsContainer","_this$props$team","Switch","exact","Redirect","getUsers","EditIncomingWebhook","_this$props$hook","newHook","submitHook","updateIncomingHook","getIncomingHook","hookId","editIncomingHook","HEADER","FOOTER","LOADING","EditOAuthApp","newApp","every","v","submitOAuthApp","editOAuthApp","err","getOAuthApp","oauthAppId","EditOutgoingWebhook","triggerWordsSame","callbackUrlsSame","updateOutgoingHook","getOutgoingHook","editOutgoingHook","incomingWebhook","InstalledIncomingWebhook","incomingWebhookId","InstalledIncomingWebhooks","removeIncomingHook","pageToLoad","loadPage","displayNameA","channelA","displayNameB","incomingWebhookCompare","canManageOthersWebhooks","deleteIncomingWebhook","incomingHooksTotalCount","incomingWebhooks","getIncomingHooksTotalCount","getAllChannels","FAKE_SECRET","InstalledOAuthApp","onRegenerateSecret","handleShowClientSecret","creatorName","urls","isTrusted","showHide","handleHideClientSecret","regen","handleRegenerate","appInfo","InstalledOAuthApps","deleteOAuthApp","oauthAppCompare","regenOAuthAppSecret","toString","canManageOauth","oauthApplications","outgoingWebhook","InstalledOutgoingWebhook","makeDisplayName","InstalledOutgoingWebhooks","regenOutgoingHookToken","removeOutgoingHook","channelB","outgoingWebhooks","outgoingWebhookCompare","regenOutgoingWebhookToken","Actions","ownKeys","r","t","getOwnPropertySymbols","getOwnPropertyDescriptor","apply","getOwnPropertyDescriptors","defineProperties","ValidationStatus","initialState","AbstractOutgoingOAuthConnection","formState","setFormState","connection","audienceUrls","oauthTokenUrl","grantType","newState","oldState","useOutgoingOAuthForm","initialConnection","storedError","setError","validationError","setValidationError","isSubmitting","setIsSubmitting","validationStatus","setValidationStatus","INITIAL","isEditingSecret","setIsEditingSecret","isValidationModalOpen","setIsValidationModalOpen","isNewConnection","parseForm","requireAudienceUrl","audienceUrl","hideSkipValidateModal","VALIDATED","submitAction","setUnvalidated","DIRTY","clientSecretSection","repeat","startEditingClientSecret","ValidateButton","_props$initialConnect","VALIDATING","validateOutgoingOAuthConnection","ERROR","status","onExited","AlertOutlineIcon","CheckCircleOutlineIcon","defineMessage","addOutgoingOAuthConnection","connectionId","existingConnection","newConnection","setNewConnection","setShowConfirmModal","getOutgoingOAuthConnection","createOutgoingOAuthConnection","editOutgoingOAuthConnection","InstalledOutgoingOAuthConnection","connectionInfo","setLoading","canManageOutgoingOAuthConnections","loadOutgoingOAuthConnectionsAndProfiles","deleteOutgoingOAuthConnectionLocal","deleteOutgoingOAuthConnection","outgoingOauthConnectionCompare","childProps","outgoingOauthConnections","parentLink","NavLink","activeClassName","classNames","subsection","clonedChildren","BackstageSidebar","renderCustomEmoji","enableCustomEmoji","canCreateOrDeleteCustomEmoji","BackstageCategory","renderIntegrations","canManageIntegrations","BackstageSection","BackstageRoute","BackstageGlobalStyle","createGlobalStyle","withRouter","getCurrentUser","EnableCustomEmoji","getMyTeams","canManageTeamIntegrations","canManageSystemBots","listRef","scrollTop","Pluggable","pluggableName","AddIncomingWehook","InstalledOauthApps","AddOauthApp","EditOauthApp","InstalledOutgoingOAuthConnections","AddOutgoingOAuthConnection","EditOutgoingOAuthConnection","EMPTY_ERROR_LIST","iconClassName","margin","textClassName","ExternalBotAccountNames","accounts","userProfiles","nextState","botAccount","botUser"],"sourceRoot":""}