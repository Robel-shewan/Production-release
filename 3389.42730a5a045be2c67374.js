"use strict";(self.webpackChunkmattermost_webapp=self.webpackChunkmattermost_webapp||[]).push([[3389],{26452:(e,t,a)=>{a.d(t,{Z:()=>u});var s=a(23615),n=a.n(s),i=a(60042),r=a.n(i),o=a(84390),l=a.n(o),c=a(9448);const m=e=>{let{url:t,className:a,onClick:s}=e;return l().createElement("div",{className:r()("signup-header",a)},l().createElement(c.Link,{"data-testid":"back_button",onClick:s,to:t},l().createElement("svg",{width:"9",height:"15",viewBox:"0 0 9 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l().createElement("path",{d:"M7.64331 15L0 7.5L7.64331 0L9 1.33125L2.71338 7.5L9 13.6688L7.64331 15Z",fill:"white"}))))};m.propTypes={url:n().string,className:n().string,onClick:n().func},m.defaultProps={url:"/"};const u=m},15454:(e,t,a)=>{a.d(t,{Z:()=>r}),a(48410);var s=a(84390),n=a.n(s),i=a(82626);const r=function(e){return t=>{const a=(0,i.Z)();return n().createElement(e,Object.assign({usageDeltas:a},t))}}},82626:(e,t,a)=>{a.d(t,{Z:()=>o}),a(14078);var s=a(84390),n=a(32397),i=a(34250);const r=(e,t)=>t&&null!=e?e:Number.MAX_VALUE;function o(){const e=(0,i.Z)(),[t,a]=(0,n.Z)();return(0,s.useMemo)((()=>{var s,n,i;return{files:{totalStorage:e.files.totalStorage-r(null===(s=t.files)||void 0===s?void 0:s.total_storage,a),totalStorageLoaded:e.files.totalStorageLoaded},messages:{history:e.messages.history-r(null===(n=t.messages)||void 0===n?void 0:n.history,a),historyLoaded:e.messages.historyLoaded},teams:{active:e.teams.active-r(null===(i=t.teams)||void 0===i?void 0:i.active,a),cloudArchived:e.teams.cloudArchived,teamsLoaded:e.teams.teamsLoaded}}}),[e,t,a])}},84948:(e,t,a)=>{a.d(t,{Z:()=>c});var s=a(23615),n=a.n(s),i=a(84390),r=a.n(i),o=a(72060);const l=e=>{let{customDescriptionText:t,siteName:a="Infogito's"}=e;const s=t||r().createElement(o.FormattedMessage,{id:"web.root.signup_info",defaultMessage:"All team communication in one place, searchable and accessible anywhere"});return r().createElement(r().Fragment,null,r().createElement("h1",{id:"site_name"},a),r().createElement("h3",{id:"site_description",className:"color--light"},s))};l.propTypes={customDescriptionText:n().string};const c=r().memo(l)},13389:(e,t,a)=>{a.r(t),a.d(t,{default:()=>K});var s=a(70314),n=a(9448),i=a(36891),r=a(92087),o=a(17086),l=a(97042),c=a(80947),m=a(19601),u=a(84073),d=a(11298),g=a(23894),p=a(33115),f=a(17534),h=a(15454),E=a(55552),_=(a(61418),a(95623),a(61514),a(92189),a(84390)),v=a.n(_),b=a(72060),T=a(68679),M=a(28176),N=a(43585),C=a(26452),y=a(66726),P=a.n(y),L=a(25598);function S(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class k extends v().PureComponent{constructor(e){super(e),S(this,"validateBuffer",(e=>e<100?100:Math.abs(e))),S(this,"getAmountOfPages",((e,t)=>Math.ceil(e/t))),S(this,"handleScroll",(()=>{const{isFetching:e,isEndofData:t}=this.state,{callBack:a,bufferValue:s,totalItems:n,itemsPerPage:i,pageNumber:r}=this.props,o=this.node.current,l=this.validateBuffer(s),c=o.scrollHeight-o.clientHeight-l;!(o.scrollTop>c)||t||e||this.setState({isFetching:!0},(async()=>{if(await a(),this.setState({isFetching:!1}),0===n)return void this.setState({isEndofData:!0});const e=this.getAmountOfPages(n,i);r===e&&this.setState({isEndofData:!0})}))})),S(this,"debounceHandleScroll",P()(this.handleScroll,200)),this.state={isFetching:!1,isEndofData:!1},this.node=v().createRef()}componentDidMount(){var e;null===(e=this.node.current)||void 0===e||e.addEventListener("scroll",this.debounceHandleScroll)}componentWillUnmount(){var e;null===(e=this.node.current)||void 0===e||e.removeEventListener("scroll",this.debounceHandleScroll)}render(){const{children:e,endOfDataMessage:t,styleClass:a,loaderStyle:s}=this.props,{isEndofData:n,isFetching:i}=this.state,r=!n&&i;return v().createElement(v().Fragment,null,v().createElement("div",{className:"infinite-scroll ".concat(a),ref:this.node},e,r&&v().createElement(L.Z,{style:s,message:" "}),!r&&t))}}S(k,"defaultProps",{bufferValue:100,endOfDataMessage:"",styleClass:"",loaderStyle:{}});var w=a(84948),I=a(2664),A=a(65031),Z=a(51750),R=a(77477),D=a(70012),F=a(23712),j=a(21214),x=a(23615),U=a.n(x);function J(e){const{formatMessage:t}=(0,b.useIntl)();return v().createElement("span",e,v().createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 20 20",style:O,role:"img","aria-label":t({id:"generic_icons.info",defaultMessage:"Info Icon"})},v().createElement("g",{transform:"matrix(1.17647,0,0,1.17647,-1.55431e-15,-1.00573e-14)"},v().createElement("path",{d:"M8.5,0C3.797,0 0,3.797 0,8.5C0,13.203 3.797,17 8.5,17C13.203,17 17,13.203 17,8.5C17,3.797 13.203,0 8.5,0ZM10,8.5C10,7.672 9.328,7 8.5,7C7.672,7 7,7.672 7,8.5L7,12.45C7,13.278 7.672,13.95 8.5,13.95C9.328,13.95 10,13.278 10,12.45L10,8.5ZM8.5,3C9.328,3 10,3.672 10,4.5C10,5.328 9.328,6 8.5,6C7.672,6 7,5.328 7,4.5C7,3.672 7.672,3 8.5,3Z"}))))}const O={fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:1.41421};var Y=a(34575),B=a(70174);const H=e=>{let{team:t,onTeamClick:a,loading:s,canJoinPublicTeams:n,canJoinPrivateTeams:i}=e;const r=(0,b.useIntl)(),o=(0,_.useCallback)((e=>{e.preventDefault(),a(t)}),[a,t]);let l;l=s?v().createElement("span",{className:"fa fa-refresh fa-spin right signup-team__icon",title:r.formatMessage({id:"generic_icons.loading",defaultMessage:"Loading Icon"})}):v().createElement("span",{className:"fa fa-angle-right right signup-team__icon",title:r.formatMessage({id:"select_team.join.icon",defaultMessage:"Join Team Icon"})});const c=t.allow_open_invite&&n||!t.allow_open_invite&&i;return v().createElement("div",{className:"signup-team-dir"},t.description?v().createElement(Y.Z,{id:"team-description__tooltip",title:t.description,placement:"top"},v().createElement(J,{className:"icon icon--info"})):null,v().createElement("a",{href:"#",id:B.x(t.display_name),onClick:c?o:void 0,className:c?"":"disabled"},v().createElement("span",{className:"signup-team-dir__name"},t.display_name),!t.allow_open_invite&&v().createElement("i",{className:"fa fa-lock light",title:r.formatMessage({id:"select_team.private.icon",defaultMessage:"Private team"})}),c&&l))};H.propTypes={onTeamClick:U().func.isRequired,loading:U().bool.isRequired,canJoinPublicTeams:U().bool.isRequired,canJoinPrivateTeams:U().bool.isRequired};const G=v().memo(H);function V(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class q extends v().PureComponent{constructor(e){super(e),V(this,"fetchMoreTeams",(async()=>{const{currentPage:e}=this.state,{actions:t}=this.props,a=await t.getTeams(e,30,!0);a.error||a.error instanceof Error||this.setState((e=>({currentPage:e.currentPage+1})))})),V(this,"handleTeamClick",(async e=>{const{siteURL:t,currentUserRoles:a}=this.props;this.setState({loadingTeamId:e.id});const{data:s,error:n}=await this.props.actions.addUserToTeam(e.id,this.props.currentUserId);if(s&&void 0!==this.props.history)this.props.history.push("/".concat(e.name,"/channels/").concat(F.default.DEFAULT_CHANNEL));else if(n){let e=n.message;"api.team.add_members.user_denied"===n.server_error_id&&(e=void 0!==a&&a.includes(F.default.PERMISSIONS_SYSTEM_ADMIN)?v().createElement(I.Z,{id:"join_team_group_constrained_denied_admin",defaultMessage:"You need to be a member of a linked group to join this team. You can add a group to this team [here](".concat(t,"/admin_console/user_management/groups)."),values:{siteURL:t}}):v().createElement(I.Z,{id:"join_team_group_constrained_denied",defaultMessage:"You need to be a member of a linked group to join this team."})),this.setState({error:e,loadingTeamId:""})}})),V(this,"handleLogoutClick",(e=>{e.preventDefault(),(0,M.L9)("select_team","click_logout"),(0,T.gc)("/login")})),V(this,"clearError",(e=>{e.preventDefault(),this.setState({error:null})})),this.state={loadingTeamId:"",error:null,endofTeamsData:!1,currentPage:0,currentListableTeams:[]}}static getDerivedStateFromProps(e,t){return e.listableTeams.length!==t.currentListableTeams.length?{currentListableTeams:e.listableTeams.slice(0,30*t.currentPage)}:null}componentDidMount(){(0,M.L9)("signup","signup_select_team",{userId:this.props.currentUserId}),this.fetchMoreTeams(),void 0!==this.props.currentUserRoles&&this.props.actions.loadRolesIfNeeded(this.props.currentUserRoles.split(" "))}render(){const{currentPage:e,currentListableTeams:t}=this.state,{currentUserIsGuest:a,canManageSystem:s,customDescriptionText:i,isMemberOfTeam:r,siteName:o,canCreateTeams:c,canJoinPublicTeams:m,canJoinPrivateTeams:u,totalTeamsCount:d,isCloud:g,isFreeTrial:p,usageDeltas:{teams:{active:f}}}=this.props,h=g&&!p&&f>=0;let E;if(this.state.loadingTeamId)E=v().createElement(L.Z,null);else if(this.state.error)E=v().createElement("div",{className:"signup__content"},v().createElement("div",{className:"form-group has-error"},v().createElement("label",{className:"control-label"},this.state.error)));else if(a)E=v().createElement("div",{className:"signup__content"},v().createElement("div",{className:"form-group has-error"},v().createElement("label",{className:"control-label"},v().createElement(b.FormattedMessage,{id:"signup_team.guest_without_channels",defaultMessage:"Your guest account has no channels assigned. Please contact an administrator."}))));else{let a=[];t.forEach((e=>{(e.allow_open_invite&&m||!e.allow_open_invite&&u)&&a.push(v().createElement(G,{key:"team_"+e.name,team:e,onTeamClick:this.handleTeamClick,loading:this.state.loadingTeamId===e.id,canJoinPublicTeams:m,canJoinPrivateTeams:u}))})),0===a.length&&(c||s)?a=v().createElement("div",{className:"signup-team-dir-err"},v().createElement("div",null,h?v().createElement(b.FormattedMessage,{id:"signup_team.no_open_teams",defaultMessage:"No teams are available to join. Please ask your administrator for an invite."}):v().createElement(b.FormattedMessage,{id:"signup_team.no_open_teams_canCreate",defaultMessage:"No teams are available to join. Please create a new team or ask your administrator for an invite."}))):0===a.length&&(a=v().createElement("div",{className:"signup-team-dir-err"},v().createElement("div",null,v().createElement(Z.Z,{permissions:[l.Pl.CREATE_TEAM]},v().createElement(b.FormattedMessage,{id:"signup_team.no_open_teams_canCreate",defaultMessage:"No teams are available to join. Please create a new team or ask your administrator for an invite."})),v().createElement(Z.Z,{permissions:[l.Pl.CREATE_TEAM],invert:!0},v().createElement(b.FormattedMessage,{id:"signup_team.no_open_teams",defaultMessage:"No teams are available to join. Please ask your administrator for an invite."}))))),E=v().createElement("div",{id:"teamsYouCanJoinContent",className:"signup__content"},v().createElement("div",{className:"SelectTeam__sub-header"},v().createElement("h4",null,v().createElement(b.FormattedMessage,{id:"signup_team.join_open",defaultMessage:"Teams you can join: "})),v().createElement(A.Z,null)),v().createElement(k,{callBack:this.fetchMoreTeams,styleClass:"signup-team-all",totalItems:d,itemsPerPage:30,bufferValue:280,pageNumber:e,loaderStyle:{padding:"0px",height:"40px"}},a))}const _=!h&&v().createElement(Z.Z,{permissions:[l.Pl.CREATE_TEAM]},v().createElement("div",{className:"margin--extra",style:{marginTop:"0.5em"}},v().createElement(n.Link,{id:"createNewTeamLink",to:"/create_team",onClick:()=>(0,M.L9)("select_team","click_create_team"),className:"signup-team-login"},v().createElement(b.FormattedMessage,{id:"login.createTeam",defaultMessage:"Create a team"}))));let T,y;return j.k()||(T=v().createElement(Z.Z,{permissions:[l.Pl.MANAGE_SYSTEM]},v().createElement("div",{className:"mt-8 hidden-xs"},v().createElement(n.Link,{to:"/admin_console",className:"signup-team-login",onClick:()=>(0,M.L9)("select_team","click_system_console")},v().createElement(b.FormattedMessage,{id:"signup_team_system_console",defaultMessage:"Go to System Console"}))))),y=this.state.error?v().createElement(C.Z,{onClick:this.clearError}):r?v().createElement(C.Z,null):v().createElement("div",{className:"signup-header"},v().createElement("a",{href:"#",id:"logout",onClick:this.handleLogoutClick},v().createElement(R.Z,null),v().createElement(b.FormattedMessage,{id:"web.header.logout",defaultMessage:"Logout"}))),v().createElement("div",null,v().createElement(N.default,null),y,v().createElement("div",{className:"col-sm-12"},v().createElement("div",{className:"select-team__container signup-team__container"},v().createElement("img",{alt:"signup team logo",className:"signup-team-logo",src:D}),v().createElement(w.Z,{customDescriptionText:i,siteName:o}),E,_,T)))}}const K=(0,i.compose)(n.withRouter,(0,s.connect)((function(e){const t=(0,m.iE)(e),a=(0,g.ts)(e),s=Object.values((0,d.gb)(e)),n=(0,m.lJ)(e),i=(0,c.oR)(e),r=(0,E.Ht)(n),o="true"===(null==i?void 0:i.is_free_trial);return{currentUserId:a.id,currentUserRoles:a.roles||"",currentUserIsGuest:(0,p.nJ)(a.roles),customDescriptionText:t.CustomDescriptionText,isMemberOfTeam:s&&s.length>0,listableTeams:(0,d.LN)(e,a.locale),siteName:t.SiteName,canCreateTeams:(0,u.AN)(e,{permission:l.Pl.CREATE_TEAM}),canManageSystem:(0,u.AN)(e,{permission:l.Pl.MANAGE_SYSTEM}),canJoinPublicTeams:(0,u.AN)(e,{permission:l.Pl.JOIN_PUBLIC_TEAMS}),canJoinPrivateTeams:(0,u.AN)(e,{permission:l.Pl.JOIN_PRIVATE_TEAMS}),siteURL:t.SiteURL,totalTeamsCount:e.entities.teams.totalCount||0,isCloud:r,isFreeTrial:o}}),(function(e){return{actions:(0,i.bindActionCreators)({getTeams:o.LK,loadRolesIfNeeded:r.k3,addUserToTeam:f.aJ},e)}})),h.Z)(q)},77477:(e,t,a)=>{a.d(t,{Z:()=>r});var s=a(84390),n=a.n(s),i=a(72060);function r(){const{formatMessage:e}=(0,i.useIntl)();return n().createElement("i",{className:"fa fa-1x fa-angle-left",title:e({id:"generic_icons.logout",defaultMessage:"Logout Icon"})})}},70012:(e,t,a)=>{e.exports=a.p+"files/ab8aa80cba445eb0fb75.png"}}]);
//# sourceMappingURL=3389.42730a5a045be2c67374.js.map