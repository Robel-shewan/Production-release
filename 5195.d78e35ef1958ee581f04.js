"use strict";(self.webpackChunkmattermost_webapp=self.webpackChunkmattermost_webapp||[]).push([[5195],{53134:(e,t,n)=>{n.d(t,{Ke:()=>d,Tc:()=>c,ur:()=>u,XM:()=>h}),n(61418);var a=n(10883),s=n(80139),r=n(78338),i=n(17554),o=n(98644),l=n(32032);function c(e,t){return async(n,i)=>{const o=i(),c=(0,l.en)(o);return n(function(e,t,n){return async(i,o)=>{const l=o(),c=(0,r.e)(l,e,t);try{await s.je.deleteChannelBookmark(e,t,n),i({type:a.PG.BOOKMARK_DELETED,data:c})}catch(e){return{data:!1,error:e}}return{data:!0}}}(e,t,c))}}function d(e,t){return async(n,r)=>{const i=r(),o=(0,l.en)(i);return n(function(e,t,n){return async r=>{try{const i=await s.je.createChannelBookmark(e,t,n);r({type:a.PG.RECEIVED_BOOKMARK,data:i})}catch(e){return{data:!1,error:e}}return{data:!0}}}(e,t,o))}}function u(e,t,n){return async(r,i)=>{const o=i(),c=(0,l.en)(o);return r(function(e,t,n,r){return async i=>{try{const{updated:o,deleted:l}=await s.je.updateChannelBookmark(e,t,n,r);o&&i({type:a.PG.RECEIVED_BOOKMARK,data:o}),l&&i({type:a.PG.BOOKMARK_DELETED,data:l})}catch(e){return{data:!1,error:e}}return{data:!0}}}(e,t,n,c))}}function h(e){return function(e){return async(t,n)=>{let r;try{r=await s.je.getChannelBookmarks(e),t({type:a.PG.RECEIVED_BOOKMARKS,data:{channelId:e,bookmarks:r}})}catch(e){return(0,o._f)(e,t,n),t((0,i.H)(e)),{error:e}}return{data:r}}}(e)}},46935:(e,t,n)=>{n.d(t,{L0:()=>h,Q7:()=>g,Ul:()=>m,Vv:()=>E,j:()=>b,jb:()=>u,k4:()=>p,rJ:()=>C,wv:()=>f}),n(61418),n(69217);var a=n(54892),s=n(97042),r=n(20229),i=n(95849),o=n(43618),l=n(88308),c=n(35590),d=n(23712);function u(e){return{type:d.MF.SET_UNREAD_FILTER_ENABLED,enabled:e}}function h(e){return{type:d.MF.SIDEBAR_DRAGGING_SET_STATE,data:e}}function m(){return{type:d.MF.SIDEBAR_DRAGGING_STOP}}function p(e,t,n){return async(s,r)=>{if(n){const e=r().views.channelSidebar.multiSelectedChannelIds;n.forEach((t=>{e.indexOf(t)>=0&&s(E(t))}))}const i=await s((0,a.k4)(e,t,n));return s({type:d.MF.ADD_NEW_CATEGORY_ID,data:i.data.id})}}function g(e,t){return f(e,0,t,!1)}function f(e,t,n){let o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return(d,u)=>{const h=u(),m=h.views.channelSidebar.multiSelectedChannelIds;let p=[];if(m.length&&-1!==m.indexOf(n)){const t=(0,c.Yy)(h),a=(0,c.ER)(h);let i=[n];const o=t.find((t=>t.id===e));i=m.filter((e=>{const t=a.find((t=>e===t.id)),n=(null==t?void 0:t.type)===s.LQ.DM_CHANNEL||(null==t?void 0:t.type)===s.LQ.GM_CHANNEL;return(null==o?void 0:o.type)===r.y.CUSTOM||(null==o?void 0:o.type)===r.y.FAVORITES||n&&(null==o?void 0:o.type)===r.y.DIRECT_MESSAGES||!n&&(null==o?void 0:o.type)!==r.y.DIRECT_MESSAGES}));const l=a.map((e=>e.id));i.sort(((e,t)=>l.indexOf(e)-l.indexOf(t))),i.forEach((e=>d(E(e)))),p=i}else p=[n];const g=function(e,t,n,a,s){if(0===a)return 0;const r=(0,i.n3)(e,t),o=(0,i.kb)()(e,r),c=o.filter(((e,t)=>e!==s&&-1!==n.indexOf(e)&&t<=a)),d=a-c.length;if(r.channel_ids.length===o.length)return d;const u=(0,l.FY)(o,n,d),h=u[u.indexOf(n[0])-1];let m=r.channel_ids.indexOf(h)+1;const p=r.channel_ids.indexOf(n[0]);return-1!==p&&p<m&&(m-=1),Math.max(m-c.length,0)}(h,e,p,t,n);return d((0,a.Yw)(e,p,g,o))}}function C(){return(e,t)=>0===t().views.channelSidebar.multiSelectedChannelIds.length?{data:!1}:(e({type:d.MF.MULTISELECT_CHANNEL_CLEAR}),{data:!0})}function E(e){return(t,n)=>{const a=n();if(!a.views.channelSidebar.multiSelectedChannelIds.length){const e=(0,o.gO)(a);t({type:d.MF.MULTISELECT_CHANNEL,data:e})}return t({type:d.MF.MULTISELECT_CHANNEL_ADD,data:e})}}function b(e){return(t,n)=>{const a=n(),s=a.views.channelSidebar.multiSelectedChannelIds;let r=a.views.channelSidebar.lastSelectedChannel;if(!s.length){const e=(0,o.gO)(a);t({type:d.MF.MULTISELECT_CHANNEL,data:e}),r=e}const i=(0,c.QP)(a).map((e=>e.id)),l=i.indexOf(e),u=i.indexOf(r);if(l===u)return{data:!1};const h=Math.min(u,l),m=Math.max(u,l),p=i.slice(h,m+1);return t({type:d.MF.MULTISELECT_CHANNEL_TO,data:p})}}},71892:(e,t,n)=>{n.d(t,{Z:()=>S}),n(52077),n(83526),n(82759),n(40895);var a=n(70314),s=n(36891),r=n(75627),i=n(17086),o=n(43618),l=n(11990),c=n(57235),d=n(23615),u=n.n(d),h=(n(61418),n(14078),n(48410),n(92189),n(84390)),m=n.n(h),p=n(11313),g=n(72060),f=n(85071),C=n(57449),E=n(38966),b=n(23712),v=n(70174);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class M extends m().PureComponent{constructor(e){super(e),_(this,"handleHide",(()=>{this.props.actions.setModalSearchTerm(""),this.setState({show:!1})})),_(this,"handleResponse",(e=>{let t=null;e&&e.message&&(t=e.message),this.setState({saving:!1,addError:t})})),_(this,"handleSubmit",(async()=>{const e=this.state.values.map((e=>e.id));if(0!==e.length){if(this.props.skipCommit)return this.props.onAddCallback&&this.props.onAddCallback(e),void this.handleHide();this.setState({saving:!0}),await Promise.all(e.map((async e=>{const{error:t}=await this.props.actions.linkGroupSyncable(e,this.props.currentChannelId,f.ZS.Channel,{auto_add:!0});this.handleResponse(t),t||this.handleHide()})))}})),_(this,"addValue",(e=>{const t=Object.assign([],this.state.values),n=t.map((e=>e.id));e&&e.id&&-1===n.indexOf(e.id)&&t.push(e),this.setState({values:t})})),_(this,"setGroupsLoadingState",(e=>{this.setState({loadingGroups:e})})),_(this,"handlePageChange",((e,t)=>{e>t&&(this.setGroupsLoadingState(!0),this.props.actions.getGroupsNotAssociatedToChannel(this.props.currentChannelId,this.props.searchTerm,e,51,!0).then((()=>{this.setGroupsLoadingState(!1)})))})),_(this,"handleDelete",(e=>{this.setState({values:e})})),_(this,"search",(e=>{this.props.actions.setModalSearchTerm(e)})),_(this,"renderOption",((e,t,n,a)=>{const s=t?"more-modal__row--selected":"";return m().createElement("div",{key:e.id,ref:t?this.selectedItemRef:e.id,className:"more-modal__row clickable "+s,onClick:()=>n(e),onMouseMove:()=>a?a(e):void 0},m().createElement("img",{className:"more-modal__image",src:E,alt:"group picture",width:"32",height:"32"}),m().createElement("div",{className:"more-modal__details"},m().createElement("div",{className:"more-modal__name"},e.display_name," - ",m().createElement("span",{className:"more-modal__name_sub"},m().createElement(g.FormattedMessage,{id:"numMembers",defaultMessage:"{num, number} {num, plural, one {member} other {members}}",values:{num:e.member_count}})))),m().createElement("div",{className:"more-modal__actions"},m().createElement("div",{className:"more-modal__actions--round"},m().createElement("i",{className:"icon icon-plus"}))))})),this.searchTimeoutId=0,this.state={values:[],show:!0,search:!1,saving:!1,addError:null,loadingGroups:!0},this.selectedItemRef=m().createRef()}componentDidMount(){Promise.all([this.props.actions.getTeam(this.props.teamID),this.props.actions.getAllGroupsAssociatedToTeam(this.props.teamID,!1,!0),this.props.actions.getGroupsNotAssociatedToChannel(this.props.currentChannelId,"",0,51,!0),this.props.actions.getAllGroupsAssociatedToChannel(this.props.currentChannelId,!1,!0)]).then((()=>{this.setGroupsLoadingState(!1)}))}componentDidUpdate(e){if(this.props.searchTerm!==e.searchTerm){clearTimeout(this.searchTimeoutId);const e=this.props.searchTerm;if(""===e)return;this.searchTimeoutId=window.setTimeout((async()=>{this.setGroupsLoadingState(!0),await this.props.actions.getGroupsNotAssociatedToChannel(this.props.currentChannelId,e,void 0,void 0,!0),this.setGroupsLoadingState(!1)}),b.default.SEARCH_TIMEOUT_MILLISECONDS)}}renderValue(e){return e.data.display_name}render(){const e=m().createElement("div",{id:"numGroupsRemaining"},m().createElement(g.FormattedMessage,{id:"multiselect.numGroupsRemaining",defaultMessage:"Use ↑↓ to browse, ↵ to select. You can add {num, number} more {num, plural, one {group} other {groups}}. ",values:{num:10-this.state.values.length}})),t=(0,v._u)("multiselect.add","Add"),n=(0,v._u)("multiselect.adding","Adding...");let a=null;this.state.addError&&(a=m().createElement("div",{className:"has-error col-sm-12"},m().createElement("label",{className:"control-label font-weight--normal"},this.state.addError)));let s=this.props.groups;if(this.props.excludeGroups){const e=e=>!this.props.excludeGroups.find((t=>t.id===e.id));s=s.filter(e)}if(this.props.includeGroups){const e=e=>this.props.includeGroups.find((t=>t.id===e.id));s=[...s,...this.props.includeGroups.filter(e)]}const r=s.map((e=>function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({label:e.display_name,value:e.id},e)));return m().createElement(p.Modal,{id:"addGroupsToChannelModal",dialogClassName:"a11y__modal more-modal more-direct-channels",show:this.state.show,onHide:this.handleHide,onExited:this.props.onExited},m().createElement(p.Modal.Header,{closeButton:!0},m().createElement(p.Modal.Title,{componentClass:"h1"},m().createElement(g.FormattedMessage,{id:"add_groups_to_channel.title",defaultMessage:"Add New Groups to {channelName} Channel",values:{channelName:m().createElement("strong",null,this.props.currentChannelName)}}))),m().createElement(p.Modal.Body,null,a,m().createElement(C.Z,{key:"addGroupsToChannelKey",options:r,optionRenderer:this.renderOption,intl:this.props.intl,selectedItemRef:this.selectedItemRef,values:this.state.values,valueRenderer:this.renderValue,perPage:50,handlePageChange:this.handlePageChange,handleInput:this.search,handleDelete:this.handleDelete,handleAdd:this.addValue,handleSubmit:this.handleSubmit,maxValues:10,numRemainingText:e,buttonSubmitText:t,buttonSubmitLoadingText:n,saving:this.state.saving,loading:this.state.loadingGroups,placeholderText:(0,v._u)("multiselect.addGroupsPlaceholder","Search and add groups")})))}}_(M,"propTypes",{currentChannelName:u().string.isRequired,currentChannelId:u().string.isRequired,teamID:u().string.isRequired,searchTerm:u().string.isRequired,groups:u().array.isRequired,excludeGroups:u().array,includeGroups:u().array,onExited:u().func.isRequired,skipCommit:u().bool,onAddCallback:u().func,actions:u().shape({getGroupsNotAssociatedToChannel:u().func.isRequired,setModalSearchTerm:u().func.isRequired,linkGroupSyncable:u().func.isRequired,getAllGroupsAssociatedToChannel:u().func.isRequired,getTeam:u().func.isRequired,getAllGroupsAssociatedToTeam:u().func.isRequired}).isRequired});const w=(0,g.injectIntl)(M),S=(0,a.connect)((function(e,t){const n=e.views.search.modalSearch,a=t.channel||(0,o.TB)(e)||{};let s=(0,l.$5)(e,a.id,a.team_id);if(n){const e=RegExp(n,"i");s=s.filter((t=>e.test(t.display_name)||e.test(t.name)))}return{currentChannelName:a.display_name,currentChannelId:a.id,skipCommit:t.skipCommit,onAddCallback:t.onAddCallback,excludeGroups:t.excludeGroups,searchTerm:n,groups:s,teamID:a.team_id}}),(function(e){return{actions:(0,s.bindActionCreators)({getGroupsNotAssociatedToChannel:r.$5,setModalSearchTerm:c.Gl,linkGroupSyncable:r.Bh,getAllGroupsAssociatedToChannel:r.n0,getTeam:i.VP,getAllGroupsAssociatedToTeam:r.K9},e)}}))(w)},95157:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ee});var a=n(70314),s=n(36891),r=n(73443),i=n(97042),o=n(4500),l=n(43618),c=n(19601),d=n(11298),u=n(23894),h=n(73318),m=n(40364),p=n(39183),g=n(84459),f=n(59161),C=n(23712),E=n(23615),b=n.n(E),v=(n(52077),n(83526),n(61418),n(40895),n(69217),n(14078),n(44270),n(83315),n(92189),n(60042)),y=n.n(v),_=n(84390),M=n.n(_),w=n(72060),S=n(6098),T=n(52173),N=n(25598),I=n(78892),P=n(77800),L=n(45448),R=n(39875);n(48410);const A=e=>M().createElement("svg",Object.assign({width:140,height:141,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),M().createElement("path",{opacity:.4,d:"M37.593 38.008c4.754-4.815 10.754-7.295 17.989-7.428 7.101.133 13.065 2.601 17.892 7.428 4.815 4.827 7.295 10.791 7.428 17.892-.133 7.235-2.601 13.223-7.428 17.99-4.827 4.754-10.791 7.27-17.892 7.512-7.235-.254-13.223-2.758-17.99-7.513-4.754-4.766-7.258-10.766-7.512-18 .254-7.102 2.758-13.066 7.513-17.881Z",fill:"#fff"}),M().createElement("path",{d:"M78.887 51.382c-2.151-6.992-6.225-12.225-12.226-15.69-6.001-3.465-12.57-4.376-19.701-2.743-3.9.995-7.297 2.717-10.22 5.162 3.269-3.567 7.415-6.037 12.428-7.416 7.13-1.633 13.732-.703 19.787 2.793s10.161 8.748 12.313 15.74c1.323 5.037 1.257 9.862-.21 14.47-1.454 4.614-4.066 8.49-7.84 11.611 2.833-3.087 4.783-6.713 5.844-10.894 1.05-4.187.991-8.522-.175-13.033Z",fill:"#000",fillOpacity:.4}),M().createElement("path",{d:"M86.76 53.929c-.508-7.506-3.553-14.097-9.125-19.774-6.346-6.05-13.67-9.08-21.974-9.08-8.303 0-15.616 3.03-21.961 9.08-6.08 6.315-9.126 13.591-9.126 21.855 0 8.262 3.046 15.551 9.126 21.854 5.826 5.556 12.485 8.551 19.967 8.984 7.481.445 14.383-1.611 20.728-6.146l4.75 4.727 6.08-6.05-4.75-4.727c4.69-6.302 6.78-13.218 6.285-20.723Zm-13.126 19.87c-4.823 4.726-10.781 7.228-17.876 7.468-7.228-.252-13.21-2.742-17.973-7.469-4.75-4.727-7.252-10.692-7.506-17.885.254-7.06 2.756-12.99 7.506-17.789 4.75-4.787 10.745-7.252 17.973-7.385 7.095.133 13.053 2.586 17.876 7.385 4.81 4.8 7.288 10.73 7.421 17.79-.133 7.192-2.599 13.157-7.421 17.884Z",fill:"#BABEC9"}),M().createElement("path",{d:"M106.202 114.187c-1.567.449-2.728.291-3.482-.472L78.06 86.651c-.753-.762-1.064-1.743-.945-2.954.12-1.211.874-2.567 2.262-4.093 1.507-1.393 2.847-2.192 4.044-2.385 1.196-.194 2.165.157 2.92 1.053l26.921 24.957c.753.763.873 1.901.37 3.427-.502 1.525-1.447 3.051-2.823 4.577-1.496 1.526-3.039 2.506-4.607 2.954Z",fill:"#FFBC1F"}),M().createElement("path",{d:"m108.007 98.343-10.08 10.164-12.154-13.34 8.914-9.106 13.32 12.282Z",fill:"#7A5600"}));var O=n(26341),k=n(26771),D=n(65395),x=n(4940),F=n(51928),B=n(83514),U=n(35887),H=n(21214),q=n(70174);function j(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Z extends M().PureComponent{static getDerivedStateFromProps(e,t){return{isSearch:e.isSearch,page:e.isSearch&&!t.isSearch?0:t.page}}constructor(e){super(e),j(this,"onKeyDown",(e=>{const t=e.target,n=(0,U.p)(e,C.default.KeyCodes.ENTER);n&&(e.shiftKey||e.ctrlKey||e.altKey)||n&&null!=t&&t.classList.contains("more-modal__row")&&t.click()})),j(this,"handleJoin",((e,t)=>{t.stopPropagation(),this.setState({joiningChannel:e.id}),this.props.handleJoin(e,(()=>{this.setState({joiningChannel:""})})),this.isMemberOfChannel(e.id)&&this.props.closeModal(C.r8.MORE_CHANNELS)})),j(this,"createChannelRow",(e=>{var t;const n="".concat(e.display_name,", ").concat(e.purpose).toLowerCase();let a;a=(0,B.t2)(e)?M().createElement(L.ArchiveOutlineIcon,{size:18}):(0,R.pi)(e)?M().createElement(L.LockOutlineIcon,{size:18}):M().createElement(L.GlobeIcon,{size:18});let s=0;null!==(t=this.props.channelsMemberCount)&&void 0!==t&&t[e.id]&&(s=this.props.channelsMemberCount[e.id]);const r=this.isMemberOfChannel(e.id)?M().createElement("div",{id:"membershipIndicatorContainer","aria-label":(0,q._u)("more_channels.membership_indicator","Membership Indicator: Joined")},M().createElement(L.CheckIcon,{size:14}),M().createElement(w.FormattedMessage,{id:"more_channels.joined",defaultMessage:"Joined"})):null,i=(0,q.Us)(V.channelPurpose.id,V.channelPurpose.defaultMessage,{memberCount:s,channelPurpose:e.purpose||""}),o=M().createElement("div",{id:"channelPurposeContainer","aria-label":i},r,r?M().createElement("span",{className:"dot"}):null,M().createElement(L.AccountOutlineIcon,{size:14}),M().createElement("span",{"data-testid":"channelMemberCount-".concat(e.name)},s),e.purpose.length>0?M().createElement("span",{className:"dot"}):null,M().createElement("span",{className:"more-modal__description"},e.purpose)),l=y()("btn btn-sm",{"btn-secondary outlineButton":this.isMemberOfChannel(e.id),"btn-primary primaryButton":!this.isMemberOfChannel(e.id)}),c=M().createElement("button",{id:"joinViewChannelButton",onClick:t=>this.handleJoin(e,t),className:l,disabled:Boolean(this.state.joiningChannel),tabIndex:-1,"aria-label":this.isMemberOfChannel(e.id)?(0,q._u)("more_channels.view","View"):(0,q._u)("joinChannel.JoinButton","Join")},M().createElement(F.Z,{loading:this.state.joiningChannel===e.id,text:(0,q._u)("joinChannel.joiningButton","Joining...")},M().createElement(w.FormattedMessage,{id:this.isMemberOfChannel(e.id)?"more_channels.view":"joinChannel.JoinButton",defaultMessage:this.isMemberOfChannel(e.id)?"View":"Join"}))),d=e.shared?M().createElement(D.Z,{className:"shared-channel-icon",channelType:e.type,withTooltip:!0}):null;return M().createElement("div",{className:"more-modal__row",key:e.id,id:"ChannelRow-".concat(e.name),"data-testid":"ChannelRow-".concat(e.name),"aria-label":n,onClick:t=>this.handleJoin(e,t),tabIndex:0},M().createElement("div",{className:"more-modal__details"},M().createElement("div",{className:"style--none more-modal__name"},a,M().createElement("span",{id:"channelName"},e.display_name),d),o),M().createElement("div",{className:"more-modal__actions"},c))})),j(this,"nextPage",(e=>{var t;e.preventDefault(),this.setState({page:this.state.page+1,nextDisabled:!0}),this.nextTimeoutId=setTimeout((()=>this.setState({nextDisabled:!1})),500),this.props.nextPage(this.state.page+1),null===(t=this.channelListScroll.current)||void 0===t||t.scrollTo({top:0})})),j(this,"previousPage",(e=>{var t;e.preventDefault(),this.setState({page:this.state.page-1}),null===(t=this.channelListScroll.current)||void 0===t||t.scrollTo({top:0})})),j(this,"doSearch",(()=>{this.props.search(this.state.channelSearchValue),""===this.state.channelSearchValue&&this.setState({page:0})})),j(this,"handleChange",(e=>{null!=e&&e.currentTarget&&this.setState({channelSearchValue:null==e?void 0:e.currentTarget.value},(()=>this.doSearch()))})),j(this,"handleClear",(()=>{this.setState({channelSearchValue:""},(()=>this.doSearch()))})),j(this,"handleChecked",(()=>{this.props.rememberHideJoinedChannelsChecked?this.props.hideJoinedChannelsPreference(!1):this.props.hideJoinedChannelsPreference(!0)})),j(this,"getEmptyStateMessage",(()=>{if(this.state.channelSearchValue.length>0)return M().createElement(w.FormattedMessage,{id:"more_channels.noMore",tagName:"strong",defaultMessage:"No results for {text}",values:{text:this.state.channelSearchValue}});switch(this.props.filter){case J.Archived:return M().createElement(w.FormattedMessage,{id:"more_channels.noArchived",tagName:"strong",defaultMessage:"No archived channels"});case J.Private:return M().createElement(w.FormattedMessage,{id:"more_channels.noPrivate",tagName:"strong",defaultMessage:"No private channels"});case J.Public:return M().createElement(w.FormattedMessage,{id:"more_channels.noPublic",tagName:"strong",defaultMessage:"No public channels"});default:return M().createElement(w.FormattedMessage,{id:"more_channels.noChannels",tagName:"strong",defaultMessage:"No channels"})}})),j(this,"getFilterLabel",(()=>{switch(this.props.filter){case J.Archived:return M().createElement(w.FormattedMessage,{id:"more_channels.show_archived_channels",defaultMessage:"Channel Type: Archived"});case J.Public:return M().createElement(w.FormattedMessage,{id:"more_channels.show_public_channels",defaultMessage:"Channel Type: Public"});case J.Private:return M().createElement(w.FormattedMessage,{id:"more_channels.show_private_channels",defaultMessage:"Channel Type: Private"});default:return M().createElement(w.FormattedMessage,{id:"more_channels.show_all_channels",defaultMessage:"Channel Type: All"})}})),this.nextTimeoutId=0,this.state={joiningChannel:"",page:0,nextDisabled:!1,channelSearchValue:""},this.filter=M().createRef(),this.channelListScroll=M().createRef()}componentDidMount(){!H.tq()&&this.filter.current&&this.filter.current.focus(),document.addEventListener("keydown",this.onKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.onKeyDown)}isMemberOfChannel(e){return this.props.myChannelMemberships[e]}render(){const e=this.props.channels;let t,n,a;if(this.props.loading&&0===e.length)t=M().createElement(N.Z,null);else if(0===e.length)t=M().createElement("div",{className:"no-channel-message","aria-label":this.state.channelSearchValue.length>0?(0,q.Us)(V.noMore.id,V.noMore.defaultMessage,{text:this.state.channelSearchValue}):(0,q._u)("widgets.channels_input.empty","No channels found")},M().createElement(A,null),M().createElement("h3",{className:"primary-message"},this.getEmptyStateMessage()),this.props.noResultsText);else{const e=this.state.page*this.props.channelsPerPage,s=e+this.props.channelsPerPage,r=this.props.channels.slice(e,s);t=r.map(this.createChannelRow),r.length>=this.props.channelsPerPage&&s<this.props.channels.length&&(n=M().createElement("button",{className:"btn btn-sm btn-tertiary filter-control filter-control__next",onClick:this.nextPage,disabled:this.state.nextDisabled,"aria-label":(0,q._u)("more_channels.next","Next")},M().createElement(w.FormattedMessage,{id:"more_channels.next",defaultMessage:"Next"}))),this.state.page>0&&(a=M().createElement("button",{className:"btn btn-sm btn-tertiary filter-control filter-control__prev",onClick:this.previousPage,"aria-label":(0,q._u)("more_channels.prev","Previous")},M().createElement(w.FormattedMessage,{id:"more_channels.prev",defaultMessage:"Previous"})))}const s=M().createElement("div",{className:"filter-row filter-row--full"},M().createElement("span",{id:"searchIcon","aria-hidden":"true"},M().createElement("i",{className:"icon icon-magnify"})),M().createElement(k.Z,{id:"searchChannelsTextbox",ref:this.filter,className:"form-control filter-textbox",placeholder:this.props.intl.formatMessage({id:"filtered_channels_list.search",defaultMessage:"Search channels"}),onInput:this.handleChange,clearable:!0,onClear:this.handleClear,value:this.state.channelSearchValue,"aria-label":(0,q._u)("filtered_channels_list.search","Search Channels")})),r=M().createElement(L.CheckIcon,{size:18,color:"var(--button-bg)"}),i=[M().createElement(O.ck,{key:"channelsMoreDropdownAll",id:"channelsMoreDropdownAll",onClick:()=>this.props.changeFilter(J.All),leadingElement:M().createElement(L.GlobeCheckedIcon,{size:16}),labels:M().createElement(w.FormattedMessage,{id:"suggestion.all",defaultMessage:"All channel types"}),trailingElements:this.props.filter===J.All?r:null,"aria-label":(0,q._u)("suggestion.all","All channel types")}),M().createElement(O.ck,{key:"channelsMoreDropdownPublic",id:"channelsMoreDropdownPublic",onClick:()=>this.props.changeFilter(J.Public),leadingElement:M().createElement(L.GlobeIcon,{size:16}),labels:M().createElement(w.FormattedMessage,{id:"suggestion.public",defaultMessage:"Public channels"}),trailingElements:this.props.filter===J.Public?r:null,"aria-label":(0,q._u)("suggestion.public","Public channels")}),M().createElement(O.ck,{key:"channelsMoreDropdownPrivate",id:"channelsMoreDropdownPrivate",onClick:()=>this.props.changeFilter(J.Private),leadingElement:M().createElement(L.LockOutlineIcon,{size:16}),labels:M().createElement(w.FormattedMessage,{id:"suggestion.private",defaultMessage:"Private channels"}),trailingElements:this.props.filter===J.Private?r:null,"aria-label":(0,q._u)("suggestion.private","Private channels")})];this.props.canShowArchivedChannels&&i.push(M().createElement(O.Z0,{key:"channelsMoreDropdownSeparator"}),M().createElement(O.ck,{key:"channelsMoreDropdownArchived",id:"channelsMoreDropdownArchived",onClick:()=>this.props.changeFilter(J.Archived),leadingElement:M().createElement(L.ArchiveOutlineIcon,{size:16}),labels:M().createElement(w.FormattedMessage,{id:"suggestion.archive",defaultMessage:"Archived channels"}),trailingElements:this.props.filter===J.Archived?r:null,"aria-label":(0,q._u)("suggestion.archive","Archived channels")}));const o=M().createElement(M().Fragment,null,this.getFilterLabel(),M().createElement(L.ChevronDownIcon,{color:"rgba(var(--center-channel-color-rgb), 0.64)",size:16})),l=M().createElement(O.W2,{menuButton:{id:"menuWrapper",children:o},menu:{id:"browseChannelsDropdown","aria-label":(0,q._u)("more_channels.title","Browse channels")}},i.map((e=>e))),c=y()("get-app__checkbox",{checked:this.props.rememberHideJoinedChannelsChecked}),d=M().createElement("div",{id:"hideJoinedPreferenceCheckbox",onClick:this.handleChecked},M().createElement("button",{className:c,"aria-label":this.props.rememberHideJoinedChannelsChecked?(0,q._u)("more_channels.hide_joined_checked","Hide joined channels checkbox, checked"):(0,q._u)("more_channels.hide_joined_not_checked","Hide joined channels checkbox, not checked")},this.props.rememberHideJoinedChannelsChecked?M().createElement(x.Z,null):null),M().createElement(w.FormattedMessage,{id:"more_channels.hide_joined",defaultMessage:"Hide Joined"}));let u;u=0===e.length?(0,q._u)("more_channels.count_zero","0 Results"):1===e.length?(0,q._u)("more_channels.count_one","1 Result"):e.length>1?(0,q.Us)(V.channelCount.id,V.channelCount.defaultMessage,{count:e.length}):(0,q._u)("more_channels.count_zero","0 Results");const h=M().createElement("div",{className:"more-modal__dropdown"},M().createElement("span",{id:"channelCountLabel"},u),M().createElement("div",{id:"modalPreferenceContainer"},l,d));return M().createElement("div",{className:"filtered-user-list"},s,h,M().createElement("div",{role:"search",className:"more-modal__list",tabIndex:-1},M().createElement("div",{id:"moreChannelsList",tabIndex:-1,ref:this.channelListScroll},t)),M().createElement("div",{className:"filter-controls"},a,n))}}j(Z,"propTypes",{channels:b().array.isRequired,channelsPerPage:b().number.isRequired,nextPage:b().func.isRequired,isSearch:b().bool.isRequired,search:b().func.isRequired,handleJoin:b().func.isRequired,noResultsText:b().element.isRequired,changeFilter:b().func.isRequired,closeModal:b().func.isRequired,hideJoinedChannelsPreference:b().func.isRequired,rememberHideJoinedChannelsChecked:b().bool.isRequired,canShowArchivedChannels:b().bool,loading:b().bool,channelsMemberCount:b().objectOf(b().number)});const V=(0,w.defineMessages)({channelCount:{id:"more_channels.count",defaultMessage:"{count} Results"},channelPurpose:{id:"more_channels.channel_purpose",defaultMessage:"Channel Information: Membership Indicator: Joined, Member count {memberCount} , Purpose: {channelPurpose}"},noMore:{id:"more_channels.noMore",defaultMessage:"No results for {text}"}}),G=(0,w.injectIntl)(Z);var W=n(8243),z=n(41894);function K(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let J=function(e){return e.All="All",e.Public="Public",e.Private="Private",e.Archived="Archived",e}({});class Y extends M().PureComponent{constructor(e){super(e),K(this,"activeChannels",[]),K(this,"loadComplete",(()=>{this.setState({loading:!1})})),K(this,"handleNewChannel",(()=>{this.handleExit(),this.closeEditRHS(),this.props.actions.openModal({modalId:C.r8.NEW_CHANNEL_MODAL,dialogType:I.default})})),K(this,"handleExit",(()=>{this.props.actions.closeModal(C.r8.MORE_CHANNELS)})),K(this,"closeEditRHS",(()=>{this.props.rhsOpen&&this.props.rhsState===C.Hp.EDIT_HISTORY&&this.props.actions.closeRightHandSide()})),K(this,"onChange",(e=>{this.state.search&&!e||this.setState({searchedChannels:[],serverError:null})})),K(this,"nextPage",(e=>{this.props.actions.getChannels(this.props.teamId,e+1,50).then((e=>{e.data&&e.data.length>0&&this.props.actions.getChannelsMemberCount(e.data.map((e=>e.id)))}))})),K(this,"handleJoin",(async(e,t)=>{var n;const{actions:a,currentUserId:s,teamId:r,teamName:i}=this.props;let o;this.isMemberOfChannel(e.id)||(o=await a.joinChannel(s,r,e.id)),null!==(n=o)&&void 0!==n&&n.error?this.setState({serverError:o.error.message}):(this.props.actions.getChannelsMemberCount([e.id]),(0,W.s)().push((0,z.d0)(i,e.name)),this.closeEditRHS()),t&&t()})),K(this,"search",(e=>{if(clearTimeout(this.searchTimeoutId),""===e)return this.onChange(!0),this.setState({search:!1,searchedChannels:[],searching:!1,searchTerm:e}),void(this.searchTimeoutId=0);this.setState({search:!0,searching:!0,searchTerm:e});const t=window.setTimeout((async()=>{try{const{data:n}=await this.props.actions.searchAllChannels(e,{team_ids:[this.props.teamId],nonAdminSearch:!0,include_deleted:!0});if(t!==this.searchTimeoutId)return;if(n){const e=n.map((e=>e.id));e.length>0&&this.props.actions.getChannelsMemberCount(e),this.setSearchResults(n.filter((e=>e.team_id===this.props.teamId)))}else this.setState({searchedChannels:[],searching:!1})}catch(e){this.setState({searchedChannels:[],searching:!1})}}),100);this.searchTimeoutId=t})),K(this,"setSearchResults",(e=>{let t=e.filter((e=>e.type!==C.default.PRIVATE_CHANNEL||this.isMemberOfChannel(e.id)));this.state.filter===J.Private&&(t=e.filter((e=>e.type===C.default.PRIVATE_CHANNEL&&this.isMemberOfChannel(e.id)))),this.state.filter===J.Public&&(t=e.filter((e=>e.type===C.default.OPEN_CHANNEL&&0===e.delete_at))),this.state.filter===J.Archived&&(t=e.filter((e=>0!==e.delete_at))),this.props.shouldHideJoinedChannels&&(t=this.getChannelsWithoutJoined(t)),this.setState({searchedChannels:t,searching:!1})})),K(this,"changeFilter",(e=>{this.search(this.state.searchTerm),this.setState({filter:e})})),K(this,"handleShowJoinedChannelsPreference",(e=>{this.search(this.state.searchTerm),this.props.actions.setGlobalItem(C.hC.HIDE_JOINED_CHANNELS,e.toString())})),K(this,"getChannelsWithoutJoined",(e=>e.filter((e=>!this.isMemberOfChannel(e.id))))),K(this,"getActiveChannels",(()=>{const{channels:e,archivedChannels:t,shouldHideJoinedChannels:n,privateChannels:a}=this.props,{search:s,searchedChannels:r,filter:i}=this.state,o=e.concat(a).sort(((e,t)=>e.display_name.localeCompare(t.display_name))),l=this.getChannelsWithoutJoined(o),c=this.getChannelsWithoutJoined(e),d=this.getChannelsWithoutJoined(t),u=this.getChannelsWithoutJoined(a),h={[J.All]:n?l:o,[J.Archived]:n?d:t,[J.Private]:n?u:a,[J.Public]:n?c:e};return s?r:h[i]||h[J.All]})),this.searchTimeoutId=0,this.state={loading:!0,filter:J.All,search:!1,searchedChannels:[],serverError:null,searching:!1,searchTerm:""}}componentDidMount(){if(!this.props.teamId)return void this.loadComplete();const e=[this.props.actions.getChannels(this.props.teamId,0,100)];this.props.canShowArchivedChannels&&e.push(this.props.actions.getArchivedChannels(this.props.teamId,0,100)),Promise.all(e).then((e=>{const t=e.flatMap((e=>e.data?e.data.map((e=>e.id)):[]));this.props.privateChannels.forEach((e=>t.push(e.id))),t.length>0&&this.props.actions.getChannelsMemberCount(t)})),this.loadComplete()}isMemberOfChannel(e){return this.props.myChannelMemberships[e]}render(){const{teamId:e,channelsRequestStarted:t,shouldHideJoinedChannels:n}=this.props,{search:a,serverError:s,searching:r}=this.state;let i;this.activeChannels=this.getActiveChannels(),s&&(i=M().createElement("div",{className:"form-group has-error"},M().createElement("label",{className:"control-label"},s)));const o=(t,n)=>{const a=y()("btn",t);return M().createElement(P.Z,{teamId:e,permissions:[T.Z.CREATE_PUBLIC_CHANNEL]},M().createElement("button",{type:"button",id:"createNewChannelButton",className:a,onClick:this.handleNewChannel,"aria-label":(0,q._u)("more_channels.create","Create New Channel")},n,M().createElement(w.FormattedMessage,{id:"more_channels.create",defaultMessage:"Create New Channel"})))},l=M().createElement(M().Fragment,null,M().createElement("p",{className:"secondary-message"},M().createElement(w.FormattedMessage,{id:"more_channels.searchError",defaultMessage:"Try searching different keywords, checking for typos or adjusting the filters."})),o("btn-primary",M().createElement("i",{className:"icon-plus"}))),c=this.state.loading?M().createElement(N.Z,null):M().createElement(M().Fragment,null,M().createElement(G,{channels:this.activeChannels,channelsPerPage:50,nextPage:this.nextPage,isSearch:a,search:this.search,handleJoin:this.handleJoin,noResultsText:l,loading:a?r:t,changeFilter:this.changeFilter,filter:this.state.filter,canShowArchivedChannels:this.props.canShowArchivedChannels,myChannelMemberships:this.props.myChannelMemberships,closeModal:this.props.actions.closeModal,hideJoinedChannelsPreference:this.handleShowJoinedChannelsPreference,rememberHideJoinedChannelsChecked:n,channelsMemberCount:this.props.channelsMemberCount}),i),d=M().createElement(w.FormattedMessage,{id:"more_channels.title",defaultMessage:"Browse Channels"});return M().createElement(S.$E,{onExited:this.handleExit,id:"browseChannelsModal","aria-labelledby":"browseChannelsModalLabel",compassDesign:!0,modalHeaderText:d,headerButton:o("btn-secondary btn-sm"),autoCloseOnConfirmButton:!1,"aria-modal":!0,enforceFocus:!1,bodyPadding:!1},c)}}K(Y,"propTypes",{channels:b().array.isRequired,archivedChannels:b().array.isRequired,privateChannels:b().array.isRequired,currentUserId:b().string.isRequired,teamId:b().string.isRequired,teamName:b().string,channelsRequestStarted:b().bool,canShowArchivedChannels:b().bool,shouldHideJoinedChannels:b().bool.isRequired,rhsOpen:b().bool,channelsMemberCount:b().objectOf(b().number),actions:b().shape({getChannels:b().func.isRequired,getArchivedChannels:b().func.isRequired,joinChannel:b().func.isRequired,searchAllChannels:b().func.isRequired,openModal:b().func.isRequired,closeModal:b().func.isRequired,setGlobalItem:b().func.isRequired,closeRightHandSide:b().func.isRequired,getChannelsMemberCount:b().func.isRequired}).isRequired});const Q=(0,o.P1)("getChannelsWithoutArchived",l.zE,(e=>e&&e.filter((e=>0===e.delete_at&&e.type!==C.default.PRIVATE_CHANNEL)))),X=(0,o.P1)("getArchivedOtherChannels",l.zE,(e=>e&&e.filter((e=>0!==e.delete_at)))),$=(0,o.P1)("getPrivateChannelsSelector",l.zE,(e=>e&&e.filter((e=>e.type===C.default.PRIVATE_CHANNEL)))),ee=(0,a.connect)((function(e){const t=(0,d.kA)(e),n=(0,f.bd)(C.hC.HIDE_JOINED_CHANNELS,"false");return{channels:Q(e)||[],archivedChannels:X(e)||[],privateChannels:$(e)||[],currentUserId:(0,u.rc)(e),teamId:(0,d.ev)(e),teamName:null==t?void 0:t.name,channelsRequestStarted:e.requests.channels.getChannels.status===i.eE.STARTED,canShowArchivedChannels:"true"===(0,c.iE)(e).ExperimentalViewArchivedChannels,myChannelMemberships:(0,l.h4)(e)||{},shouldHideJoinedChannels:"true"===n(e),rhsState:(0,g.kV)(e),rhsOpen:(0,g.aC)(e),channelsMemberCount:(0,l.bk)(e)}}),(function(e){return{actions:(0,s.bindActionCreators)({getChannels:r.Ky,getArchivedChannels:r.ey,joinChannel:r.JJ,searchAllChannels:r.Av,openModal:m.h,closeModal:m.M,setGlobalItem:h.Bc,closeRightHandSide:p.Lg,getChannelsMemberCount:r.bk},e)}}))(Y)},4411:(e,t,n)=>{n.d(t,{C9:()=>w,IM:()=>g,J0:()=>T,JC:()=>N,Kj:()=>_,uU:()=>S}),n(69217),n(73902);var a=n(84390),s=n(70314),r=n(97042),i=n(78338),o=n(43618),l=n(19601),c=n(84073),d=n(53134),u=n(59898),h=n(23712),m=n(72075),p=n(99566);const g=50,{OPEN_CHANNEL:f,PRIVATE_CHANNEL:C,GM_CHANNEL:E,DM_CHANNEL:b}=h.default,v=(e,t)=>"".concat(e).concat(t),y={[v("add",f)]:r.Pl.ADD_BOOKMARK_PUBLIC_CHANNEL,[v("edit",f)]:r.Pl.EDIT_BOOKMARK_PUBLIC_CHANNEL,[v("delete",f)]:r.Pl.DELETE_BOOKMARK_PUBLIC_CHANNEL,[v("order",f)]:r.Pl.ORDER_BOOKMARK_PUBLIC_CHANNEL,[v("add",C)]:r.Pl.ADD_BOOKMARK_PRIVATE_CHANNEL,[v("edit",C)]:r.Pl.EDIT_BOOKMARK_PRIVATE_CHANNEL,[v("delete",C)]:r.Pl.DELETE_BOOKMARK_PRIVATE_CHANNEL,[v("order",C)]:r.Pl.ORDER_BOOKMARK_PRIVATE_CHANNEL},_=(e,t)=>(0,s.useSelector)((n=>M(n,e,t))),M=(e,t,n)=>{const a=(0,o.mr)(e,t);if(!a)return!1;const{type:s}=a;if("threads"===s)return!1;if(s===E||s===b){const n=(0,o.Or)(e,t);return(null==n?void 0:n.channel_id)===t}const r=y[v(n,s)];return a&&r&&(0,c.Ai)(e,a.team_id,t,r)},w=()=>(0,s.useSelector)((e=>(0,p.SI)((0,l.iE)(e)))),S=()=>(0,s.useSelector)((e=>(0,p.os)((0,l.iE)(e)))),T=e=>{if("true"!==(0,l.uz)(e,"ChannelBookmarks"))return!1;const t=(0,l.lJ)(e);return"true"===(null==t?void 0:t.IsLicensed)},N=e=>{const t=(0,s.useDispatch)(),n=(0,s.useSelector)((t=>(0,i.D)(t,e))),r=(0,a.useMemo)((()=>Object.keys(n).sort(((e,t)=>n[e].sort_order-n[t].sort_order))),[n]);return(0,a.useEffect)((()=>{e&&t((0,d.XM)(e))}),[e]),(0,a.useEffect)((()=>{const e=Object.values(n).reduce(((e,t)=>{let{emoji:n}=t;return n&&e.push((0,m.sW)(n)),e}),[]);e.length&&t((0,u.oY)(e))}),[n]),{bookmarks:n,order:r}}},76452:(e,t,n)=>{n.r(t),n.d(t,{default:()=>b});var a=n(70314),s=n(36891),r=n(54892),i=n(11298),o=n(46935),l=n(23615),c=n.n(l),d=(n(92189),n(84390)),u=n.n(d),h=n(72060),m=n(6098),p=n(28176),g=n(26771),f=n(70174);function C(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class E extends u().PureComponent{constructor(e){super(e),C(this,"timeoutId",null),C(this,"isProcessing",!1),C(this,"handleClear",(()=>{this.setState({categoryName:""})})),C(this,"handleChange",(e=>{this.setState({categoryName:e.target.value})})),C(this,"handleCancel",(()=>{this.handleClear()})),C(this,"handleConfirm",(()=>{this.isProcessing||(this.isProcessing=!0,this.timeoutId=setTimeout((()=>{this.isProcessing=!1}),1e3),this.props.categoryId?this.props.actions.renameCategory(this.props.categoryId,this.state.categoryName):(this.props.actions.createCategory(this.props.currentTeamId,this.state.categoryName,this.props.channelIdsToAdd),(0,p.L9)("ui","ui_sidebar_created_category")))})),C(this,"isConfirmDisabled",(()=>!this.state.categoryName||Boolean(this.props.initialCategoryName)&&this.props.initialCategoryName===this.state.categoryName||this.state.categoryName.length>22)),C(this,"getText",(()=>{let e,t,n;return this.props.categoryId?(e=u().createElement(h.FormattedMessage,{id:"rename_category_modal.renameCategory",defaultMessage:"Rename Category"}),t=u().createElement(h.FormattedMessage,{id:"rename_category_modal.rename",defaultMessage:"Rename"})):(e=u().createElement(h.FormattedMessage,{id:"create_category_modal.createCategory",defaultMessage:"Create New Category"}),t=u().createElement(h.FormattedMessage,{id:"create_category_modal.create",defaultMessage:"Create"}),n=u().createElement(h.FormattedMessage,{id:"edit_category_modal.helpText",defaultMessage:"Drag channels into this category to organize your sidebar."})),{modalHeaderText:e,editButtonText:t,helpText:n}})),this.state={categoryName:e.initialCategoryName||""}}componentWillUnmount(){this.timeoutId&&clearTimeout(this.timeoutId)}render(){const{modalHeaderText:e,editButtonText:t,helpText:n}=this.getText();return u().createElement(m.$E,{id:"editCategoryModal",ariaLabel:(0,f._u)("rename_category_modal.renameCategory","Rename Category"),modalHeaderText:e,confirmButtonText:t,compassDesign:!0,onExited:this.props.onExited,handleEnterKeyPress:this.handleConfirm,handleConfirm:this.handleConfirm,handleCancel:this.handleCancel,isConfirmDisabled:this.isConfirmDisabled()},u().createElement(g.Z,{inputComponent:g.x,autoFocus:!0,className:"form-control filter-textbox",type:"text",value:this.state.categoryName,placeholder:(0,f._u)("edit_category_modal.placeholder","Name your category"),clearable:!0,onClear:this.handleClear,onChange:this.handleChange,maxLength:22}),Boolean(n)&&u().createElement("span",{className:"edit-category__helpText"},n))}}C(E,"propTypes",{onExited:c().func.isRequired,currentTeamId:c().string.isRequired,categoryId:c().string,initialCategoryName:c().string,channelIdsToAdd:c().arrayOf(c().string),actions:c().shape({createCategory:c().func.isRequired,renameCategory:c().func.isRequired}).isRequired});const b=(0,a.connect)((function(e){return{currentTeamId:(0,i.ev)(e)}}),(function(e){return{actions:(0,s.bindActionCreators)({createCategory:o.k4,renameCategory:r.t6},e)}}))(E)},85690:(e,t,n)=>{n.d(t,{B:()=>u});var a=n(23615),s=n.n(a),r=n(60042),i=n.n(r),o=n(84390),l=n.n(o),c=n(19798),d=n(21214);const u=e=>{let{className:t,variant:n}=e;const a=(0,d.V5)()?"⌘":"Ctrl",s=n||c.S.Contrast;return l().createElement("span",{className:i()("search-shortcut",t)},l().createElement(c.j,{variant:s},a),!(0,d.P)()&&l().createElement(c.j,{variant:s},"Shift"),l().createElement(c.j,{variant:s},"F"))};u.propTypes={className:s().string}},48548:(e,t,n)=>{n.r(t),n.d(t,{default:()=>I}),n(14078),n(61418),n(95623),n(61514),n(92189);var a=n(84390),s=n.n(a),r=n(45448),i=n(23615),o=n.n(i),l=(n(40895),n(60042)),c=n.n(l);const d=e=>{const{min:t,max:n,priceRangeHandler:r}=e,[i,o]=(0,a.useState)(t),[l,d]=(0,a.useState)(n),u=(0,a.useRef)(null),h=(0,a.useRef)(null),m=(0,a.useRef)(null),p=(0,a.useCallback)((e=>Math.round((e-t)/(n-t)*100)),[t,n]);return(0,a.useEffect)((()=>{if(h.current){const e=p(i),t=p(Number(h.current.value));m.current&&(m.current.style.left="".concat(e,"%"),m.current.style.width="".concat(t-e,"%"))}}),[i,p]),(0,a.useEffect)((()=>{if(u.current){const e=p(Number(u.current.value)),t=p(l);m.current&&(m.current.style.width="".concat(t-e,"%"))}}),[l,p]),(0,a.useEffect)((()=>{r({min:i,max:l})}),[i,l]),s().createElement("div",{className:"range_slider_container"},s().createElement("div",{className:"header_wrapper"},s().createElement("div",{className:"header_label"},"Label"),s().createElement("div",{className:"header_price"},"$".concat(i," - ").concat(l))),s().createElement("div",{className:"search_container"},s().createElement("input",{type:"range",min:t,max:n,value:i,ref:u,onChange:e=>{const t=Math.min(Number(e.target.value),l-1);o(t),e.target.value=t.toString()},className:c()("thumb thumb--zindex-3",{"thumb--zindex-5":i>n-100})}),s().createElement("input",{type:"range",min:t,max:n,value:l,ref:h,onChange:e=>{const t=Math.max(Number(e.target.value),i+1);d(t),e.target.value=t.toString()},className:"thumb thumb--zindex-4"}),s().createElement("div",{className:"slider"},s().createElement("div",{className:"slider__track"}),s().createElement("div",{ref:m,className:"slider__range"}))))};d.propTypes={min:o().number.isRequired,max:o().number.isRequired,priceRangeHandler:o().func.isRequired};const u=d,h=e=>{const{label:t,description:n,onSelectedChange:a,value:r}=e;return s().createElement("div",{className:"icon_label_container"},s().createElement("label",{className:"checkbox style-c"},s().createElement("input",{type:"checkbox",onChange:e=>{a(r,e.target.checked)}}),s().createElement("div",{className:"checkbox__checkmark"}),s().createElement("div",null,s().createElement("div",{className:"checkbox__body"},t),s().createElement("div",{className:"checkbox_description"},n))))},m=e=>{const{value:t,handleKeywordRemove:n,updateKeyword:i,showUpdateKeyword:o,setShowUpdateKeyword:l}=e,[c,d]=(0,a.useState)(t);return s().createElement(s().Fragment,null,o===t?s().createElement("input",{className:"add_keyword_input",placeholder:"update keyword",value:c,onFocus:()=>{l(t)},onBlur:()=>{l(""),i(c)},onKeyPress:e=>{"Enter"===e.key&&(l(""),i(c))},onChange:e=>{d(e.target.value)}}):s().createElement("div",{className:"keyword_pill_container"},s().createElement("div",{onClick:()=>l(t),className:"keyword_pill_label"},t),s().createElement("div",{className:"keyword_pill_close"},s().createElement("span",{className:"keyword_pill_close_icon",onClick:()=>{n(t)}},s().createElement(r.CloseIcon,{size:16})))))},p=e=>{const{categories:t,colors:n,keywords:a,sizes:i,handleFilterChange:o,priceRangeHandler:l,handleKeywordRemove:c,handleKeywordAdd:d,handleKeywordUpdate:p,priceRange:g}=e,[f,C]=s().useState(!1),[E,b]=s().useState("");return s().createElement("div",{className:"filter_menu_container"},s().createElement("div",{className:"label_check_container"},s().createElement("div",{className:"filter_label"},"Keywords"," "),s().createElement("div",{className:"filter_keyword_wrapper"},a.map(((e,t)=>s().createElement(m,{key:e,value:e,showUpdateKeyword:E,setShowUpdateKeyword:b,handleKeywordRemove:c,updateKeyword:e=>{p({keyword:e,index:t})}}))),f?s().createElement("input",{className:"add_keyword_input",placeholder:"add keyword",onKeyPress:e=>{if("Enter"===e.key){const t=e.currentTarget.value;d(t),e.currentTarget.value=""}},onFocus:()=>{C(!0)},onBlur:()=>{C(!1)}}):s().createElement("div",{className:"add_keyword_icon",onClick:()=>{C(!0)}},s().createElement(r.PlusBoxIcon,{title:"add keyword",size:24})))),s().createElement("div",{className:"label_check_container"},s().createElement("div",{className:"label_check_container"},t.map((e=>s().createElement("div",{key:e.label},s().createElement(h,{value:e.value,label:e.label,description:e.description,onSelectedChange:(e,t)=>{o({filterType:"categories",value:e,isChecked:t})}})))))),s().createElement(u,{min:g.min,max:g.max,priceRangeHandler:l}),s().createElement("div",{className:"label_check_container"},s().createElement("div",{className:"filter_label"},"Color"),s().createElement("div",{className:"label_check_container"},n.map((e=>s().createElement(h,{key:e.label,value:e.value,label:e.label,onSelectedChange:(e,t)=>{o({filterType:"color",value:e,isChecked:t})}}))))),s().createElement("div",{className:"label_check_container"},s().createElement("div",{className:"filter_label"},"Size"),s().createElement("div",{className:"label_check_container"},i.map((e=>s().createElement(h,{key:e.label,value:e.value,label:e.label,onSelectedChange:(e,t)=>{o({filterType:"size",value:e,isChecked:t})}}))))))},g=e=>{const{url:t,description:n,price:a}=e;return s().createElement("div",{className:"product_info_card_container"},s().createElement("div",{className:"shop_card_image_container"},s().createElement("img",{src:t,alt:"shop_card_image"})),s().createElement("div",{className:"post_card_price_description"},n),s().createElement("div",{className:"post_card_price_label"},"$".concat(a)))};var f=n(35899);const C=e=>{const{label:t,selected:n,onClickHandler:a,value:i}=e;return s().createElement("div",{className:"icon_button_wrapper",style:{backgroundColor:n===i?"#2C2C2C":"#F5F5F5"},onClick:()=>a(i||"new")},n===i&&s().createElement(r.CheckIcon,{size:18,color:"white"}),s().createElement("span",{className:"icon_button_label",style:{color:n===i?"#FFFFFF":"#757575"}},t))},E=e=>{const{buttons:t,handleSearchTermChange:n,handleSortByChange:r}=e,[i,o]=(0,a.useState)(t[0].value),l=e=>{o(e),r(e)};return s().createElement("div",{className:"search_bar_container"},s().createElement("div",{className:"search_input_container"},s().createElement("input",{className:"search_input_style",type:"search",placeholder:"Search",onChange:e=>n(e.target.value)}),s().createElement(f.Z,null)),s().createElement("div",{className:"sort_by_container"},t.map((e=>s().createElement(C,{key:e.icon,label:e.label,selected:i,value:e.value,onClickHandler:l})))))};function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){var a,s,r;a=e,s=t,r=n[t],(s=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(s))in a?Object.defineProperty(a,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[s]=r})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const y=[{url:"https://via.placeholder.com/250",description:"Product 1",price:100},{url:"https://via.placeholder.com/250",description:"Product 2",price:200},{url:"https://via.placeholder.com/250",description:"Product 3",price:300},{url:"https://via.placeholder.com/250",description:"Product 4",price:400},{url:"https://via.placeholder.com/250",description:"Product 5",price:500},{url:"https://via.placeholder.com/250",description:"Product 6",price:600},{url:"https://via.placeholder.com/250",description:"Product 7",price:700},{url:"https://via.placeholder.com/250",description:"Product 8",price:800}],_=[{label:"Label 1",value:"category_1",description:"Description 1"},{label:"Label 2",value:"category_2",description:"Description 2"},{label:"Label 3",value:"category_3",description:"Description 3"}],M=[{label:"Red",value:"red"},{label:"Blue",value:"blue"},{label:"Green",value:"green"}],w=["spring","smart","modern","casual","formal"],S=[{label:"Small",value:"small"},{label:"Medium",value:"medium"},{label:"Large",value:"large"}],T=[{icon:"icon1",label:"New",value:"new"},{icon:"icon2",label:"Price ascending",value:"ascending"},{icon:"icon3",label:"Price descending",value:"descending"},{icon:"icon4",label:"Rating",value:"rating"}],N={min:0,max:100},I=()=>{const[e,t]=(0,a.useState)({size:[],categories:[],color:[],keywords:w,searchTerm:"",sortBy:"new",priceRange:{min:0,max:100}}),[n,r]=(0,a.useState)([]);return(0,a.useEffect)((()=>{(async()=>{try{r(y)}catch(e){console.error("Error fetching products:",e)}})()}),[e]),s().createElement("div",{className:"product_result_container"},s().createElement("div",null,s().createElement(p,{sizes:S,categories:_,keywords:e.keywords,colors:M,priceRange:N,handleKeywordAdd:n=>{e.keywords.includes(n)||t((e=>v(v({},e),{},{keywords:[...e.keywords,n]})))},handleKeywordRemove:e=>{t((t=>v(v({},t),{},{keywords:t.keywords.filter((t=>t!==e))})))},handleFilterChange:e=>{const{filterType:n,value:a,isChecked:s}=e;t((e=>{const t=v({},e);return Array.isArray(t[n])&&(s&&(t[n]=[...t[n],a]),s||(t[n]=t[n].filter((e=>e!==a)))),t}))},priceRangeHandler:e=>{const{min:n,max:a}=e;t((e=>v(v({},e),{},{priceRange:{min:n,max:a}})))},handleKeywordUpdate:e=>{const{keyword:n,index:a}=e;t((e=>{const t=[...e.keywords];return t[a]=n,v(v({},e),{},{keywords:t})}))}})),s().createElement("div",{className:"card_and_wrapper_container"},s().createElement(E,{buttons:T,handleSearchTermChange:e=>{t((t=>v(v({},t),{},{searchTerm:e})))},handleSortByChange:e=>{t((t=>v(v({},t),{},{sortBy:e})))}}),s().createElement("div",{className:"product_result_info_container"},n.map((e=>s().createElement(g,{key:e.description,url:e.url,description:e.description,price:e.price}))))))}},63386:(e,t,n)=>{n.d(t,{Z:()=>C});var a=n(23615),s=n.n(a),r=(n(48410),n(84390)),i=n.n(r),o=n(72060),l=n(70314),c=n(45448),d=n(28176),u=n(40364),h=n(76452),m=n(26341),p=n(23712);const g=["id"];const f=e=>{let{id:t}=e,n=function(e,t){if(null==e)return{};var n,a,s=function(e,t){if(null==e)return{};var n,a,s={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}(e,g);const a=(0,l.useDispatch)(),s=(0,r.useCallback)((()=>{a((0,u.h)({modalId:p.r8.EDIT_CATEGORY,dialogType:h.default})),(0,d.L9)("ui","ui_sidebar_category_menu_createCategory")}),[a]);return i().createElement(m.ck,Object.assign({id:"create-".concat(t),onClick:s,"aria-haspopup":!0,leadingElement:i().createElement(c.FolderPlusOutlineIcon,{size:18}),labels:i().createElement(o.FormattedMessage,{id:"sidebar_left.sidebar_category_menu.createCategory",defaultMessage:"Create New Category"})},n))};f.propTypes={id:s().string.isRequired};const C=f},47185:(e,t,n)=>{n.d(t,{Z:()=>b});var a=n(23615),s=n.n(a),r=(n(48410),n(84390)),i=n.n(r),o=n(72060),l=n(70314),c=n(45448),d=n(40364),u=n(26341),h=n(23712),m=n(6098);const p=()=>null,g=e=>{let{handleConfirm:t,numChannels:n,onExited:a}=e;const s=(0,o.useIntl)(),r=s.formatMessage({id:"mark_as_read_confirm_modal.header",defaultMessage:"Mark as read"}),l=s.formatMessage({id:"mark_as_read_confirm_modal.body",defaultMessage:"Are you sure you want to mark {numChannels} channels as read?"},{numChannels:n}),c=s.formatMessage({id:"mark_as_read_confirm_modal.confirm",defaultMessage:"Mark as read"});return i().createElement(m.$E,{ariaLabel:r,compassDesign:!0,modalHeaderText:r,handleConfirm:t,handleCancel:p,onExited:a,confirmButtonText:c},i().createElement("span",{className:"mark-as-read__helpText"},l))};g.propTypes={handleConfirm:s().func.isRequired,numChannels:s().number.isRequired,onExited:s().func.isRequired};const f=g,C=["id","handleViewCategory","numChannels"];const E=e=>{let{id:t,handleViewCategory:n,numChannels:a}=e,s=function(e,t){if(null==e)return{};var n,a,s=function(e,t){if(null==e)return{};var n,a,s={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}(e,C);const m=(0,l.useDispatch)(),p=(0,r.useCallback)((()=>{a<=0||(1!==a?m((0,d.h)({modalId:h.r8.DELETE_CATEGORY,dialogType:f,dialogProps:{handleConfirm:n,numChannels:a}})):n())}),[m,n,a]);return i().createElement(u.ck,Object.assign({id:"view-".concat(t),onClick:p,"aria-haspopup":a>1,leadingElement:i().createElement(c.MarkAsUnreadIcon,{size:18}),labels:i().createElement(o.FormattedMessage,{id:"sidebar_left.sidebar_category_menu.viewCategory",defaultMessage:"Mark category as read"})},s))};E.propTypes={id:s().string.isRequired,handleViewCategory:s().func.isRequired,numChannels:s().number.isRequired};const b=E},98514:(e,t,n)=>{n.d(t,{Z:()=>m});var a=n(23615),s=n.n(a),r=(n(14078),n(60042)),i=n.n(r),o=n(84390),l=n.n(o),c=n(72060),d=n(45448),u=n(26341);const h=e=>{let{id:t,children:n}=e;const[a,s]=(0,o.useState)(!1),{formatMessage:r}=(0,c.useIntl)();return l().createElement("div",{className:i()("SidebarMenu","MenuWrapper",{"MenuWrapper--open":a,menuOpen:a})},l().createElement(u.W2,{menuButton:{id:"SidebarCategoryMenu-Button-".concat(t),"aria-label":r({id:"sidebar_left.sidebar_category_menu.editCategory",defaultMessage:"Category options"}),class:"SidebarMenu_menuButton",children:l().createElement(d.DotsVerticalIcon,{size:16})},menuButtonTooltip:{id:"SidebarCategoryMenu-ButtonTooltip-".concat(t),text:r({id:"sidebar_left.sidebar_category_menu.editCategory",defaultMessage:"Category options"}),class:"hidden-xs"},menu:{id:"SidebarChannelMenu-MenuList-".concat(t),"aria-label":r({id:"sidebar_left.sidebar_category_menu.dropdownAriaLabel",defaultMessage:"Edit category menu"}),onToggle:function(e){s(e)}}},n))};h.propTypes={id:s().string.isRequired,children:s().arrayOf(s().node).isRequired};const m=(0,o.memo)(h)},48434:(e,t,n)=>{n.d(t,{I:()=>d,v:()=>u});var a=n(23615),s=n.n(a),r=(n(48410),n(60042)),i=n.n(r),o=n(84390),l=n.n(o),c=n(72075);const d=l().forwardRef(((e,t)=>l().createElement("div",{className:"SidebarChannelGroupHeader SidebarChannelGroupHeader--static"},l().createElement("div",{ref:t,className:"SidebarChannelGroupHeader_groupButton"},l().createElement("div",{className:"SidebarChannelGroupHeader_text"},(0,c.Y4)(e.displayName)),e.children))));d.propTypes={children:s().node,displayName:s().string.isRequired},d.displayName="SidebarCategoryHeaderStatic";const u=l().forwardRef(((e,t)=>{const{dragHandleProps:n}=e;return n&&n.role&&Reflect.deleteProperty(n,"role"),l().createElement("div",{className:i()("SidebarChannelGroupHeader",{muted:e.muted,dragging:e.isDragging})},l().createElement("button",{ref:t,className:i()("SidebarChannelGroupHeader_groupButton"),"aria-label":e.displayName,onClick:e.onClick},l().createElement("i",{className:i()("icon icon-chevron-down",{"icon-rotate-minus-90":e.isCollapsed,"hide-arrow":!e.isCollapsible})}),l().createElement("div",Object.assign({className:"SidebarChannelGroupHeader_text"},n),(0,c.Y4)(e.displayName))),e.children)}));u.propTypes={children:s().node,displayName:s().string.isRequired,isCollapsed:s().bool.isRequired,isCollapsible:s().bool,isDragging:s().bool,isDraggingOver:s().bool,muted:s().bool.isRequired,onClick:s().func.isRequired},u.defaultProps={isCollapsible:!0,isDragging:!1,isDraggingOver:!1},u.displayName="SidebarCategoryHeader"},18734:(e,t,n)=>{n.d(t,{Z:()=>c});var a=n(23615),s=n.n(a),r=n(60042),i=n.n(r),o=n(84390),l=n.n(o);function c(e){let{unreadMentions:t,hasUrgent:n}=e;return t>0?l().createElement("span",{id:"unreadMentions",className:i()({badge:!0,urgent:n})},t):null}c.propTypes={unreadMentions:s().number.isRequired,hasUrgent:s().bool}},79186:(e,t,n)=>{n.d(t,{Z:()=>Ae});var a=n(70314),s=n(43618),r=n(11298),i=n(35590),o=(n(14078),n(48410),n(60042)),l=n.n(o),c=n(84390),d=n.n(c),u=n(66795),h=n(72060),m=n(23712),p=n(36891),g=n(9828),f=n(40364),C=n(23615),E=n.n(C),b=n(28176),v=n(22319),y=n(66900),_=n(19601),M=n(83905),w=n(39875),S=n(95894),T=n(46935),N=n(39183),I=n(77737),P=n(84459),L=n(35835),R=n(36125),A=(n(92189),n(9448)),O=n(46299),k=n(65395),D=n(68656),x=n(34575),F=n(26742),B=n(72075),U=n(35887),H=n(47816),q=n(70174),j=n(18734);function Z(e){let{hasDraft:t}=e;return t?d().createElement("i",{"data-testid":"draftIcon",className:"icon icon-pencil-outline channel-pencil-icon"}):null}n(20266),Z.propTypes={hasDraft:E().bool.isRequired};const V=(0,c.memo)(Z);function G(e,t,n){return null!==e&&Boolean(e.message.trim()||e.fileInfos.length||e.uploadsInProgress.length)&&n!==t}const W=(0,a.connect)((function(e,t){const n=(0,s.gO)(e);return{hasDraft:G((0,P.HG)(e,m.hC.DRAFT,t.id),t.id,n)}}))(V);function z(e){let{isDeleted:t,icon:n}=e;return t?d().createElement("i",{className:"icon icon-archive-outline"}):n}z.propTypes={icon:E().oneOfType([E().element,E().oneOf([null])]),isDeleted:E().bool.isRequired};const K=z;var J=n(73443),Y=n(52173),Q=n(84073),X=n(20827),$=n(41894),ee=n(45448),te=n(11796),ne=(n(95623),n(61514),n(20229)),ae=n(95849),se=n(76452),re=n(26341);const ie=e=>{const{formatMessage:t}=(0,h.useIntl)(),n=(0,a.useDispatch)(),o=(0,a.useSelector)(s.IU),l=(0,a.useSelector)((e=>e.views.channelSidebar.multiSelectedChannelIds)),c=(0,a.useSelector)(r.kA),u=(0,a.useSelector)((e=>c?(0,i.Yy)(e):void 0)),p=(0,a.useSelector)((t=>c?(0,ae.Me)(t,(null==c?void 0:c.id)||"",e.channel.id):void 0));function g(t,a){t.preventDefault(),(null==p?void 0:p.id)!==a&&(n((0,T.Q7)(a,e.channel.id)),(0,b.L9)("ui","ui_sidebar_channel_menu_moveToExistingCategory"))}function C(){n((0,f.h)({modalId:m.r8.EDIT_CATEGORY,dialogType:se.default,dialogProps:{channelIdsToAdd:-1===l.indexOf(e.channel.id)?[e.channel.id]:l}})),(0,b.L9)("ui","ui_sidebar_channel_menu_createCategory")}function E(t,n){return[...t.map((t=>{let a=d().createElement("span",null,t.display_name);t.type===ne.y.FAVORITES&&(a=d().createElement(h.FormattedMessage,{id:"sidebar_left.sidebar_channel_menu.favorites",defaultMessage:"Favorites"})),t.type===ne.y.CHANNELS&&(a=d().createElement(h.FormattedMessage,{id:"sidebar_left.sidebar_channel_menu.channels",defaultMessage:"Channels"}));let s=null;return n&&n.display_name===t.display_name&&(s=d().createElement(ee.CheckIcon,{color:"var(--button-bg)",size:18})),d().createElement(re.ck,{id:"moveToCategory-".concat(e.channel.id,"-").concat(t.id),key:"moveToCategory-".concat(e.channel.id,"-").concat(t.id),leadingElement:t.type===ne.y.FAVORITES?d().createElement(ee.StarOutlineIcon,{size:18}):d().createElement(ee.FolderOutlineIcon,{size:18}),labels:a,trailingElements:s,onClick:e=>g(e,t.id)})})),d().createElement(re.Z0,{key:"ChannelMenu-moveToDivider"}),d().createElement(re.ck,{id:"moveToNewCategory-".concat(e.channel.id),key:"moveToNewCategory-".concat(e.channel.id),"aria-haspopup":!0,leadingElement:d().createElement(ee.FolderMoveOutlineIcon,{size:18}),labels:d().createElement(h.FormattedMessage,{id:"sidebar_left.sidebar_channel_menu.moveToNewCategory",defaultMessage:"New Category"}),onClick:C})]}function v(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?e.filter((e=>e.type!==ne.y.CHANNELS)):e.filter((e=>e.type!==ne.y.DIRECT_MESSAGES))}return u?d().createElement(re.Wd,{id:"moveTo-".concat(e.channel.id),labels:d().createElement(h.FormattedMessage,{id:"sidebar_left.sidebar_channel_menu.moveTo",defaultMessage:"Move to..."}),leadingElement:e.inHeaderDropdown?null:d().createElement(ee.FolderMoveOutlineIcon,{size:18}),trailingElements:d().createElement(ee.ChevronRightIcon,{size:16}),menuId:"moveTo-".concat(e.channel.id,"-menu"),menuAriaLabel:t({id:"sidebar_left.sidebar_channel_menu.moveTo.dropdownAriaLabel",defaultMessage:"Move to submenu"})},function(t,n){const a=l.includes(e.channel.id);return e.inHeaderDropdown||!a?E(v(t,e.channel.type===m.default.DM_CHANNEL||e.channel.type===m.default.GM_CHANNEL),n):l.every((e=>o[e].type===m.default.DM_CHANNEL||o[e].type===m.default.GM_CHANNEL))?E(v(t,!0),n):l.every((e=>o[e].type!==m.default.DM_CHANNEL&&o[e].type!==m.default.GM_CHANNEL))?E(v(t,!1),n):E(t.filter((e=>e.type!==ne.y.CHANNELS&&e.type!==ne.y.DIRECT_MESSAGES)),n)}(u,p)):null},oe=(0,c.memo)(ie),le=e=>{let{channel:t,channelLink:n,currentUserId:a,favoriteChannel:s,isFavorite:r,isMuted:i,isUnread:o,managePrivateChannelMembers:l,managePublicChannelMembers:u,markMultipleChannelsAsRead:p,markMostRecentPostInChannelAsUnread:g,muteChannel:f,onMenuToggle:C,openModal:E,unfavoriteChannel:v,unmuteChannel:y,channelLeaveHandler:_}=e;const M=(0,c.useRef)(!1),{formatMessage:w}=(0,h.useIntl)();let S=null;if(o){function R(){p({[t.id]:Date.now()}),(0,b.L9)("ui","ui_sidebar_channel_menu_markAsRead")}S=d().createElement(re.ck,{id:"markAsRead-".concat(t.id),onClick:R,leadingElement:d().createElement(ee.MarkAsUnreadIcon,{size:18}),labels:d().createElement(h.FormattedMessage,{id:"sidebar_left.sidebar_channel_menu.markAsRead",defaultMessage:"Mark as Read"})})}else{function A(){g(t.id),(0,b.L9)("ui","ui_sidebar_channel_menu_markAsUnread")}S=d().createElement(re.ck,{id:"markAsUnread-".concat(t.id),onClick:A,leadingElement:d().createElement(ee.MarkAsUnreadIcon,{size:18}),labels:d().createElement(h.FormattedMessage,{id:"sidebar_left.sidebar_channel_menu.markAsUnread",defaultMessage:"Mark as Unread"})})}let T=null;if(r){function O(){v(t.id),(0,b.L9)("ui","ui_sidebar_channel_menu_unfavorite")}T=d().createElement(re.ck,{id:"unfavorite-".concat(t.id),onClick:O,leadingElement:d().createElement(ee.StarIcon,{size:18}),labels:d().createElement(h.FormattedMessage,{id:"sidebar_left.sidebar_channel_menu.unfavoriteChannel",defaultMessage:"Unfavorite"})})}else{function k(){s(t.id),(0,b.L9)("ui","ui_sidebar_channel_menu_favorite")}T=d().createElement(re.ck,{id:"favorite-".concat(t.id),onClick:k,leadingElement:d().createElement(ee.StarOutlineIcon,{size:18}),labels:d().createElement(h.FormattedMessage,{id:"sidebar_left.sidebar_channel_menu.favoriteChannel",defaultMessage:"Favorite"})})}let N=null;if(i){let D=d().createElement(h.FormattedMessage,{id:"sidebar_left.sidebar_channel_menu.unmuteChannel",defaultMessage:"Unmute Channel"});function x(){y(a,t.id)}t.type!==m.default.DM_CHANNEL&&t.type!==m.default.GM_CHANNEL||(D=d().createElement(h.FormattedMessage,{id:"sidebar_left.sidebar_channel_menu.unmuteConversation",defaultMessage:"Unmute Conversation"})),N=d().createElement(re.ck,{id:"unmute-".concat(t.id),onClick:x,leadingElement:d().createElement(ee.BellOffOutlineIcon,{size:18}),labels:D})}else{let F=d().createElement(h.FormattedMessage,{id:"sidebar_left.sidebar_channel_menu.muteChannel",defaultMessage:"Mute Channel"});function B(){f(a,t.id)}t.type!==m.default.DM_CHANNEL&&t.type!==m.default.GM_CHANNEL||(F=d().createElement(h.FormattedMessage,{id:"sidebar_left.sidebar_channel_menu.muteConversation",defaultMessage:"Mute Conversation"})),N=d().createElement(re.ck,{id:"mute-".concat(t.id),onClick:B,leadingElement:d().createElement(ee.BellOutlineIcon,{size:18}),labels:F})}let I=null;if(t.type===m.default.OPEN_CHANNEL||t.type===m.default.PRIVATE_CHANNEL){function U(){(0,q.vQ)(n)}I=d().createElement(re.ck,{id:"copyLink-".concat(t.id),onClick:U,leadingElement:d().createElement(ee.LinkVariantIcon,{size:18}),labels:d().createElement(h.FormattedMessage,{id:"sidebar_left.sidebar_channel_menu.copyLink",defaultMessage:"Copy Link"})})}let P=null;if(t.type===m.default.PRIVATE_CHANNEL&&l||t.type===m.default.OPEN_CHANNEL&&u){function H(){E({modalId:m.r8.CHANNEL_INVITE,dialogType:te.Z,dialogProps:{channel:t}}),(0,b.L9)("ui","ui_sidebar_channel_menu_addMembers")}P=d().createElement(re.ck,{id:"addMembers-".concat(t.id),onClick:H,"aria-haspopup":"true",leadingElement:d().createElement(ee.AccountPlusOutlineIcon,{size:18}),labels:d().createElement(h.FormattedMessage,{id:"sidebar_left.sidebar_channel_menu.addMembers",defaultMessage:"Add Members"})})}let L=null;if(t.name!==m.default.DEFAULT_CHANNEL){let j=d().createElement(h.FormattedMessage,{id:"sidebar_left.sidebar_channel_menu.leaveChannel",defaultMessage:"Leave Channel"});function Z(){!M.current&&_&&(M.current=!0,_((()=>{M.current=!1})),(0,b.L9)("ui","ui_sidebar_channel_menu_leave"))}t.type!==m.default.DM_CHANNEL&&t.type!==m.default.GM_CHANNEL||(j=d().createElement(h.FormattedMessage,{id:"sidebar_left.sidebar_channel_menu.leaveConversation",defaultMessage:"Close Conversation"})),L=d().createElement(re.ck,{id:"leave-".concat(t.id),onClick:Z,leadingElement:d().createElement(ee.ExitToAppIcon,{size:18}),labels:j,isDestructive:!0})}return d().createElement(re.W2,{menuButton:{id:"SidebarChannelMenu-Button-".concat(t.id),class:"SidebarMenu_menuButton","aria-label":w({id:"sidebar_left.sidebar_channel_menu.editChannel.ariaLabel",defaultMessage:"Channel options for {channelName}"},{channelName:t.name}),children:d().createElement(ee.DotsVerticalIcon,{size:16})},menuButtonTooltip:{id:"SidebarChannelMenu-ButtonTooltip-".concat(t.id),class:"hidden-xs",text:w({id:"sidebar_left.sidebar_channel_menu.editChannel",defaultMessage:"Channel options"})},menu:{id:"SidebarChannelMenu-MenuList-".concat(t.id),"aria-label":w({id:"sidebar_left.sidebar_channel_menu.dropdownAriaLabel",defaultMessage:"Edit channel menu"}),onToggle:C}},S,T,N,d().createElement(re.Z0,null),d().createElement(oe,{channel:t}),(I||P)&&d().createElement(re.Z0,null),I,P,L&&d().createElement(re.Z0,null),L)},ce=(0,c.memo)(le),de={markMultipleChannelsAsRead:J._v,markMostRecentPostInChannelAsUnread:S.PV,favoriteChannel:J.ZE,unfavoriteChannel:J.Dn,muteChannel:X.D0,unmuteChannel:X.rA,openModal:f.h},ue=(0,a.connect)((function(e,t){const n=(0,y.h4)(e)[t.channel.id],a=(0,r.kA)(e);let i=!1,o=!1;return a&&(i=(0,Q.Ai)(e,a.id,t.channel.id,Y.Z.MANAGE_PUBLIC_CHANNEL_MEMBERS),o=(0,Q.Ai)(e,a.id,t.channel.id,Y.Z.MANAGE_PRIVATE_CHANNEL_MEMBERS)),{currentUserId:(0,y.rc)(e),isFavorite:(0,s.Dp)(e,t.channel.id),isMuted:(0,w.Mm)(n),channelLink:"".concat((0,$.fO)()).concat(t.channelLink),managePublicChannelMembers:i,managePrivateChannelMembers:o}}),de)(ce);function he(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class me extends d().PureComponent{constructor(e){super(e),he(this,"enableToolTipIfNeeded",(()=>{const e=this.labelRef.current,t=e&&e.offsetWidth<e.scrollWidth;this.setState({showTooltip:Boolean(t)})})),he(this,"getAriaLabel",(()=>{const{label:e,ariaLabelPrefix:t,unreadMentions:n}=this.props;let a=e;return t&&(a+=" ".concat(t)),1===n?a+=" ".concat(n," ").concat((0,q._u)("accessibility.sidebar.types.mention","mention")):n>1&&(a+=" ".concat(n," ").concat((0,q._u)("accessibility.sidebar.types.mentions","mentions"))),this.props.isUnread&&0===n&&(a+=" ".concat((0,q._u)("accessibility.sidebar.types.unread","unread"))),a.toLowerCase()})),he(this,"handleChannelClick",(e=>{(0,b.B1)(H.vc.ChannelLinkClicked),this.handleSelectChannel(e),this.props.rhsOpen&&this.props.rhsState===m.Hp.EDIT_HISTORY&&this.props.actions.closeRightHandSide(),setTimeout((()=>{(0,b.L9)("ui","ui_channel_selected_v2")}),0)})),he(this,"handleSelectChannel",(e=>{e.defaultPrevented||0!==e.button||((0,U._)(e)?(e.preventDefault(),this.props.actions.multiSelectChannelAdd(this.props.channel.id)):e.shiftKey?(e.preventDefault(),this.props.actions.multiSelectChannelTo(this.props.channel.id)):e.altKey&&!this.props.isUnread?(e.preventDefault(),this.props.actions.markMostRecentPostInChannelAsUnread(this.props.channel.id)):this.props.actions.clearChannelSelection())})),he(this,"handleMenuToggle",(e=>{this.setState({isMenuOpen:e})})),this.labelRef=d().createRef(),this.state={isMenuOpen:!1,showTooltip:!1}}componentDidMount(){this.enableToolTipIfNeeded()}componentDidUpdate(e){e.label!==this.props.label&&this.enableToolTipIfNeeded()}render(){const{channel:e,icon:t,isChannelSelected:n,isMuted:a,isUnread:s,label:r,link:i,unreadMentions:o,firstChannelName:c,showChannelsTutorialStep:u,hasUrgent:h}=this.props;let p=null;(c===e.name||!c&&u&&e.name===m.default.DEFAULT_CHANNEL)&&(p=c?d().createElement(D.N_,{firstChannelName:e.display_name}):d().createElement(D.N_,null));let g=d().createElement("span",{ref:this.labelRef,className:"SidebarChannelLinkLabel"},(0,B.Y4)(r));this.state.showTooltip&&(g=d().createElement(x.Z,{id:"channel-displayname__tooltip",title:r,placement:"top"},g));const f=this.props.teammateId?d().createElement(O.Z,{userID:this.props.teammateId,showTooltip:!0,spanStyle:{height:18},emojiStyle:{marginTop:-4,marginBottom:0,opacity:.8}}):null,C=this.props.isSharedChannel?d().createElement(k.Z,{className:"icon",channelType:e.type,withTooltip:!0}):null,E=d().createElement(d().Fragment,null,d().createElement(K,{isDeleted:0!==e.delete_at,icon:t}),d().createElement("div",{className:"SidebarChannelLinkLabel_wrapper"},g,f,d().createElement(F.default,{pluggableName:"SidebarChannelLinkLabel",channel:this.props.channel}),C),d().createElement(W,{id:e.id}),d().createElement(j.Z,{unreadMentions:o,hasUrgent:h}),d().createElement("div",{className:l()("SidebarMenu","MenuWrapper",{menuOpen:this.state.isMenuOpen},{"MenuWrapper--open":this.state.isMenuOpen})},d().createElement(ue,{channel:e,channelLink:i,isUnread:s,channelLeaveHandler:this.props.channelLeaveHandler,onMenuToggle:this.handleMenuToggle}))),b=l()(["SidebarLink",{menuOpen:this.state.isMenuOpen,muted:a,"unread-title":this.props.isUnread,selected:n}]);return d().createElement(A.Link,{className:b,id:"sidebarItem_".concat(e.name),"aria-label":this.getAriaLabel(),to:i,onClick:this.handleChannelClick,tabIndex:0},E,p)}}he(me,"propTypes",{link:E().string.isRequired,label:E().string.isRequired,ariaLabelPrefix:E().string,channelLeaveHandler:E().func,icon:E().oneOfType([E().element,E().oneOf([null])]),unreadMentions:E().number.isRequired,isUnread:E().bool.isRequired,isMuted:E().bool.isRequired,isChannelSelected:E().bool.isRequired,teammateId:E().string,firstChannelName:E().string,showChannelsTutorialStep:E().bool.isRequired,hasUrgent:E().bool.isRequired,rhsOpen:E().bool,isSharedChannel:E().bool,actions:E().shape({markMostRecentPostInChannelAsUnread:E().func.isRequired,clearChannelSelection:E().func.isRequired,multiSelectChannelTo:E().func.isRequired,multiSelectChannelAdd:E().func.isRequired,unsetEditingPost:E().func.isRequired,closeRightHandSide:E().func.isRequired}).isRequired});const pe=(0,a.connect)((function(){const e=(0,s.Xi)();return(t,n)=>{const a=(0,y.h4)(t)[n.channel.id],s=e(t,n.channel.id),r=(0,_.iE)(t),o="true"===r.EnableTutorial,l=(0,y.rc)(t),c=(0,M.wS)(t,R.CC.ONBOARDING_TUTORIAL_STEP,l,0),d=(0,M.wS)(t,L.I2,L.KD.CHANNELS_TOUR,R._H)===L.$z.STARTED,u=r.EnableOnboardingFlow,h=o&&c===R.Nd.CHANNELS_AND_DIRECT_MESSAGES&&d&&"true"===u;return{unreadMentions:s.mentions,unreadMsgs:s.messages,isUnread:s.showUnread,isMuted:(0,w.Mm)(a),hasUrgent:s.hasUrgent,isChannelSelected:(0,i.mF)(t,n.channel.id),firstChannelName:h?(0,I.B0)(t):"",showChannelsTutorialStep:h,rhsState:(0,P.kV)(t),rhsOpen:(0,P.aC)(t)}}}),(function(e){return{actions:(0,p.bindActionCreators)({markMostRecentPostInChannelAsUnread:S.PV,unsetEditingPost:S.Ip,clearChannelSelection:T.rJ,multiSelectChannelTo:T.j,multiSelectChannelAdd:T.Vv,closeRightHandSide:N.Lg},e)}}))(me),ge=e=>{let{channelType:t}=e;return t===m.default.OPEN_CHANNEL?d().createElement("i",{className:"icon icon-globe"}):t===m.default.PRIVATE_CHANNEL?d().createElement("i",{className:"icon icon-lock-outline"}):null},fe=e=>{let{channel:t,currentTeamName:n,actions:a}=e;const s=(0,h.useIntl)(),r=(0,c.useCallback)((e=>{a.leaveChannel(t.id),(0,b.L9)("ui","ui_public_channel_x_button_clicked"),e()}),[t.id,a.leaveChannel]),i=(0,c.useCallback)((e=>{a.openModal({modalId:m.r8.LEAVE_PRIVATE_CHANNEL_MODAL,dialogType:v.Z,dialogProps:{channel:t}}),(0,b.L9)("ui","ui_private_channel_x_button_clicked"),e()}),[t,a.openModal]);let o=null;t.type===m.default.OPEN_CHANNEL&&t.name!==m.default.DEFAULT_CHANNEL?o=r:t.type===m.default.PRIVATE_CHANNEL&&(o=i);const l=d().createElement(ge,{channelType:t.type});let u;return t.type===m.default.OPEN_CHANNEL?u=s.formatMessage({id:"accessibility.sidebar.types.public",defaultMessage:"public channel"}):t.type===m.default.PRIVATE_CHANNEL&&(u=s.formatMessage({id:"accessibility.sidebar.types.private",defaultMessage:"private channel"})),d().createElement(pe,{channel:t,link:"/".concat(n,"/channels/").concat(t.name),label:t.display_name,ariaLabelPrefix:u,channelLeaveHandler:o,icon:l,isSharedChannel:t.shared})};fe.propTypes={currentTeamName:E().string.isRequired};const Ce=fe,Ee=(0,a.connect)(null,(function(e){return{actions:(0,p.bindActionCreators)({leaveChannel:g.TL,openModal:f.h},e)}}))(Ce);var be=n(32394),ve=n(23894),ye=n(80139),_e=n(44967),Me=n(8243);function we(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Se extends d().PureComponent{constructor(){super(...arguments),we(this,"handleLeaveChannel",(e=>{const t=this.props.channel.teammate_id,n=m.Constants.Preferences.CATEGORY_DIRECT_CHANNEL_SHOW,a=this.props.currentUserId;this.props.actions.savePreferences(a,[{user_id:a,category:n,name:t,value:"false"}]).then(e),this.props.actions.leaveDirectChannel(this.props.channel.name),(0,b.L9)("ui","ui_direct_channel_x_button_clicked"),this.props.active&&(0,Me.s)().push("/".concat(this.props.currentTeamName,"/channels/").concat(this.props.redirectChannel))})),we(this,"getIcon",(()=>{const{channel:e,teammate:t}=this.props;if(!t)return null;if(t.id&&t.delete_at)return d().createElement("i",{className:"icon icon-archive-outline"});let n="";return"online"===e.status?n="status-online":"away"===e.status?n="status-away":"dnd"===e.status&&(n="status-dnd"),d().createElement(_e.Z,{src:ye.je.getProfilePictureUrl(t.id,t.last_picture_update),size:"xs",status:t.is_bot?"":e.status,wrapperClass:"DirectChannel__profile-picture",newStatusIcon:!0,statusClass:"DirectChannel__status-icon ".concat(n)})}))}render(){const{channel:e,teammate:t,currentTeamName:n}=this.props;if(!t)return null;let a=e.display_name;return this.props.currentUserId===t.id&&(a=this.props.intl.formatMessage({id:"sidebar.directchannel.you",defaultMessage:"{displayname} (you)"},{displayname:e.display_name})),d().createElement(pe,{teammateId:t.id,channel:e,link:"/".concat(n,"/messages/@").concat(t.username),label:a,channelLeaveHandler:this.handleLeaveChannel,icon:this.getIcon(),isSharedChannel:void 0!==t.remote_id})}}we(Se,"propTypes",{currentTeamName:E().string.isRequired,currentUserId:E().string.isRequired,redirectChannel:E().string.isRequired,active:E().bool.isRequired,actions:E().shape({savePreferences:E().func.isRequired,leaveDirectChannel:E().func.isRequired}).isRequired});const Te=(0,h.injectIntl)(Se),Ne=(0,a.connect)((function(e,t){const n=(0,ve.PR)(e,t.channel.teammate_id),a=(0,ve.ts)(e),i=(0,r.kA)(e),o=i?(0,s.fG)(e,i.id):"",l=(0,s.gO)(e),c=t.channel.id===l;return{teammate:n,currentUserId:a.id,redirectChannel:o,active:c}}),(function(e){return{actions:(0,p.bindActionCreators)({savePreferences:be.$A,leaveDirectChannel:g.e2},e)}}))(Te),Ie=e=>{let{channel:t,currentUserId:n,actions:a,active:s,currentTeamName:r,redirectChannel:i,membersCount:o}=e;const l=(0,c.useCallback)((e=>{const o=t.id,l=m.default.Preferences.CATEGORY_GROUP_CHANNEL_SHOW;a.savePreferences(n,[{user_id:n,category:l,name:o,value:"false"}]).then(e),(0,b.L9)("ui","ui_direct_channel_x_button_clicked"),s&&(0,Me.s)().push("/".concat(r,"/channels/").concat(i))}),[t.id,a,s,r,i,n]);return d().createElement(pe,{channel:t,link:"/".concat(r,"/messages/").concat(t.name),label:t.display_name,channelLeaveHandler:l,icon:d().createElement("div",{className:"status status--group"},o)})};Ie.propTypes={currentTeamName:E().string.isRequired,currentUserId:E().string.isRequired,redirectChannel:E().string.isRequired,active:E().bool.isRequired,membersCount:E().number.isRequired,actions:E().shape({savePreferences:E().func.isRequired}).isRequired};const Pe=(0,c.memo)(Ie),Le=(0,a.connect)((function(){const e=(0,s.WR)();return(t,n)=>{const a=(0,ve.rc)(t),i=(0,r.kA)(t),o=i?(0,s.fG)(t,i.id):"",l=(0,s.gO)(t),c=e(t,n.channel);return{currentUserId:a,redirectChannel:o,active:n.channel.id===l,membersCount:c}}}),(function(e){return{actions:(0,p.bindActionCreators)({savePreferences:be.$A},e)}}))(Pe),Re=(0,a.connect)((function(){const e=(0,s.kL)(),t=(0,s.Xi)();return(n,a)=>{const o=e(n,{id:a.channelId}),l=(0,r.kA)(n),c=(0,s.gO)(n),d=t(n,(null==o?void 0:o.id)||"");return{channel:o,isCurrentChannel:(null==o?void 0:o.id)===c,currentTeamName:null==l?void 0:l.name,unreadMentions:d.mentions,isUnread:d.showUnread,draggingState:(0,i.Qy)(n),isChannelSelected:(0,i.mF)(n,a.channelId),multiSelectedChannelIds:n.views.channelSidebar.multiSelectedChannelIds,autoSortedCategoryIds:(0,i.n7)(n)}}})),Ae=Re((function(e){let{isCategoryCollapsed:t,isCategoryDragged:n,isUnread:a,isCurrentChannel:s,setChannelRef:r,channel:i,currentTeamName:o,isDraggable:p,isChannelSelected:g,draggingState:f,multiSelectedChannelIds:C,channelIndex:E,isAutoSortedCategory:b,autoSortedCategoryIds:v}=e;const[y,_]=(0,c.useState)(!0);if(!i)return null;if(!o)return null;function M(){return n||t&&!a&&!s}function w(e){return t=>{r((null==i?void 0:i.id)||"",t),null==e||e(t)}}function S(e){e&&"toOpaqueAnimation"===e.animationName&&!M()&&_(!0)}function T(e){e&&"toTransparentAnimation"===e.animationName&&M()&&_(!1)}let N;if(N=y?i.type===m.default.DM_CHANNEL?d().createElement(Ne,{channel:i,currentTeamName:o}):i.type===m.default.GM_CHANNEL?d().createElement(Le,{channel:i,currentTeamName:o}):d().createElement(Ee,{channel:i,currentTeamName:o}):null,p){let e;return g&&f.state&&f.id===i.id&&C.length>1&&(e=y?d().createElement("div",{className:"SidebarChannel__selectedCount"},d().createElement(h.FormattedMessage,{id:"sidebar_left.sidebar_channel.selectedCount",defaultMessage:"{count} selected",values:{count:C.length}})):null),d().createElement(u.Draggable,{draggableId:i.id,index:E},((t,n)=>d().createElement("li",Object.assign({draggable:"false",ref:w(t.innerRef),className:l()("SidebarChannel",{collapsed:M(),expanded:!M(),unread:a,active:s,dragging:n.isDragging,selectedDragging:g&&f.state&&f.id!==i.id,fadeOnDrop:n.isDropAnimating&&n.draggingOver&&v.has(n.draggingOver),noFloat:b&&!n.isDragging})},t.draggableProps,t.dragHandleProps,{onAnimationStart:S,onAnimationEnd:T,role:"listitem",tabIndex:-1}),N,e)))}return d().createElement("li",{ref:w(),className:l()("SidebarChannel",{collapsed:M(),expanded:!M(),unread:a,active:s}),onAnimationStart:S,onAnimationEnd:T,role:"listitem"},N)}))},92273:(e,t,n)=>{n.r(t),n.d(t,{default:()=>yi}),n(52077),n(1203);var a=n(70314),s=n(73443),r=n(43618),i=n(19601),o=n(11298),l=n(23894),c=n(9828),d=n(84459),u=n(96405),h=(n(61418),n(92189),n(17554)),m=n(75627),p=n(98644),g=n(17086),f=n(66900),C=n(83905),E=n(63970),b=n(17534),v=n(50801),y=n(23783);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S(e){return async(t,n)=>{t((0,g.MA)(e.id));const a=n(),r=(0,l.ts)(a);v.Z.setPreviousTeamId(r.id,e.id);try{await t((0,s.hx)(e.id))}catch(e){return(0,p._f)(e,t,n),t((0,h.H)(e)),{error:e}}(0,f.Zk)(a)&&t((0,E.A3)());const o=(0,i.lJ)(a),c=(0,C.NT)(a);if(o&&"true"===o.IsLicensed&&("true"===o.LDAPGroups||c)){const n={filter_allow_reference:!1,page:0,per_page:60,include_member_count:!0,include_member_ids:!0,include_archived:!1},a=M(M({},n),{},{filter_has_member:r.id});r&&t((0,m.EJ)(a)),"true"===o.LDAPGroups&&t((0,m.UL)(e.id,!0)),e.group_constrained&&"true"===o.LDAPGroups?t((0,m.K9)(e.id,!0)):t((0,m.jA)(n))}return{data:e}}}var T=n(16145),N=n(85939),I=n.n(N),P=(n(14078),n(69217),n(95623),n(61514),n(78737)),L=n.n(P),R=n(84390),A=n.n(R),O=n(9448),k=n(51991),D=n(27795),x=n(23615),F=n.n(x),B=n(60042),U=n.n(B),H=n(22579),q=n(26742),j=n(23712),Z=n(21214),V=n(36891),G=n(31435),W=n(60693),z=n(21349),K=n(61057),J=(n(48410),n(45387)),Y=n(63701);const Q=()=>{const{tabs:e,activeTabIndex:t}=(0,a.useSelector)((e=>e.urlManager)),n=(0,a.useDispatch)(),s=(0,a.useSelector)((e=>e)).tabs.length;return A().createElement("div",{className:"tabs-wrapper"},e.map(((e,a)=>A().createElement("div",{key:e.id,className:t===a?"active-browser custom-tabs":"custom-tabs"},A().createElement("button",{style:{width:"80%",textAlign:"left",overflow:"hidden"},onClick:()=>n((0,J.pV)(a))},e.url?e.url:"New Tab"),A().createElement("button",{style:{width:"20%"},onClick:()=>n((0,J.Qq)(a))},"x")))),A().createElement(Y.PqE,{onClick:()=>n((0,J.Sq)(s)),className:"icon"}))},X=()=>{(0,a.useDispatch)();const{urls:e,activeTabIndex:t,isBrowserTabActive:n}=(0,a.useSelector)((e=>e.urlManager));return A().createElement("div",{className:"browser-header"},A().createElement(Q,null))};var $=n(25699),ee=n(40412),te=n(29780),ne=n(70411);const ae=()=>A().createElement("div",{className:"browser-search-section"},A().createElement($.pgl,{className:"icon"}),A().createElement($.QSP,{className:"icon"}),A().createElement(ee.e8N,{className:"refresh-icon"}),A().createElement("div",{className:"search-bar"},A().createElement(ne.t8M,{className:"lock-icon"}),A().createElement("input",{className:"input-field",type:"text",defaultValue:"www.infogito.com"})),A().createElement(te.Bbf,{className:"hamburg-icon"})),se=e=>{let{url:t}=e;return A().createElement("div",{className:"iframe-container"},A().createElement("iframe",{src:t,width:"100%",height:"100%",title:"URL Iframe - ".concat(t),sandbox:"allow-scripts allow-same-origin allow-popups allow-forms",style:{border:"none"}}))};se.propTypes={url:F().string.isRequired};const re=se;var ie=n(53505),oe=n.n(ie),le=n(26128);const ce=n.p+"files/d6a54ff71a0eb6968e30.png";var de=n(14965);const ue=()=>{const[e,t]=(0,R.useState)(""),n=(0,a.useDispatch)(),{activeTabIndex:s}=(0,a.useSelector)((e=>e.urlManager));return A().createElement("div",{id:"BrowserBody",className:"BrowserBody"},A().createElement("img",{className:"background",src:ce,loading:"lazy"}),A().createElement("div",{className:"BrowserBody__content"},A().createElement("div",{className:"searchbar"},A().createElement("i",{className:"icon icon-magnify"}),A().createElement("form",{className:"form-input",onSubmit:a=>{a.preventDefault(),e&&(n((0,J.KL)(s,e)),t(""))}},A().createElement("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"Search google or type a URL",required:!0})),A().createElement("i",{className:"icon icon-microphone"}),A().createElement(oe(),{className:"icon",color:"black"})),A().createElement("img",{className:"logo",src:le}),A().createElement("img",{className:"robot",src:de})))},he=()=>{const{tabs:e,activeTabIndex:t}=(0,a.useSelector)((e=>e.urlManager));return A().createElement("div",{className:"tab-content-browser"},e.map(((e,n)=>A().createElement("div",{key:n,style:{display:t===n?"flex":"none",width:"100%",height:"100%"}},e.url?A().createElement(re,{url:e.url}):A().createElement(ue,null)))))},me=()=>{const{urls:e,activeTabIndex:t,isBrowserTabActive:n}=(0,a.useSelector)((e=>e.urlManager));return A().createElement("div",{style:{marginLeft:"-1px",display:"flex",flexDirection:"column",height:"100%"}},A().createElement(X,null),A().createElement(ae,null),A().createElement(he,null))};n(82759),n(40895),n(911);var pe=n(80139),ge=n(33115),fe=n(20827),Ce=n(68679),Ee=n(83514),be=n(70174);const ve=new RegExp("^[a-zA-Z0-9]{".concat(26,"}__[a-zA-Z0-9]{").concat(26,"}$"));function ye(e){let{match:t,history:n}=e;return async(e,a)=>{const i=a(),{path:c,identifier:d,team:u}=t.params;if(!d)return{data:void 0};const h=(0,o.Xv)(i,u);if(!h)return{data:void 0};const m=await async function(e,t,n){if("channels"===t){const t=(0,r.ZO)(e,n),a=(0,r.Gc)(e).find((e=>e.name===n));if(26===n.length){if(!t&&!a)try{return await pe.je.getChannel(n),"channel_id"}catch(e){return 404===e.status_code?"channel_name":"error"}return"channel_name"}return!t&&!a&&40===n.length||t&&t.type===j.Constants.GM_CHANNEL||a&&a.type===j.Constants.GM_CHANNEL?"group_channel_group_id":function(e){return 54===e.length&&ve.test(e)}(n)?"direct_channel_user_ids":"channel_name"}return"messages"===t?0===n.indexOf("@")?"direct_channel_username":n.indexOf("@")>0?"direct_channel_email":26===n.length?"direct_channel_user_id":40===n.length?"group_channel_group_id":"error":"error"}(i,c,d);switch(m){case"channel_name":e(function(e,t){return async(n,a)=>{const i=a(),{team:c,identifier:d}=e.params,u=d.toLowerCase(),h=(0,o.Xv)(i,c);if(!h)return{data:void 0};let m,p=(0,r.iC)(i,h.id)[u];if(!p){const e=await n((0,s.Ft)(c,u,!0));"data"in e&&(p=e.data)}if(p&&(m=i.entities.channels.myMembers[p.id],!m)){const e=await n((0,s.hg)(p.id,(0,l.rc)(i)));"data"in e&&(m=e.data)}if(!p||!m){const o=(0,l.ts)(a());var g;if(ge.$O(null==o?void 0:o.roles)&&(null===(g=p)||void 0===g?void 0:g.type)===j.Constants.PRIVATE_CHANNEL){const e=await n((0,Ee.Jf)(h,p.display_name));if("data"in e&&!e.data.join)return{data:void 0}}const d=await n((0,s.JJ)((0,l.rc)(i),h.id,"",u));if("error"in d){if(!p){const a=await n((0,s.Ft)(c,u,!0));if("error"in a||0===a.data.delete_at)return await n((0,s.hx)(h.id)),Te(e,t,(0,r.fG)(i,h.id)),{data:void 0};p=a.data}}else p=d.data.channel}return p.type===j.Constants.DM_CHANNEL?n(Me(e,t)):p.type===j.Constants.GM_CHANNEL?t.replace("/".concat(c,"/messages/").concat(p.name)):we(p),{data:void 0}}}(t,n));break;case"channel_id":e(function(e,t){return async(n,a)=>{const i=a(),{team:c,identifier:d}=e.params,u=d.toLowerCase();let h=(0,r.mr)(i,u);const m=i.entities.channels.myMembers[u],p=(0,o.Xv)(i,c);if(!h||!m){const a=await n((0,s.JJ)((0,l.rc)(i),p.id,u,""));if("error"in a)return await n((0,s.hx)(p.id)),Te(e,t,(0,r.fG)(i,p.id)),{data:void 0};h=a.data.channel}return h.type===j.Constants.DM_CHANNEL?n(_e(e,t,be.uD(h.name,(0,l.rc)(i)))):h.type===j.Constants.GM_CHANNEL?t.replace("/".concat(c,"/messages/").concat(h.name)):t.replace("/".concat(c,"/channels/").concat(h.name)),{data:void 0}}}(t,n));break;case"group_channel_group_id":e(function(e,t){return async(n,a)=>{const i=a(),{identifier:c,team:d}=e.params,u=c.toLowerCase();t.replace(e.url.replace("/channels/","/messages/"));let h=(0,r.ZO)(i,u);const m=(0,o.Xv)(i,d);if(!h){const a=await n((0,s.JJ)((0,l.rc)(i),m.id,"",u));if("error"in a)return await n((0,s.hx)(m.id)),Se(e,t,(0,r.fG)(i,m.id)),{data:void 0};h=a.data.channel}return n((0,s.xO)(h.id)),we(h),{data:void 0}}}(t,n));break;case"direct_channel_username":e(function(e,t){return async(n,a)=>{const i=a(),{team:c,identifier:d}=e.params,u=d.slice(1,d.length).toLowerCase(),h=(0,o.Xv)(i,c);let m=(0,l.dQ)(i,u);if(!m){const a=await n((0,G.dQ)(u));if("error"in a)return await n((0,s.hx)(h.id)),Se(e,t,(0,r.fG)(i,h.id)),{data:void 0};m=a.data}const p=await n((0,fe.Pn)(m.id));return"error"in p?(await n((0,s.hx)(h.id)),Se(e,t,(0,r.fG)(i,h.id)),{data:void 0}):(we(p.data),{data:void 0})}}(t,n));break;case"direct_channel_email":e(function(e,t){return async(n,a)=>{const i=a(),{team:c,identifier:d}=e.params,u=d.toLowerCase(),h=(0,o.Xv)(i,c);let m=(0,l.CX)(i,u);if(!m){const a=await n((0,G.CX)(u));if("error"in a)return await n((0,s.hx)(h.id)),Se(e,t,(0,r.fG)(i,h.id)),{data:void 0};m=a.data}return t.replace("/".concat(c,"/messages/@").concat(m.username)),{data:void 0}}}(t,n));break;case"direct_channel_user_ids":e(Me(t,n));break;case"direct_channel_user_id":e(_e(t,n,d));break;case"error":await e((0,s.hx)(h.id)),Se(t,n,(0,r.fG)(i,h.id))}return{data:void 0}}}function _e(e,t,n){return async(a,i)=>{const c=i(),{team:d}=e.params,u=(0,o.Xv)(c,d);let h=(0,l.PR)(c,n);if(!h){const i=await a((0,G.PR)(n));if("error"in i)return await a((0,s.hx)(u.id)),Se(e,t,(0,r.fG)(c,u.id)),{data:void 0};h=i.data}return t.replace("/".concat(d,"/messages/@").concat(h.username)),{data:void 0}}}function Me(e,t){return async(n,a)=>{const i=a(),{team:c,identifier:d}=e.params,u=be.uD(d.toLowerCase(),(0,l.rc)(a())),h=(0,o.Xv)(i,c);let m=(0,l.PR)(i,u);if(!m){const a=await n((0,G.PR)(u));if("error"in a)return await n((0,s.hx)(h.id)),Se(e,t,(0,r.fG)(i,h.id)),{data:void 0};m=a.data}return t.replace("/".concat(c,"/messages/@").concat(m.username)),{data:void 0}}}function we(e){Ce.Gx(e)}function Se(e,t,n){const{team:a}=e.params;t.push(a?"/".concat(a,"/channels/").concat(n):"/")}async function Te(e,t,n){const{team:a}=e.params;t.push(a?"/error?type=channel_not_found&returnTo=/".concat(a,"/channels/").concat(n):"/")}var Ne=n(92447),Ie=n(4411),Pe=n(72060),Le=n(95423),Re=n(2664),Ae=n(25598),Oe=n(97042),ke=n(3901),De=n(65370),xe=n(46155),Fe=n(22589),Be=n(28176),Ue=n(32388),He=n(23295),qe=n(61249),je=n(20242),Ze=n(80947),Ve=n(16960),Ge=n(95894),We=n(27103),ze=n(45448),Ke=n(32397),Je=n(44906),Ye=n(92287),Qe=n(66815);const Xe=864e5;function $e(e){var t;const n=(0,Pe.useIntl)(),s=(0,Ye.Z)(),r=(0,ge.GJ)((0,a.useSelector)(l.ts).roles),[i,c]=(0,Ke.Z)(),d=(0,a.useSelector)(o.kA),u=(0,a.useSelector)((t=>(0,ke.o5)(t,e.channelId||"")))||function(e){return void 0===e?0:e+Xe}(e.firstInaccessiblePostTime),[h,m,p]=(0,Qe.a)({ctaText:n.formatMessage({id:"workspace_limits.message_history.locked.cta.end_user",defaultMessage:"Notify Admin"})},{required_feature:j.xk.UNLIMITED_MESSAGES,required_plan:j.lP.Professional,trial_notification:!1});if(!c)return null;const g={month:"long",day:"numeric"};Date.now()-u>=31536e6&&(g.year="numeric");const f={date:n.formatDate(u,g),team:null==d?void 0:d.display_name},C=n.formatNumber((null==i||null===(t=i.messages)||void 0===t?void 0:t.history)||0);let E=n.formatMessage({id:"workspace_limits.message_history.locked.title.end_user",defaultMessage:"Notify your admin to unlock messages prior to {date} in {team}"},f),b=n.formatMessage({id:"workspace_limits.message_history.locked.description.end_user",defaultMessage:"Some older messages may not be shown because your workspace has over {limit} messages. Select Notify Admin to send an automatic request to your System Admins to upgrade."},{limit:C}),v=A().createElement("button",{className:"btn btn-primary",onClick:e=>m(e,"center_channel_posts_over_limit_banner"),disabled:p===Je.VF.AlreadyComplete},h);return r&&(E=n.formatMessage({id:"workspace_limits.message_history.locked.title.admin",defaultMessage:"Unlock messages prior to {date} in {team}"},f),b=n.formatMessage({id:"workspace_limits.message_history.locked.description.admin",defaultMessage:"To view and search all of the messages in your workspace’s history, rather than just the most recent {limit} messages, upgrade to one of our paid plans. <a>Review our plan options and pricing.</a>"},{limit:C,a:e=>A().createElement("a",{href:"#",onClick:e=>{e.preventDefault(),s({trackingLocation:"center_channel_posts_over_limit_banner"})}},e)}),v=A().createElement("button",{className:"btn is-admin",onClick:()=>s({trackingLocation:"center_channel_posts_over_limit_banner"})},n.formatMessage({id:"workspace_limits.message_history.locked.cta.admin",defaultMessage:"Upgrade now"}))),A().createElement("div",{className:"CenterMessageLock"},A().createElement("div",{className:"CenterMessageLock__left"},A().createElement(ze.EyeOffOutlineIcon,{color:"rgba(var(--center-channel-color-rgb), 0.75)"})),A().createElement("div",{className:"CenterMessageLock__right"},A().createElement("div",{className:"CenterMessageLock__title"},E),A().createElement("div",{className:"CenterMessageLock__description"},b),A().createElement("div",{className:"CenterMessageLock__cta"},v)))}$e.propTypes={channelId:F().string,firstInaccessiblePostTime:F().number};var et=n(86237),tt=n(1983),nt=n(71938),at=n(39875),st=n(41155),rt=n(91213);const it=e=>{var t,n;return R.createElement("svg",Object.assign({width:null!==(t=e.width)&&void 0!==t?t:"151",height:null!==(n=e.height)&&void 0!==n?n:"149",viewBox:"0 0 220 218",fill:"none",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},e),R.createElement("path",{d:"M198.504 122.404a70.65 70.65 0 0 0 21.494-50.184A70.65 70.65 0 0 0 199.311 21.7a70.65 70.65 0 0 0-100.702.789L-33 154.084 66.913 254l131.591-131.596Z",fill:"url(#b)",fillOpacity:.12}),R.createElement("ellipse",{cx:90.15,cy:214.903,rx:37.683,ry:1.903,fill:"#000",fillOpacity:.12}),R.createElement("path",{d:"m77.95 52.356.4-11.97-.91-4.74c1.665-4.31 4.111-4.008 5.611-4.145 3.42-.31 5.702-2.196 7.275-.53.855.997 1.818 5.07 1.973 8.235.109 1.675.691 3.102-.546 3.944-.852.468-1.744.86-2.664 1.172l.455 8.959-11.594-.925Z",fill:"#AD831F"}),R.createElement("path",{d:"M91.244 35.418a17.311 17.311 0 0 1 3.083 2.745c.282 1.254-3.146 1.894-3.146 1.894l.063-4.64Z",fill:"#AD831F"}),R.createElement("path",{d:"M85.452 44.797a7.792 7.792 0 0 0 3.583-.448c.427-.174-.791.604-1.228.76a3.5 3.5 0 0 1-1.819.384c-.436-.073-1-.732-.536-.696Z",fill:"#7A5600"}),R.createElement("path",{d:"M94.936 29.543a1.57 1.57 0 0 0-.767-.82 1.555 1.555 0 0 0-1.115-.095c-3.228.54-2.62-2.288-7.375-1.483-3.31.559-6.801 0-9.73 1.693a6.266 6.266 0 0 0-2.873 2.874 2.982 2.982 0 0 0-.166 2.009c.18.668.586 1.252 1.148 1.651.2.119.437.22.537.43a.92.92 0 0 1-.055.659c-.409 1.235-.773 2.745.146 3.66.509.513 1.364.75 1.564 1.446.109.385 0 .796.045 1.2.191 1.06 1.819 1.234 2.592.484a4.594 4.594 0 0 0 1.01-3.02c.08-.96.108-2.068-.601-2.745-.327-.311-.791-.494-.964-.915a1.252 1.252 0 0 1 .518-1.373 2.51 2.51 0 0 1 3.692.915c.264.604.346 1.4.91 1.693.736.366 1.573-.457 1.673-1.272a14.106 14.106 0 0 0-.246-2.452c0-.824.418-1.83 1.237-1.83.27.014.537.07.79.164 1.607.456 3.301.5 4.93.129a5.04 5.04 0 0 0 2.236-.916 2.186 2.186 0 0 0 .864-2.086Z",fill:"#4A2407"}),R.createElement("path",{d:"m88.698 34.65.046-.092c-2.428-.22-5.456-.412-7.53-.385-2.073.028-3.028.32-4.11 2.197-.181.32.346.549.537.228a2.998 2.998 0 0 1 1.02-1.28 2.97 2.97 0 0 1 1.535-.55c1.055-.082 2.146 0 3.192 0 1.336 0 3.41.192 5.137.357.055-.165.11-.32.173-.476Z",fill:"var(--center-channel-bg)"}),R.createElement("path",{d:"M89.016 36.434a1.765 1.765 0 0 1-.681-1.767c.127-.96.836-1.656 1.573-1.555.395.113.731.377.937.736.205.359.264.784.163 1.185-.127.916-.837 1.657-1.573 1.556a1.014 1.014 0 0 1-.419-.155Zm1.092-2.746a.535.535 0 0 0-.255-.091c-.5-.073-.982.448-1.082 1.162-.1.714.227 1.354.727 1.428.5.073.973-.458 1.073-1.172a1.335 1.335 0 0 0-.463-1.363v.036Z",fill:"var(--center-channel-bg)"}),R.createElement("path",{d:"M84.543 51.578c23.642.183 23.578-2.05 25.951 26.017 2.373 28.066 2.41 29.081-20.968 30.628-15.586 1.034-24.788 7.321-25.597-1.3-.819-8.784-1.337-8.528-2.728-23.453-3.155-33.026-2.619-32.093 23.342-31.892Z",fill:"#AD831F"}),R.createElement("path",{d:"M95.163 72.324c6.747 7.705 21.987 13.662 33.763 13.662 1.682.01 3.357-.205 4.983-.64a16.561 16.561 0 0 0 2.9-1.09c9.694-4.767 12.576-19.482 14.686-24.533 2.6-6.214-.1-2.352 1.655-5.902.627-1.273 2.173-2.096 2.673-2.746.718-.915-.655-2.15-5.838 1.382-8.184 5.49-7.274 16.554-15.331 17.716a12.045 12.045 0 0 1-3.046 0 19.195 19.195 0 0 1-2.682-.485c-14.376-3.569-15.595-17.24-29.743-17.798 0-.037-10.776 12.674-4.02 20.434ZM21.246 62.047c-.273.769.91 4.576 1.228 8.062.782 8.4 3.346 21.294 15.258 26.218a14 14 0 0 0 4.737 1.006 16.815 16.815 0 0 0 3.092-.146c7.274-.915 15.267-6.25 19.232-14.569 5.455-11.484 7.674-30.966 7.674-30.966-5.256 0-18.186-1.016-22.887 19.885a11.266 11.266 0 0 1-1.9 4.522 11.18 11.18 0 0 1-3.638 3.274c-.9.479-1.88.789-2.891.915a7.63 7.63 0 0 1-4.038-.578 7.685 7.685 0 0 1-3.173-2.579c-7.056-9.507-7.93-19.738-13.012-20.745-5.083-1.006 1.646 1.958.318 5.701Z",fill:"#AD831F"}),R.createElement("path",{d:"M99.182 51.853c14.149.558 15.368 14.23 29.744 17.799 1.5.4 3.048.591 4.601.567.664 4.878 1.145 9.782 1.609 14.696-1.996.7-4.097 1.05-6.21 1.034-11.776 0-27.016-5.957-33.763-13.671-6.747-7.714 4.02-20.425 4.02-20.425ZM42.824 79.855c3.037-1.034 5.765-3.853 6.756-8.318 4.665-20.901 17.631-19.895 22.878-19.885 0 0-2.192 19.482-7.665 30.967-4.42 9.26-13.786 14.778-21.697 14.724a59.965 59.965 0 0 0-.272-17.488Z",fill:"#1E325C"}),R.createElement("path",{d:"M111.549 93.938c13.785 40.667 14.622 57.368 13.339 71.378-1.282 14.01-11.439 28.423-24.687 38.974-2.792 1.995-6.283 3.404-4.074 8.84 3.21 7.906-5.237-2.48-7.347-7.651-2.11-5.17 20.259-14.165 15.094-41.774-5.164-27.608-19.022-38.901-27.688-58.438s35.363-11.329 35.363-11.329Z",fill:"var(--button-bg)"}),R.createElement("path",{d:"M111.549 93.938c13.785 40.667 14.622 57.368 13.339 71.378-1.282 14.01-11.439 28.423-24.687 38.974-2.792 1.995-6.283 3.404-4.074 8.84 3.21 7.906-5.237-2.48-7.347-7.651-2.11-5.17 20.259-14.165 15.094-41.774-5.164-27.608-19.022-38.901-27.688-58.438s35.363-11.329 35.363-11.329Z",fill:"#000",fillOpacity:.16}),R.createElement("path",{d:"M93.827 126.818c1.218 2.333 2.618 4.831 4.092 7.412l-.5.412c-1.537-2.746-3.001-5.363-4.12-7.513-.182-.348.337-.659.528-.311ZM101.337 192.997c-.909 1.016-1.818 2.023-2.682 3.029l-.382-.421c.91-.979 1.764-1.967 2.628-2.964l.436.356Z",fill:"#1E325C"}),R.createElement("path",{d:"M95.454 96.647c1.674 45.572-2.664 66.537-22.278 81.279-19.613 14.742-34.817 15.273-35.408 22.703-.59 7.431-2.364 5.729-3.055-1.894-.91-10.35-5.201-2.663 17.595-20.361s12.03-64.331 10.912-78.149c-1.119-13.818 32.234-3.578 32.234-3.578Z",fill:"var(--button-bg)"}),R.createElement("path",{d:"M37.486 193.043c11.44-5.673 23.333-11.997 28.643-24.387 5.91-13.791 3.392-29.283 3.019-43.76-.218-8.73 0-17.469.564-26.181 0-.394.636-.394.609 0-.482 8.007-.737 16.023-.6 24.049.136 8.025.91 16.051.91 24.094-.046 6.964-.801 14.029-3.302 20.572a36.272 36.272 0 0 1-11.075 15.172c-5.556 4.575-12.02 7.806-18.413 10.981-.4.165-.71-.366-.355-.54ZM105.184 188.276a64.163 64.163 0 0 1-1.173 1.519 49.519 49.519 0 0 1-1.819 2.159l-.436-.348a66.933 66.933 0 0 0 2.864-3.578l.564.248ZM108.185 183.627a41.36 41.36 0 0 1-2.21 3.514l-.527-.238c.772-1.116 1.5-2.26 2.164-3.45l.573.174ZM109.885 178.31l.591.147a27.344 27.344 0 0 1-1.609 3.925l-.582-.174c.372-.759.736-1.528 1.045-2.333.21-.485.382-1.043.555-1.565ZM111.567 166.661a35.5 35.5 0 0 1 .173 3.66l-.6-.064a34.013 34.013 0 0 0-.182-3.596h.609ZM110.367 160.173c.127.476.245.915.354 1.4.291 1.235.519 2.498.691 3.761h-.618a43.044 43.044 0 0 0-1.027-4.978l.6-.183ZM108.794 155.396a55.344 55.344 0 0 1 1.191 3.413l-.6.211a56.088 56.088 0 0 0-1.155-3.413l.564-.211ZM106.503 150.107c.636 1.345 1.236 2.69 1.818 4.026l-.545.211a62.06 62.06 0 0 0-1.774-4.045l.501-.192ZM100.783 139.254a233.79 233.79 0 0 1 2.537 4.575l-.509.375c-.801-1.445-1.665-2.983-2.556-4.575l.528-.375ZM98.61 135.465c.49.861.99 1.73 1.491 2.617l-.519.394a375.76 375.76 0 0 1-1.473-2.599l.5-.412ZM103.966 145.046a117.118 117.118 0 0 1 1.936 3.798l-.536.192a68.798 68.798 0 0 0-.828-1.629 753.93 753.93 0 0 0-1.063-1.995l.491-.366ZM111.685 171.721a27.304 27.304 0 0 1-.827 5.409l-.591-.138c.451-1.746.725-3.533.818-5.335l.6.064ZM97.746 197.06c-.691.787-1.382 1.565-2.055 2.371a9.449 9.449 0 0 0-.419-.431 128.89 128.89 0 0 1 2.083-2.361c.127.138.263.275.39.421ZM94.381 200.053l.428.439a65.667 65.667 0 0 0-2.2 2.791c-.228.311-.755 0-.528-.311.736-.997 1.555-1.958 2.3-2.919Z",fill:"#1E325C"}),R.createElement("path",{d:"M77.996 51.533a5.046 5.046 0 0 0 2.482 2.114c3.737 1.546 8.493 1.546 10.584-2.05 17.186 0 17.341.768 19.469 25.998 1.072 12.683 1.664 19.839-.155 24.021-9.484 4.127-20.387 5.491-30.325 7.431a276.323 276.323 0 0 1-13.03 2.187c-1.765-.43-2.81-1.666-3.056-4.31-.818-8.785-1.337-8.53-2.728-23.454-2.9-29.96-2.728-31.974 16.759-31.937Z",fill:"#fff"}),R.createElement("path",{d:"M77.996 51.533a5.046 5.046 0 0 0 2.482 2.114c3.737 1.546 8.493 1.546 10.584-2.05 17.186 0 17.341.768 19.469 25.998 1.072 12.683 1.664 19.839-.155 24.021-9.484 4.127-20.387 5.491-30.325 7.431a276.323 276.323 0 0 1-13.03 2.187c-1.765-.43-2.81-1.666-3.056-4.31-.818-8.785-1.337-8.53-2.728-23.454-2.9-29.96-2.728-31.974 16.759-31.937Z",fill:"var(--center-channel-color)",fillOpacity:.08}),R.createElement("path",{d:"M101.101 99.621a68.896 68.896 0 0 1-6.083-15.264 185.738 185.738 0 0 1-4.965-32.77c18.186 0 20.005-.667 22.214 25.047.11 1.244-1.327 3.477-.909 4.75 3.519 9.937 16.122 20.131 15.086 22.419-1.446 3.276-6.966 6.772-13.913 9.517a59.502 59.502 0 0 1-5.547 1.135 88.873 88.873 0 0 0-5.883-14.834ZM61.056 101.918c-.519 6.085-1.2 11.292-.773 15.95 3.991-.668 8.001-1.089 12.03-1.373a85.83 85.83 0 0 0 7.801-29.438c.528-6.086 2.155-29.457 1.755-32.944-.254-2.342-3.155-.366-3.746-2.599-19.605 0-21.705 1.464-18.832 31.489.137 1.5 2.146 3.404 2.21 4.822.164 4.703.015 9.41-.445 14.093Z",fill:"#1E325C"}),R.createElement("path",{d:"M91.308 50.416c1.346 1.09 1.1.787.182 2.498-.919 1.712-1.382 3.258-2.137 1.181-.755-2.077-.855-1.748.127-2.983.982-1.236 1.146-1.254 1.828-.696ZM80.05 50.764c3.047 1.345 1.928 1.034 2.51 3.056 1.264 4.347-.5 2.041-4.82-.466-2.936-1.712-2.59-1.977-1.563-3.02s.718-.998 3.71.43c2.991 1.427-2.892-1.318.163 0ZM41.187 80.431a45.816 45.816 0 0 1 1.282 16.902 16.823 16.823 0 0 0 3.092-.146 49.5 49.5 0 0 0-1.419-17.57 1.061 1.061 0 0 0-.1-.284 8.382 8.382 0 0 1-2.891.915c.008.062.02.123.036.183ZM131.608 70.137a185.107 185.107 0 0 0 2.301 15.172 16.609 16.609 0 0 0 2.901-1.089 175.18 175.18 0 0 1-2.155-14.093 12.048 12.048 0 0 1-3.047.01Z",fill:"var(--button-bg)"}),R.createElement("path",{d:"M96.418 207.209c-1.046 1.299-1.446 3.038-.291 5.875 3.21 7.906-5.238-2.48-7.347-7.65-.519-1.282.454-2.791 2.136-4.759 1.883 2.141 3.701 4.338 5.502 6.534ZM37.35 189.227c.127.311.254.613.372.915.91 2.068 1.728 4.137 2.637 6.186a5.968 5.968 0 0 0-1.786 1.858 6.013 6.013 0 0 0-.841 2.443c-.582 7.422-2.365 5.729-3.056-1.894-.627-6.891-2.719-5.792 2.674-9.508Z",fill:"#1E325C"}),R.createElement("path",{d:"M5.54 14.596h38.906a5.439 5.439 0 0 1 3.844 1.574 5.416 5.416 0 0 1 1.604 3.825V44.67a5.41 5.41 0 0 1-1.604 3.826 5.43 5.43 0 0 1-3.844 1.573h-5.742v9.237l-8.612-9.236H5.554a5.439 5.439 0 0 1-3.844-1.574A5.418 5.418 0 0 1 .106 44.67V19.995a5.412 5.412 0 0 1 1.599-3.82 5.435 5.435 0 0 1 3.835-1.58Z",fill:"var(--button-bg)"}),R.createElement("path",{d:"M30.092 50.07H5.554a5.439 5.439 0 0 1-3.845-1.575A5.417 5.417 0 0 1 .106 44.67V29.69S1.82 43.542 2.127 44.761c.308 1.22.919 3.044 3.813 3.347 2.894.302 24.152 1.962 24.152 1.962Z",fill:"#000",fillOpacity:.16}),R.createElement("path",{d:"M38.282 28.805a3.51 3.51 0 0 0-3.238 2.16 3.49 3.49 0 0 0 .76 3.81 3.508 3.508 0 0 0 5.982-2.472 3.487 3.487 0 0 0-2.162-3.233 3.506 3.506 0 0 0-1.342-.265ZM24.993 28.805a3.51 3.51 0 0 0-3.238 2.16 3.49 3.49 0 0 0 .76 3.81 3.508 3.508 0 0 0 5.983-2.472 3.487 3.487 0 0 0-2.163-3.233 3.506 3.506 0 0 0-1.342-.265ZM11.718 28.805a3.51 3.51 0 0 0-3.24 2.156 3.49 3.49 0 0 0 .756 3.813 3.507 3.507 0 0 0 5.985-2.471 3.487 3.487 0 0 0-2.16-3.231 3.507 3.507 0 0 0-1.34-.267Z",fill:"var(--center-channel-bg)"}),R.createElement("path",{d:"M45.856 24.928a10.99 10.99 0 0 0-5.26-6.628.38.38 0 0 1 .157-.72c2.453-.147 7.404.376 5.852 7.311a.385.385 0 0 1-.602.241.385.385 0 0 1-.147-.204Z",fill:"#fff",fillOpacity:.16}),R.createElement("path",{d:"M146.892 70.45h56.197a7.926 7.926 0 0 1 3.003.58 7.85 7.85 0 0 1 2.55 1.671 7.75 7.75 0 0 1 1.708 2.509c.398.939.604 1.946.608 2.964v35.298a7.67 7.67 0 0 1-.608 2.964 7.748 7.748 0 0 1-1.708 2.509 7.868 7.868 0 0 1-2.55 1.672 7.941 7.941 0 0 1-3.003.58h-8.294v13.213l-12.44-13.213h-35.443a7.879 7.879 0 0 1-5.554-2.252 7.748 7.748 0 0 1-1.708-2.509 7.65 7.65 0 0 1-.607-2.964V78.174a7.706 7.706 0 0 1 2.308-5.466 7.892 7.892 0 0 1 5.541-2.258Z",fill:"#FFBC1F"}),R.createElement("path",{d:"M182.355 121.197h-35.443a7.879 7.879 0 0 1-5.554-2.252 7.748 7.748 0 0 1-1.708-2.509 7.65 7.65 0 0 1-.607-2.964v-21.43s2.474 19.817 2.919 21.561c.445 1.744 1.327 4.354 5.507 4.787 4.18.433 34.886 2.807 34.886 2.807Z",fill:"#CC8F00"}),R.createElement("path",{d:"M194.185 90.777c-1.001 0-1.98.293-2.813.843a5.018 5.018 0 0 0-1.864 2.246 4.953 4.953 0 0 0-.288 2.89c.195.97.677 1.862 1.385 2.562a5.08 5.08 0 0 0 2.592 1.369c.982.193 2 .094 2.925-.284a5.052 5.052 0 0 0 2.272-1.843 4.964 4.964 0 0 0-.627-6.32 5.104 5.104 0 0 0-3.582-1.463ZM174.99 90.777c-1.002 0-1.98.293-2.813.843a5.018 5.018 0 0 0-1.864 2.246 4.937 4.937 0 0 0-.288 2.89c.195.97.677 1.862 1.385 2.562a5.08 5.08 0 0 0 2.592 1.369c.982.193 2 .094 2.925-.284a5.052 5.052 0 0 0 2.272-1.843 4.964 4.964 0 0 0-.628-6.32 5.05 5.05 0 0 0-1.643-1.084 5.108 5.108 0 0 0-1.938-.379ZM155.816 90.777a5.102 5.102 0 0 0-2.814.84 5.013 5.013 0 0 0-1.868 2.244 4.955 4.955 0 0 0 1.093 5.455 5.11 5.11 0 0 0 5.518 1.087 5.05 5.05 0 0 0 2.273-1.842 4.959 4.959 0 0 0-.625-6.318 5.052 5.052 0 0 0-1.641-1.085 5.11 5.11 0 0 0-1.936-.38Z",fill:"var(--center-channel-bg)"}),R.createElement("path",{d:"M205.125 85.23a15.668 15.668 0 0 0-2.84-5.491 15.868 15.868 0 0 0-4.756-3.991.545.545 0 0 1-.29-.601.545.545 0 0 1 .515-.429c3.543-.21 10.695.538 8.453 10.46a.553.553 0 0 1-.52.445.563.563 0 0 1-.562-.393Z",fill:"#FFD470"}),R.createElement("defs",null,R.createElement("linearGradient",{id:"b",x1:93.5,y1:1,x2:-66.697,y2:161.197,gradientUnits:"userSpaceOnUse"},R.createElement("stop",{offset:.01,stopColor:"var(--button-bg)"}),R.createElement("stop",{offset:.766,stopColor:"var(--button-bg)",stopOpacity:0}))))};it.propTypes={width:F().number,height:F().number};const ot=it,lt=e=>{var t,n;return A().createElement("svg",{width:null!==(t=e.width)&&void 0!==t?t:"151",height:null!==(n=e.height)&&void 0!==n?n:"149",viewBox:"0 0 220 218",fill:"none",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},A().createElement("path",{d:"M198.504 121.404C205.236 114.883 210.603 107.088 214.293 98.4721C217.984 89.8565 219.923 80.5927 219.998 71.2204C220.073 61.848 218.283 52.5543 214.731 43.8807C211.18 35.207 205.938 27.3266 199.311 20.6985C192.685 14.0705 184.805 8.82714 176.133 5.27394C167.46 1.72074 158.167 -0.0713105 148.795 0.00213777C139.423 0.0755861 130.159 2.01307 121.543 5.70176C112.927 9.39045 105.131 14.7566 98.6093 21.4877L-33 153.084L66.9127 253L198.504 121.404Z",fill:"url(#paint0_linear_522_36531)",fillOpacity:"0.12"}),A().createElement("path",{d:"M110.977 59.1699C107.992 64.1563 98.3678 60.1672 96.5466 69.6413C100.09 69.6413 113.157 71.4462 113.157 71.4462L110.977 59.1699Z",fill:"#4A2407"}),A().createElement("path",{d:"M96.1184 108.824C91.9085 116.313 57.7621 131.093 65.9031 169.199C71.6655 196.195 84.8125 206.966 81.5382 211.474C79.1098 214.765 77.199 218.773 82.9713 214.036C89.938 208.342 92.4161 212.122 87.8978 198.399C83.5884 185.335 79.7966 150.53 101.323 138.184C122.85 125.838 129.877 119.664 119.238 104.506C115.346 98.941 96.1184 108.824 96.1184 108.824Z",fill:"#AD831F"}),A().createElement("path",{d:"M78.9806 202.139C79.6972 201.94 85.788 200.005 88.097 199.028C92.3367 211.992 89.8088 208.432 82.9715 214.037C77.1992 218.774 79.11 214.765 81.5384 211.474C82.8521 209.639 81.4986 206.747 78.9806 202.139Z",fill:"var(--button-bg)"}),A().createElement("path",{d:"M120.83 70.6089L121.377 59.5291L122.86 55.4404C121.945 51.3715 119.586 49.4566 118.262 49.0976C115.277 48.3596 113.585 48.2399 111.953 49.5164C111.057 50.2843 109.674 53.7948 109.076 56.5472C108.758 58.0332 108.081 59.22 109.076 60.1375C109.758 60.6741 110.48 61.1575 111.236 61.5835L111.395 68.5645L120.83 70.6089Z",fill:"#AD831F"}),A().createElement("path",{d:"M110.977 52.3286C110.007 52.803 109.1 53.3996 108.28 54.1037C107.942 55.101 110.559 56.0983 110.559 56.0983L110.977 52.3286Z",fill:"#AD831F"}),A().createElement("path",{d:"M114.421 62.5006C113.318 62.45 112.242 62.1464 111.276 61.6132C110.927 61.3938 111.913 62.2613 112.271 62.4607C112.729 62.7861 113.264 62.9856 113.824 63.0392C114.242 63.0392 114.839 62.5306 114.421 62.5006Z",fill:"#8B6918"}),A().createElement("path",{d:"M133.858 112.723C135.848 140.328 136.535 177.356 161.376 183.529C186.217 189.703 185.262 186.651 185.262 195.906C185.262 205.16 183.341 203.794 182.206 197.9C180.753 190.281 153.613 203.884 135.202 188.685C116.79 173.487 109.017 144.107 106.21 113.97C104.24 92.6279 133.858 112.723 133.858 112.723Z",fill:"#AD831F"}),A().createElement("path",{d:"M175.07 186.602C185.819 188.885 185.271 188.816 185.271 195.866C185.271 205.121 183.351 203.755 182.216 197.861C181.709 195.218 178.106 195.128 172.851 195.507C173.91 192.628 174.654 189.642 175.07 186.602Z",fill:"var(--button-bg)"}),A().createElement("path",{d:"M48.8448 72.9125C49.4221 71.9152 54.239 71.7559 59.9019 76.3633C65.5648 80.9707 74.7707 86.7049 85.0116 74.2389C94.1976 63.0396 100.308 67.2581 109.614 67.6271C112.918 68.046 126.254 69.7513 129.658 70.0604C134.634 69.9707 143.123 72.3442 148.995 58.6317C151.244 53.3761 153.573 45.8167 156.808 40.6807C159.027 37.1703 161.207 35.0262 163.267 34.1685C164.789 33.5402 163.944 34.747 162.769 36.4922C161.983 37.679 162.859 37.5392 162.421 39.0451C162.162 39.9227 162.043 40.4414 161.754 41.1993C161.506 41.8807 161.3 42.5767 161.137 43.2835C161.008 43.822 160.878 44.3904 160.769 44.9988L160.679 45.4178C159.485 51.9799 158.838 61.6034 157.942 65.4729C154.817 78.7865 147.99 86.645 135.52 89.4075C135.43 91.2923 135.301 93.3966 135.132 95.6304C132.892 127.045 136.077 118.568 115.695 118.568C95.3123 118.568 89.8882 130.814 92.9535 113.252C94.3966 105.025 93.9488 95.461 95.5312 85.7076C92.4261 87.6423 87.4101 91.6114 82.3742 92.858C66.6993 96.7075 52.2386 76.2135 52.0993 74.907C51.8803 72.8926 48.2775 73.9397 48.8448 72.9125Z",fill:"#AD831F"}),A().createElement("path",{d:"M91.1424 90.3054C93.2224 88.9989 94.0783 86.6054 95.5313 85.7078C94.9521 89.4286 94.5635 93.1766 94.3669 96.9372C94.1978 99.5999 94.0684 102.223 93.8892 104.766C93.7239 107.612 93.4117 110.448 92.9537 113.263C89.8884 130.815 95.3124 118.588 115.695 118.558C133.539 118.558 133.32 125.07 134.495 105.593V105.464C134.554 104.626 134.604 103.748 134.664 102.821C134.793 100.687 134.943 98.3034 135.132 95.6207C135.291 93.3469 135.43 91.2825 135.52 89.3977C140.984 88.181 145.373 87.7823 148.846 84.5611C147.055 79.4051 144.756 72.6736 141.322 68.3953C137.65 70.5195 133.908 70.1604 130.982 70.0606H129.658L127.896 69.8812C126.612 69.7416 124.911 69.5421 123.109 69.3227C122.114 74.4287 114.212 73.6708 111.604 71.8857C110.04 70.7852 108.805 69.2784 108.031 67.5275C106.927 67.4278 105.872 67.2983 104.847 67.1586C103.822 67.019 102.926 66.8893 102 66.7796C96.3972 66.1014 91.4609 66.3806 85.0118 74.2392C84.6137 74.7278 84.2156 75.1667 83.8274 75.5956C85.9528 80.6489 88.396 85.5621 91.1424 90.3054Z",fill:"var(--center-channel-bg)"}),A().createElement("path",{d:"M91.1424 90.3054C93.2224 88.9989 94.0783 86.6054 95.5313 85.7078C94.9521 89.4286 94.5635 93.1766 94.3669 96.9372C94.1977 99.5999 94.0684 102.223 93.8892 104.766C93.7239 107.612 93.4117 110.448 92.9537 113.263C89.8884 130.815 95.3124 118.588 115.695 118.558C133.539 118.558 133.32 125.07 134.495 105.593V105.464C134.554 104.626 134.604 103.748 134.664 102.821C134.793 100.687 134.943 98.3034 135.132 95.6207C135.291 93.3469 135.43 91.2825 135.52 89.3977C140.984 88.181 145.373 87.7823 148.846 84.5611C147.055 79.4051 144.756 72.6736 141.322 68.3953C137.65 70.5195 133.908 70.1604 130.982 70.0606H129.658L127.896 69.8812C126.612 69.7416 124.911 69.5421 123.109 69.3227C122.114 74.4287 114.212 73.6708 111.604 71.8857C110.04 70.7852 108.805 69.2784 108.031 67.5275C106.927 67.4278 105.872 67.2983 104.847 67.1586C103.822 67.019 102.926 66.8893 102 66.7796C96.3972 66.1014 91.4609 66.3806 85.0118 74.2392C84.6137 74.7278 84.2156 75.1667 83.8274 75.5956C85.9528 80.6489 88.396 85.5621 91.1424 90.3054Z",fill:"var(--center-channel-bg)"}),A().createElement("path",{d:"M91.1424 90.3054C93.2224 88.9989 94.0783 86.6054 95.5313 85.7078C94.9521 89.4286 94.5635 93.1766 94.3669 96.9372C94.1977 99.5999 94.0684 102.223 93.8892 104.766C93.7239 107.612 93.4117 110.448 92.9537 113.263C89.8884 130.815 95.3124 118.588 115.695 118.558C133.539 118.558 133.32 125.07 134.495 105.593V105.464C134.554 104.626 134.604 103.748 134.664 102.821C134.793 100.687 134.943 98.3034 135.132 95.6207C135.291 93.3469 135.43 91.2825 135.52 89.3977C140.984 88.181 145.373 87.7823 148.846 84.5611C147.055 79.4051 144.756 72.6736 141.322 68.3953C137.65 70.5195 133.908 70.1604 130.982 70.0606H129.658L127.896 69.8812C126.612 69.7416 124.911 69.5421 123.109 69.3227C122.114 74.4287 114.212 73.6708 111.604 71.8857C110.04 70.7852 108.805 69.2784 108.031 67.5275C106.927 67.4278 105.872 67.2983 104.847 67.1586C103.822 67.019 102.926 66.8893 102 66.7796C96.3972 66.1014 91.4609 66.3806 85.0118 74.2392C84.6137 74.7278 84.2156 75.1667 83.8274 75.5956C85.9528 80.6489 88.396 85.5621 91.1424 90.3054Z",fill:"var(--center-channel-color)",fillOpacity:"0.08"}),A().createElement("path",{d:"M76.7511 127.124C80.6011 132.559 85.0294 137.558 89.9579 142.033L90.3858 142.412C91.3811 143.3 92.3763 144.157 93.3715 145.005C93.7726 144.53 94.2156 144.093 94.6952 143.699L95.1331 143.33C96.7454 141.973 99.0543 140.338 101.353 138.712C104.588 136.479 107.783 134.414 108.897 133.726C109.713 138.234 110.679 142.702 111.813 146.94L111.962 147.508C112.152 148.176 112.331 148.845 112.52 149.503C120.04 149.349 127.516 148.308 134.793 146.401L135.35 146.242L136.495 145.893C136.625 145.851 136.758 145.818 136.893 145.793C136.754 144.925 136.624 143.968 136.495 142.931C136.495 142.731 136.495 142.542 136.425 142.342C135.052 130.495 134.335 109.143 134.495 105.633V105.503C134.063 105.151 133.654 104.771 133.27 104.366C133.105 104.193 132.935 104.014 132.763 103.828C129.051 99.6589 127.219 93.6055 126.154 89.9156C126.523 81.7579 127.279 77.4298 130.981 70.0998C130.514 70.0998 128.623 69.9702 127.896 69.8905C125.501 75.3418 124.035 81.1566 123.557 87.0934C116.59 85.8269 109.624 84.6998 102.657 83.6227C102.903 78.0868 103.619 72.582 104.797 67.1677C103.802 67.038 102.876 66.8985 101.95 66.7888C100.616 72.9064 99.9814 79.1563 100.059 85.4178C99.6614 86.4151 98.8752 89.407 98.2979 90.504C97.097 92.7304 95.7678 94.8848 94.317 96.9564C94.1478 99.6191 94.0184 102.242 93.8393 104.785C93.6602 107.328 93.4312 109.771 93.073 112.155C89.6195 115.266 84.0363 119.335 78.7217 124.91C78.5923 125.05 78.453 125.189 78.3236 125.339C77.826 125.897 77.2886 126.496 76.7511 127.124Z",fill:"var(--button-bg)"}),A().createElement("path",{d:"M120.92 110.739C121.694 110.796 122.466 110.6 123.119 110.18C123.985 109.542 124.314 108.335 124.552 106.6C125.15 102.361 124.861 102.003 123.288 100.008C122.781 99.3697 122.144 98.5718 121.358 97.405C120.701 96.4579 120.125 95.4571 119.636 94.4132C118.641 92.2989 118.233 91.8204 113.157 90.8331C104.946 89.2375 104.309 89.716 101.921 92.8873C101.483 93.4657 100.995 94.114 100.378 94.8819C96.7257 99.21 96.6958 99.7587 96.5863 101.793C96.5863 102.342 96.5167 103.02 96.3972 103.917C96.2181 105.194 96.2082 106.041 96.6859 106.67C97.4323 107.667 99.154 107.856 103.294 108.365C104.996 108.574 107.116 108.834 109.713 109.223C111.704 109.522 113.446 109.801 114.958 110.05C116.928 110.415 118.919 110.645 120.92 110.739ZM113.097 91.0625V91.3417C118.073 92.339 118.253 92.7078 119.168 94.6126C119.669 95.6963 120.259 96.7371 120.93 97.7242C121.736 98.9109 122.373 99.7186 122.92 100.367C124.443 102.282 124.632 102.531 124.075 106.52C123.816 108.395 123.488 109.263 122.87 109.721C121.796 110.509 119.576 110.14 115.137 109.402C113.625 109.153 111.913 108.874 109.883 108.574C107.275 108.185 105.155 107.926 103.453 107.717C99.7114 107.258 97.8304 107.019 97.2333 106.241C96.875 105.772 96.8949 105.034 97.0541 103.917C97.1835 103 97.2133 102.302 97.2432 101.743C97.3527 99.8584 97.3726 99.3597 100.906 95.1711C101.533 94.4232 102.03 93.7649 102.458 93.1766C104.648 90.2845 105.046 89.756 113.137 91.3317L113.097 91.0625Z",fill:"#2D3039"}),A().createElement("path",{d:"M117.834 93.7353C118.042 94.1682 118.281 94.5848 118.551 94.9819C118.75 95.291 118.262 95.5803 118.053 95.2711C117.784 94.8741 117.544 94.4574 117.337 94.0245C117.177 93.6954 117.685 93.4062 117.834 93.7353Z",fill:"#2D3039"}),A().createElement("path",{d:"M119.407 96.6076C119.745 97.1361 120.084 97.6049 120.452 98.1435C120.661 98.4426 120.173 98.7319 119.954 98.4327C119.596 97.9341 119.248 97.4354 118.959 96.8968C118.68 96.5877 119.218 96.2984 119.407 96.6076Z",fill:"#2D3039"}),A().createElement("path",{d:"M121.895 99.998C122.154 100.352 122.441 100.685 122.751 100.995C123.019 101.245 122.611 101.653 122.343 101.394C122.03 101.086 121.744 100.752 121.487 100.397C121.268 100.108 121.666 99.6988 121.895 99.998Z",fill:"#2D3039"}),A().createElement("path",{d:"M123.029 103.788C123.029 103.419 123.577 103.419 123.597 103.788C123.627 104.17 123.627 104.553 123.597 104.935C123.597 105.304 123 105.304 123.029 104.935C123.059 104.553 123.059 104.17 123.029 103.788Z",fill:"#2D3039"}),A().createElement("path",{d:"M122.522 106.87C122.582 106.501 123.139 106.66 123.069 107.019C123 107.378 122.91 108.017 122.82 108.505C122.731 108.994 122.213 108.715 122.273 108.346L122.522 106.87Z",fill:"#2D3039"}),A().createElement("path",{d:"M118.043 107.817C118.771 108.017 119.513 108.157 120.263 108.236C120.621 108.236 120.631 108.844 120.263 108.804C119.463 108.727 118.67 108.583 117.894 108.375C117.822 108.354 117.762 108.305 117.725 108.239C117.688 108.174 117.679 108.096 117.698 108.024C117.718 107.951 117.765 107.889 117.829 107.85C117.893 107.812 117.97 107.8 118.043 107.817Z",fill:"#2D3039"}),A().createElement("path",{d:"M112.48 107.179C113.207 107.225 113.932 107.312 114.65 107.438C115.018 107.498 114.859 108.046 114.5 107.986C113.841 107.876 113.177 107.8 112.51 107.757C112.112 107.727 112.112 107.179 112.48 107.179Z",fill:"#2D3039"}),A().createElement("path",{d:"M107.036 106.55L109.027 106.8C109.385 106.8 109.385 107.418 109.027 107.368L107.036 107.129C106.678 107.079 106.668 106.5 107.036 106.55Z",fill:"#2D3039"}),A().createElement("path",{d:"M101.642 105.992L103.314 106.181C103.672 106.181 103.682 106.8 103.314 106.76L101.642 106.56C101.284 106.52 101.274 105.952 101.642 105.992Z",fill:"#2D3039"}),A().createElement("path",{d:"M98.776 104.686L99.393 105.254C99.6617 105.503 99.2636 105.912 98.985 105.663L98.3679 105.084C98.0693 104.835 98.4674 104.436 98.776 104.686Z",fill:"#2D3039"}),A().createElement("path",{d:"M98.0591 101.345C98.0591 100.986 98.6761 100.976 98.6363 101.345C98.5674 102.008 98.5342 102.674 98.5368 103.34C98.5244 103.406 98.4892 103.466 98.4374 103.509C98.3856 103.552 98.3205 103.576 98.2532 103.576C98.1859 103.576 98.1207 103.552 98.0689 103.509C98.0171 103.466 97.982 103.406 97.9695 103.34C97.9584 102.674 97.9883 102.008 98.0591 101.345Z",fill:"#2D3039"}),A().createElement("path",{d:"M99.2933 98.333L99.8705 97.4755C100.07 97.1663 100.567 97.4755 100.358 97.7647L99.7909 98.6223C99.5819 98.9314 99.0942 98.6422 99.2933 98.333Z",fill:"#2D3039"}),A().createElement("path",{d:"M113.436 92.2194C114.105 92.2522 114.77 92.3356 115.426 92.4687C115.784 92.5485 115.635 93.0971 115.277 93.0273C114.675 92.8963 114.062 92.8196 113.446 92.7979C113.067 92.768 113.067 92.2194 113.436 92.2194Z",fill:"#2D3039"}),A().createElement("path",{d:"M109.086 91.4412C109.72 91.471 110.352 91.5409 110.977 91.6506C111.346 91.7105 111.186 92.259 110.828 92.1992C110.252 92.0994 109.67 92.0395 109.086 92.0197C108.728 91.9998 108.728 91.4313 109.086 91.4412Z",fill:"#2D3039"}),A().createElement("path",{d:"M105.334 91.222C105.772 91.1488 106.215 91.1154 106.658 91.1222C106.724 91.1347 106.784 91.1699 106.827 91.2218C106.87 91.2737 106.893 91.3392 106.893 91.4066C106.893 91.474 106.87 91.5392 106.827 91.5911C106.784 91.643 106.724 91.6782 106.658 91.6907C106.268 91.6851 105.878 91.7152 105.494 91.7806C105.125 91.8304 104.976 91.2819 105.334 91.222Z",fill:"#2D3039"}),A().createElement("path",{d:"M102.757 94.0245L103.423 93.0272C103.632 92.728 104.13 93.0272 103.911 93.3164L103.244 94.3137C103.015 94.6129 102.518 94.3336 102.757 94.0245Z",fill:"#2D3039"}),A().createElement("path",{d:"M101.104 96.9185L101.682 96.1505C101.901 95.8613 102.398 96.1506 102.179 96.4398L101.602 97.2077C101.383 97.5168 100.885 97.2376 101.104 96.9185Z",fill:"#2D3039"}),A().createElement("path",{d:"M124.722 84.6503C126.901 85.2486 127.249 84.8 126.971 87.7918C126.692 90.7837 126.971 90.4944 124.154 89.9658C122.164 89.5769 122.572 88.9687 122.91 87.0938C123.249 85.2189 123.507 84.3212 124.722 84.6503Z",fill:"#FFBC1F"}),A().createElement("path",{d:"M100.876 81.4888C103.115 81.798 103.404 81.2994 103.523 84.3012C103.643 87.303 103.036 87.0836 101.015 86.8244C98.9949 86.5651 99.3233 86.0862 99.403 84.1515C99.4826 82.2168 99.6319 81.3193 100.876 81.4888Z",fill:"#FFBC1F"}),A().createElement("path",{d:"M119.277 62.3013C119.277 62.3013 116.869 63.7374 117.954 68.0157C115.028 63.6476 118.869 57.6541 118.869 57.6541C118.961 57.7858 119.083 57.8932 119.225 57.9675C119.367 58.0417 119.525 58.0804 119.685 58.0804C119.846 58.0804 120.004 58.0417 120.146 57.9675C120.288 57.8932 120.41 57.7858 120.502 57.6541C123.408 54.6623 121.328 53.6649 120.502 54.0139C119.466 54.3603 118.394 54.588 117.307 54.6922C115.615 54.9715 113.963 52.2288 113.963 52.2288L114.391 53.4753C113.68 53.0728 113.083 52.4953 112.656 51.7973C112.229 51.0994 111.987 50.304 111.953 49.4862C113.495 44.5497 123 43.6723 126.543 51.1219C130.086 58.5716 126.543 71.4263 136.893 69.9304C116.332 79.0555 119.277 62.3013 119.277 62.3013Z",fill:"#4A2407"}),A().createElement("path",{d:"M78.7719 124.89C84.6537 133.217 95.1235 143.31 95.1235 143.31",stroke:"#1E325C",strokeWidth:"0.58",strokeMiterlimit:"10"}),A().createElement("path",{d:"M111.813 146.92C122.074 147.309 136.495 142.931 136.495 142.931",stroke:"#1E325C",strokeWidth:"0.58",strokeMiterlimit:"10"}),A().createElement("path",{d:"M61.8512 14.2181H99.1357C99.819 14.2158 100.496 14.3497 101.128 14.6122C101.76 14.8748 102.335 15.2608 102.82 15.7483C103.305 16.2358 103.69 16.8152 103.954 17.4533C104.217 18.0915 104.354 18.776 104.356 19.4678V43.4568C104.354 44.1485 104.217 44.833 103.954 45.4712C103.69 46.1094 103.305 46.6888 102.82 47.1762C102.335 47.6637 101.76 48.0497 101.128 48.3123C100.496 48.5748 99.819 48.7088 99.1357 48.7064H93.6333V57.6861L85.3797 48.7064H61.8645C61.1812 48.7088 60.5041 48.5748 59.872 48.3123C59.2398 48.0497 58.6649 47.6637 58.1801 47.1762C57.6954 46.6888 57.3102 46.1094 57.0465 45.4712C56.7829 44.833 56.646 44.1485 56.6437 43.4568V19.4678C56.6484 18.0731 57.1992 16.7372 58.1755 15.753C59.1517 14.7689 60.4736 14.2169 61.8512 14.2181Z",fill:"var(--button-bg)"}),A().createElement("path",{d:"M85.3796 48.7064H61.8645C61.1812 48.7088 60.5041 48.5748 59.872 48.3123C59.2398 48.0497 58.6649 47.6637 58.1801 47.1762C57.6954 46.6887 57.3102 46.1094 57.0465 45.4712C56.7829 44.833 56.6461 44.1485 56.6438 43.4567V28.8931C56.6438 28.8931 58.2857 42.3605 58.5806 43.5459C58.8755 44.7313 59.461 46.5049 62.2342 46.7991C65.0074 47.0932 85.3796 48.7064 85.3796 48.7064Z",fill:"black",fillOpacity:"0.16"}),A().createElement("path",{d:"M93.2285 28.033C92.5642 28.033 91.9148 28.2324 91.3625 28.606C90.8101 28.9796 90.3796 29.5107 90.1254 30.132C89.8712 30.7533 89.8047 31.437 89.9343 32.0966C90.0639 32.7562 90.3838 33.362 90.8535 33.8376C91.3232 34.3131 91.9217 34.6369 92.5732 34.7681C93.2247 34.8993 93.9001 34.832 94.5138 34.5746C95.1275 34.3173 95.6521 33.8815 96.0211 33.3223C96.3902 32.7631 96.5872 32.1057 96.5872 31.4332C96.5877 30.9865 96.5013 30.5441 96.3327 30.1313C96.1641 29.7185 95.9167 29.3434 95.6047 29.0276C95.2927 28.7117 94.9222 28.4613 94.5145 28.2906C94.1067 28.1199 93.6697 28.0324 93.2285 28.033Z",fill:"var(--center-channel-bg)"}),A().createElement("path",{d:"M80.4931 28.033C79.8288 28.033 79.1795 28.2324 78.6271 28.606C78.0748 28.9796 77.6443 29.5107 77.3901 30.132C77.1359 30.7533 77.0694 31.437 77.199 32.0966C77.3286 32.7562 77.6485 33.362 78.1182 33.8376C78.5879 34.3131 79.1864 34.6369 79.8379 34.7681C80.4894 34.8993 81.1647 34.832 81.7784 34.5746C82.3922 34.3173 82.9167 33.8815 83.2858 33.3223C83.6548 32.7631 83.8518 32.1057 83.8518 31.4332C83.8524 30.9865 83.7659 30.5441 83.5973 30.1313C83.4287 29.7185 83.1814 29.3434 82.8694 29.0276C82.5574 28.7117 82.1869 28.4613 81.7791 28.2906C81.3714 28.1199 80.9344 28.0324 80.4931 28.033Z",fill:"var(--center-channel-bg)"}),A().createElement("path",{d:"M67.7719 28.033C67.1075 28.0321 66.4577 28.2308 65.9048 28.6038C65.3518 28.9769 64.9207 29.5077 64.6658 30.1289C64.4109 30.7501 64.3437 31.434 64.4728 32.0938C64.6019 32.7537 64.9215 33.36 65.391 33.836C65.8606 34.312 66.459 34.6362 67.1107 34.7678C67.7623 34.8994 68.4379 34.8323 69.0518 34.5751C69.6658 34.3178 70.1906 33.882 70.5599 33.3228C70.9291 32.7635 71.1262 32.1059 71.1262 31.4332C71.1268 30.9869 71.0405 30.5448 70.8722 30.1323C70.7038 29.7198 70.4569 29.3449 70.1453 29.0291C69.8338 28.7133 69.4638 28.4628 69.0566 28.2919C68.6493 28.1209 68.2128 28.033 67.7719 28.033Z",fill:"var(--center-channel-bg)"}),A().createElement("path",{d:"M100.487 24.263C100.108 22.9055 99.4678 21.6372 98.6028 20.5313C97.7378 19.4253 96.6652 18.5035 95.4468 17.819C95.3747 17.7821 95.3166 17.7219 95.2818 17.648C95.2471 17.5741 95.2375 17.4906 95.2546 17.4106C95.2717 17.3306 95.3145 17.2586 95.3764 17.2059C95.4383 17.1532 95.5157 17.1227 95.5965 17.1193C97.9471 16.9767 102.692 17.4848 101.205 24.2274C101.189 24.3097 101.146 24.3842 101.084 24.4392C101.021 24.4941 100.942 24.5262 100.86 24.5303C100.777 24.5344 100.695 24.5103 100.628 24.4618C100.56 24.4134 100.511 24.3434 100.487 24.263Z",fill:"var(--center-channel-bg)",fillOpacity:"0.16"}),A().createElement("path",{d:"M55.5543 38.8059H7.46272C6.58138 38.8029 5.70809 38.9732 4.8927 39.307C4.07732 39.6408 3.3358 40.1316 2.71049 40.7514C2.08518 41.3712 1.58833 42.1079 1.2483 42.9193C0.908278 43.7307 0.731737 44.601 0.72876 45.4805V75.9807C0.731737 76.8602 0.908278 77.7305 1.2483 78.5419C1.58833 79.3534 2.08518 80.09 2.71049 80.7098C3.3358 81.3296 4.07732 81.8204 4.8927 82.1542C5.70809 82.488 6.58138 82.6583 7.46272 82.6553H14.5601V94.0724L25.2061 82.6553H55.5373C56.4186 82.6583 57.2919 82.488 58.1073 82.1542C58.9227 81.8204 59.6642 81.3296 60.2895 80.7098C60.9148 80.09 61.4117 79.3534 61.7517 78.5419C62.0917 77.7305 62.2683 76.8602 62.2712 75.9807V45.4805C62.2652 43.7072 61.5547 42.0087 60.2955 40.7574C59.0364 39.5062 57.3313 38.8044 55.5543 38.8059Z",fill:"#FFBC1F"}),A().createElement("path",{d:"M25.2061 82.6553H55.5372C56.4186 82.6583 57.2919 82.488 58.1073 82.1542C58.9226 81.8204 59.6642 81.3295 60.2895 80.7098C60.9148 80.09 61.4116 79.3533 61.7516 78.5419C62.0917 77.7305 62.2682 76.8602 62.2712 75.9807V57.4641C62.2712 57.4641 60.1533 74.5869 59.7729 76.094C59.3925 77.6012 58.6374 79.8563 55.0603 80.2302C51.4832 80.6042 25.2061 82.6553 25.2061 82.6553Z",fill:"#CC8F00"}),A().createElement("path",{d:"M15.0822 56.3705C15.9391 56.3705 16.7766 56.624 17.4891 57.0991C18.2015 57.5741 18.7568 58.2493 19.0847 59.0393C19.4126 59.8292 19.4984 60.6985 19.3312 61.5371C19.164 62.3757 18.7514 63.146 18.1456 63.7506C17.5397 64.3552 16.7678 64.767 15.9274 64.9338C15.087 65.1006 14.216 65.015 13.4244 64.6878C12.6327 64.3606 11.9561 63.8064 11.4801 63.0955C11.0041 62.3845 10.75 61.5487 10.75 60.6937C10.7493 60.1257 10.8608 59.5632 11.0783 59.0384C11.2957 58.5135 11.6148 58.0366 12.0172 57.635C12.4196 57.2335 12.8975 56.915 13.4235 56.698C13.9494 56.481 14.5131 56.3697 15.0822 56.3705Z",fill:"var(--center-channel-bg)"}),A().createElement("path",{d:"M31.509 56.3705C32.3658 56.3705 33.2034 56.624 33.9158 57.0991C34.6283 57.5741 35.1835 58.2493 35.5114 59.0393C35.8393 59.8292 35.9251 60.6985 35.7579 61.5371C35.5908 62.3757 35.1782 63.146 34.5723 63.7506C33.9664 64.3552 33.1945 64.767 32.3542 64.9338C31.5138 65.1006 30.6427 65.015 29.8511 64.6878C29.0595 64.3606 28.3829 63.8064 27.9069 63.0955C27.4308 62.3845 27.1768 61.5487 27.1768 60.6937C27.176 60.1257 27.2876 59.5632 27.505 59.0384C27.7225 58.5135 28.0415 58.0366 28.444 57.635C28.8464 57.2335 29.3243 56.915 29.8502 56.698C30.3762 56.481 30.9399 56.3697 31.509 56.3705Z",fill:"var(--center-channel-bg)"}),A().createElement("path",{d:"M47.9174 56.3705C48.7744 56.3694 49.6126 56.622 50.3258 57.0963C51.0389 57.5707 51.5951 58.2455 51.9238 59.0353C52.2526 59.8252 52.3392 60.6946 52.1727 61.5336C52.0062 62.3726 51.594 63.1434 50.9884 63.7486C50.3827 64.3538 49.6108 64.7661 48.7703 64.9334C47.9298 65.1006 47.0584 65.0154 46.2665 64.6883C45.4745 64.3613 44.7976 63.8071 44.3213 63.0961C43.845 62.385 43.5908 61.549 43.5908 60.6937C43.5901 60.1262 43.7014 59.5642 43.9185 59.0397C44.1356 58.5152 44.4542 58.0386 44.856 57.6371C45.2579 57.2355 45.7351 56.917 46.2603 56.6997C46.7856 56.4824 47.3487 56.3705 47.9174 56.3705Z",fill:"var(--center-channel-bg)"}),A().createElement("path",{d:"M5.71976 51.5772C6.20841 49.8512 7.0344 48.2387 8.15016 46.8326C9.26591 45.4265 10.6494 44.2545 12.2209 43.3841C12.314 43.3372 12.3889 43.2607 12.4337 43.1668C12.4786 43.0728 12.491 42.9667 12.4689 42.8649C12.4468 42.7632 12.3915 42.6716 12.3117 42.6046C12.2319 42.5376 12.1321 42.4989 12.0279 42.4946C8.99589 42.3133 2.87515 42.9592 4.79427 51.5319C4.81451 51.6366 4.86936 51.7314 4.95003 51.8012C5.0307 51.8711 5.13252 51.9119 5.23919 51.9171C5.34586 51.9223 5.4512 51.8917 5.53833 51.83C5.62547 51.7684 5.68935 51.6794 5.71976 51.5772Z",fill:"#FFD470"}),A().createElement("ellipse",{cx:"119.099",cy:"216.167",rx:"38.5938",ry:"1.95397",fill:"black",fillOpacity:"0.12"}),A().createElement("defs",null,A().createElement("linearGradient",{id:"paint0_linear_522_36531",x1:"93.5",y1:"-1.73437e-05",x2:"-66.6967",y2:"160.197",gradientUnits:"userSpaceOnUse"},A().createElement("stop",{offset:"0.0104167",stopColor:"var(--button-bg)"}),A().createElement("stop",{offset:"0.765625",stopColor:"var(--button-bg)",stopOpacity:"0"}))))};lt.propTypes={width:F().number,height:F().number};const ct=lt;var dt=n(34208),ut=n(19278),ht=n(77800),mt=n(44967),pt=n(43976),gt=n(22767),ft=n(96811),Ct=n(71892),Et=n(11796),bt=n(29055),vt=n(26337);const yt=e=>{let{totalUsers:t,usersLimit:n,channel:s,pluginButtons:r}=e;const i=(0,a.useSelector)(o.ev);if(!t)return A().createElement(vt.Z,null);const l=t<n;return A().createElement(ht.Z,{teamId:i,permissions:[Oe.Pl.ADD_USER_TO_TEAM,Oe.Pl.INVITE_GUEST]},l?A().createElement(_t,{pluginButtons:r}):A().createElement(Mt,{channel:s,pluginButtons:r}))};yt.propTypes={totalUsers:F().number,usersLimit:F().number.isRequired,pluginButtons:F().node};const _t=e=>{let{pluginButtons:t}=e;const{formatMessage:n}=(0,Pe.useIntl)();return A().createElement(A().Fragment,null,t,A().createElement("div",{className:"LessThanMaxFreeUsers"},A().createElement(pt.Z,{ariaLabel:n({id:"intro_messages.inviteOthers",defaultMessage:"Invite others to the workspace"}),id:"introTextInvite",className:"btn btn-sm btn-primary",modalId:j.r8.INVITATION,dialogType:bt.default,onClick:()=>(0,Be.L9)("channel_intro_message","click_invite_button")},A().createElement("i",{className:"icon-email-plus-outline",title:n({id:"generic_icons.add",defaultMessage:"Add Icon"})}),A().createElement(Pe.FormattedMessage,{id:"intro_messages.inviteOthersToWorkspace.button",defaultMessage:"Invite others to the workspace"}))))},Mt=e=>{let{channel:t,pluginButtons:n}=e;const{formatMessage:a}=(0,Pe.useIntl)(),s=t.group_constrained?j.r8.ADD_GROUPS_TO_CHANNEL:j.r8.CHANNEL_INVITE,r=t.group_constrained?Ct.Z:Et.Z;if(0!==t.delete_at)return null;const i=t.type===j.Constants.PRIVATE_CHANNEL;return A().createElement("div",{className:"MoreThanMaxFreeUsersWrapper"},A().createElement("div",{className:"MoreThanMaxFreeUsers"},A().createElement(ut.Z,{channelId:t.id,teamId:t.team_id,permissions:[i?Oe.Pl.MANAGE_PRIVATE_CHANNEL_MEMBERS:Oe.Pl.MANAGE_PUBLIC_CHANNEL_MEMBERS]},A().createElement(pt.Z,{className:"action-button",modalId:s,dialogType:r,dialogProps:{channel:t}},A().createElement("i",{className:"icon-account-plus-outline",title:a({id:"generic_icons.add",defaultMessage:"Add Icon"})}),t.group_constrained&&A().createElement(Pe.FormattedMessage,{id:"intro_messages.inviteGropusToChannel.button",defaultMessage:"Add groups"}),!t.group_constrained&&A().createElement(Pe.FormattedMessage,{id:"intro_messages.inviteMembersToChannel.button",defaultMessage:"Add people"})))),n)},wt=A().memo(yt);var St=n(33643);const Tt=A().memo((e=>{if(0!==e.channel.delete_at||0===e.pluginButtons.length)return null;const t=e.pluginButtons.map((t=>A().createElement("button",{key:t.id,className:"action-button",onClick:()=>{var n;return null===(n=t.action)||void 0===n?void 0:n.call(t,e.channel,e.channelMember)}},t.icon,t.text)));return A().createElement(A().Fragment,null,t)}));Tt.propTypes={pluginButtons:F().array.isRequired},Tt.displayName="PluggableIntroButtons";const Nt=Tt,It=(0,a.connect)((function(e,t){return{channelMember:(0,r.SC)(e,t.channel.id),pluginButtons:(0,St.cf)(e)}}))(Nt);function Pt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Lt extends A().PureComponent{constructor(){super(...arguments),Pt(this,"toggleFavorite",(()=>{this.props.channel&&(this.props.isFavorite?this.props.actions.unfavoriteChannel(this.props.channel.id):this.props.actions.favoriteChannel(this.props.channel.id))}))}componentDidMount(){var e;null!==(e=this.props.stats)&&void 0!==e&&e.total_users_count||this.props.actions.getTotalUsersStats()}render(){const{currentUserId:e,channel:t,fullWidth:n,locale:a,channelProfiles:s,enableUserCreation:r,isReadOnly:i,isFavorite:o,teamIsGroupConstrained:l,creatorName:c,teammate:d,teammateName:u,currentUser:h,stats:m,usersLimit:p,channelMember:g,isMobileView:f}=this.props;let C="";return n||(C="channel-intro--centered"),t?t.type===j.Constants.DM_CHANNEL?function(e,t,n,a,s,r,i,o){const l="channelIntro";if(i){const n=i?be.bb(i.id,i.last_picture_update):"";let s=null,c=null;null!=i&&i.is_bot||(s=A().createElement(It,{channel:e}),c=Ot(e));const d=A().createElement("div",{className:"channel-intro__actions"},kt(a,r),c,s);return A().createElement("div",{id:l,className:"channel-intro "+t},A().createElement("div",{className:"post-profile-img__container channel-intro-img"},A().createElement(mt.Z,{src:n,size:"xl-custom-DM",status:i.is_bot?"":e.status,userId:null==i?void 0:i.id,username:null==i?void 0:i.username})),A().createElement("h2",{className:"channel-intro__title"},A().createElement(gt.Z,{userId:null==i?void 0:i.id})),A().createElement("p",{className:"channel-intro__text"},A().createElement(Re.Z,{id:"intro_messages.DM",defaultMessage:"This is the start of your direct message history with {teammate}. Messages and files shared here are not shown to anyone else.",values:{teammate:o}})),d)}return A().createElement("div",{id:l,className:"channel-intro "+t},A().createElement("p",{className:"channel-intro__text"},A().createElement(Pe.FormattedMessage,{id:"intro_messages.teammate",defaultMessage:"This is the start of your direct message history with this teammate. Messages and files shared here are not shown to anyone else."})))}(t,C,0,o,0,this.toggleFavorite,d,u):t.type===j.Constants.GM_CHANNEL?function(e,t,n,a,s,r,i,o,l){const c="channelIntro";if(r.length>0){const d=r.find((e=>e.id===i)),u=r.filter((e=>e.id!==i)).map((e=>A().createElement(mt.Z,{key:"introprofilepicture"+e.id,src:be.bb(e.id,e.last_picture_update),size:"xl-custom-GM",userId:e.id,username:e.username}))),h=A().createElement("div",{className:"channel-intro__actions"},kt(n,s),Ot(e),!a&&Dt(e,o),A().createElement(It,{channel:e}));return A().createElement("div",{id:c,className:"channel-intro "+t},A().createElement("div",{className:"post-profile-img__container channel-intro-img channel-intro-img__group"},u),A().createElement("h2",{className:"channel-intro__title"},e.display_name),A().createElement("p",{className:"channel-intro__text"},A().createElement(Pe.FormattedMessage,{id:"intro_messages.group_message",defaultMessage:"This is the start of your group message history with these teammates. "}),At(d,l)),h)}return A().createElement("div",{id:c,className:"channel-intro "+t},A().createElement("p",{className:"channel-intro__text"},A().createElement(Pe.FormattedMessage,{id:"intro_messages.group_message",defaultMessage:"This is the start of your group message history with these teammates. Messages and files shared here are not shown to people outside this area."})))}(t,C,o,f,this.toggleFavorite,s,e,h,g):t.name===j.Constants.DEFAULT_CHANNEL?function(e,t,n,a,s,r,i,o,l,c,d){let u=null;const h=i.total_users_count,m=e.type===j.Constants.PRIVATE_CHANNEL,p=h<o;let g=null,f=null,C=null;if(!c){f=A().createElement(It,{channel:e});const t=Ot(e);t&&(g=A().createElement(ut.Z,{teamId:e.team_id,channelId:e.id,permissions:[m?Oe.Pl.MANAGE_PRIVATE_CHANNEL_PROPERTIES:Oe.Pl.MANAGE_PUBLIC_CHANNEL_PROPERTIES]},t))}return!c&&l&&(u=A().createElement(ht.Z,{teamId:e.team_id,permissions:[Oe.Pl.INVITE_USER]},A().createElement(ht.Z,{teamId:e.team_id,permissions:[Oe.Pl.ADD_USER_TO_TEAM]},!d&&A().createElement(wt,{totalUsers:h,usersLimit:o,channel:e,pluginButtons:f}),d&&A().createElement(pt.Z,{className:"intro-links color--link",modalId:j.r8.ADD_GROUPS_TO_TEAM,dialogType:st.Z,dialogProps:{channel:e}},A().createElement("i",{className:"fa fa-user-plus"}),A().createElement(Pe.FormattedMessage,{id:"intro_messages.addGroupsToTeam",defaultMessage:"Add other groups to this team"}))))),C=p?A().createElement("div",{className:"channel-intro__actions"},C=u):A().createElement("div",{className:"channel-intro__actions"},kt(a,r),g,Dt(e,n),d&&f),A().createElement("div",{id:"channelIntro",className:"channel-intro "+t},A().createElement("h2",{className:"channel-intro__title"},"Amir Channel"),A().createElement("p",{className:"channel-intro__text"},"Hello Amir"),C)}(t,C,h,o,0,this.toggleFavorite,m,p,r,i,l):t.name===j.Constants.OFFTOPIC_CHANNEL?function(e,t,n,a,s,r,i,o){const l=e.type===j.Constants.PRIVATE_CHANNEL,c=Ot(e),d=i.total_users_count,u=d<o;let h=null,m=null;c&&(h=A().createElement(ut.Z,{teamId:e.team_id,channelId:e.id,permissions:[l?Oe.Pl.MANAGE_PRIVATE_CHANNEL_PROPERTIES:Oe.Pl.MANAGE_PUBLIC_CHANNEL_PROPERTIES]},c));const p=A().createElement(wt,{totalUsers:d,usersLimit:o,channel:e,pluginButtons:A().createElement(It,{channel:e})});return m=u?A().createElement("div",{className:"channel-intro__actions"},m=p):A().createElement("div",{className:"channel-intro__actions"},kt(n,r),h,Dt(e,s)),A().createElement("div",{id:"channelIntro",className:"channel-intro "+t},A().createElement(ct,null),A().createElement("h2",{className:"channel-intro__title"},e.display_name),A().createElement("p",{className:"channel-intro__text"},A().createElement(Pe.FormattedMessage,{id:"intro_messages.offTopic",defaultMessage:"This is the start of {display_name}, a channel for non-work-related conversations.",values:{display_name:e.display_name}})),m)}(t,C,o,0,h,this.toggleFavorite,m,p):t.type===j.Constants.OPEN_CHANNEL||t.type===j.Constants.PRIVATE_CHANNEL?function(e,t,n,a,s,r,i,o,l,c){const d=e.display_name;let u,h=null;const m=0!==e.delete_at,p=i.total_users_count,g=p<o;u=m?"":e.type===j.Constants.PRIVATE_CHANNEL?A().createElement(Pe.FormattedMessage,{id:"intro_messages.onlyInvited",defaultMessage:"This is the start of {display_name}. Only invited members can see this private channel.",values:{display_name:e.display_name}}):A().createElement(Pe.FormattedMessage,{id:"intro_messages.anyMember",defaultMessage:"This is the start of {display_name}. Any team member can join and read this channel.",values:{display_name:e.display_name}});const f=A().createElement(Pe.FormattedDate,{value:e.create_at,month:(0,ft.u)(l),day:"2-digit",year:"numeric"});let C,E;""===c?e.type===j.Constants.PRIVATE_CHANNEL?C=A().createElement(Pe.FormattedMessage,{id:"intro_messages.noCreatorPrivate",defaultMessage:"Private channel created on {date}.",values:{name:d,date:f}}):e.type===j.Constants.OPEN_CHANNEL&&(C=A().createElement(Pe.FormattedMessage,{id:"intro_messages.noCreator",defaultMessage:"Public channel created on {date}.",values:{name:d,date:f}})):e.type===j.Constants.PRIVATE_CHANNEL?C=A().createElement("span",null,A().createElement(Pe.FormattedMessage,{id:"intro_messages.creatorPrivate",defaultMessage:"Private channel created by {creator} on {date}.",values:{name:d,creator:c,date:f}})):e.type===j.Constants.OPEN_CHANNEL&&(C=A().createElement("span",null,A().createElement(Pe.FormattedMessage,{id:"intro_messages.creator",defaultMessage:"Public channel created by {creator} on {date}.",values:{name:d,creator:c,date:f}}))),e.purpose&&""!==e.purpose&&(E=A().createElement("span",null,A().createElement(Pe.FormattedMessage,{id:"intro_messages.purpose",defaultMessage:" This channel's purpose is: {purpose}",values:{purpose:e.purpose}})));const b=e.type===j.Constants.PRIVATE_CHANNEL;let v=null,y=null;const _=Ot(e);return _&&(v=A().createElement(ut.Z,{teamId:e.team_id,channelId:e.id,permissions:[b?Oe.Pl.MANAGE_PRIVATE_CHANNEL_PROPERTIES:Oe.Pl.MANAGE_PUBLIC_CHANNEL_PROPERTIES]},_)),h=A().createElement(wt,{totalUsers:p,usersLimit:o,channel:e,pluginButtons:A().createElement(It,{channel:e})}),y=g?A().createElement("div",{className:"channel-intro__actions"},y=h):A().createElement("div",{className:"channel-intro__actions"},kt(a,r),h,v,!s&&Dt(e,n),A().createElement(It,{channel:e})),A().createElement("div",{id:"channelIntro",className:"channel-intro "+t},b?A().createElement(ot,null):A().createElement(ct,null),A().createElement("h2",{className:"channel-intro__title"},e.display_name),A().createElement("div",{className:"channel-intro__created"},b?A().createElement(ze.LockOutlineIcon,{size:14}):A().createElement(ze.GlobeIcon,{size:14}),C),A().createElement("p",{className:"channel-intro__text"},u,E),y)}(t,C,h,o,f,this.toggleFavorite,m,p,a,c):null:null}}Pt(Lt,"propTypes",{currentUserId:F().string.isRequired,fullWidth:F().bool.isRequired,locale:F().string.isRequired,channelProfiles:F().array.isRequired,enableUserCreation:F().bool,isReadOnly:F().bool,isFavorite:F().bool.isRequired,teamIsGroupConstrained:F().bool,creatorName:F().string.isRequired,teammateName:F().string,stats:F().any.isRequired,usersLimit:F().number.isRequired,isMobileView:F().bool.isRequired,actions:F().shape({getTotalUsersStats:F().func.isRequired,favoriteChannel:F().func.isRequired,unfavoriteChannel:F().func.isRequired}).isRequired});const Rt=(0,Pe.defineMessages)({muted:{id:"intro_messages.GM.muted",defaultMessage:"This group message is currently <b>muted</b>, so you will not be notified."},[nt._.ALL]:{id:"intro_messages.GM.all",defaultMessage:"You'll be notified <b>for all activity</b> in this group message."},[nt._.DEFAULT]:{id:"intro_messages.GM.all",defaultMessage:"You'll be notified <b>for all activity</b> in this group message."},[nt._.MENTION]:{id:"intro_messages.GM.mention",defaultMessage:"You have selected to be notified <b>only when mentioned</b> in this group message."},[nt._.NONE]:{id:"intro_messages.GM.none",defaultMessage:"You have selected to <b>never</b> be notified in this group message."}}),At=(e,t)=>{var n,a;if((0,at.Mm)(t))return A().createElement(Pe.FormattedMessage,Object.assign({},Rt.muted,{values:{b:e=>A().createElement("b",null,e)}}));const s=(null==t||null===(n=t.notify_props)||void 0===n?void 0:n.desktop)||nt._.DEFAULT,r=(null==e||null===(a=e.notify_props)||void 0===a?void 0:a.desktop)||nt._.MENTION;let i=s;return i===nt._.DEFAULT&&(i=r),s===nt._.DEFAULT&&r===nt._.MENTION&&(i=nt._.ALL),A().createElement(Pe.FormattedMessage,Object.assign({},Rt[i],{values:{b:e=>A().createElement("b",null,e)}}))};function Ot(e){return 0!==e.delete_at?null:A().createElement(pt.Z,{modalId:j.r8.EDIT_CHANNEL_HEADER,ariaLabel:be._u("intro_messages.setHeader","Set header"),className:"action-button",dialogType:dt.Z,dialogProps:{channel:e}},A().createElement(ze.PencilOutlineIcon,{size:24}),A().createElement(Pe.FormattedMessage,{id:"intro_messages.setHeader",defaultMessage:"Set header"}))}function kt(e,t,n){let a;return a=e?A().createElement(Pe.FormattedMessage,{id:"channel_info_rhs.top_buttons.favorited",defaultMessage:"Favorited"}):A().createElement(Pe.FormattedMessage,{id:"channel_info_rhs.top_buttons.favorite",defaultMessage:"Favorite"}),A().createElement("button",{id:"toggleFavoriteIntroButton",className:"action-button ".concat(e?"active":"","  ").concat(n),onClick:t,"aria-label":"Favorite"},e?A().createElement(ze.StarIcon,{size:24}):A().createElement(ze.StarOutlineIcon,{size:24}),a)}function Dt(e,t){return A().createElement(pt.Z,{modalId:j.r8.CHANNEL_NOTIFICATIONS,ariaLabel:be._u("intro_messages.notificationPreferences","Notification Preferences"),className:"action-button",dialogType:rt.Z,dialogProps:{channel:e,currentUser:t}},A().createElement(ze.BellRingOutlineIcon,{size:24}),A().createElement(Pe.FormattedMessage,{id:"intro_messages.notificationPreferences",defaultMessage:"Notifications"}))}const xt=(0,a.connect)((function(e){const t="true"===(0,i.iE)(e).EnableUserCreation,n=(0,o.kA)(e),a=(0,r.TB)(e),s=(0,r.HU)(e),c=a?(0,r.PR)(e,a.id):void 0,d=(0,l.ts)(e),u=a?(0,l.PR)(e,a.creator_id):void 0,h=(0,l.S1)(e)||{total_users_count:0};return{currentUserId:(0,l.rc)(e),channel:a,fullWidth:(0,C.U2)(e,j.uP.CATEGORY_DISPLAY_SETTINGS,j.uP.CHANNEL_DISPLAY_MODE,j.uP.CHANNEL_DISPLAY_MODE_DEFAULT)===j.uP.CHANNEL_DISPLAY_MODE_FULL_SCREEN,locale:(0,tt.B)(e),channelProfiles:(0,l.OX)(e),enableUserCreation:t,isReadOnly:!1,isFavorite:(0,r.CA)(e),teamIsGroupConstrained:Boolean(null==n?void 0:n.group_constrained),creatorName:(0,be.hI)(e,u),teammate:c,teammateName:(0,be.hI)(e,c),currentUser:d,stats:h,usersLimit:10,channelMember:s,isMobileView:(0,K.E7)(e)}}),(function(e){return{actions:(0,V.bindActionCreators)({getTotalUsersStats:G.S1,favoriteChannel:s.ZE,unfavoriteChannel:s.Dn},e)}}))(Lt);var Ft,Bt,Ut,Ht=n(87276),qt=n(57606),jt=n(88747);class Zt extends A().PureComponent{blockShortcutReactToLastPostForNonMessages(e){const{actions:{emitShortcutReactToLastPostFrom:t}}=this.props;(0,Fe.Xq)(e)&&t(j.tY.NO_WHERE)}componentDidUpdate(e){const{listId:t,isLastPost:n,shortcutReactToLastPostEmittedFrom:a}=this.props,s=e.shortcutReactToLastPostEmittedFrom!==a&&a===j.tY.CENTER;n&&s&&this.blockShortcutReactToLastPostForNonMessages(t)}render(){const{listId:e,previousListId:t,loadingOlderPosts:n,loadingNewerPosts:a}=this.props,{OLDER_MESSAGES_LOADER:s,NEWER_MESSAGES_LOADER:r,CHANNEL_INTRO_MESSAGE:i,LOAD_OLDER_MESSAGES_TRIGGER:o,LOAD_NEWER_MESSAGES_TRIGGER:l}=j.PostListRowListIds;if(xe.Ji(e)){const t=xe.xF(e);return A().createElement(qt.Z,{key:t,date:t})}if(xe.p4(e))return A().createElement(jt.Z,{separatorId:e,newMessagesSeparatorActions:this.props.newMessagesSeparatorActions,channelId:this.props.channelId});if(this.props.exceededLimitChannelId)return A().createElement($e,{channelId:this.props.exceededLimitChannelId,firstInaccessiblePostTime:this.props.firstInaccessiblePostTime});if(e===i)return A().createElement(xt,null);if(e===o||e===l)return A().createElement("button",{className:"more-messages-text theme style--none color--link",onClick:e===o?this.props.loadOlderPosts:this.props.loadNewerPosts},A().createElement(Pe.FormattedMessage,{id:"posts_view.loadMore",defaultMessage:"Load More Messages"}));if(e===s||e===r){const e=!n&&!a;return A().createElement("div",{className:"loading-screen"},A().createElement("div",{className:U()("loading__content",{hideAnimation:e})},A().createElement("div",{className:"round round-1"}),A().createElement("div",{className:"round round-2"}),A().createElement("div",{className:"round round-3"})))}const c={previousPostId:t,shouldHighlight:Boolean(this.props.shouldHighlight),togglePostMenu:this.props.togglePostMenu,isLastPost:this.props.isLastPost};return xe.mM(e)?A().createElement(Ht.Z,Object.assign({location:j.tY.CENTER,combinedId:e},c)):A().createElement(et.Z,Object.assign({post:this.props.post,location:j.tY.CENTER},c))}}Ft=Zt,Bt="propTypes",Ut={listId:F().string.isRequired,previousListId:F().string,fullWidth:F().bool,shouldHighlight:F().bool,loadOlderPosts:F().func.isRequired,loadNewerPosts:F().func.isRequired,togglePostMenu:F().func.isRequired,isLastPost:F().bool.isRequired,shortcutReactToLastPostEmittedFrom:F().string.isRequired,loadingNewerPosts:F().bool.isRequired,loadingOlderPosts:F().bool.isRequired,limitsLoaded:F().bool.isRequired,exceededLimitChannelId:F().string,firstInaccessiblePostTime:F().number,channelId:F().string.isRequired,newMessagesSeparatorActions:F().array.isRequired,actions:F().shape({emitShortcutReactToLastPostFrom:F().any.isRequired}).isRequired},(Bt=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(Bt))in Ft?Object.defineProperty(Ft,Bt,{value:Ut,enumerable:!0,configurable:!0,writable:!0}):Ft[Bt]=Ut;const Vt=(0,a.connect)((function(e,t){const n=(0,We.dj)(e),a=(0,Ve.I)(e),s=(0,Ze.fN)(e),r=(0,Ze.B_)(e),i={shortcutReactToLastPostEmittedFrom:n,usage:a,limits:s,limitsLoaded:r,post:(0,ke.xl)(e,t.listId),currentUserId:(0,f.rc)(e),newMessagesSeparatorActions:e.plugins.components.NewMessagesSeparatorAction};if((t.listId===j.PostListRowListIds.OLDER_MESSAGES_LOADER||t.listId===j.PostListRowListIds.CHANNEL_INTRO_MESSAGE)&&r){const t=(0,f.gO)(e),n=(0,ke.I7)(e).channels[t];(Boolean(n)||0===n)&&(i.exceededLimitChannelId=t,i.firstInaccessiblePostTime=n)}return i}),(function(e){return{actions:(0,V.bindActionCreators)({emitShortcutReactToLastPostFrom:Ge.id},e)}}))(Zt);function Gt(e){const{formatMessage:t}=(0,Pe.useIntl)();return A().createElement("span",e,A().createElement("svg",{x:"0px",y:"0px",viewBox:"-239 239 21 23",enableBackground:"new -239 239 21 23",role:"img","aria-label":t({id:"generic_icons.arrow.down",defaultMessage:"Down Arrow Icon"})},A().createElement("path",{d:"M-239,241.4l2.4-2.4l8.1,8.2l8.1-8.2l2.4,2.4l-10.5,10.6L-239,241.4z M-228.5,257.2l8.1-8.2l2.4,2.4l-10.5,10.6l-10.5-10.6 l2.4-2.4L-228.5,257.2z"})))}const Wt=e=>{let{isScrolling:t,atBottom:n,onClick:a}=e;return window.innerWidth>768?null:A().createElement("div",{className:U()("post-list__arrows",{scrolling:t&&!1===n}),onClick:a},A().createElement(Gt,null))};Wt.propTypes={isScrolling:F().bool.isRequired,atBottom:F().bool,onClick:F().func.isRequired};const zt=Wt;n(73902);var Kt=n(4500),Jt=n(97909);const Yt=e=>{let{children:t,onDismiss:n}=e;return A().createElement("div",{"data-testid":"hint-toast",className:"hint-toast"},A().createElement("div",{className:"hint-toast__message"},t),A().createElement("div",{className:"hint-toast__dismiss",onClick:()=>{"function"==typeof n&&n()},"data-testid":"dismissHintToast"},A().createElement(Jt.Z,{className:"close-btn",id:"dismissHintToast"})))};Yt.propTypes={children:F().node.isRequired,onDismiss:F().func.isRequired};var Qt=n(96663);const Xt=e=>{let{onDismiss:t,onClick:n}=e;const{formatMessage:a}=(0,Pe.useIntl)(),s=a({id:"postlist.toast.scrollToBottom",defaultMessage:"Jump to recents"});return A().createElement("div",{"data-testid":"scroll-to-bottom-toast",className:"scroll-to-bottom-toast",onClick:e=>{e.preventDefault(),n()}},A().createElement(Qt.Z,null),s,A().createElement("div",{className:"scroll-to-bottom-toast__dismiss",onClick:e=>{e.preventDefault(),e.stopPropagation(),t()},"data-testid":"scroll-to-bottom-toast--dismiss-button"},A().createElement(Jt.Z,{className:"close-btn",id:"dismissScrollToBottomToast"})))};Xt.propTypes={onDismiss:F().func.isRequired,onClick:F().func.isRequired};const $t=Xt;var en=n(85690),tn=n(52576),nn=n(64901),an=n(8243),sn=n(1065),rn=n(35887);function on(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ln=[tn.ap.NL];class cn extends A().PureComponent{constructor(e){var t;super(e),t=this,on(this,"handleShortcut",(e=>{(0,rn.p)(e,j.default.KeyCodes.ESCAPE)&&(this.state.showUnreadToast?this.hideUnreadToast():this.state.showNewMessagesToast?this.hideNewMessagesToast():this.state.showUnreadWithBottomStartToast?this.hideUnreadWithBottomStartToast():this.hideArchiveToast())})),on(this,"hideUnreadToast",(()=>{this.state.showUnreadToast&&this.setState({showUnreadToast:!1})})),on(this,"hideArchiveToast",(()=>{this.state.showMessageHistoryToast&&this.setState({showMessageHistoryToast:!1})})),on(this,"hideNewMessagesToast",(function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t.state.showNewMessagesToast&&(t.setState({showNewMessagesToast:!1}),e&&t.props.updateLastViewedBottomAt())})),on(this,"hideSearchHintToast",(()=>{this.props.onSearchHintDismiss&&this.props.onSearchHintDismiss()})),on(this,"hideUnreadWithBottomStartToast",(()=>{this.state.showUnreadWithBottomStartToast&&this.setState({showUnreadWithBottomStartToast:!1})})),on(this,"newMessagesToastText",((e,t)=>this.props.width>500&&void 0!==t?A().createElement(Pe.FormattedMessage,{id:"postlist.toast.newMessagesSince",defaultMessage:"{count, number} new {count, plural, one {message} other {messages}} {isToday, select, true {} other {since}} {date}",values:{count:e,isToday:(0,sn.zk)(new Date(t)).toString(),date:A().createElement(tn.ZP,{value:t,useTime:!1,ranges:ln})}}):A().createElement(Pe.FormattedMessage,{id:"postlist.toast.newMessages",defaultMessage:"{count, number} new {count, plural, one {message} other {messages}}",values:{count:e}}))),on(this,"archiveToastText",(()=>A().createElement(Pe.FormattedMessage,{id:"postlist.toast.history",defaultMessage:"Viewing message history"}))),on(this,"getSearchHintToastText",(()=>A().createElement(Pe.FormattedMessage,{id:"postlist.toast.searchHint",defaultMessage:"Tip: Try {searchShortcut} to search this channel",values:{searchShortcut:A().createElement(en.B,null)}}))),on(this,"changeUrlToRemountChannelView",(()=>{const{match:e}=this.props;(0,an.s)().replace("/".concat(e.params.team))})),on(this,"scrollToNewMessage",(()=>{const{focusedPostId:e,atLatestPost:t,scrollToNewMessage:n,updateLastViewedBottomAt:a}=this.props;!e||t?(n(),a(),this.hideNewMessagesToast()):this.changeUrlToRemountChannelView()})),on(this,"scrollToLatestMessages",(()=>{var e,t;const{focusedPostId:n,atLatestPost:a,scrollToLatestMessages:s}=this.props;if(n){if(!a)return void this.changeUrlToRemountChannelView();this.hideArchiveToast()}s(),this.hideUnreadToast(),null===(e=(t=this.props).hideScrollToBottomToast)||void 0===e||e.call(t)})),on(this,"scrollToUnreadMessages",(()=>{this.props.scrollToUnreadMessages(),this.hideUnreadWithBottomStartToast()})),this.state={unreadCountInChannel:e.unreadCountInChannel,unreadCount:0}}static getDerivedStateFromProps(e,t){let n,{showUnreadToast:a,showNewMessagesToast:s,showMessageHistoryToast:r,showUnreadWithBottomStartToast:i}=t;return n=e.atLatestPost?e.unreadScrollPosition===Oe.Preferences.UNREAD_SCROLL_POSITION_START_FROM_NEWEST&&t.unreadCountInChannel?t.unreadCountInChannel+e.newRecentMessagesCount:cn.countNewMessages(e.rootPosts,e.isCollapsedThreadsEnabled,e.postListIds):e.channelMarkedAsUnread?e.unreadScrollPosition===Oe.Preferences.UNREAD_SCROLL_POSITION_START_FROM_NEWEST?e.unreadCountInChannel+e.newRecentMessagesCount:t.unreadCountInChannel:t.unreadCountInChannel+e.newRecentMessagesCount,void 0===a&&null!==e.atBottom&&(a=n>0&&!e.atBottom),void 0===r&&""!==e.focusedPostId&&null!==e.atBottom&&(r=e.initScrollOffsetFromBottom>1e3||!e.atLatestPost),!e.channelMarkedAsUnread||!1!==e.atBottom||t.channelMarkedAsUnread||t.showUnreadToast||(a=!0),e.channelMarkedAsUnread&&e.lastViewedAt!==t.lastViewedAt&&!1===e.atBottom&&(a=!0),!a&&n>0&&!1===e.atBottom&&e.latestPostTimeStamp&&e.lastViewedBottom<e.latestPostTimeStamp&&(s=!0),e.unreadScrollPosition!==Oe.Preferences.UNREAD_SCROLL_POSITION_START_FROM_NEWEST||e.channelMarkedAsUnread||(a=!1),n||(a=!1,s=!1),e.isNewMessageLineReached&&(i=!1),void 0===i&&e.lastViewedAt&&e.lastViewedAt!==t.lastViewedAt&&e.shouldStartFromBottomWhenUnread&&n>0&&!e.isNewMessageLineReached&&(i=!0),{unreadCount:n,showUnreadToast:a,showNewMessagesToast:s,showUnreadWithBottomStartToast:i,lastViewedAt:e.lastViewedAt,atBottom:e.atBottom,channelMarkedAsUnread:e.channelMarkedAsUnread,showMessageHistoryToast:r}}componentDidMount(){this.mounted=!0;const{showUnreadToast:e,showNewMessagesToast:t,showMessageHistoryToast:n,showUnreadWithBottomStartToast:a}=this.state,s=Boolean(e||t||n||a);document.addEventListener("keydown",this.handleShortcut),this.props.actions.updateToastStatus(s)}componentDidUpdate(e,t){const{showUnreadToast:n,showNewMessagesToast:a,showMessageHistoryToast:s,showUnreadWithBottomStartToast:r}=this.state,{atBottom:i,atLatestPost:o,postListIds:l,lastViewedBottom:c,updateNewMessagesAtInChannel:d,actions:u}=this.props;!e.atBottom&&i&&o&&(this.hideNewMessagesToast(!1),this.hideUnreadToast(),this.hideArchiveToast());const h=e.postListIds.length,m=l.length;if(m!==h&&l[0]!==e.postListIds[0]&&!1===i&&o&&m>0&&!n&&d(c),t.showUnreadToast!==n||t.showNewMessagesToast!==a||t.showMessageHistoryToast!==s||t.showUnreadWithBottomStartToast!==r){const e=Boolean(n||a||s||r);u.updateToastStatus(e)}}componentWillUnmount(){document.removeEventListener("keydown",this.handleShortcut)}getToastToRender(){const{atLatestPost:e,atBottom:t,width:n,lastViewedAt:a,showSearchHintToast:s,showScrollToBottomToast:r}=this.props,{showUnreadToast:i,showNewMessagesToast:o,showMessageHistoryToast:l,showUnreadWithBottomStartToast:c,unreadCount:d}=this.state,u={show:!0,width:n,onDismiss:this.hideUnreadToast,onClick:this.scrollToLatestMessages,onClickMessage:A().createElement(Pe.FormattedMessage,{id:"postlist.toast.scrollToBottom",defaultMessage:"Jump to recents"}),showActions:!e||e&&!1===t};if(i&&d>0)return A().createElement(nn.Z,u,this.newMessagesToastText(d,a));const h={show:!0,width:n,onDismiss:this.hideUnreadWithBottomStartToast,onClick:this.scrollToUnreadMessages,onClickMessage:A().createElement(Pe.FormattedMessage,{id:"postlist.toast.scrollToUnread",defaultMessage:"Jump to unreads"}),showActions:!0,jumpDirection:"up"};if(c&&d>0)return A().createElement(nn.Z,h,this.newMessagesToastText(d,a));if(o){const e={onDismiss:this.hideNewMessagesToast,onClick:this.scrollToNewMessage,onClickMessage:A().createElement(Pe.FormattedMessage,{id:"postlist.toast.scrollToLatest",defaultMessage:"Jump to new messages"})};return A().createElement(nn.Z,Object.assign({},u,e),this.newMessagesToastText(d,a))}if(l){const e={show:!0,width:n,onDismiss:this.hideArchiveToast,onClick:this.scrollToLatestMessages,onClickMessage:(0,be._u)("postlist.toast.scrollToBottom","Jump to recents"),showActions:!0,extraClasses:"toast__history"};return A().createElement(nn.Z,e,this.archiveToastText())}const m=[];return r&&m.push(A().createElement($t,{key:"scroll-to-bottom-toast",onClick:this.scrollToLatestMessages,onDismiss:this.props.onScrollToBottomToastDismiss})),s&&m.push(A().createElement(Yt,{key:"search-hint-toast",onDismiss:this.hideSearchHintToast},this.getSearchHintToastText())),m.length>0?A().createElement("div",{className:"toasts-wrapper"},m):null}render(){const e=this.getToastToRender();return A().createElement(A().Fragment,null,e)}}on(cn,"propTypes",{channelMarkedAsUnread:F().bool,postListIds:F().arrayOf(F().string).isRequired,latestPostTimeStamp:F().number,atBottom:F().oneOfType([F().bool,F().oneOf([null])]),lastViewedBottom:F().number.isRequired,width:F().number.isRequired,focusedPostId:F().string,initScrollOffsetFromBottom:F().number.isRequired,updateNewMessagesAtInChannel:F().func.isRequired,scrollToNewMessage:F().func.isRequired,scrollToLatestMessages:F().func.isRequired,scrollToUnreadMessages:F().func.isRequired,updateLastViewedBottomAt:F().func.isRequired,showSearchHintToast:F().bool.isRequired,onSearchHintDismiss:F().func.isRequired,showScrollToBottomToast:F().bool.isRequired,onScrollToBottomToastDismiss:F().func.isRequired,hideScrollToBottomToast:F().func.isRequired,shouldStartFromBottomWhenUnread:F().bool.isRequired,isNewMessageLineReached:F().bool.isRequired,rootPosts:F().objectOf(F().bool).isRequired,lastViewedAt:F().number.isRequired,newRecentMessagesCount:F().number.isRequired,unreadScrollPosition:F().string.isRequired,isCollapsedThreadsEnabled:F().bool.isRequired}),on(cn,"defaultProps",{focusedPostId:""}),on(cn,"countNewMessages",(function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const a=(0,xe.wh)(n);if(a<=0)return 0;let s=n.slice(0,a).filter((e=>!(0,Fe.Xq)(e)));return t&&(s=s.filter((t=>e[t]))),s.length}));const dn=(0,Pe.injectIntl)(cn),un=(0,O.withRouter)((0,a.connect)((function(){const e=(0,Kt.P1)("makeCountUnreadsBelow",ke.Bd,l.rc,((e,t)=>t),((e,t,n)=>n),C.ym,((e,t,n,a,s)=>n?n.map((t=>e[t])).filter((e=>e&&e.user_id!==t&&e.state!==Oe.Posts.POST_DELETED&&e.create_at>a&&(!s||""===e.root_id))).length:0)),t=(0,Kt.P1)("makeGetRootPosts",ke.Bd,l.rc,r.TB,((e,t,n)=>Object.values(e).filter((e=>""===e.root_id&&e.channel_id===(null==n?void 0:n.id)&&e.state!==Oe.Posts.POST_DELETED)).reduce(((e,t)=>(e[t.id]=!0,e)),{}))),n=(0,xe.Zl)();return function(a,s){let i=0;const o=(0,r.Zm)(a,s.channelId),l=a.views.channel.lastChannelViewTime[s.channelId],c=(0,C.mw)(a);if(!s.atLatestPost){let t=(0,ke.T$)(a,s.channelId)||[];t&&(t=n(a,{postIds:t,lastViewedAt:l})),i=e(a,t,l)}return{rootPosts:t(a),lastViewedAt:l,newRecentMessagesCount:i,unreadScrollPosition:c,isCollapsedThreadsEnabled:(0,C.ym)(a),unreadCountInChannel:(0,r.JC)(a),channelMarkedAsUnread:o}}}),(function(e){return{actions:(0,V.bindActionCreators)({updateToastStatus:c.fB},e)}}))(dn));var hn=n(69883);const mn=e=>{const{postIds:t}=e,n=(0,R.useMemo)((()=>(0,Fe.nc)(t||[])),[t]),s=(0,a.useSelector)((e=>(0,ke.xl)(e,n))),r=(0,Fe.XI)(s);return A().createElement("span",{className:"sr-only","aria-live":"polite"},r)};mn.propTypes={postIds:F().arrayOf(F().string)};const pn=mn;function gn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function fn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gn(Object(n),!0).forEach((function(t){Cn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Cn(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const En={padding:"14px 0px 7px"},bn={position:"absolute",bottom:"0",maxHeight:"100%"};class vn extends A().PureComponent{constructor(e){var t;super(e),t=this,Cn(this,"scrollStopAction",null),Cn(this,"handleWindowResize",(()=>{this.showSearchHintThreshold=this.getShowSearchHintThreshold()})),Cn(this,"togglePostMenu",(e=>{let t=this.state.dynamicListStyle;this.props.isMobileView&&(t=fn(fn({},t),{},{willChange:e?"unset":"transform"})),this.setState({postMenuOpened:e,dynamicListStyle:t})})),Cn(this,"onNewMessageLineReached",(()=>{this.setState({isNewMessageLineReached:!0})})),Cn(this,"renderRow",(e=>{let{data:t,itemId:n,style:a}=e;const s=t.indexOf(n);let r="";const i="post-row__padding",o=-1!==s&&s<t.length-1?t[s+1]:"",l=s>0&&s<t.length?t[s-1]:"";((0,xe.Ji)(l)||(0,xe.p4)(l))&&(r+=i+" bottom"),((0,xe.Ji)(o)||(0,xe.p4)(o))&&(r.includes(i)?r+=" top":r+=i+" top");const c=n===this.state.postListIds[0];return A().createElement("div",{style:a,className:r},A().createElement(Vt,{listId:n,previousListId:(0,Fe.in)(t,s),shouldHighlight:n===this.props.focusedPostId,loadOlderPosts:this.props.actions.loadOlderPosts,loadNewerPosts:this.props.actions.loadNewerPosts,togglePostMenu:this.togglePostMenu,isLastPost:c,loadingNewerPosts:this.props.loadingNewerPosts,loadingOlderPosts:this.props.loadingOlderPosts,channelId:this.props.channelId}))})),Cn(this,"scrollToFailed",(e=>{0===e?this.props.actions.changeUnreadChunkTimeStamp(0):this.props.actions.changeUnreadChunkTimeStamp(this.props.lastViewedAt)})),Cn(this,"onScroll",(e=>{let{scrollDirection:t,scrollOffset:n,scrollUpdateWasRequested:a,clientHeight:s,scrollHeight:r}=e;if(r<=0)return;const i="backward"===t&&!a,o="forward"===t&&!a,l=n<1e3,c=this.getOffsetFromBottom(n,r,s),d=c<1e3;if(i&&l&&!this.props.atOldestPost?this.props.actions.loadOlderPosts():o&&d&&!this.props.atLatestPost&&this.props.actions.loadNewerPosts(),this.props.isMobileView&&(this.state.isScrolling||this.setState({isScrolling:!0}),this.scrollStopAction&&this.scrollStopAction.fireAfter(j.default.SCROLL_DELAY)),this.checkBottom(n,r,s),a){var u;const e=null===(u=this.listRef.current)||void 0===u?void 0:u._getRangeToRender();e&&e[3]<=1&&!this.props.atLatestPost&&this.props.actions.canLoadMorePosts(j.kL.AFTER_ID),!this.state.atBottom&&r&&this.setState({initScrollOffsetFromBottom:c})}this.props.isMobileView&&this.state.showSearchHint&&this.setState({showSearchHint:!1}),this.props.isMobileView||this.state.isSearchHintDismissed||this.setState({showSearchHint:c>this.showSearchHintThreshold}),this.updateScrollToBottomToastVisibility(n,r,s)})),Cn(this,"getShowSearchHintThreshold",(()=>3*window.screen.height)),Cn(this,"checkBottom",((e,t,n)=>{this.updateAtBottom(this.isAtBottom(e,t,n))})),Cn(this,"getOffsetFromBottom",((e,t,n)=>t-n-e)),Cn(this,"isAtBottom",((e,t,n)=>this.getOffsetFromBottom(e,t,n)<=10&&t>0)),Cn(this,"updateAtBottom",(e=>{if(e!==this.state.atBottom){let t=Date.now();this.props.latestPostTimeStamp&&this.props.latestPostTimeStamp>t&&(t=this.props.latestPostTimeStamp),this.setState({atBottom:e,lastViewedBottom:t})}})),Cn(this,"updateLastViewedBottomAt",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();t.setState({lastViewedBottom:e})})),Cn(this,"handleScrollStop",(()=>{this.mounted&&this.setState({isScrolling:!1})})),Cn(this,"handleSearchHintDismiss",(()=>{this.setState({showSearchHint:!1,isSearchHintDismissed:!0})})),Cn(this,"handleScrollToBottomToastDismiss",(()=>{this.setState({showScrollToBottomToast:!1,isScrollToBottomDismissed:!0})})),Cn(this,"hideScrollToBottomToast",(()=>{this.setState({showScrollToBottomToast:!1})})),Cn(this,"updateScrollToBottomToastVisibility",((e,t,n)=>{if(this.state.showScrollToBottomToast&&this.state.atBottom)this.setState({showScrollToBottomToast:!1});else if(!this.state.isScrollToBottomDismissed){const a=this.getOffsetFromBottom(e,t,n);this.setState({showScrollToBottomToast:a>this.showSearchHintThreshold})}})),Cn(this,"updateFloatingTimestamp",(e=>{this.props.isMobileView&&this.props.postListIds&&this.setState({topPostId:(0,Fe.nc)(this.props.postListIds.slice(e))})})),Cn(this,"onItemsRendered",(e=>{let{visibleStartIndex:t,visibleStopIndex:n}=e;this.updateFloatingTimestamp(t),this.newMessageLineIndex>0&&!this.state.isNewMessageLineReached&&this.newMessageLineIndex<=t&&this.newMessageLineIndex>=n&&this.onNewMessageLineReached()})),Cn(this,"initScrollToIndex",(()=>{if(this.props.focusedPostId)return{index:this.state.postListIds.findIndex((e=>e===this.props.focusedPostId)),position:"center"};if(this.props.shouldStartFromBottomWhenUnread)return{index:0,position:"end"};const e=(0,xe.wh)(this.state.postListIds);return e>0?(0,xe.Ji)(this.state.postListIds[e+1])?{index:e+1,position:"start",offset:-50}:{index:e,position:"start",offset:-50}:{index:0,position:"end"}})),Cn(this,"scrollToLatestMessages",(()=>{this.props.atLatestPost?this.scrollToBottom():(this.updateNewMessagesAtInChannel(),this.props.actions.changeUnreadChunkTimeStamp(0))})),Cn(this,"scrollToUnreadMessages",(()=>{this.props.actions.toggleShouldStartFromBottomWhenUnread()})),Cn(this,"scrollToBottom",(()=>{var e;null===(e=this.listRef.current)||void 0===e||e.scrollToItem(0,"end")})),Cn(this,"scrollToNewMessage",(()=>{var e;null===(e=this.listRef.current)||void 0===e||e.scrollToItem((0,xe.wh)(this.state.postListIds),"start",-50)})),Cn(this,"updateNewMessagesAtInChannel",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();t.props.actions.updateNewMessagesAtInChannel(t.props.channelId,e)})),Cn(this,"renderToasts",(e=>A().createElement(un,{atLatestPost:this.props.atLatestPost,postListIds:this.state.postListIds,atBottom:this.state.atBottom,width:e,lastViewedBottom:this.state.lastViewedBottom,latestPostTimeStamp:this.props.latestPostTimeStamp,scrollToUnreadMessages:this.scrollToUnreadMessages,scrollToNewMessage:this.scrollToNewMessage,scrollToLatestMessages:this.scrollToLatestMessages,updateNewMessagesAtInChannel:this.updateNewMessagesAtInChannel,updateLastViewedBottomAt:this.updateLastViewedBottomAt,shouldStartFromBottomWhenUnread:this.props.shouldStartFromBottomWhenUnread,isNewMessageLineReached:this.state.isNewMessageLineReached,channelId:this.props.channelId,focusedPostId:this.props.focusedPostId,initScrollOffsetFromBottom:this.state.initScrollOffsetFromBottom,onSearchHintDismiss:this.handleSearchHintDismiss,showSearchHintToast:this.state.showSearchHint,showScrollToBottomToast:this.state.showScrollToBottomToast,onScrollToBottomToastDismiss:this.handleScrollToBottomToastDismiss,hideScrollToBottomToast:this.hideScrollToBottomToast})));const n=j.PostListRowListIds.CHANNEL_INTRO_MESSAGE;this.mounted=!0,this.state={isScrolling:!1,atBottom:null,lastViewedBottom:Date.now(),postListIds:[n],topPostId:"",postMenuOpened:!1,dynamicListStyle:{willChange:"transform"},initScrollCompleted:!1,initScrollOffsetFromBottom:0,showSearchHint:!1,isSearchHintDismissed:!1,isNewMessageLineReached:!1,showScrollToBottomToast:!1,isScrollToBottomDismissed:!1},this.listRef=A().createRef(),this.postListRef=A().createRef(),this.props.isMobileView&&(this.scrollStopAction=new hn.Z(this.handleScrollStop)),this.initRangeToRender=this.props.focusedPostId?[0,100]:[0,50];let a=0;a=e.focusedPostId?(this.props.postListIds||[]).findIndex((e=>e===this.props.focusedPostId)):(0,xe.wh)(e.postListIds||[]),this.newMessageLineIndex=(0,xe.wh)(e.postListIds||[]);const s=e.focusedPostId?100:50;this.initRangeToRender=[Math.max(a-30,0),Math.max(a+30,Math.min((e.postListIds||[]).length-1,s))],this.showSearchHintThreshold=this.getShowSearchHintThreshold()}componentDidMount(){this.mounted=!0,window.addEventListener("resize",this.handleWindowResize),qe.Z.addListener(j.GM.POST_LIST_SCROLL_TO_BOTTOM,this.scrollToLatestMessages)}getSnapshotBeforeUpdate(e){if(this.postListRef&&this.postListRef.current){const n=this.props.postListIds&&this.props.postListIds.length!==(e.postListIds||[]).length&&this.props.postListIds[0]===(e.postListIds||[])[0],a=this.props.atOldestPost!==e.atOldestPost;if((n||a)&&!1===this.state.atBottom){var t;const e=this.postListRef.current;return{previousScrollTop:null===(t=e.parentElement)||void 0===t?void 0:t.scrollTop,previousScrollHeight:e.scrollHeight}}}return null}componentDidUpdate(e,t,n){if(this.props.isMobileView&&!e.isMobileView&&(this.scrollStopAction=new hn.Z(this.handleScrollStop)),!this.postListRef.current)return;const a=(e.postListIds||[]).length,s=(this.props.postListIds||[]).length;if(this.newMessageLineIndex=(0,xe.wh)(this.props.postListIds||[]),n){const t=this.postListRef.current.scrollHeight,i=s!==a&&(this.props.postListIds||[])[0]===(e.postListIds||[])[0],o=this.props.atOldestPost!==e.atOldestPost;if((i||o)&&!this.state.atBottom&&n){const e=n.previousScrollTop+(t-n.previousScrollHeight);var r;0!==e&&e-n.previousScrollTop!=0&&(null===(r=this.listRef.current)||void 0===r||r.scrollTo(e,e-n.previousScrollTop,!0))}}}componentWillUnmount(){this.mounted=!1,window.removeEventListener("resize",this.handleWindowResize),qe.Z.removeListener(j.GM.POST_LIST_SCROLL_TO_BOTTOM,this.scrollToLatestMessages)}static getDerivedStateFromProps(e,t){const n=e.postListIds||[];let a;a=e.atOldestPost?[...n,j.PostListRowListIds.CHANNEL_INTRO_MESSAGE]:e.autoRetryEnable?[...n,j.PostListRowListIds.OLDER_MESSAGES_LOADER]:[...n,j.PostListRowListIds.LOAD_OLDER_MESSAGES_TRIGGER],e.atLatestPost||(a=e.autoRetryEnable?[j.PostListRowListIds.NEWER_MESSAGES_LOADER,...a]:[j.PostListRowListIds.LOAD_NEWER_MESSAGES_TRIGGER,...a]);const s={postListIds:a};if(e.isMobileView!==t.isMobileView){s.isMobileView=e.isMobileView;const n=t.dynamicListStyle;t.postMenuOpened&&(e.isMobileView||"unset"!==n.willChange?e.isMobileView&&"transform"===n.willChange&&(s.dynamicListStyle=fn(fn({},n),{},{willChange:"unset"})):s.dynamicListStyle=fn(fn({},n),{},{willChange:"transform"}))}return s}render(){const{channelId:e}=this.props,{dynamicListStyle:t}=this.state;return A().createElement("div",{className:"a11y__region","data-a11y-sort-order":"1","data-a11y-focus-child":!0,"data-a11y-order-reversed":!0,"data-a11y-loop-navigation":!1,"aria-label":be._u("accessibility.sections.centerContent","message list main region")},this.props.isMobileView&&A().createElement(A().Fragment,null,A().createElement(je.Z,{isScrolling:this.state.isScrolling,postId:this.state.topPostId}),A().createElement(zt,{isScrolling:this.state.isScrolling,atBottom:Boolean(this.state.atBottom),onClick:this.scrollToBottom})),A().createElement("div",{className:"post-list-holder-by-time",key:"postlist-"+e},A().createElement("div",{className:"post-list__table"},A().createElement("div",{id:"postListContent",className:"post-list__content"},A().createElement(pn,{postIds:this.props.postListIds}),A().createElement(He.Z,null,(e=>{let{height:n,width:a}=e;return A().createElement(A().Fragment,null,A().createElement("div",null,A().createElement(q.default,{pluggableName:"ChannelToast"}),this.renderToasts(a)),A().createElement(Ue.z,{ref:this.listRef,height:n,width:a,className:"post-list__dynamic",itemData:this.state.postListIds,overscanCountForward:80,overscanCountBackward:80,onScroll:this.onScroll,initScrollToIndex:this.initScrollToIndex,canLoadMorePosts:this.props.actions.canLoadMorePosts,innerRef:this.postListRef,style:fn(fn({},bn),t),innerListStyle:En,initRangeToRender:this.initRangeToRender,loaderId:j.PostListRowListIds.OLDER_MESSAGES_LOADER,correctScrollToBottom:this.props.atLatestPost,onItemsRendered:this.onItemsRendered,scrollToFailed:this.scrollToFailed},this.renderRow))}))))))}}Cn(vn,"propTypes",{postListIds:F().arrayOf(F().string),channelId:F().string.isRequired,autoRetryEnable:F().bool.isRequired,loadingNewerPosts:F().bool.isRequired,loadingOlderPosts:F().bool.isRequired,isMobileView:F().bool.isRequired,atOldestPost:F().bool,atLatestPost:F().bool,latestPostTimeStamp:F().number,lastViewedAt:F().number.isRequired,focusedPostId:F().string,shouldStartFromBottomWhenUnread:F().bool.isRequired,actions:F().shape({loadOlderPosts:F().func.isRequired,loadNewerPosts:F().func.isRequired,canLoadMorePosts:F().func.isRequired,changeUnreadChunkTimeStamp:F().func.isRequired,updateNewMessagesAtInChannel:F().any.isRequired,toggleShouldStartFromBottomWhenUnread:F().func.isRequired}).isRequired});var yn=n(47816);function _n(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mn(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(0,Be.B1)(yn.vc.PostListLoaded);const t=(0,yn.vG)({name:yn.UH.ChannelSwitch,startMark:yn.vc.ChannelLinkClicked,endMark:yn.vc.PostListLoaded,labels:{fresh:e.toString()},canFail:!0}),n=(0,yn.vG)({name:yn.UH.TeamSwitch,startMark:yn.vc.TeamLinkClicked,endMark:yn.vc.PostListLoaded,labels:{fresh:e.toString()},canFail:!0});if((0,Be.Is)()){if(t){const n=(0,Be.qm)(yn.vc.ChannelLinkClicked,yn.vc.PostListLoaded);(0,Be.L9)("performance",yn.UH.ChannelSwitch,{duration:Math.round(t.duration),fresh:e,requestCount:n})}if(n){const t=(0,Be.qm)(yn.vc.TeamLinkClicked,yn.vc.PostListLoaded);(0,Be.L9)("performance",yn.UH.TeamSwitch,{duration:Math.round(n.duration),fresh:e,requestCount:t})}}(0,Be.tl)([yn.vc.ChannelLinkClicked,yn.vc.TeamLinkClicked,yn.vc.PostListLoaded])}class wn extends A().PureComponent{constructor(e){var t;super(e),t=this,_n(this,"postsOnLoad",(async e=>{const{focusedPostId:t,isFirstLoad:n,latestPostTimeStamp:a,isPrefetchingInProcess:s,actions:r}=this.props;t?await r.loadPostsAround(e,t):n?s||await r.loadUnreads(e):a?await r.syncPostsInChannel(e,a,!1):await r.loadLatestPosts(e),t||this.props.actions.markChannelAsRead(e),this.mounted&&this.setState({loadingOlderPosts:!1,loadingNewerPosts:!1})})),_n(this,"callLoadPosts",(async(e,t,n)=>{const{error:a}=await this.props.actions.loadPosts({channelId:e,postId:t,type:n});return n===j.kL.BEFORE_ID?this.setState({loadingOlderPosts:!1}):this.setState({loadingNewerPosts:!1}),a?this.autoRetriesCount<3?(this.autoRetriesCount++,await this.callLoadPosts(e,t,n)):this.mounted&&this.setState({autoRetryEnable:!1}):(this.mounted&&this.setState({autoRetryEnable:!0}),this.state.autoRetryEnable||(this.autoRetriesCount=0)),{error:a}})),_n(this,"getOldestVisiblePostId",(()=>(0,Fe.ju)(this.props.postListIds||[]))),_n(this,"getLatestVisiblePostId",(()=>(0,Fe.nc)(this.props.postListIds||[]))),_n(this,"canLoadMorePosts",(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j.kL.BEFORE_ID;t.props.hasInaccessiblePosts||t.props.postListIds&&(t.state.loadingOlderPosts||t.state.loadingNewerPosts||(t.extraPagesLoaded>10?t.state.autoRetryEnable&&t.setState({autoRetryEnable:!1}):(t.props.atOldestPost||e!==j.kL.BEFORE_ID?t.props.atLatestPost||await t.getPostsAfter():await t.getPostsBefore(),t.extraPagesLoaded+=1)))})),_n(this,"getPostsBefore",(async()=>{if(this.state.loadingOlderPosts)return;this.state.autoRetryEnable||(this.extraPagesLoaded=0);const e=this.getOldestVisiblePostId();this.setState({loadingOlderPosts:!0}),await this.callLoadPosts(this.props.channelId,e,j.kL.BEFORE_ID)})),_n(this,"getPostsAfter",(async()=>{if(this.state.loadingNewerPosts)return;this.state.autoRetryEnable||(this.extraPagesLoaded=0);const e=this.getLatestVisiblePostId();this.setState({loadingNewerPosts:!0}),await this.callLoadPosts(this.props.channelId,e,j.kL.AFTER_ID)})),this.state={loadingNewerPosts:!1,loadingOlderPosts:!1,autoRetryEnable:!0},this.extraPagesLoaded=0,this.autoRetriesCount=0,this.actionsForPostList={loadOlderPosts:this.getPostsBefore,loadNewerPosts:this.getPostsAfter,canLoadMorePosts:this.canLoadMorePosts,changeUnreadChunkTimeStamp:e.changeUnreadChunkTimeStamp,toggleShouldStartFromBottomWhenUnread:e.toggleShouldStartFromBottomWhenUnread,updateNewMessagesAtInChannel:this.props.actions.updateNewMessagesAtInChannel}}componentDidMount(){this.mounted=!0,this.props.channelId&&(this.postsOnLoad(this.props.channelId),this.props.postListIds&&Mn())}componentDidUpdate(e){this.props.channelId!==e.channelId&&this.postsOnLoad(this.props.channelId),null!=this.props.postListIds&&null==e.postListIds&&Mn(!0)}componentWillUnmount(){this.mounted=!1}render(){return this.props.postListIds?A().createElement("div",{className:"post-list-holder-by-time",key:"postlist-"+this.props.channelId},A().createElement("div",{className:"post-list__table"},A().createElement("div",{id:"virtualizedPostListContent",className:"post-list__content"},A().createElement(vn,{loadingNewerPosts:this.state.loadingNewerPosts,loadingOlderPosts:this.state.loadingOlderPosts,atOldestPost:this.props.atOldestPost,atLatestPost:this.props.atLatestPost,focusedPostId:this.props.focusedPostId,channelId:this.props.channelId,autoRetryEnable:this.state.autoRetryEnable,shouldStartFromBottomWhenUnread:this.props.shouldStartFromBottomWhenUnread,actions:this.actionsForPostList,postListIds:this.props.formattedPostIds,latestPostTimeStamp:this.props.latestPostTimeStamp,isMobileView:this.props.isMobileView,lastViewedAt:this.props.lastViewedAt})))):A().createElement(Ae.Z,{centered:!0})}}_n(wn,"propTypes",{formattedPostIds:F().arrayOf(F().string),postListIds:F().arrayOf(F().string),channelId:F().string.isRequired,focusedPostId:F().string,atLatestPost:F().bool.isRequired,atOldestPost:F().bool,isFirstLoad:F().bool.isRequired,latestPostTimeStamp:F().number,changeUnreadChunkTimeStamp:F().func.isRequired,isPrefetchingInProcess:F().bool.isRequired,isMobileView:F().bool.isRequired,lastViewedAt:F().number.isRequired,toggleShouldStartFromBottomWhenUnread:F().func.isRequired,shouldStartFromBottomWhenUnread:F().bool.isRequired,hasInaccessiblePosts:F().bool.isRequired,actions:F().shape({loadPostsAround:F().func.isRequired,loadUnreads:F().func.isRequired,loadPosts:F().func.isRequired,syncPostsInChannel:F().func.isRequired,loadLatestPosts:F().func.isRequired,markChannelAsRead:F().func.isRequired,updateNewMessagesAtInChannel:F().any.isRequired}).isRequired});const Sn=(e,t)=>!e.entities.posts.postsInChannel[t],Tn=(0,De.GA)((e=>(0,Fe.nc)(e))),Nn=(0,a.connect)((function(){const e=(0,ke.Rx)(),t=(0,xe.Zl)();return function(n,a){let s,r,i,o=0,l=!1,c=!1;const{focusedPostId:d,unreadChunkTimeStamp:u,channelId:h,shouldStartFromBottomWhenUnread:m}=a,p=n.views.channel,g=p.lastChannelViewTime[h],f=p.channelPrefetchStatus[h]===Oe.eE.STARTED,C=(0,ke.I7)(n),E=Boolean(C.channels[h])||0===C.channels[h],b=(0,ke.xl)(n,d||"");r=d&&void 0!==b?e(n,d,h):u&&!m?(0,ke.Wj)(n,h,u):(0,ke.G4)(n,h),r&&(s=r.order,l=Boolean(r.recent),c=Boolean(r.oldest));let v=!1;if(null!=u&&(v=m&&!(0,ke.JG)(n,r,u)),s&&(i=t(n,{postIds:s,lastViewedAt:g,indicateNewMessages:!v}),s.length)){const e=Tn(s);o=(0,ke.xl)(n,e).create_at}return{lastViewedAt:g,isFirstLoad:Sn(n,h),formattedPostIds:i,atLatestPost:l,atOldestPost:c,latestPostTimeStamp:o,postListIds:s,isPrefetchingInProcess:f,shouldStartFromBottomWhenUnread:m,isMobileView:(0,K.E7)(n),hasInaccessiblePosts:E}}}),(function(e){return{actions:(0,V.bindActionCreators)({loadUnreads:c.D2,loadPosts:c.Nz,loadLatestPosts:c.e_,loadPostsAround:c.cX,syncPostsInChannel:c.RE,markChannelAsRead:s.Eo,updateNewMessagesAtInChannel:Ce.JI},e)}}))(wn);function In(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Pn extends A().PureComponent{constructor(e){super(e),In(this,"changeUnreadChunkTimeStamp",(e=>{this.setState({unreadChunkTimeStamp:e,loaderForChangeOfPostsChunk:!0},(()=>{window.requestAnimationFrame((()=>{this.setState({loaderForChangeOfPostsChunk:!1})}))}))})),In(this,"toggleShouldStartFromBottomWhenUnread",(()=>{this.setState((e=>({loaderForChangeOfPostsChunk:!0,shouldStartFromBottomWhenUnread:!e.shouldStartFromBottomWhenUnread})),(()=>{window.requestAnimationFrame((()=>{this.setState({loaderForChangeOfPostsChunk:!1})}))}))}));const t=this.props.unreadScrollPosition===j.uP.UNREAD_SCROLL_POSITION_START_FROM_NEWEST;this.state={unreadChunkTimeStamp:e.lastViewedAt,shouldStartFromBottomWhenUnread:t,loaderForChangeOfPostsChunk:!1,channelLoading:e.channelLoading}}static getDerivedStateFromProps(e,t){return null===t.unreadChunkTimeStamp&&e.lastViewedAt?{unreadChunkTimeStamp:e.lastViewedAt}:e.channelLoading!==t.channelLoading?{unreadChunkTimeStamp:e.lastViewedAt,channelLoading:e.channelLoading}:null}render(){return this.props.channelLoading||this.state.loaderForChangeOfPostsChunk?A().createElement("div",{id:"post-list"},A().createElement(Ae.Z,{centered:!0})):A().createElement("div",{id:"post-list",role:"main"},A().createElement(Nn,{unreadChunkTimeStamp:this.state.unreadChunkTimeStamp,channelId:this.props.channelId,changeUnreadChunkTimeStamp:this.changeUnreadChunkTimeStamp,shouldStartFromBottomWhenUnread:this.state.shouldStartFromBottomWhenUnread,toggleShouldStartFromBottomWhenUnread:this.toggleShouldStartFromBottomWhenUnread,focusedPostId:this.props.focusedPostId}))}}In(Pn,"propTypes",{lastViewedAt:F().number,channelLoading:F().bool.isRequired,channelId:F().string.isRequired,focusedPostId:F().string,unreadScrollPosition:F().string.isRequired});const Ln=(0,O.withRouter)((0,a.connect)((function(){return function(e,t){var n;const a=null===(n=t.match)||void 0===n?void 0:n.params,s=(0,o.Xv)(e,(null==a?void 0:a.team)||"");let i;const c=(0,r.mr)(e,t.channelId);let d=e.views.channel.lastChannelViewTime[t.channelId];c&&(c.type===j.Constants.DM_CHANNEL&&c.teammate_id&&(i=(0,l.PR)(e,c.teammate_id)),d=c.last_post_at?d:c.last_post_at);const u=((e,t,n,a,s)=>{if(e.postid)return!1;if(t&&n){if(t.type!==j.Constants.DM_CHANNEL&&t.name!==e.identifier)return!0;if(t.type===j.Constants.DM_CHANNEL&&a&&e.identifier!=="@".concat(a.username))return!0;const r=n.id;return!!(t.team_id&&t.team_id!==r||s&&!s[r])}return!0})(a,c,s,i,(0,o.gb)(e));return{unreadScrollPosition:(0,C.mw)(e),lastViewedAt:d,channelLoading:u}}}))(Pn));var Rn=n(95159);const An=()=>{location.reload()},On=e=>{let{updateWaitForLoader:t}=e;const[n,a]=(0,R.useState)(!1);return(0,R.useEffect)((()=>{let e=setTimeout((()=>{a(!0),t(!0),e=setTimeout((()=>{t(!1)}),2e3)}),5e3);return()=>{clearTimeout(e),t(!1)}}),[]),A().createElement("div",{className:"AdvancedTextEditor__skeleton"},n&&A().createElement(A().Fragment,null,A().createElement(Pe.FormattedMessage,{id:"center_panel.input.cannot_load_component",defaultMessage:"Something went wrong while loading the component. Please wait a moment, or try reloading the app."}),A().createElement("button",{className:"btn btn-tertiary channel-archived__close-btn",onClick:An},A().createElement(Pe.FormattedMessage,{id:"center_panel.reloadPage",defaultMessage:"Reload"}))))};On.propTypes={updateWaitForLoader:F().func.isRequired};const kn=On;function Dn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function xn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dn(Object(n),!0).forEach((function(t){Fn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Fn(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Bn=(0,D.v)("ChannelHeader",(0,R.lazy)((()=>Promise.all([n.e(368),n.e(4036),n.e(2166),n.e(7626)]).then(n.bind(n,95902))))),Un=(0,D.v)("FileUploadOverlay",(0,R.lazy)((()=>Promise.resolve().then(n.bind(n,70153))))),Hn=(0,D.v)("ChannelBookmarks",(0,R.lazy)((()=>n.e(1644).then(n.bind(n,21644))))),qn=(0,D.v)("AdvancedCreatePost",(0,R.lazy)((()=>n.e(5354).then(n.bind(n,45354)))));class jn extends A().PureComponent{static getDerivedStateFromProps(e,t){let n={};const a=e.match.params.postid;return e.match.url!==t.url&&e.channelId!==t.channelId&&(n={deferredPostView:jn.createDeferredPostView(),url:e.match.url,focusedPostId:a}),e.channelId!==t.channelId&&(n=xn(xn({},n),{},{channelId:e.channelId,focusedPostId:a})),a&&a!==t.focusedPostId&&(n=xn(xn({},n),{},{focusedPostId:a})),Object.keys(n).length?n:null}constructor(e){super(e),Fn(this,"onClickCloseChannel",(()=>{this.props.goToLastViewedChannel()})),Fn(this,"onUpdateInputShowLoader",(e=>{this.setState({waitForLoader:e})})),this.state={url:e.match.url,channelId:e.channelId,focusedPostId:e.match.params.postid,deferredPostView:jn.createDeferredPostView(),waitForLoader:!1},this.channelViewRef=A().createRef()}componentDidUpdate(e){e.channelId!==this.props.channelId&&this.props.enableWebSocketEventScope&&Rn.Z.updateActiveChannel(this.props.channelId),e.channelId===this.props.channelId&&e.channelIsArchived===this.props.channelIsArchived||this.props.channelIsArchived&&!this.props.viewArchivedChannels&&this.props.goToLastViewedChannel()}render(){let e;e=this.props.deactivatedChannel?A().createElement("div",{className:"post-create__container",id:"post-create"},A().createElement("div",{className:"channel-archived__message"},A().createElement(Re.Z,{id:"create_post.deactivated",defaultMessage:"You are viewing an archived channel with a **deactivated user**. New messages cannot be posted."}),A().createElement("button",{className:"btn btn-primary channel-archived__close-btn",onClick:this.onClickCloseChannel},A().createElement(Pe.FormattedMessage,{id:"center_panel.archived.closeChannel",defaultMessage:"Close Channel"})))):this.props.channelIsArchived?A().createElement("div",{className:"post-create__container",id:"post-create"},A().createElement("div",{id:"channelArchivedMessage",className:"channel-archived__message"},A().createElement(Re.Z,{id:"archivedChannelMessage",defaultMessage:"You are viewing an **archived channel**. New messages cannot be posted."}),A().createElement("button",{className:"btn btn-primary channel-archived__close-btn",onClick:this.onClickCloseChannel},A().createElement(Pe.FormattedMessage,{id:"center_panel.archived.closeChannel",defaultMessage:"Close Channel"})))):this.props.missingChannelRole||this.state.waitForLoader?A().createElement(kn,{updateWaitForLoader:this.onUpdateInputShowLoader}):A().createElement("div",{id:"post-create","data-testid":"post-create",className:"post-create__container AdvancedTextEditor__ctr"},A().createElement(qn,null));const t=this.state.deferredPostView;return A().createElement("div",{ref:this.channelViewRef,id:"app-content",className:"app__content"},A().createElement(Un,{overlayType:"center"}),A().createElement(Bn,this.props),this.props.isChannelBookmarksEnabled&&A().createElement(Hn,{channelId:this.props.channelId}),A().createElement(t,{channelId:this.props.channelId,focusedPostId:this.state.focusedPostId}),e)}}function Zn(e,t){const n=(0,r.PR)(e,t);return Boolean(n&&n.delete_at)}Fn(jn,"createDeferredPostView",(()=>(0,Le.Z)(Ln,A().createElement("div",{id:"post-list",className:"a11y__region","data-a11y-sort-order":"1","data-a11y-focus-child":!0,"data-a11y-order-reversed":!0}))));const Vn={goToLastViewedChannel:c.NL},Gn=(0,a.connect)((function(e){const t=(0,r.TB)(e),n=(0,i.iE)(e),a="true"===n.ExperimentalViewArchivedChannels,s="true"===n.EnableOnboardingFlow,c="true"===n.FeatureFlagWebSocketEventScope,d=function(e,t){var n;return!(t&&(null===(n=(0,r.SC)(e,t.id))||void 0===n?void 0:n.roles)||"").split(" ").some((t=>Boolean((0,Ne.F3)(e)[t])))}(e,t);return{channelId:t?t.id:"",deactivatedChannel:!!t&&Zn(e,t.id),enableOnboardingFlow:s,channelIsArchived:!!t&&0!==t.delete_at,viewArchivedChannels:a,isCloud:"true"===(0,i.lJ)(e).Cloud,teamUrl:(0,o.gm)(e),isFirstAdmin:(0,l.sz)(e),enableWebSocketEventScope:c,isChannelBookmarksEnabled:(0,Ie.J0)(e),missingChannelRole:d}}),Vn),Wn=(0,O.withRouter)(Gn(jn));function zn(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Kn extends A().PureComponent{constructor(e){super(e),zn(this,"replaceUrlIfPermalink",(()=>{this.props.match.params.postid&&(this.replaceUrlTimeout=setTimeout((()=>{const e=this.props.match.url.split("/").slice(0,-1).join("/");(0,an.s)().replace(e)}),j.default.PERMALINK_FADEOUT))})),this.state={prevProps:e}}componentDidUpdate(e){this.props.match.params.team===e.match.params.team&&this.props.match.params.identifier===e.match.params.identifier||(clearTimeout(this.replaceUrlTimeout),this.props.actions.onChannelByIdentifierEnter(this.props),this.replaceUrlIfPermalink())}componentDidMount(){this.props.actions.onChannelByIdentifierEnter(this.props),this.replaceUrlIfPermalink()}componentWillUnmount(){clearTimeout(this.replaceUrlTimeout)}render(){return A().createElement(Wn,null)}}zn(Kn,"propTypes",{match:F().shape({params:F().shape({identifier:F().string.isRequired,team:F().string.isRequired,postid:F().string,path:F().string.isRequired}).isRequired,url:F().string.isRequired}).isRequired,actions:F().shape({onChannelByIdentifierEnter:F().func.isRequired}).isRequired,history:F().any.isRequired});const Jn=(0,O.withRouter)((0,a.connect)(null,(function(e){return{actions:(0,V.bindActionCreators)({onChannelByIdentifierEnter:ye},e)}}))(Kn));var Yn=n(76268);const Qn=(0,D.v)("ChannelHeaderMobile",(0,R.lazy)((()=>Promise.all([n.e(4036),n.e(2166),n.e(7230)]).then(n.bind(n,66778))))),Xn=(0,D.v)("GlobalThreads",(0,R.lazy)((()=>n.e(8125).then(n.bind(n,28125)))),A().createElement("div",{className:"app__content"},A().createElement(Ae.Z,null))),$n=(0,D.v)("Drafts",(0,R.lazy)((()=>n.e(6114).then(n.bind(n,66114)))),A().createElement("div",{className:"app__content"},A().createElement(Ae.Z,null))),ea=(0,D.v)("PermalinkView",(0,R.lazy)((()=>n.e(6815).then(n.bind(n,76815))))),ta=(0,D.v)("PlaybookRunner",(0,R.lazy)((()=>n.e(2549).then(n.bind(n,62549))))),na=(0,D.v)("Membership",(0,R.lazy)((()=>n.e(5620).then(n.bind(n,5620))))),aa=(0,D.v)("Shop",(0,R.lazy)((()=>Promise.resolve().then(n.bind(n,48548)))));class sa extends A().PureComponent{constructor(e){super(e),this.state={returnTo:"",lastReturnTo:""}}static getDerivedStateFromProps(e,t){return t.lastReturnTo!==e.location.pathname&&e.location.pathname.includes("/pl/")?{lastReturnTo:e.location.pathname,returnTo:t.lastReturnTo}:{lastReturnTo:e.location.pathname}}async componentDidMount(){const{actions:e}=this.props;await e.getProfiles()}render(){const{lastChannelPath:e,isCollapsedThreadsEnabled:t,isMobileView:n}=this.props,a=this.props.match.url;return A().createElement("div",{key:"inner-wrap",className:U()("inner-wrap","channel__wrap",{"move--right":this.props.lhsOpen,"move--left":this.props.rhsOpen,"move--left-small":this.props.rhsMenuOpen})},n&&A().createElement(A().Fragment,null,A().createElement("div",{className:"row header"},A().createElement("div",{id:"navbar_wrapper"},A().createElement(Qn,null)))),A().createElement("div",{className:"row main"},A().createElement(O.Switch,null,A().createElement(O.Route,{path:"".concat(a,"/pl/:postid(").concat(Yn.qv,")"),render:e=>A().createElement(ea,Object.assign({},e,{returnTo:this.state.returnTo}))}),A().createElement(O.Route,{path:"/:team(".concat(Yn.tq,")/:path(channels|messages)/:identifier(").concat(Yn.sG,")/:postid(").concat(Yn.qv,")?"),component:Jn}),A().createElement(O.Route,{path:"/:team(".concat(Yn.tq,")/_playbooks/:playbookId(").concat(Yn.qv,")/run")},A().createElement(ta,null)),A().createElement(O.Route,{path:"/:team(".concat(Yn.tq,")/browser")},A().createElement(me,null)),t?A().createElement(O.Route,{path:"/:team(".concat(Yn.tq,")/threads/:threadIdentifier(").concat(Yn.qv,")?"),component:Xn}):null,A().createElement(O.Route,{path:"/:team(".concat(Yn.tq,")/drafts"),component:$n}),A().createElement(O.Route,{path:"/:team(".concat(Yn.tq,")/membership"),component:na}),A().createElement(O.Route,{path:"/:team(".concat(Yn.tq,")/shop"),component:aa}),A().createElement(O.Redirect,{to:e}))))}}const ra=(0,a.connect)(((e,t)=>{const n=(0,z.wJ)(e,t.match.params.team);let a=(0,z.nX)(e,t.match.params.team);const s=(0,z.x_)(e),i=(0,o.Xv)(e,t.match.params.team);let c,u;return s!==(null==i?void 0:i.id)&&(c=(0,z.LU)(e)),a||(a=(0,r.fG)(e,i.id)),u=!(0,C.ym)(e)||c!==j.IY.THREADS&&n!==j.IY.THREADS?"".concat(t.match.url,"/channels/").concat(a):"".concat(t.match.url,"/threads"),{lastChannelPath:u,lhsOpen:(0,W.wo)(e),rhsOpen:(0,d.aC)(e),rhsMenuOpen:(0,d.Xb)(e),isCollapsedThreadsEnabled:(0,C.ym)(e),currentUserId:(0,l.rc)(e),isMobileView:(0,K.E7)(e)}}),(function(e){return{actions:(0,V.bindActionCreators)({getProfiles:G.cp},e)}})),ia=(0,O.withRouter)(ra(sa));var oa=n(48548),la=n(54892),ca=n(52173),da=n(84073),ua=n(46935),ha=n(40364),ma=n(39183),pa=n(35590),ga=n(30368);function fa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ca(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fa(Object(n),!0).forEach((function(t){Ea(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ea(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let ba=!0;function va(e){return(t,n)=>{var a,s,i;const o=n(),l=(0,r.s)(o);(0,Be.L9)("performance","preloaded_channels",{numHigh:(null===(a=e[1])||void 0===a?void 0:a.length)||0,numMedium:(null===(s=e[2])||void 0===s?void 0:s.length)||0,numLow:(null===(i=e[3])||void 0===i?void 0:i.length)||0,numTotal:l.length,isFirstPreload:ba}),ba=!1}}var ya=function(e){return e[e.high=1]="high",e[e.medium=2]="medium",e[e.low=3]="low",e}(ya||{}),_a=function(e){return e[e.mentionMax=10]="mentionMax",e[e.unreadMax=20]="unreadMax",e}(_a||{});const Ma=(0,De.GA)(((e,t,n)=>{const a=e.length;let s={[ya.high]:[],[ya.medium]:[],[ya.low]:[]};if(!a||a>_a.unreadMax)return s;for(const r of e){const e=r.id,i=t[e];if(a>=_a.mentionMax&&s[ya.high].length>=_a.mentionMax)break;i&&!(0,at.Mm)(i)&&((n?i.mention_count_root:i.mention_count)?s=Ca(Ca({},s),{},{[ya.high]:[...s[ya.high],e]}):i.notify_props&&"mention"!==i.notify_props.mark_unread&&a<_a.mentionMax&&(s=Ca(Ca({},s),{},{[ya.medium]:[...s[ya.medium],e]})))}return s}));var wa=n(62514),Sa=n(98876);function Ta(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Na=new wa.Z({concurrency:2});class Ia extends A().PureComponent{constructor(){super(...arguments),Ta(this,"prefetchPosts",(e=>{let t;const n=this.props.unreadChannels.find((t=>e===t.id));return!n||n.type!==j.Constants.PRIVATE_CHANNEL&&n.type!==j.Constants.OPEN_CHANNEL||Date.now()-n.last_post_at<=1e3&&(t=1e3*Math.random()),this.props.actions.prefetchChannelPosts(e,t)})),Ta(this,"prefetchData",(()=>{const{prefetchRequestStatus:e,prefetchQueueObj:t}=this.props;for(const n in t){if(!t.hasOwnProperty(n))continue;const a=t[n];for(const t of a)e.hasOwnProperty(t)||Na.add((async()=>this.prefetchPosts(t)))}}))}async componentDidUpdate(e){const{currentChannelId:t,prefetchQueueObj:n,sidebarLoaded:a}=this.props;a&&!e.sidebarLoaded&&(0,Sa.D3)(),!t||!a||e.currentChannelId&&e.sidebarLoaded?e.prefetchQueueObj!==n&&(clearTimeout(this.prefetchTimeout),await Na.clear(),this.prefetchData()):(Na.add((async()=>this.prefetchPosts(t))),this.prefetchData()),!t||!a||e.currentChannelId&&e.sidebarLoaded||this.props.actions.trackPreloadedChannels(n)}render(){return null}}function Pa(e){return(0,pa.Yy)(e).length>0}Ta(Ia,"propTypes",{currentChannelId:F().string.isRequired,prefetchQueueObj:F().objectOf(F().arrayOf(F().string)).isRequired,prefetchRequestStatus:F().objectOf(F().string).isRequired,sidebarLoaded:F().bool.isRequired,unreadChannels:F().array.isRequired,actions:F().shape({prefetchChannelPosts:F().func.isRequired,trackPreloadedChannels:F().func.isRequired}).isRequired});const La=(0,a.connect)((function(e){const t=e.views.channel.lastUnreadChannel,n=(0,f.h4)(e),a=(0,r.Xn)(e,t),s=Ma(a,n,(0,C.ym)(e)),i=e.views.channel.channelPrefetchStatus;return{currentChannelId:(0,r.gO)(e),prefetchQueueObj:s,prefetchRequestStatus:i,sidebarLoaded:Pa(e),unreadChannels:a}}),(function(e){return{actions:(0,V.bindActionCreators)({prefetchChannelPosts:c.AV,trackPreloadedChannels:va},e)}}))(Ia);var Ra=n(63018),Aa=(n(32081),n(70684),n(68581),n(7217));const Oa=e=>{let{userImage:t,audioSrc:n,duration:a,position:s="left",bubbleColor:r="#EFFEDD"}=e;const i=(0,R.useRef)(null),[o,l]=(0,R.useState)(),[c,d]=(0,R.useState)(""),[u,h]=(0,R.useState)(),[,m]=(0,R.useState)("loading"),p=e=>{l(e),m("loaded");const t=URL.createObjectURL(e),n=new Audio(t);n.load(),d(t),h(n)};return(0,R.useEffect)((()=>{const e=new AbortController;return m("loading"),fetch(n,{signal:e.signal}).then((e=>e.blob())).then(p).catch((()=>{m("error")})),()=>{e.abort(),""!==c&&URL.revokeObjectURL(c)}}),[n]),A().createElement("div",{className:"chat-message-container",style:{flexDirection:"left"===s?"row":"row-reverse","--bubble-color":r}},A().createElement("div",{className:"chat-bubble",style:{flexDirection:"left"===s?"row":"row-reverse"}},A().createElement("img",{src:t,className:"user",loading:"lazy"}),A().createElement("div",{className:"message"},A().createElement("div",{className:"bubble audio",style:{marginLeft:"left"===s?0:"auto"}},A().createElement("div",{className:"audio-container"},A().createElement("button",{className:"play-pause-btn",onClick:()=>{u&&(u.paused?u.play():u.pause())}},A().createElement("svg",{width:"24",height:"26",viewBox:"0 0 24 26",fill:"none",xmlns:"http://www.w3.org/2000/svg"},A().createElement("path",{d:"M5.22461 5.21739C5.22461 3.72265 6.80711 3.39253 7.67029 3.99044L18.1723 11.3719C18.7478 11.7944 19.3232 12.8407 18.1723 13.7776L7.67029 21.0308C6.80711 21.6287 5.22461 21.3609 5.22461 19.8313V12.5853V5.21739Z",fill:"white"}))),A().createElement("div",null,o&&A().createElement(Aa.h,{ref:i,blob:o,width:150,height:50,barWidth:4,gap:0,barColor:"#62AC55"}),A().createElement("div",{className:"audio-footer"},A().createElement("div",null,a)))),A().createElement("button",{id:"transcribe-btn"},"Transcribe")))))};Oa.propTypes={userImage:F().string.isRequired,audioSrc:F().string.isRequired,duration:F().string.isRequired,bubbleColor:F().string,position:F().oneOf(["left","right"])};const ka=Oa;var Da=n(11313);const xa=e=>{let{userImage:t,text:n,images:a,position:s="left",bubbleColor:r="#14B8A6"}=e;const[i,o]=(0,R.useState)(),[l,c]=(0,R.useState)(!1);return A().createElement("div",{className:"chat-message-container",style:{flexDirection:"left"===s?"row":"row-reverse","--bubble-color":r}},A().createElement("div",{className:"chat-bubble",style:{flexDirection:"left"===s?"row":"row-reverse"}},A().createElement("img",{src:t,className:"user",loading:"lazy"}),A().createElement("div",{className:"message"},A().createElement("div",{className:"bubble",style:{marginLeft:"left"===s?0:"auto"}},n),a&&a.length>0&&A().createElement("div",{className:"images"},a.map((e=>A().createElement("img",{src:e,key:e,loading:"lazy",onClick:()=>(o(e),void c(!0))})))))),A().createElement(Da.Modal,{show:l,onHide:()=>c(!1),id:"imagePopupModal"},A().createElement("img",{src:i,className:"modal-image"})))};xa.propTypes={userImage:F().string.isRequired,text:F().string.isRequired,images:F().arrayOf(F().string),bubbleColor:F().string,position:F().oneOf(["left","right"])};const Fa=xa;var Ba=n(86842);function Ua(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ha(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ua(Object(n),!0).forEach((function(t){qa(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ua(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qa(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ja=320,Za=350,Va="messenger_dimension",Ga=e=>{let{intl:t,onClose:n}=e;const[a,s]=(()=>{const e=localStorage.getItem(Va);if(null===e)return[ja,Za];try{return JSON.parse(e)}catch(e){return[ja,Za]}})(),r=(0,Ra.q_)({from:{scaleY:0,opacity:0},to:{scaleY:1,opacity:1},config:{duration:100}}),i=(0,R.useRef)(null),o=(0,R.useRef)(null);return(0,R.useEffect)((()=>{if(!i.current)return;const e=i.current;let t=0,n=0;const a=n=>{n.stopPropagation(),n.preventDefault();const a=n.x-t;t=n.x;let s=parseInt(getComputedStyle(e,"").width,10)+a;s<ja&&(s=ja),e.style.width="".concat(s,"px")},s=t=>{t.stopPropagation(),t.preventDefault();const a=n-t.y;n=t.y;let s=parseInt(getComputedStyle(e,"").height,10)+a;s<Za&&(s=Za),e.style.height="".concat(s,"px")},r=r=>{r.offsetX>=e.clientWidth-10?(e.classList.add("no-select"),t=r.x,window.addEventListener("mousemove",a,{capture:!0})):r.offsetY<=10&&(e.classList.add("no-select"),n=r.y,window.addEventListener("mousemove",s,{capture:!0}))},o=()=>{window.removeEventListener("mousemove",a,{capture:!0}),window.removeEventListener("mousemove",s,{capture:!0});const t=getComputedStyle(e,""),n=parseInt(t.width,10),r=parseInt(t.height,10);localStorage.setItem(Va,JSON.stringify([n,r])),e.classList.remove("no-select")};return e.addEventListener("mousedown",r),window.addEventListener("mouseup",o),()=>{e.removeEventListener("mousedown",r),window.removeEventListener("mouseup",o),window.removeEventListener("mousemove",a),window.removeEventListener("mousemove",s)}}),[]),(0,R.useEffect)((()=>{if(!o.current||!i.current)return;const e=i.current,t=o.current;let n=0,a=0;const s=t=>{const s=t.x-n,r=a-t.y;n=t.x,a=t.y;const i=getComputedStyle(e,""),o=parseInt(i.bottom,10)+r,l=parseInt(i.left,10)+s;e.style.left="".concat(l,"px"),e.style.bottom="".concat(o,"px")},r=t=>{t.stopPropagation(),t.preventDefault(),e.classList.add("no-select"),n=t.x,a=t.y,window.addEventListener("mousemove",s,{capture:!0})},l=()=>{window.removeEventListener("mousemove",s,{capture:!0}),e.classList.remove("no-select")};return t.addEventListener("mousedown",r),window.addEventListener("mouseup",l),()=>{t.removeEventListener("mousedown",r),window.removeEventListener("mouseup",l),window.removeEventListener("mousemove",s,{capture:!0})}}),[]),A().createElement(A().Fragment,null,A().createElement(Ra.q.div,{id:"messenger",ref:i,style:Ha({width:"".concat(a,"px"),height:"".concat(s,"px")},r)},A().createElement("div",{className:"header"},A().createElement("div",{className:"heading",ref:o},"Stella"),A().createElement("button",{id:"closeButton",onClick:()=>n()},A().createElement("i",{className:"fa fa-close"}))),A().createElement("div",{className:"chat"},A().createElement(Fa,{text:"Hi I’m Stella.",userImage:Ba,images:["https://images.pexels.com/photos/1658967/pexels-photo-1658967.jpeg"]}),A().createElement(ka,{userImage:Ba,audioSrc:"https://cdn.freesound.org/previews/754/754124_14464791-lq.mp3",duration:"00:42"})),A().createElement("div",{className:"input"},A().createElement("div",{className:"left"},A().createElement("button",null,A().createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},A().createElement("path",{d:"M16.0003 6.66699V25.3337M6.66699 16.0003H25.3337",stroke:"#DCDCDC",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})))),A().createElement("div",{className:"middle"},A().createElement("button",null,A().createElement("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},A().createElement("path",{d:"M8.7435 12.2049C7.37184 12.2049 5.91568 12.0098 4.58952 11.6718C4.3425 11.2948 4.16048 10.8917 4.07597 10.4822C5.47363 10.8787 7.09881 11.1517 8.75 11.1517C10.4012 11.1517 12.0264 10.8787 13.4305 10.4822C13.333 10.8917 13.1575 11.2948 12.917 11.6718C11.5908 12.0033 10.1347 12.2049 8.75 12.2049H8.7435ZM8.7435 14.8507C11.6818 14.8507 14.0416 12.6924 14.3666 10.1311C14.4382 9.61757 14.1001 9.38354 13.6451 9.51356C11.9939 10.0011 10.4467 10.2741 8.7435 10.2741C7.0403 10.2741 5.50613 10.0011 3.84844 9.51356C3.39339 9.38354 3.06185 9.61757 3.12686 10.1311C3.44539 12.6924 5.79866 14.8507 8.7435 14.8507ZM11.2788 8.23291C11.8184 8.23291 12.2994 7.74536 12.2994 7.05628C12.2994 6.3672 11.8184 5.87314 11.2788 5.87314C10.7392 5.87314 10.2647 6.3672 10.2647 7.05628C10.2647 7.74536 10.7392 8.23291 11.2788 8.23291ZM6.19521 8.23291C6.74127 8.23291 7.22233 7.74536 7.22233 7.05628C7.22233 6.3672 6.74127 5.87314 6.19521 5.87314C5.64915 5.87314 5.19409 6.3672 5.19409 7.05628C5.19409 7.74536 5.65565 8.23291 6.19521 8.23291ZM8.75 16.2613C4.71954 16.2613 1.48867 13.0305 1.48867 8.9935C1.48867 4.95654 4.71304 1.73217 8.7435 1.73217C12.774 1.73217 16.0178 4.96304 16.0178 9C16.0178 13.037 12.787 16.2678 8.75 16.2678V16.2613ZM8.75 17.7435C13.5345 17.7435 17.5 13.778 17.5 8.9935C17.5 4.20895 13.5345 0.25 8.7435 0.25C3.95245 0.25 0 4.21545 0 9C0 13.7845 3.96545 17.75 8.75 17.75V17.7435Z",fill:"#F2F2F2"}))),A().createElement("input",{placeholder:t.formatMessage({id:"messenger.type_message_placeholder",defaultMessage:"Type message"})}),A().createElement("button",null,A().createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},A().createElement("path",{d:"M10 13.75C10.9942 13.749 11.9475 13.3535 12.6505 12.6505C13.3535 11.9475 13.749 10.9942 13.75 10V5C13.75 4.00544 13.3549 3.05161 12.6517 2.34835C11.9484 1.64509 10.9946 1.25 10 1.25C9.00544 1.25 8.05161 1.64509 7.34835 2.34835C6.64509 3.05161 6.25 4.00544 6.25 5V10C6.25103 10.9942 6.64645 11.9475 7.34949 12.6505C8.05253 13.3535 9.00576 13.749 10 13.75ZM7.5 5C7.5 4.33696 7.76339 3.70107 8.23223 3.23223C8.70107 2.76339 9.33696 2.5 10 2.5C10.663 2.5 11.2989 2.76339 11.7678 3.23223C12.2366 3.70107 12.5 4.33696 12.5 5V10C12.5 10.663 12.2366 11.2989 11.7678 11.7678C11.2989 12.2366 10.663 12.5 10 12.5C9.33696 12.5 8.70107 12.2366 8.23223 11.7678C7.76339 11.2989 7.5 10.663 7.5 10V5ZM10.625 16.2188V18.125C10.625 18.2908 10.5592 18.4497 10.4419 18.5669C10.3247 18.6842 10.1658 18.75 10 18.75C9.83424 18.75 9.67527 18.6842 9.55806 18.5669C9.44085 18.4497 9.375 18.2908 9.375 18.125V16.2188C7.8341 16.062 6.40607 15.3393 5.36707 14.1907C4.32806 13.042 3.7519 11.5489 3.75 10C3.75 9.83424 3.81585 9.67527 3.93306 9.55806C4.05027 9.44085 4.20924 9.375 4.375 9.375C4.54076 9.375 4.69973 9.44085 4.81694 9.55806C4.93415 9.67527 5 9.83424 5 10C5 11.3261 5.52678 12.5979 6.46447 13.5355C7.40215 14.4732 8.67392 15 10 15C11.3261 15 12.5979 14.4732 13.5355 13.5355C14.4732 12.5979 15 11.3261 15 10C15 9.83424 15.0658 9.67527 15.1831 9.55806C15.3003 9.44085 15.4592 9.375 15.625 9.375C15.7908 9.375 15.9497 9.44085 16.0669 9.55806C16.1842 9.67527 16.25 9.83424 16.25 10C16.2481 11.5489 15.6719 13.042 14.6329 14.1907C13.5939 15.3393 12.1659 16.062 10.625 16.2188Z",fill:"#F2F2F2"})))),A().createElement("div",{className:"right"},A().createElement("button",{id:"sendButton"},A().createElement("svg",{width:"16",height:"14",viewBox:"0 0 16 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},A().createElement("path",{d:"M0.125 13.75L15.875 7L0.125 0.25V5.5L11.375 7L0.125 8.5V13.75Z",fill:"white"})))))))};Ga.propTypes={onClose:F().func.isRequired};const Wa=(0,Pe.injectIntl)(Ga),za=()=>{const[e,t]=(0,R.useState)(!1),[n]=(0,Ra.q_)((()=>e?{from:{translateY:0},to:{translateY:150},config:{bounce:.8}}:{from:{translateY:150},to:{translateY:0},config:{bounce:.8}}),[e]);return A().createElement("div",{id:"messenger_popup"},A().createElement(Ra.q.div,{style:n},A().createElement("button",{id:"messenger_popup_button",onClick:()=>{t(!0)}},A().createElement("img",{src:Ba}))),e&&A().createElement(Wa,{onClose:()=>{t(!1)}}))};var Ka=n(83282),Ja=n(56403);function Ya(e){let{children:t,id:n,className:a}=e;const s=(0,R.useRef)(null);return A().createElement("div",{id:n,className:a,ref:s},t,A().createElement(Ja.Z,{name:"lhsResizeHandle",globalCssVar:Ka.P6.LHS,defaultWidth:Ka.oc,dir:Ka._w.LEFT,containerRef:s}))}Ya.propTypes={children:F().node.isRequired};const Qa=Ya;var Xa=n(69383),$a=n(15607),es=n(1514),ts=n(34575),ns=n(34541);const as=n.p+"files/0d2e8c44f3e33a2a6398.svg",ss=(0,D.v)("InternetBrowserLink",(0,R.lazy)((()=>n.e(5280).then(n.bind(n,85280))))),rs=I()($a.Z).attrs((()=>({element:"header",row:!0,justify:"space-between",alignment:"center"}))).withConfig({displayName:"SidebarHeaderContainer"})(["height:55px;padding:0 16px;gap:8px;.dropdown-menu{position:absolute;transform:translate(0,0);margin-left:0;min-width:210px;}#SidebarContainer & .AddChannelDropdown_dropdownButton{border-radius:16px;font-size:18px;}"]),is=I()(Xa.ZP).attrs((()=>({element:"h1",margin:"none",size:200}))).withConfig({displayName:"SidebarHeading"})(["color:var(--sidebar-text);cursor:pointer;display:flex;.title{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;display:inline-block;}.icon-chevron-down{margin-left:-3px;margin-right:-1px;}#SidebarContainer &{font-family:Metropolis,sans-serif;}"]),os=e=>{const t=(0,a.useDispatch)(),n=(0,a.useSelector)((e=>(0,o.kA)(e))),s=(0,a.useSelector)((e=>e.entities.users.profiles[e.entities.users.currentUserId])),r=(0,a.useSelector)(C.gh);return n?A().createElement(es.default,{theme:r},A().createElement(rs,{id:"sidebar-header-container"},A().createElement(ts.Z,{id:"team-name__tooltip",title:n.description?n.description:n.display_name,placement:"bottom"},A().createElement(A().Fragment,null,A().createElement(is,null,A().createElement("button",{className:"style--none sidebar-header"},A().createElement("span",{className:"title"}," ","".concat(s.username,"'s Workspace")))),A().createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"8px"}},A().createElement(ss,null),A().createElement("img",{style:{height:"18px",width:"18px",cursor:"pointer"},onClick:()=>t((0,ns.h)()),src:as,alt:"layers-app-icon"})))))):null};os.propTypes={showNewChannelModal:F().func.isRequired,showMoreChannelsModal:F().func.isRequired,showCreateUserGroupModal:F().func.isRequired,invitePeopleModal:F().func.isRequired,showCreateCategoryModal:F().func.isRequired,canCreateChannel:F().bool.isRequired,canJoinPublicChannel:F().bool.isRequired,handleOpenDirectMessagesModal:F().func.isRequired,unreadFilterEnabled:F().bool.isRequired,userGroupsEnabled:F().bool.isRequired,canCreateCustomGroups:F().bool.isRequired};const ls=os;var cs=n(44577),ds=n(69317),us=n(20912),hs=n(49847),ms=n(9601);function ps(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const gs="channel";class fs extends A().PureComponent{constructor(e){super(e),ps(this,"focusTextbox",(()=>{if(null===this.switchBox)return;const e=this.switchBox.getTextbox();document.activeElement!==e&&(e.focus(),be.e6(e))})),ps(this,"setSwitchBoxRef",(e=>{this.switchBox=e,this.focusTextbox()})),ps(this,"hideOnSelect",(()=>{this.focusPostTextbox(),this.setState({text:""}),this.props.onExited()})),ps(this,"focusPostTextbox",(()=>{Z.tq()||setTimeout((()=>{const e=document.querySelector("#post_textbox");e&&e.focus()}))})),ps(this,"hideOnCancel",(()=>{var e,t;null===(e=(t=this.props).onExited)||void 0===e||e.call(t),setTimeout((()=>{const e=document.querySelector(".SidebarChannelNavigator_jumpToButton");e&&e.focus()}))})),ps(this,"onChange",(e=>{this.setState({text:e.target.value,shouldShowLoadingSpinner:!0})})),ps(this,"handleSubmit",(async e=>{if(e)if(this.props.rhsOpen&&this.props.rhsState===j.Hp.EDIT_HISTORY&&this.props.actions.closeRightHandSide(),this.state.mode===gs){const{joinChannelById:t,switchToChannel:n}=this.props.actions,a=e.channel;e.type===j.default.MENTION_MORE_CHANNELS&&a.type===j.default.OPEN_CHANNEL&&await t(a.id),n(a).then((e=>{"data"in e&&this.hideOnSelect()}))}else(0,an.s)().push("/"+e.name),this.hideOnSelect()})),ps(this,"handleSuggestionsReceived",(e=>{const t=e.items.some((e=>e.loading));this.setState({shouldShowLoadingSpinner:t,pretext:e.matchedPretext,hasSuggestions:e.items.length>0})})),ps(this,"render",(()=>{const e=this.channelProviders,t=A().createElement("h1",{id:"quickSwitchHeader"},A().createElement(Pe.FormattedMessage,{id:"quick_switch_modal.switchChannels",defaultMessage:"Find Channels"}));let n;return n=this.props.isMobileView?A().createElement(Re.Z,{id:"quick_switch_modal.help_mobile",defaultMessage:"Type to find a channel."}):A().createElement(Re.Z,{id:"quick_switch_modal.help_no_team",defaultMessage:"Type to find a channel. Use **UP/DOWN** to browse, **ENTER** to select, **ESC** to dismiss."}),A().createElement(Da.Modal,{dialogClassName:"a11y__modal channel-switcher",show:!0,onHide:this.hideOnCancel,enforceFocus:!1,restoreFocus:!1,role:"dialog","aria-labelledby":"quickSwitchHeader","aria-describedby":"quickSwitchHeaderWithHint",animation:!1},A().createElement(Da.Modal.Header,{className:"modal-header",id:"quickSwitchModalLabel",closeButton:!0},A().createElement("div",{className:"channel-switcher__header",id:"quickSwitchHeaderWithHint"},t,A().createElement("div",{className:"channel-switcher__hint",id:"quickSwitchHint"},n))),A().createElement(Da.Modal.Body,null,A().createElement("div",{className:"channel-switcher__suggestion-box"},A().createElement("i",{className:"icon icon-magnify icon-16"}),A().createElement(us.Z,{ref:this.setSwitchBoxRef,id:"quickSwitchInput","aria-label":be._u("quick_switch_modal.input","quick switch input"),className:"form-control focused",onChange:this.onChange,value:this.state.text,onItemSelected:this.handleSubmit,listComponent:hs.Z,listPosition:"bottom",maxLength:"64",providers:e,completeOnTab:!1,spellCheck:"false",delayInputUpdate:!0,openWhenEmpty:!0,onSuggestionsReceived:this.handleSuggestionsReceived,forceSuggestionsWhenBlur:!0,renderDividers:[j.default.MENTION_UNREAD,j.default.MENTION_RECENT_CHANNELS],shouldSearchCompleteText:!0}),!this.state.shouldShowLoadingSpinner&&!this.state.hasSuggestions&&this.state.text&&A().createElement(cs.Z,{variant:ds.U.Search,titleValues:{channelName:"".concat(this.state.pretext)}}))))})),this.channelProviders=[new ms.Z],this.switchBox=null,this.state={text:"",mode:gs,hasSuggestions:!0,shouldShowLoadingSpinner:!0,pretext:""}}}ps(fs,"propTypes",{onExited:F().func.isRequired,isMobileView:F().bool.isRequired,rhsOpen:F().bool,actions:F().shape({joinChannelById:F().func.isRequired,switchToChannel:F().func.isRequired,closeRightHandSide:F().func.isRequired}).isRequired});const Cs=(0,a.connect)((function(e){return{isMobileView:(0,K.E7)(e),rhsState:(0,d.kV)(e),rhsOpen:(0,d.aC)(e)}}),(function(e){return{actions:(0,V.bindActionCreators)({joinChannelById:c.$B,switchToChannel:c.qZ,closeRightHandSide:ma.Lg},e)}}))(fs);var Es=n(19699);function bs(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const vs=(0,Pe.defineMessages)({disableTooltip:{id:"sidebar_left.channel_filter.showAllChannels",defaultMessage:"Show all channels"},enableTooltip:{id:"sidebar_left.channel_filter.filterByUnread",defaultMessage:"Filter by unread"}}),ys={default:[Es.P.ctrl,Es.P.shift,"U"],mac:[Es.P.cmd,Es.P.shift,"U"]};class _s extends A().PureComponent{constructor(){super(...arguments),bs(this,"handleUnreadFilterClick",(e=>{null==e||e.preventDefault(),null==e||e.stopPropagation(),this.toggleUnreadFilter()})),bs(this,"handleUnreadFilterKeyPress",(e=>{rn._(e)&&e.shiftKey&&rn.p(e,j.default.KeyCodes.U)&&(e.preventDefault(),e.stopPropagation(),this.toggleUnreadFilter())})),bs(this,"toggleUnreadFilter",(()=>{const{unreadFilterEnabled:e}=this.props;e?(0,Be.L9)("ui","ui_sidebar_unread_filter_disabled"):(0,Be.L9)("ui","ui_sidebar_unread_filter_enabled"),this.props.actions.setUnreadFilterEnabled(!e)}))}componentDidMount(){document.addEventListener("keydown",this.handleUnreadFilterKeyPress)}componentWillUnmount(){document.removeEventListener("keydown",this.handleUnreadFilterKeyPress)}render(){const{intl:e,unreadFilterEnabled:t,hasMultipleTeams:n}=this.props,a=e.formatMessage({id:"sidebar_left.channel_filter.filterUnreadAria",defaultMessage:"unreads filter"});return A().createElement("div",{className:"SidebarFilters"},A().createElement(ts.Z,{id:"channel-filter-tooltip",title:t?vs.disableTooltip:vs.enableTooltip,shortcut:ys,placement:n?"top":"right"},A().createElement("a",{href:"#",className:U()("SidebarFilters_filterButton",{active:t}),onClick:this.toggleUnreadFilter,"aria-label":a},A().createElement("i",{className:"icon icon-filter-variant"}))))}}bs(_s,"propTypes",{hasMultipleTeams:F().bool.isRequired,unreadFilterEnabled:F().bool.isRequired,actions:F().shape({setUnreadFilterEnabled:F().func.isRequired}).isRequired});const Ms=(0,Pe.injectIntl)(_s),ws=(0,a.connect)((function(e){const t=(0,o.Dc)(e);return{hasMultipleTeams:t&&t.length>1,unreadFilterEnabled:(0,pa.fI)(e)}}),(function(e){return{actions:(0,V.bindActionCreators)({setUnreadFilterEnabled:ua.jb},e)}}))(Ms);function Ss(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Ts extends A().PureComponent{constructor(){super(...arguments),Ss(this,"openQuickSwitcher",(e=>{e.preventDefault(),(0,Be.L9)("ui","ui_sidebar_open_channel_switcher_v2"),this.props.actions.openModal({modalId:j.r8.QUICK_SWITCH,dialogType:Cs})})),Ss(this,"handleShortcut",(e=>{const{actions:{closeModal:t}}=this.props;rn._(e)&&e.shiftKey&&(rn.p(e,j.default.KeyCodes.M)&&(e.preventDefault(),t(j.r8.QUICK_SWITCH)),rn.p(e,j.default.KeyCodes.L)&&t(j.r8.QUICK_SWITCH))})),Ss(this,"handleQuickSwitchKeyPress",(e=>{rn._(e)&&!e.shiftKey&&rn.p(e,j.default.KeyCodes.K)&&(e.altKey||be.C8(e)||(e.preventDefault(),this.toggleQuickSwitchModal()))})),Ss(this,"toggleQuickSwitchModal",(()=>{const{isQuickSwitcherOpen:e,actions:{openModal:t,closeModal:n}}=this.props;e?n(j.r8.QUICK_SWITCH):t({modalId:j.r8.QUICK_SWITCH,dialogType:Cs})}))}componentDidMount(){document.addEventListener("keydown",this.handleShortcut),document.addEventListener("keydown",this.handleQuickSwitchKeyPress)}componentWillUnmount(){document.removeEventListener("keydown",this.handleShortcut),document.removeEventListener("keydown",this.handleQuickSwitchKeyPress)}render(){return A().createElement("div",{className:"SidebarChannelNavigator webapp"},!this.props.showUnreadsCategory&&A().createElement(ws,null),A().createElement("button",{className:"SidebarChannelNavigator_jumpToButton",onClick:this.openQuickSwitcher,"aria-label":be._u("sidebar_left.channel_navigator.channelSwitcherLabel","Channel Switcher"),"aria-haspopup":"dialog","data-testid":"SidebarChannelNavigatorButton"},A().createElement("i",{className:"icon icon-magnify"}),A().createElement("span",null,"Search"),A().createElement("div",{className:"SidebarChannelNavigator_shortcutText"},"".concat(Z.V5()?"⌘":"Ctrl+","K"))))}}Ss(Ts,"propTypes",{showUnreadsCategory:F().bool.isRequired,isQuickSwitcherOpen:F().bool.isRequired,actions:F().shape({openModal:F().func.isRequired,closeModal:F().func.isRequired}).isRequired});const Ns=(0,a.connect)((function(e){return{showUnreadsCategory:(0,C.hC)(e),isQuickSwitcherOpen:(0,ga.g)(e,j.r8.QUICK_SWITCH)}}),(function(e){return{actions:(0,V.bindActionCreators)({openModal:ha.h,closeModal:ha.M},e)}}))(Ts);var Is=n(4195),Ps=n(41488),Ls=(n(60190),n(66726)),Rs=n.n(Ls),As=n(66795),Os=n(27998),ks=n(75859),Ds=n(32394),xs=n(63145),Fs=n(20229),Bs=n(41224),Us=n(43339);const Hs=()=>{const e=(0,a.useDispatch)(),{tabs:t,activeTab:n,activeApp:s}=(0,a.useSelector)((e=>e.tabs));return A().createElement("div",{className:"tabs-container"},t.map((t=>A().createElement("div",{onClick:()=>{return n=t.uniqueId,a=t.id,e((0,Us.r7)(n)),void e((0,Us.cX)(a));var n,a},key:t.uniqueId,className:"app-tab-wrap ".concat(n===t.uniqueId?"active":"")},A().createElement("span",{className:"app-heading-text"},A().createElement("img",{src:as,alt:"icon"}),"".concat(t.title," #").concat(t.uniqueId.slice(-2))," "),A().createElement("button",{className:"app-close-tag",onClick:n=>((t,n)=>{n.stopPropagation(),e((0,Us.Tq)(t))})(t.uniqueId,n)},"x")))))};var qs=n(9906),js=n(6098);function Zs(e){const t=(0,Pe.useIntl)(),n=(0,R.useCallback)((()=>{e.actions.deleteCategory(e.category.id)}),[e.actions.deleteCategory,e.category]);return A().createElement(js.$E,{compassDesign:!0,ariaLabel:t.formatMessage({id:"delete_category_modal.deleteCategory",defaultMessage:"Delete this category?"}),onExited:e.onExited,modalHeaderText:A().createElement(Pe.FormattedMessage,{id:"delete_category_modal.deleteCategory",defaultMessage:"Delete this category?"}),handleCancel:e.onExited,handleConfirm:n,confirmButtonText:A().createElement(Pe.FormattedMessage,{id:"delete_category_modal.delete",defaultMessage:"Delete"}),confirmButtonClassName:"delete"},A().createElement("span",{className:"delete-category__helpText"},A().createElement(Re.Z,{id:"delete_category_modal.helpText",defaultMessage:"Channels in **{category_name}** will move back to the Channels and Direct messages categories. You're not removed from any channels.",values:{category_name:e.category.display_name}})))}Zs.propTypes={onExited:F().func.isRequired,actions:F().shape({deleteCategory:F().func.isRequired}).isRequired},(0,Pe.defineMessages)({cancel:{id:"generic_modal.cancel",defaultMessage:"Cancel"},confirm:{id:"generic_modal.confirm",defaultMessage:"Confirm"},paginationCount:{id:"footer_pagination.count",defaultMessage:"Showing {startCount, number}-{endCount, number} of {total, number}"},paginationNext:{id:"footer_pagination.next",defaultMessage:"Next"},paginationPrev:{id:"footer_pagination.prev",defaultMessage:"Previous"}});const Vs=(0,a.connect)(null,(function(e){return{actions:(0,V.bindActionCreators)({deleteCategory:la.uu},e)}}))(Zs);var Gs=n(76452),Ws=n(26341),zs=n(63386),Ks=n(47185),Js=n(98514);const Ys=e=>{let{category:t}=e;const n=(0,a.useDispatch)(),r=(0,a.useSelector)(C.hC),i=(0,R.useMemo)(pa.Jd,[t]),o=(0,a.useSelector)((e=>i(e,t))),{formatMessage:l}=(0,Pe.useIntl)();let c=null;if(t.type!==Fs.y.DIRECT_MESSAGES){function b(){n((0,la.uN)(t.id,!t.muted))}c=A().createElement(Ws.ck,{id:"mute-".concat(t.id),onClick:b,leadingElement:A().createElement(ze.BellOutlineIcon,{size:18}),labels:t.muted?A().createElement(Pe.FormattedMessage,{id:"sidebar_left.sidebar_category_menu.unmuteCategory",defaultMessage:"Unmute Category"}):A().createElement(Pe.FormattedMessage,{id:"sidebar_left.sidebar_category_menu.muteCategory",defaultMessage:"Mute Category"})})}let d=null,u=null;if(t.type===Fs.y.CUSTOM){function v(){n((0,ha.h)({modalId:j.r8.DELETE_CATEGORY,dialogType:Vs,dialogProps:{category:t}}))}function y(){n((0,ha.h)({modalId:j.r8.EDIT_CATEGORY,dialogType:Gs.default,dialogProps:{categoryId:t.id,initialCategoryName:t.display_name}}))}d=A().createElement(Ws.ck,{id:"delete-".concat(t.id),isDestructive:!0,"aria-haspopup":!0,onClick:v,leadingElement:A().createElement(ze.TrashCanOutlineIcon,{size:18}),labels:A().createElement(Pe.FormattedMessage,{id:"sidebar_left.sidebar_category_menu.deleteCategory",defaultMessage:"Delete Category"})}),u=A().createElement(Ws.ck,{id:"rename-".concat(t.id),onClick:y,"aria-haspopup":!0,leadingElement:A().createElement(ze.PencilOutlineIcon,{size:18}),labels:A().createElement(Pe.FormattedMessage,{id:"sidebar_left.sidebar_category_menu.renameCategory",defaultMessage:"Rename Category"})})}function h(e){n((0,la.Wp)(t.id,e)),(0,Be.L9)("ui","ui_sidebar_sort_dm_".concat(e))}let m=A().createElement(Pe.FormattedMessage,{id:"sidebar.sortedManually",defaultMessage:"Manually"}),p=A().createElement(ze.FormatListBulletedIcon,{size:18});t.sorting===xs.r.Alphabetical?(m=A().createElement(Pe.FormattedMessage,{id:"user.settings.sidebar.sortAlpha",defaultMessage:"Alphabetically"}),p=A().createElement(ze.SortAlphabeticalAscendingIcon,{size:18})):t.sorting===xs.r.Recency&&(m=A().createElement(Pe.FormattedMessage,{id:"user.settings.sidebar.recent",defaultMessage:"Recent Activity"}),p=A().createElement(ze.ClockOutlineIcon,{size:18}));const g=A().createElement(Ws.Wd,{id:"sortChannels-".concat(t.id),leadingElement:p,labels:A().createElement(Pe.FormattedMessage,{id:"sidebar.sort",defaultMessage:"Sort"}),trailingElements:A().createElement(A().Fragment,null,m,A().createElement(ze.ChevronRightIcon,{size:16})),menuId:"sortChannels-".concat(t.id,"-menu"),menuAriaLabel:l({id:"sidebar_left.sidebar_category_menu.sort.dropdownAriaLabel",defaultMessage:"Sort submenu"})},A().createElement(Ws.ck,{id:"sortAplhabetical-".concat(t.id),labels:A().createElement(Pe.FormattedMessage,{id:"user.settings.sidebar.sortAlpha",defaultMessage:"Alphabetically"}),onClick:()=>h(xs.r.Alphabetical)}),A().createElement(Ws.ck,{id:"sortByMostRecent-".concat(t.id),labels:A().createElement(Pe.FormattedMessage,{id:"sidebar.sortedByRecencyLabel",defaultMessage:"Recent Activity"}),onClick:()=>h(xs.r.Recency)}),A().createElement(Ws.ck,{id:"sortManual-".concat(t.id),labels:A().createElement(Pe.FormattedMessage,{id:"sidebar.sortedManually",defaultMessage:"Manually"}),onClick:()=>h(xs.r.Manual)})),f=(0,R.useCallback)((()=>{n((0,s.LN)(o)),(0,Be.L9)("ui","ui_sidebar_category_menu_viewCategory")}),[n,o]),E=r?null:A().createElement(Ks.Z,{id:t.id,handleViewCategory:f,numChannels:o.length});return A().createElement(Js.Z,{id:t.id},E,E&&A().createElement(Ws.Z0,null),c,u,d,A().createElement(Ws.Z0,null),g,A().createElement(Ws.Z0,null),A().createElement(zs.Z,{id:t.id}))},Qs=(0,R.memo)(Ys),Xs=e=>{let{category:t,handleOpenDirectMessagesModal:n}=e;const[s,r]=(0,R.useState)(!1),{formatMessage:i}=(0,Pe.useIntl)(),o=(0,a.useDispatch)(),c=(0,a.useSelector)(C.nR),d=(0,a.useSelector)(l.rc);function u(e){o((0,la.Wp)(t.id,e)),(0,Be.L9)("ui","ui_sidebar_sort_dm_".concat(e))}let h=A().createElement(ze.ClockOutlineIcon,{size:18}),m=A().createElement(Pe.FormattedMessage,{id:"user.settings.sidebar.recent",defaultMessage:"Recent Activity"});t.sorting===xs.r.Alphabetical&&(m=A().createElement(Pe.FormattedMessage,{id:"user.settings.sidebar.sortAlpha",defaultMessage:"Alphabetically"}),h=A().createElement(ze.SortAlphabeticalAscendingIcon,{size:18}));const p=A().createElement(Ws.Wd,{id:"sortDirectMessages-".concat(t.id),leadingElement:h,labels:A().createElement(Pe.FormattedMessage,{id:"sidebar.sort",defaultMessage:"Sort"}),trailingElements:A().createElement(A().Fragment,null,m,A().createElement(ze.ChevronRightIcon,{size:16})),menuId:"sortDirectMessages-".concat(t.id,"-menu")},A().createElement(Ws.ck,{id:"sortAlphabetical-".concat(t.id),labels:A().createElement(Pe.FormattedMessage,{id:"user.settings.sidebar.sortAlpha",defaultMessage:"Alphabetically"}),onClick:()=>u(xs.r.Alphabetical)}),A().createElement(Ws.ck,{id:"sortByMostRecent-".concat(t.id),labels:A().createElement(Pe.FormattedMessage,{id:"sidebar.sortedByRecencyLabel",defaultMessage:"Recent Activity"}),onClick:()=>u(xs.r.Recency)}));let g=A().createElement("span",null,c);1e4===c&&(g=A().createElement(Pe.FormattedMessage,{id:"channel_notifications.levels.all",defaultMessage:"All"}));const f=A().createElement(Ws.Wd,{id:"showMessagesCount-".concat(t.id),leadingElement:A().createElement(ze.AccountMultipleOutlineIcon,{size:18}),labels:A().createElement(Pe.FormattedMessage,{id:"sidebar.show",defaultMessage:"Show"}),trailingElements:A().createElement(A().Fragment,null,g,A().createElement(ze.ChevronRightIcon,{size:16})),menuId:"showMessagesCount-".concat(t.id,"-menu")},j.default.DM_AND_GM_SHOW_COUNTS.map((e=>A().createElement(Ws.ck,{id:"showDmCount-".concat(t.id,"-").concat(e),key:"showDmCount-".concat(t.id,"-").concat(e),labels:A().createElement("span",null,e),onClick:()=>{return t=e,void o((0,Ds.$A)(d,[{user_id:d,category:j.default.Preferences.CATEGORY_SIDEBAR_SETTINGS,name:Oe.Preferences.LIMIT_VISIBLE_DMS_GMS,value:t.toString()}]));var t}})))),E=A().createElement(Ws.ck,{id:"openDirectMessage-".concat(t.id),onClick:n,leadingElement:A().createElement(ze.AccountPlusOutlineIcon,{size:18}),labels:A().createElement(Pe.FormattedMessage,{id:"sidebar.openDirectMessage",defaultMessage:"Open a direct message"})});return A().createElement("div",{className:U()("SidebarMenu","MenuWrapper",{menuOpen:s},{"MenuWrapper--open":s})},A().createElement(Ws.W2,{menuButton:{id:"SidebarCategorySortingMenu-Button-".concat(t.id),"aria-label":i({id:"sidebar_left.sidebar_category_menu.editCategory",defaultMessage:"Category options"}),class:"SidebarMenu_menuButton sortingMenu",children:A().createElement(ze.DotsVerticalIcon,{size:16})},menuButtonTooltip:{id:"SidebarCategorySortingMenu-ButtonTooltip-".concat(t.id),text:i({id:"sidebar_left.sidebar_category_menu.editCategory",defaultMessage:"Category options"}),class:"hidden-xs"},menu:{id:"SidebarCategorySortingMenu-MenuList-".concat(t.id),"aria-label":i({id:"sidebar_left.sidebar_category_menu.dropdownAriaLabel",defaultMessage:"Edit category menu"}),onToggle:function(e){r(e)}}},p,f,A().createElement(Ws.Z0,null),E))},$s=(0,R.memo)(Xs);var er=n(63714);function tr(e){return e.views.addChannelCtaDropdown.isOpen}var nr=n(95157),ar=n(78892),sr=n(13653),rr=n(66475);const ir=()=>{const e=(0,a.useDispatch)(),t=(0,a.useSelector)(o.ev),n=(0,Pe.useIntl)(),s=(0,a.useSelector)((e=>(0,C.o4)(e,j.uP.TOUCHED,j.C8.ADD_CHANNELS_CTA))),r=(0,a.useSelector)((e=>(0,da.iM)(e,ca.Z.CREATE_PUBLIC_CHANNEL))),i=(0,a.useSelector)((e=>(0,da.iM)(e,ca.Z.CREATE_PRIVATE_CHANNEL)))||r,l=(0,a.useSelector)((e=>(0,da.iM)(e,ca.Z.JOIN_PUBLIC_CHANNELS))),c=(0,a.useSelector)(tr),d=(0,a.useSelector)(f.rc),u=(0,R.useCallback)((t=>{e((0,er.I)(t))}),[e]);let h="SidebarChannelNavigator__addChannelsCtaLhsButton";if(s||(h+=" SidebarChannelNavigator__addChannelsCtaLhsButton--untouched"),!i&&!l||!t)return null;const m=()=>{e((0,ha.h)({modalId:j.r8.MORE_CHANNELS,dialogType:nr.default})),(0,Be.L9)("ui","browse_channels_button_is_clicked")},p=()=>{e((0,ha.h)({modalId:j.r8.NEW_CHANNEL_MODAL,dialogType:ar.default})),(0,Be.L9)("ui","create_new_channel_button_is_clicked")},g=e=>A().createElement("button",{className:h,id:"addChannelsCta","aria-label":n.formatMessage({id:"sidebar_left.add_channel_dropdown.dropdownAriaLabel",defaultMessage:"Browse Apps Dropdown"}),onClick:()=>null==e?void 0:e()},A().createElement("div",{"aria-label":n.formatMessage({id:"sidebar_left.sidebar_channel_navigator.browseAppsCta",defaultMessage:"Browse Apps"})},A().createElement("i",{className:"icon-plus-box",style:{marginLeft:"-1px"}}),A().createElement("span",null,n.formatMessage({id:"sidebar_left.browseAppsCta",defaultMessage:"Browse Apps"})))),E=()=>{(0,Be.L9)("ui","add_channels_cta_button_clicked"),s||e((0,Ds.$A)(d,[{category:j.uP.TOUCHED,user_id:d,name:j.C8.ADD_CHANNELS_CTA,value:"true"}]))};return i?A().createElement(rr.Z,{className:"AddChannelsCtaDropdown",onToggle:e=>{u(e),E()},open:c},g(),A().createElement(sr.Z,{id:"AddChannelCtaDropdown",ariaLabel:n.formatMessage({id:"sidebar_left.add_channel_cta_dropdown.dropdownAriaLabel",defaultMessage:"Add Channels Dropdown"})},(()=>{let e,t;return l&&(e=A().createElement(sr.Z.ItemAction,{id:"showMoreChannels",onClick:m,icon:A().createElement("i",{className:"icon-globe"}),text:n.formatMessage({id:"sidebar_left.add_channel_dropdown.browseChannels",defaultMessage:"Browse channels"})})),i&&(t=A().createElement(sr.Z.ItemAction,{id:"showNewChannel",onClick:p,icon:A().createElement("i",{className:"icon-plus"}),text:n.formatMessage({id:"sidebar_left.add_channel_dropdown.createNewChannel",defaultMessage:"Create new channel"})})),A().createElement(A().Fragment,null,A().createElement(sr.Z.Group,null,t,e))})())):g((()=>{m(),E()}))};var or=n(48434),lr=n(79186);function cr(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class dr extends A().PureComponent{constructor(e){super(e),cr(this,"handleOpenModal",(()=>{this.props.openModal()})),cr(this,"handleA11yActivateEvent",(()=>{var e;null===(e=this.categoryTitleRef.current)||void 0===e||e.addEventListener("keydown",this.handleA11yKeyDown),this.a11yKeyDownRegistered=!0})),cr(this,"handleA11yDeactivateEvent",(()=>{var e;null===(e=this.categoryTitleRef.current)||void 0===e||e.removeEventListener("keydown",this.handleA11yKeyDown),this.a11yKeyDownRegistered=!1})),cr(this,"handleA11yKeyDown",(e=>{(0,rn.p)(e,j.default.KeyCodes.ENTER)&&this.handleCollapse()})),cr(this,"renderChannel",((e,t)=>{const{setChannelRef:n,category:a,draggingState:s}=this.props;return A().createElement(lr.Z,{key:e,channelIndex:t,channelId:e,isDraggable:!0,setChannelRef:n,isCategoryCollapsed:a.collapsed,isCategoryDragged:s.type===j.Hl.CATEGORY&&s.id===a.id,isAutoSortedCategory:a.sorting===xs.r.Alphabetical||a.sorting===xs.r.Recency})})),cr(this,"handleCollapse",(()=>{const{category:e}=this.props;e.collapsed?(0,Be.L9)("ui","ui_sidebar_expand_category"):(0,Be.L9)("ui","ui_sidebar_collapse_category"),this.props.actions.setCategoryCollapsed(e.id,!e.collapsed)})),cr(this,"removeAnimation",(()=>{this.newDropBoxRef.current&&this.newDropBoxRef.current.classList.remove("animating")})),cr(this,"handleOpenDirectMessagesModal",(e=>{e.preventDefault(),this.props.handleOpenMoreDirectChannelsModal(e.nativeEvent),(0,Be.L9)("ui","ui_sidebar_create_direct_message")})),cr(this,"isDropDisabled",(()=>{const{draggingState:e,category:t}=this.props;return t.type===Fs.y.DIRECT_MESSAGES?e.type===j.Hl.CHANNEL:t.type===Fs.y.CHANNELS&&e.type===j.Hl.DM})),cr(this,"renderNewDropBox",(e=>{const{draggingState:t,category:n,isNewCategory:a,channelIds:s}=this.props;return!a||null!=s&&s.length?null:A().createElement(A().Fragment,null,A().createElement(As.Draggable,{draggableId:"NEW_CHANNEL_SPACER__".concat(n.id),isDragDisabled:!0,index:0},(e=>A().createElement("li",Object.assign({ref:e.innerRef,draggable:"false",className:"SidebarChannel noFloat newChannelSpacer"},e.draggableProps,{role:"listitem",tabIndex:-1})))),A().createElement("div",{className:"SidebarCategory_newDropBox"},A().createElement("div",{ref:this.newDropBoxRef,className:U()("SidebarCategory_newDropBox-content",{collapsed:n.collapsed||t.type===j.Hl.CATEGORY&&t.id===n.id,isDraggingOver:e}),onTransitionEnd:this.removeAnimation},A().createElement("i",{className:"icon-hand-right"}),A().createElement("span",{className:"SidebarCategory_newDropBox-label"},A().createElement(Pe.FormattedMessage,{id:"sidebar_left.sidebar_category.newDropBoxLabel",defaultMessage:"Drag channels here..."})))))})),cr(this,"showPlaceholder",(()=>{const{channelIds:e,draggingState:t,category:n,isNewCategory:a}=this.props;return n.sorting!==xs.r.Alphabetical&&n.sorting!==xs.r.Recency&&!a||!!e.find((e=>e===t.id))})),this.categoryTitleRef=A().createRef(),this.newDropBoxRef=A().createRef(),this.state={isMenuOpen:!1},this.a11yKeyDownRegistered=!1}componentDidUpdate(e){this.props.category.collapsed!==e.category.collapsed&&this.newDropBoxRef.current&&this.newDropBoxRef.current.classList.add("animating")}componentDidMount(){var e,t;null===(e=this.categoryTitleRef.current)||void 0===e||e.addEventListener(j.sp.ACTIVATE,this.handleA11yActivateEvent),null===(t=this.categoryTitleRef.current)||void 0===t||t.addEventListener(j.sp.DEACTIVATE,this.handleA11yDeactivateEvent)}componentWillUnmount(){var e,t;null===(e=this.categoryTitleRef.current)||void 0===e||e.removeEventListener(j.sp.ACTIVATE,this.handleA11yActivateEvent),null===(t=this.categoryTitleRef.current)||void 0===t||t.removeEventListener(j.sp.DEACTIVATE,this.handleA11yDeactivateEvent),this.a11yKeyDownRegistered&&this.handleA11yDeactivateEvent()}render(){const{category:e,categoryIndex:t,channelIds:n,isNewCategory:a}=this.props;if(!e)return null;if(e.type===Fs.y.FAVORITES&&(null==n||!n.length))return null;const s=n.map(this.renderChannel);let r,i,o=!0;if(a)i=A().createElement("div",{className:"SidebarCategory_newLabel"},A().createElement(Pe.FormattedMessage,{id:"sidebar_left.sidebar_category.newLabel",defaultMessage:"new"})),r=A().createElement(Qs,{category:e});else if(e.type===Fs.y.DIRECT_MESSAGES){const t=(0,Bs._)("sidebar.createDirectMessage","Create new direct message");r=A().createElement(A().Fragment,null,A().createElement($s,{category:e,handleOpenDirectMessagesModal:this.handleOpenDirectMessagesModal}),A().createElement(ts.Z,{id:"new-group-tooltip",title:A().createElement(A().Fragment,null,t,A().createElement(qs.Z,{shortcut:qs.r.navDMMenu,hideDescription:!0,isInsideTooltip:!0})),placement:"top"},A().createElement("button",{className:"SidebarChannelGroupHeader_addButton",onClick:this.handleOpenDirectMessagesModal,"aria-label":t},A().createElement("i",{className:"icon-plus"})))),n&&n.length||(o=!1)}else r=A().createElement(Qs,{category:e});let l=e.display_name;if(e.type!==Fs.y.CUSTOM){const t=ur[e.type];l=(0,Bs._)(t.id,t.defaultMessage)}return A().createElement(As.Draggable,{draggableId:e.id,index:t,disableInteractiveElementBlocking:!0},((t,n)=>{let a=null;return"channels"!==e.type||e.collapsed||(a=A().createElement(A().Fragment,null,A().createElement(ir,null)," ",A().createElement(Hs,null))),A().createElement("div",Object.assign({className:U()("SidebarChannelGroup a11y__section",{dropDisabled:this.isDropDisabled(),menuIsOpen:this.state.isMenuOpen,capture:this.props.draggingState.state===j.bb.CAPTURE,isCollapsed:e.collapsed}),ref:t.innerRef},t.draggableProps),A().createElement(As.Droppable,{droppableId:e.id,type:"SIDEBAR_CHANNEL",isDropDisabled:this.isDropDisabled()},((a,c)=>A().createElement("div",Object.assign({},a.droppableProps,{ref:a.innerRef,className:U()({draggingOver:c.isDraggingOver})}),A().createElement(or.v,{ref:this.categoryTitleRef,displayName:l,dragHandleProps:t.dragHandleProps,isCollapsed:e.collapsed,isCollapsible:o,isDragging:n.isDragging,isDraggingOver:c.isDraggingOver,muted:e.muted,onClick:this.handleCollapse},i,void 0,r),A().createElement("div",{className:U()("SidebarChannelGroup_content")},A().createElement("ul",{role:"list",className:"NavGroupContent"},this.renderNewDropBox(c.isDraggingOver),s,this.showPlaceholder()?a.placeholder:null))))),a)}))}}const ur=(0,Pe.defineMessages)({channels:{id:"sidebar.types.channels",defaultMessage:"APPS"},direct_messages:{id:"sidebar.types.chat",defaultMessage:"CHAT"},favorites:{id:"sidebar.types.favorites",defaultMessage:"FAVORITES"}}),hr=(0,a.connect)(null,(e=>({openModal:()=>e((0,ns.h)())})))(dr),mr=(0,a.connect)((function(){const e=(0,pa.kS)();return(t,n)=>({channelIds:e(t,n.category),draggingState:(0,pa.Qy)(t),currentUserId:(0,l.rc)(t),isAdmin:(0,ge.GJ)((0,l.ts)(t).roles)})}),(function(e){return{actions:(0,V.bindActionCreators)({setCategoryCollapsed:la.No,setCategorySorting:la.Wp,savePreferences:Ds.$A},e)}}))(hr);function pr(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const gr=(0,D.v)("DraftsLink",(0,R.lazy)((()=>n.e(7590).then(n.bind(n,27590))))),fr=(0,D.v)("UnreadChannelIndicator",(0,R.lazy)((()=>n.e(8048).then(n.bind(n,48048))))),Cr=(0,D.v)("UnreadChannels",(0,R.lazy)((()=>n.e(749).then(n.bind(n,20749)))));function Er(e){return A().createElement("div",Object.assign({},e,{className:"scrollbar--view"}))}function br(e){return A().createElement("div",Object.assign({},e,{className:"scrollbar--horizontal"}))}function vr(e){return A().createElement("div",Object.assign({},e,{className:"scrollbar--verticalTrack"}))}function yr(e){return A().createElement("div",Object.assign({},e,{className:"scrollbar--vertical"}))}const _r={position:"absolute"};class Mr extends A().PureComponent{constructor(e){var t;super(e),t=this,pr(this,"channelsListScrollTimeout",null),pr(this,"getDisplayedChannelIds",(()=>this.props.displayedChannels.map((e=>e.id)))),pr(this,"getDisplayedStaticPageIds",(()=>this.props.staticPages.map((e=>e.id)))),pr(this,"setChannelRef",((e,t)=>{t?this.channelRefs.set(e,t):this.channelRefs.delete(e)})),pr(this,"getFirstUnreadChannelFromChannelIdArray",(e=>e.find((e=>e!==this.props.currentChannelId&&this.props.unreadChannelIds.includes(e))))),pr(this,"handleScrollAnimationUpdate",(e=>{const t=e.getCurrentValue();this.scrollbar.current.scrollTop(t)})),pr(this,"scrollToFirstUnreadChannel",(()=>{this.scrollToChannel(this.getFirstUnreadChannel(),!0)})),pr(this,"scrollToLastUnreadChannel",(()=>{this.scrollToChannel(this.getLastUnreadChannel(),!0)})),pr(this,"scrollToChannel",(function(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return;const a=t.channelRefs.get(e);if(!a)return;const s=a.offsetTop,r=s+a.offsetHeight,i=t.scrollbar.current.getScrollTop(),o=t.scrollbar.current.getClientHeight();if(s<i+32){const a=n||!t.state.showTopUnread?10:55;let r;const i=t.getDisplayedChannelIds();r=i.length>0&&i[0]===e?0:s-a-32,t.scrollToPosition(r)}else if(r>i+o){const e=r-o+(n||!t.state.showBottomUnread?10:55);t.scrollToPosition(e)}})),pr(this,"scrollToPosition",(e=>{this.scrollAnimation.setCurrentValue(this.scrollbar.current.getScrollTop()).setAtRest(),this.scrollAnimation.setEndValue(e)})),pr(this,"updateUnreadIndicators",(()=>{if(this.props.draggingState.state)return void this.setState({showTopUnread:!1,showBottomUnread:!1});let e=!1,t=!1;const n=this.getFirstUnreadChannel(),a=this.getLastUnreadChannel();if(n){const t=this.channelRefs.get(n);t&&t.offsetTop+t.offsetHeight-10-32<this.scrollbar.current.getScrollTop()&&(e=!0)}if(a){const e=this.channelRefs.get(a);e&&e.offsetTop+10>this.scrollbar.current.getScrollTop()+this.scrollbar.current.getClientHeight()&&(t=!0)}e===this.state.showTopUnread&&t===this.state.showBottomUnread||this.setState({showTopUnread:e,showBottomUnread:t})})),pr(this,"getFirstUnreadChannel",(()=>this.getFirstUnreadChannelFromChannelIdArray(this.getDisplayedChannelIds()))),pr(this,"getLastUnreadChannel",(()=>this.getFirstUnreadChannelFromChannelIdArray(this.getDisplayedChannelIds().reverse()))),pr(this,"navigateById",(e=>{-1===this.props.staticPages.findIndex((t=>t.id===e))?this.props.actions.switchToChannelById(e):this.props.actions.switchToLhsStaticPage(e)})),pr(this,"navigateChannelShortcut",(e=>{if(!e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||!(0,rn.p)(e,j.Constants.KeyCodes.UP)&&!(0,rn.p)(e,j.Constants.KeyCodes.DOWN))(0,rn._)(e)&&e.shiftKey&&(0,rn.p)(e,j.Constants.KeyCodes.K)&&this.props.handleOpenMoreDirectChannelsModal(e);else{e.preventDefault();const t=this.getDisplayedStaticPageIds(),n=[...t,...this.getDisplayedChannelIds()],a=this.props.currentChannelId||this.props.currentStaticPageId,s=n.indexOf(a);let r;r=(0,rn.p)(e,j.Constants.KeyCodes.DOWN)?s+1:s-1;const i=n[(0,be.wQ)(r,n.length)];this.navigateById(i),r>=t.length&&this.scrollToChannel(i)}})),pr(this,"navigateUnreadChannelShortcut",(e=>{if(e.altKey&&e.shiftKey&&!e.ctrlKey&&!e.metaKey&&((0,rn.p)(e,j.Constants.KeyCodes.UP)||(0,rn.p)(e,j.Constants.KeyCodes.DOWN))){e.preventDefault();const t=this.getDisplayedChannelIds(),n=[...this.props.unreadChannelIds];this.props.collapsedThreads&&(t.unshift(""),this.props.hasUnreadThreads&&n.unshift(""));let a=0;a=(0,rn.p)(e,j.Constants.KeyCodes.UP)?-1:1;const s=(0,Ee.MX)(this.props.currentChannelId,t,n,a);if(-1!==s){const e=t[s];this.navigateById(e),this.scrollToChannel(e)}}})),pr(this,"renderCategory",((e,t)=>A().createElement(mr,{key:e.id,category:e,categoryIndex:t,setChannelRef:this.setChannelRef,handleOpenMoreDirectChannelsModal:this.props.handleOpenMoreDirectChannelsModal,isNewCategory:this.props.newCategoryIds.includes(e.id)}))),pr(this,"onScroll",Rs()((()=>{this.updateUnreadIndicators()}),100)),pr(this,"onTransitionEnd",Rs()((()=>{this.updateUnreadIndicators()}),100)),pr(this,"onBeforeCapture",(e=>{this.channelRefs.forEach((e=>e.classList.remove("animating")));const t=[...document.querySelectorAll('[data-rbd-droppable-id*="droppable-categories"]')];t[0].style.height="".concat(t[0].scrollHeight,"px"),this.props.multiSelectedChannelIds.find((t=>e.draggableId===t))||this.props.actions.clearChannelSelection();const n={state:j.bb.CAPTURE,id:e.draggableId};if(this.props.categories.some((t=>t.id===e.draggableId)))n.type=j.Hl.CATEGORY;else{const t=this.props.displayedChannels.filter((t=>-1!==this.props.multiSelectedChannelIds.indexOf(t.id)||t.id===e.draggableId));t.every((e=>e.type===Oe.LQ.DM_CHANNEL||e.type===Oe.LQ.GM_CHANNEL))?n.type=j.Hl.DM:t.every((e=>e.type!==Oe.LQ.DM_CHANNEL&&e.type!==Oe.LQ.GM_CHANNEL))?n.type=j.Hl.CHANNEL:n.type=j.Hl.MIXED_CHANNELS}this.props.actions.setDraggingState(n)})),pr(this,"onBeforeDragStart",(()=>{this.props.actions.setDraggingState({state:j.bb.BEFORE})})),pr(this,"onDragStart",(e=>{this.props.onDragStart(e),this.props.actions.setDraggingState({state:j.bb.DURING}),[...document.querySelectorAll('[data-rbd-droppable-id*="droppable-categories"]')][0].style.height=""})),pr(this,"onDragEnd",(e=>{this.props.onDragEnd(e),"DROP"===e.reason&&e.destination&&("SIDEBAR_CHANNEL"===e.type?(this.props.actions.moveChannelsInSidebar(e.destination.droppableId,e.destination.index,e.draggableId),(0,Be.L9)("ui","ui_sidebar_dragdrop_dropped_channel")):"SIDEBAR_CATEGORY"===e.type&&(this.props.actions.moveCategory(this.props.currentTeam.id,e.draggableId,e.destination.index),(0,Be.L9)("ui","ui_sidebar_dragdrop_dropped_category"))),this.props.actions.stopDragging()})),pr(this,"showChannelListScrollbar",(()=>{null!==this.channelsListScrollTimeout&&clearTimeout(this.channelsListScrollTimeout),this.setState({autoHide:!1})})),pr(this,"hideChannelListScrollbar",(()=>{this.channelsListScrollTimeout=setTimeout((()=>{this.setState({autoHide:!0})}),300)})),this.channelRefs=new Map,this.state={showTopUnread:!1,showBottomUnread:!1,autoHide:!0},this.scrollbar=A().createRef(),this.animate=new ks.SpringSystem,this.scrollAnimation=this.animate.createSpring(),this.scrollAnimation.setOvershootClampingEnabled(!0),this.scrollAnimation.addListener({onSpringUpdate:this.handleScrollAnimationUpdate})}componentDidMount(){document.addEventListener("keydown",this.navigateChannelShortcut),document.addEventListener("keydown",this.navigateUnreadChannelShortcut)}componentWillUnmount(){document.removeEventListener("keydown",this.navigateChannelShortcut),document.removeEventListener("keydown",this.navigateUnreadChannelShortcut)}componentDidUpdate(e){this.props.currentChannelId&&e.currentChannelId&&(this.props.currentTeam!==e.currentTeam&&this.scrollbar.current.scrollToTop(),this.props.currentChannelId,e.currentChannelId,this.props.currentChannelId!==e.currentChannelId&&this.props.actions.close(),this.updateUnreadIndicators())}render(){const{categories:e}=this.props;let t;if(this.props.isUnreadFilterEnabled)t=A().createElement(Cr,{setChannelRef:this.setChannelRef});else{let n;this.props.showUnreadsCategory&&(n=A().createElement(Cr,{setChannelRef:this.setChannelRef}));const a=e.map(this.renderCategory);t=A().createElement(A().Fragment,null,n,A().createElement(As.DragDropContext,{onDragEnd:this.onDragEnd,onBeforeDragStart:this.onBeforeDragStart,onBeforeCapture:this.onBeforeCapture,onDragStart:this.onDragStart},A().createElement(As.Droppable,{droppableId:"droppable-categories",type:"SIDEBAR_CATEGORY"},(e=>A().createElement("div",Object.assign({id:"sidebar-droppable-categories",ref:e.innerRef},e.droppableProps),a,e.placeholder)))))}const n=A().createElement(Pe.FormattedMessage,{id:"sidebar.unreads",defaultMessage:"More unreads"}),a=A().createElement(Pe.FormattedMessage,{id:"sidebar.unreads",defaultMessage:"More unreads"}),s=(0,be._u)("accessibility.sections.lhsList","channel sidebar region");return A().createElement(A().Fragment,null,A().createElement(gr,null),A().createElement("div",{id:"sidebar-left",role:"application","aria-label":s,className:U()("SidebarNavContainer a11y__region",{disabled:this.props.isUnreadFilterEnabled}),"data-a11y-disable-nav":Boolean(this.props.draggingState.type),"data-a11y-sort-order":"7",onTransitionEnd:this.onTransitionEnd},A().createElement(fr,{name:"Top",show:this.state.showTopUnread,onClick:this.scrollToFirstUnreadChannel,extraClass:"nav-pills__unread-indicator-top",content:n}),A().createElement(fr,{name:"Bottom",show:this.state.showBottomUnread,onClick:this.scrollToLastUnreadChannel,extraClass:"nav-pills__unread-indicator-bottom",content:a}),A().createElement("div",{onPointerLeave:this.hideChannelListScrollbar,onPointerOver:this.showChannelListScrollbar},A().createElement(Os.ZP,{ref:this.scrollbar,autoHide:this.state.autoHide,renderThumbHorizontal:br,renderThumbVertical:yr,renderTrackVertical:vr,renderView:Er,onScroll:this.onScroll,style:_r},t))))}}const wr=(0,a.connect)((function(e){const t=(0,o.kA)(e),n=(0,C.ym)(e);let a=!1;var s;return n&&(a=Boolean(null===(s=(0,Is.Pd)(e))||void 0===s?void 0:s.total_unread_threads)),{currentTeam:t,currentChannelId:(0,r.gO)(e),categories:(0,pa.Yy)(e),isUnreadFilterEnabled:(0,pa.fI)(e),unreadChannelIds:(0,r.pb)(e),displayedChannels:(0,pa.ER)(e),draggingState:(0,pa.Qy)(e),newCategoryIds:e.views.channelSidebar.newCategoryIds,multiSelectedChannelIds:e.views.channelSidebar.multiSelectedChannelIds,showUnreadsCategory:(0,C.hC)(e),collapsedThreads:n,hasUnreadThreads:a,currentStaticPageId:(0,W.It)(e),staticPages:(0,W.f2)(e)}}),(function(e){return{actions:(0,V.bindActionCreators)({close:Ps.xv,switchToChannelById:c.j9,moveChannelsInSidebar:ua.wv,moveCategory:la.Wr,setDraggingState:ua.L0,stopDragging:ua.Ul,clearChannelSelection:ua.rJ,switchToLhsStaticPage:Ps.mN},e)}}))(Mr);function Sr(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Tr=(0,D.v)("MobileSidebarHeader",(0,R.lazy)((()=>n.e(9723).then(n.bind(n,69723))))),Nr=(0,D.v)("MoreDirectChannels",(0,R.lazy)((()=>n.e(4036).then(n.bind(n,24036))))),Ir=(0,D.v)("BrowseChannels",(0,R.lazy)((()=>Promise.resolve().then(n.bind(n,95157))))),Pr=(0,D.v)("EditCategoryModal",(0,R.lazy)((()=>Promise.resolve().then(n.bind(n,76452))))),Lr=(0,D.v)("CreateUserGroupsModal",(0,R.lazy)((()=>Promise.resolve().then(n.bind(n,21476))))),Rr=(0,D.v)("InvitationModal",(0,R.lazy)((()=>Promise.resolve().then(n.bind(n,29055))))),Ar=(0,D.v)("KeyboardShortcutsModal",(0,R.lazy)((()=>Promise.resolve().then(n.bind(n,60698))))),Or=(0,D.v)("NewChannelModal",(0,R.lazy)((()=>Promise.resolve().then(n.bind(n,78892))))),kr=(0,D.v)("UserSettingsModal",(0,R.lazy)((()=>Promise.resolve().then(n.bind(n,51824)))));class Dr extends A().PureComponent{constructor(e){super(e),Sr(this,"handleClickClearChannelSelection",(e=>{e.defaultPrevented||this.props.actions.clearChannelSelection()})),Sr(this,"handleKeyDownEvent",(e=>{(0,rn.p)(e,j.default.KeyCodes.ESCAPE)?this.props.actions.clearChannelSelection():(0,rn._)(e,!0)&&((0,rn.p)(e,j.default.KeyCodes.FORWARD_SLASH)?(e.preventDefault(),this.props.isKeyBoardShortcutModalOpen?this.props.actions.closeModal(j.r8.KEYBOARD_SHORTCUTS_MODAL):this.props.actions.openModal({modalId:j.r8.KEYBOARD_SHORTCUTS_MODAL,dialogType:Ar})):(0,rn.p)(e,j.default.KeyCodes.A)&&e.shiftKey&&(e.preventDefault(),this.props.actions.openModal({modalId:j.r8.USER_SETTINGS,dialogType:kr,dialogProps:{isContentProductSettings:!0}})))})),Sr(this,"showMoreDirectChannelsModal",(()=>{this.setState({showDirectChannelsModal:!0}),(0,Be.L9)("ui","ui_channels_more_direct_v2")})),Sr(this,"hideMoreDirectChannelsModal",(()=>{this.setState({showDirectChannelsModal:!1})})),Sr(this,"showCreateCategoryModal",(()=>{this.props.actions.openModal({modalId:j.r8.EDIT_CATEGORY,dialogType:Pr,dialogProps:{}}),(0,Be.L9)("ui","ui_sidebar_menu_createCategory")})),Sr(this,"showMoreChannelsModal",(()=>{this.props.actions.openModal({modalId:j.r8.MORE_CHANNELS,dialogType:Ir}),(0,Be.L9)("ui","ui_channels_more_public_v2")})),Sr(this,"invitePeopleModal",(()=>{this.props.actions.openModal({modalId:j.r8.INVITATION,dialogType:Rr}),(0,Be.L9)("ui","ui_channels_dropdown_invite_people")})),Sr(this,"showNewChannelModal",(()=>{this.props.actions.openModal({modalId:j.r8.NEW_CHANNEL_MODAL,dialogType:Or}),this.closeEditRHS(),(0,Be.L9)("ui","ui_channels_create_channel_v2")})),Sr(this,"showCreateUserGroupModal",(()=>{this.props.actions.openModal({modalId:j.r8.USER_GROUPS_CREATE,dialogType:Lr}),(0,Be.L9)("ui","ui_channels_create_user_group")})),Sr(this,"handleOpenMoreDirectChannelsModal",(e=>{e.preventDefault(),this.state.showDirectChannelsModal?this.hideMoreDirectChannelsModal():(this.showMoreDirectChannelsModal(),this.closeEditRHS())})),Sr(this,"onDragStart",(()=>{this.setState({isDragging:!0})})),Sr(this,"onDragEnd",(()=>{this.setState({isDragging:!1})})),Sr(this,"renderModals",(()=>{let e;return this.state.showDirectChannelsModal&&(e=A().createElement(Nr,{onModalDismissed:this.hideMoreDirectChannelsModal,isExistingChannel:!1})),A().createElement(A().Fragment,null,e)})),Sr(this,"closeEditRHS",(()=>{this.props.rhsOpen&&this.props.rhsState===j.Hp.EDIT_HISTORY&&this.props.actions.closeRightHandSide()})),this.state={showDirectChannelsModal:!1,isDragging:!1}}componentDidMount(){this.props.teamId&&this.props.actions.fetchMyCategories(this.props.teamId),window.addEventListener("click",this.handleClickClearChannelSelection),window.addEventListener("keydown",this.handleKeyDownEvent)}componentDidUpdate(e){this.props.teamId&&e.teamId!==this.props.teamId&&this.props.actions.fetchMyCategories(this.props.teamId)}componentWillUnmount(){window.removeEventListener("click",this.handleClickClearChannelSelection),window.removeEventListener("keydown",this.handleKeyDownEvent)}render(){if(!this.props.teamId)return A().createElement("div",null);const e=(0,be._u)("accessibility.sections.lhsNavigator","channel navigator region");return A().createElement(Qa,{id:"SidebarContainer",className:U()({"move--right":this.props.isOpen&&this.props.isMobileView,dragging:this.state.isDragging})},this.props.isMobileView?A().createElement(Tr,null):A().createElement(ls,{showNewChannelModal:this.showNewChannelModal,showMoreChannelsModal:this.showMoreChannelsModal,showCreateUserGroupModal:this.showCreateUserGroupModal,invitePeopleModal:this.invitePeopleModal,showCreateCategoryModal:this.showCreateCategoryModal,canCreateChannel:this.props.canCreatePrivateChannel||this.props.canCreatePublicChannel,canJoinPublicChannel:this.props.canJoinPublicChannel,handleOpenDirectMessagesModal:this.handleOpenMoreDirectChannelsModal,unreadFilterEnabled:this.props.unreadFilterEnabled,userGroupsEnabled:this.props.userGroupsEnabled,canCreateCustomGroups:this.props.canCreateCustomGroups}),A().createElement("div",{id:"lhsNavigator",role:"application","aria-label":e,className:"a11y__region","data-a11y-sort-order":"6"},A().createElement(Ns,null)),A().createElement("div",{className:"sidebar--left__icons"},A().createElement(q.default,{pluggableName:"LeftSidebarHeader"})),A().createElement(wr,{handleOpenMoreDirectChannelsModal:this.handleOpenMoreDirectChannelsModal,onDragStart:this.onDragStart,onDragEnd:this.onDragEnd}),A().createElement(La,null),this.renderModals(),!this.props.isMobileView&&A().createElement(za,null))}}Sr(Dr,"propTypes",{teamId:F().string.isRequired,canCreatePublicChannel:F().bool.isRequired,canCreatePrivateChannel:F().bool.isRequired,canJoinPublicChannel:F().bool.isRequired,isOpen:F().bool.isRequired,actions:F().shape({fetchMyCategories:F().func.isRequired,openModal:F().func.isRequired,closeModal:F().func.isRequired,clearChannelSelection:F().func.isRequired,closeRightHandSide:F().func.isRequired}).isRequired,unreadFilterEnabled:F().bool.isRequired,isMobileView:F().bool.isRequired,isKeyBoardShortcutModalOpen:F().bool.isRequired,userGroupsEnabled:F().bool.isRequired,canCreateCustomGroups:F().bool.isRequired,rhsOpen:F().bool});const xr=(0,a.connect)((function(e){const t=(0,o.kA)(e),n=(0,pa.fI)(e),a=(0,C.NT)(e);let s=!1,r=!1,i=!1;t&&(s=(0,da.iM)(e,ca.Z.CREATE_PUBLIC_CHANNEL),r=(0,da.iM)(e,ca.Z.CREATE_PRIVATE_CHANNEL),i=(0,da.iM)(e,ca.Z.JOIN_PUBLIC_CHANNELS));const l=(0,da.AN)(e,{permission:ca.Z.CREATE_CUSTOM_GROUP})&&(0,C.NT)(e);return{teamId:t?t.id:"",canCreatePrivateChannel:r,canCreatePublicChannel:s,canJoinPublicChannel:i,isOpen:(0,W.wo)(e),unreadFilterEnabled:n,isMobileView:(0,K.E7)(e),isKeyBoardShortcutModalOpen:(0,ga.g)(e,j.r8.KEYBOARD_SHORTCUTS_MODAL),userGroupsEnabled:a,canCreateCustomGroups:l,rhsState:(0,d.kV)(e),rhsOpen:(0,d.aC)(e)}}),(function(e){return{actions:(0,V.bindActionCreators)({clearChannelSelection:ua.rJ,fetchMyCategories:la.cN,openModal:ha.h,closeModal:ha.M,closeRightHandSide:ma.Lg},e)}}))(Dr);var Fr=n(6352);const Br=()=>{const e=(0,a.useDispatch)(),t=(0,a.useSelector)(C.ym),n=(0,R.useRef)(!1);return(0,R.useEffect)((()=>{n.current?e((0,Fr.uz)()):n.current=!0}),[t]),null},Ur=n.p+"files/6a2055863ca6d151ebb4.png",Hr=n.p+"files/5309202966a267198738.png",qr=n.p+"files/15307d1bee6d7e48a3c1.png",jr=n.p+"files/cd8cb8b2332ebb5e7a6d.png",Zr=n.p+"files/544631aa0cac60b57833.png",Vr=n.p+"files/90de726ce0a2fe9958d3.png",Gr=n.p+"files/940dec81931d4df6027f.png",Wr=n.p+"files/bbedcb731056777d6679.png",zr=n.p+"files/3399e2ee5698233ffe44.png",Kr=n.p+"files/5230b3ff762bfd3f84df.png",Jr=n.p+"files/f6ea1b2c4b12cde69e70.png",Yr=n.p+"files/8f702b9068ad5f14443a.png",Qr=n.p+"files/9777bf12a1f691f71268.png",Xr=n.p+"files/20b39a15c40e4db238f1.png",$r=n.p+"files/2c18b373ff146fd8108b.png";var ei=n(7709);function ti(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ni=function(e){return e.Mention="Mention",e.Unread="Unread",e.None="None",e}(ni||{});class ai extends A().PureComponent{constructor(){super(...arguments),ti(this,"updateDesktopApp",(()=>{const{unreadStatus:e}=this.props,{isUnread:t,unreadMentionCount:n}=(0,r.oQ)(e);ei.Z.updateUnreadsAndMentions(t,n)})),ti(this,"updateTitle",(()=>{const{siteName:e,currentChannel:t,currentTeam:n,currentTeammate:a,unreadStatus:s,inGlobalThreads:i,inDrafts:o}=this.props,{formatMessage:l}=this.props.intl,c=e||"",{isUnread:d,unreadMentionCount:u}=(0,r.oQ)(s),h=u>0?"(".concat(u,") "):"",m=!this.isDynamicFaviconSupported&&d?"* ":"";if(t&&n&&t.id){let e=t.display_name;t.type===j.Constants.DM_CHANNEL&&null!=a&&(e=a.display_name),document.title="".concat(h).concat(m).concat(e," - ").concat(n.display_name," ").concat(c)}else document.title=n&&i?l({id:"globalThreads.title",defaultMessage:"{prefix}Threads - {displayName} {siteName}"},{prefix:"".concat(h).concat(m),displayName:n.display_name,siteName:c}):n&&o?l({id:"drafts.title",defaultMessage:"{prefix}Drafts - {displayName} {siteName}"},{prefix:"".concat(h).concat(m),displayName:n.display_name,siteName:c}):l({id:"sidebar.team_select",defaultMessage:"{siteName} - Join a team"},{siteName:c||"Mattermost"})})),ti(this,"updateFavicon",(e=>{if(!Z.vU()&&!Z.i7())return;if(!document.querySelector('link[rel="icon"]'))return;const t=document.querySelector('link[rel="icon"][sizes="16x16"]'),n=document.querySelector('link[rel="icon"][sizes="24x24"]'),a=document.querySelector('link[rel="icon"][sizes="32x32"]'),s=document.querySelector('link[rel="icon"][sizes="64x64"]'),r=document.querySelector('link[rel="icon"][sizes="96x96"]'),i=e=>"string"==typeof e?e:"";switch(e){case ni.Mention:t.href=i(Vr),n.href=i(Gr),a.href=i(Wr),s.href=i(zr),r.href=i(Kr);break;case ni.Unread:t.href=i(Jr),n.href=i(Yr),a.href=i(Qr),s.href=i(Xr),r.href=i($r);break;default:t.href=i(Ur),n.href=i(Hr),a.href=i(qr),s.href=i(jr),r.href=i(Zr)}}))}componentDidUpdate(e){this.updateTitle();const t=this.getBadgeStatus(e.unreadStatus),n=this.getBadgeStatus(this.props.unreadStatus);t!==n&&this.updateFavicon(n),this.updateDesktopApp()}get isDynamicFaviconSupported(){return Z.i7()||Z.vU()}getBadgeStatus(e){return"number"==typeof e?ni.Mention:e?ni.Unread:ni.None}render(){return null}}ti(ai,"propTypes",{siteName:F().string,inGlobalThreads:F().bool.isRequired,inDrafts:F().bool.isRequired});const si=(0,Pe.injectIntl)(ai),ri=(0,O.withRouter)((0,a.connect)((function(e,t){let{location:{pathname:n}}=t;const a=(0,i.iE)(e),s=(0,r.TB)(e),l=s&&s.teammate_id?s:null;return{currentChannel:s,currentTeam:(0,o.kA)(e),currentTeammate:l,siteName:a.SiteName,unreadStatus:(0,r.ll)(e),inGlobalThreads:null!=(0,O.matchPath)(n,{path:"/:team/threads/:threadIdentifier?"}),inDrafts:null!=(0,O.matchPath)(n,{path:"/:team/drafts"})}}),(function(e){return{actions:(0,V.bindActionCreators)({},e)}}))(si)),ii=n.p+"files/fb70b39332bf0889ab76.png";var oi=n(54263);const li=(0,D.v)("ProductNoticesModal",(0,R.lazy)((()=>n.e(2502).then(n.bind(n,22502))))),ci=(0,D.v)("ResetStatusModal",(0,R.lazy)((()=>Promise.resolve().then(n.bind(n,38903))))),di=["app__body","channel-view"];function ui(e){const[t,n]=(0,R.useState)(!1),s=(0,a.useSelector)(f.Zk),r=(0,a.useDispatch)();return(0,R.useEffect)((()=>{var e;const t=(0,Z.w6)()||(0,Z.un)(),{navigator:n}=window,a=(null==n||null===(e=n.userAgentData)||void 0===e?void 0:e.platform)||(null==n?void 0:n.platform)||"unknown";return document.body.classList.add(...function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=[...di];return"Win32"===e||"Win64"===e?n.push("os--windows"):"MacIntel"!==e&&"MacPPC"!==e||n.push("os--mac"),t&&n.push("browser--ie"),n}(a,t)),()=>{document.body.classList.remove(...di),r((0,H.gE)())}}),[]),(0,R.useEffect)((()=>{let e;return s&&(e=setInterval((()=>{r((0,E.A3)())}),j.Constants.STATUS_INTERVAL)),()=>{clearInterval(e)}}),[s]),(0,a.useSelector)((e=>e.tabs.activeApp)),A().createElement(A().Fragment,null,A().createElement(Br,null),A().createElement(xr,null),A().createElement("div",{id:"channel_view",className:"channel-view","data-testid":"channel_view"},A().createElement(ri,null),A().createElement(li,null),A().createElement("div",{className:U()("container-fluid channel-view-inner")},t?A().createElement(oa.default,null):A().createElement(A().Fragment,null,e.shouldRenderCenterChannel?A().createElement(ia,null):A().createElement(Ae.Z,{centered:!0}),A().createElement(q.default,{pluggableName:"Root"}),A().createElement(ci,null)))),A().createElement("div",{className:"home-screen-wrapper__sidebar right"},A().createElement("div",{className:"top"},A().createElement("button",null,A().createElement("img",{src:ii}))),A().createElement("div",{className:"bottom"},A().createElement("button",{onClick:()=>n(!t)},A().createElement("img",{src:oi})))))}ui.propTypes={shouldRenderCenterChannel:F().bool.isRequired};var hi=n(42920);const mi=(0,D.v)("BackstageController",(0,R.lazy)((()=>n.e(9252).then(n.bind(n,36840))))),pi=(0,D.v)("Pluggable",(0,R.lazy)((()=>Promise.resolve().then(n.bind(n,26742)))));var gi=I()(pi).withConfig({displayName:"_StyledPluggable"})({gridArea:"center"});function fi(e){var t;const n=(0,O.useHistory)(),{team:s}=(0,O.useParams)(),[r,i]=(0,R.useState)(!1),[o,c]=(0,R.useState)(Ci(e.teamsList,s)),d=(0,R.useRef)(Date.now()),u=(0,R.useRef)(Date.now());async function h(t,a){c(null);const{data:s,error:r}=await e.joinTeam(t,a);r?n.push("/error?type=team_not_found"):s&&c(s)}(function(){var e,t;const n=(0,a.useSelector)(l.ts),s=null!==(e=null==n?void 0:n.id)&&void 0!==e?e:"",r=null!==(t=null==n?void 0:n.roles)&&void 0!==t?t:"";(0,R.useEffect)((()=>{s&&pe.je.setUserId(s),r&&pe.je.setUserRoles(r)}),[s,r])})(),(0,R.useEffect)((()=>{hi.Z.stop(),async function(){await e.fetchAllMyTeamsChannelsAndChannelMembersREST(),i(!0)}()}),[]),(0,R.useEffect)((()=>{if(e.disableWakeUpReconnectHandler)return()=>{};const t=setInterval((()=>{const e=Date.now();e-u.current>6e4&&(console.log("computer woke up - reconnecting"),(0,k.GL)()),u.current=e}),3e4);return()=>{clearInterval(t)}}),[e.disableWakeUpReconnectHandler]),(0,R.useEffect)((()=>{function t(){window.isActive=!0,e.markAsReadOnFocus(),e.disableRefetchingOnBrowserFocus||Date.now()-d.current>12e4&&e.currentTeamId&&e.fetchChannelsAndMembers(e.currentTeamId)}function n(){window.isActive=!1,d.current=Date.now(),e.unsetActiveChannelOnServer()}function a(e){if(e.shiftKey&&(0,rn._)(e)&&(0,rn.p)(e,j.default.KeyCodes.L)){const e=document.querySelector("#sidebar-right.is-open.expanded #reply_textbox");if(e)e.focus();else{const e=document.getElementById("post_textbox");e&&e.focus()}}}return window.addEventListener("focus",t),window.addEventListener("blur",n),window.addEventListener("keydown",a),()=>{window.removeEventListener("focus",t),window.removeEventListener("blur",n),window.removeEventListener("keydown",a)}}),[e.currentTeamId]),(0,R.useEffect)((()=>{const e=(0,Z.IT)();return e&&L().enable(),window.isActive=!0,v.Z.setTeamIdJoinedOnLoad(null),()=>{window.isActive=!1,e&&L().disable()}}),[]);const m=e.teamsList.map((e=>e.id)).sort().join("+");if((0,R.useEffect)((()=>{if(s){if(j.default.RESERVED_TEAM_NAMES.includes(s))return;const t=Ci(e.teamsList,s);t?async function(t){const{data:a,error:s}=await e.initializeTeam(t);s?n.push("/error?type=team_not_found"):a&&c(a)}(t):o&&o.name!==s?h(s,!1):o||h(s,!0)}}),[s,m]),e.mfaRequired)return n.push("/mfa/setup"),null;if(null===o)return null;const p=(null==o?void 0:o.name.toLowerCase())===(null==s?void 0:s.toLowerCase());return A().createElement(O.Switch,null,A().createElement(O.Route,{path:"/:team(".concat(Yn.tq,")/integrations"),component:mi}),A().createElement(O.Route,{path:"/:team(".concat(Yn.tq,")/emoji"),component:mi}),null===(t=e.plugins)||void 0===t?void 0:t.map((e=>A().createElement(O.Route,{key:e.id,path:"/:team(".concat(Yn.tq,")/")+e.route,render:()=>A().createElement(gi,{pluggableName:"NeedsTeamComponent",pluggableId:e.id})}))),A().createElement(ui,{shouldRenderCenterChannel:r&&p}))}function Ci(e,t){var n;if(!t)return null;return(null!==(n=e.find((e=>e.name===t)))&&void 0!==n?n:null)||null}const Ei=(0,R.memo)(fi),bi={fetchChannelsAndMembers:s.hx,fetchAllMyTeamsChannelsAndChannelMembersREST:s.oD,markAsReadOnFocus:c.XJ,initializeTeam:S,joinTeam:function(e,t){return async(n,a)=>{const s=a(),r=(0,l.ts)(s);try{const a=await n((0,g.Xv)(e));if((0,y.d)(a)){const e=a.data;if(r&&e&&0===e.delete_at){const a=await n((0,b.aJ)(e.id,r.id));if((0,y.d)(a))return t&&v.Z.setTeamIdJoinedOnLoad(e.id),await n(S(e)),{data:e};throw a.error}throw new Error("Team not found or deleted")}throw a.error}catch(e){return(0,p._f)(e,n,a),n((0,h.H)(e)),{error:e}}}},unsetActiveChannelOnServer:s.WR},vi=(0,a.connect)((function(e,t){const n=(0,i.lJ)(e),a=(0,i.iE)(e),s=(0,l.ts)(e),c=e.plugins.components.NeedsTeamComponent,h="true"===a.DisableRefetchingOnBrowserFocus,m="true"===a.DisableWakeUpReconnectHandler;return{currentTeamId:(0,o.ev)(e),currentChannelId:(0,r.gO)(e),teamsList:(0,o.Dc)(e),plugins:c,selectedThreadId:(0,u.Qk)(e),selectedPostId:(0,d.Bh)(e),mfaRequired:(0,T.b)(s,n,a,t.match.url),disableRefetchingOnBrowserFocus:h,disableWakeUpReconnectHandler:m}}),bi),yi=vi(Ei)},4940:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(84390),s=n.n(a);const r=()=>s().createElement("svg",{width:"18px",height:"18px",viewBox:"0 0 18 18"},s().createElement("g",{id:"Developer-Export",stroke:"none",strokeWidth:"1",fillRule:"evenodd"},s().createElement("g",{transform:"translate(-285.000000, -933.000000)",id:"All-Team-Members"},s().createElement("g",{transform:"translate(245.000000, 698.000000)"},s().createElement("g",{id:"Channel-Administrators",transform:"translate(0.000000, 106.000000)"},s().createElement("g",{id:"data-table/column-1",transform:"translate(11.000000, 86.000000)"},s().createElement("g",{id:"row-checkbox---Public-Channels",transform:"translate(12.000000, 35.000000)"},s().createElement("g",{id:"Stacked-Group",transform:"translate(0.000000, 5.000000)"},s().createElement("g",{id:"data-table/1st/row-checkbox-label-base"},s().createElement("g",{id:"check-on-copy-11",transform:"translate(14.000000, 0.000000)"},s().createElement("path",{d:"M19,3 L5,3 C3.9,3 3,3.9 3,5 L3,19 C3,20.1 3.9,21 5,21 L19,21 C20.1,21 21,20.1 21,19 L21,5 C21,3.9 20.1,3 19,3 L19,3 Z M10,17 L5,12.1923077 L6.4,10.8461538 L10,14.3076923 L17.6,7 L19,8.34615385 L10,17 L10,17 Z",id:"checkbox---checked"}))))))))))),i=(0,a.memo)(r)},78338:(e,t,n)=>{n.d(t,{D:()=>s,e:()=>r});const a={},s=(e,t)=>e.entities.channelBookmarks.byChannelId[t]||a,r=(e,t,n)=>s(e,t)[n]},60693:(e,t,n)=>{n.d(t,{It:()=>i,f2:()=>l,wo:()=>r});var a=n(4500),s=n(83905);function r(e){return e.views.lhs.isOpen}function i(e){return e.views.lhs.currentStaticPageId}const o=(0,n(35658).v)(),l=(0,a.P1)("getVisibleSidebarStaticPages",s.ym,o,((e,t)=>{const n=[];return e&&n.push({id:"threads",isVisible:!0}),n.push({id:"drafts",isVisible:t>0}),n.filter((e=>e.isVisible))}))},23783:(e,t,n)=>{function a(e){return"data"in e&&!s(e)}function s(e){return Boolean(e.error)}n.d(t,{V:()=>s,d:()=>a})},26128:(e,t,n)=>{e.exports=n.p+"files/da44a339dc0bc3d4aa3a.png"}}]);
//# sourceMappingURL=5195.d78e35ef1958ee581f04.js.map