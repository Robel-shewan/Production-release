"use strict";(self.webpackChunkmattermost_webapp=self.webpackChunkmattermost_webapp||[]).push([[9028],{91563:(e,t,a)=>{a.r(t),a.d(t,{default:()=>v});var n=a(70314),s=a(80139),r=a(19601),i=a(83905),o=a(23615),d=a.n(o),l=(a(20266),a(90938),a(52077),a(911),a(92189),a(84390)),c=a.n(l),p=a(72060),g=a(93820),m=a(2664);const h=a.p+"files/d4330d9726fbff23f4b7.png",f=a.p+"files/9b0519e1f5fbf82b0548.png",u=a.p+"files/70f38cbd92112901d01e.png",w=a.p+"files/0dba693f4d8315ed7115.png",b=a.p+"files/2c418e852c9b76efd38d.mp4";var E=a(23712),k=a(21214),M=a(70174);function P(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class _ extends l.PureComponent{constructor(e){super(e),P(this,"clearLandingPreferenceIfNotChecked",(()=>{this.state.navigating||this.state.rememberChecked||g.Z.clearLandingPreference(this.props.siteUrl)})),P(this,"checkLandingPreferenceBrowser",(()=>{const e=g.Z.getLandingPreference(this.props.siteUrl);return e&&e===E.PH.BROWSER})),P(this,"isEmbedded",(()=>{const e=document.cookie.split(";");for(let t=0;t<e.length;t++){const a=e[t].trim();if(a.startsWith("MMEMBED=")){const e=a.substring(8);return"1"===decodeURIComponent(e)}}return!1})),P(this,"checkLandingPreferenceApp",(()=>{const e=g.Z.getLandingPreference(this.props.siteUrl);return e&&e===E.PH.MATTERMOSTAPP})),P(this,"handleChecked",(e=>{this.setState({rememberChecked:e.target.checked}),e.target.checked||g.Z.clearLandingPreference(this.props.siteUrl)})),P(this,"setPreference",((e,t)=>{if(this.state.rememberChecked)switch(e){case E.PH.MATTERMOSTAPP:g.Z.setLandingPreferenceToMattermostApp(this.props.siteUrl);break;case E.PH.BROWSER:g.Z.setLandingPreferenceToBrowser(this.props.siteUrl)}else t&&g.Z.clearLandingPreference(this.props.siteUrl)})),P(this,"openMattermostApp",(()=>{this.setPreference(E.PH.MATTERMOSTAPP),this.setState({redirectPage:!0}),window.location.href=this.state.nativeLocation})),P(this,"openInBrowser",(()=>{this.setPreference(E.PH.BROWSER),this.setState({showVideo:!0})})),P(this,"handleVideoEnd",(()=>{window.location.href="/login"})),P(this,"handleVideoClick",(()=>{window.location.href="/login"})),P(this,"renderSystemDialogMessage",(()=>k.tq()?c().createElement(p.FormattedMessage,{id:"get_app.systemDialogMessageMobile",defaultMessage:"View in App"}):c().createElement(c().Fragment,null,c().createElement("img",{src:w,alt:"Windows Icon",className:"download_btn_icons"}),c().createElement(p.FormattedMessage,{id:"get_app.systemDialogMessage",defaultMessage:"Download Windows"})))),P(this,"renderGoNativeAppMessage",(()=>c().createElement("a",{href:k.tq()?"#":this.state.nativeLocation,onMouseDown:()=>{this.setPreference(E.PH.MATTERMOSTAPP,!0)},onClick:()=>{if(this.setPreference(E.PH.MATTERMOSTAPP,!0),this.setState({redirectPage:!0,navigating:!0}),k.tq()){if(k.eL()){const e=setTimeout((()=>{window.location.replace(this.getDownloadLink())}),2e3);window.addEventListener("blur",(()=>{clearTimeout(e)}))}window.location.replace(this.state.nativeLocation)}},className:"btn btn-primary btn-lg get-app__download"},this.renderSystemDialogMessage()))),P(this,"getDownloadLink",(()=>k.Vg()?this.props.iosAppLink:k.eL()?this.props.androidAppLink:this.props.desktopAppLink)),P(this,"handleBrandImageError",(()=>{this.setState({brandImageError:!0})})),P(this,"renderGraphic",(()=>k.tq()?c().createElement("img",{src:f}):c().createElement("img",{src:h}))),P(this,"renderDownloadLinkText",(()=>k.tq()?c().createElement(p.FormattedMessage,{id:"get_app.dontHaveTheMobileApp",defaultMessage:"Don't have the Mobile App?"}):c().createElement(p.FormattedMessage,{id:"get_app.dontHaveTheDesktopApp",defaultMessage:"Don't have the Desktop App?"}))),P(this,"renderDownloadLinkSection",(()=>{const e=this.getDownloadLink();return this.state.redirectPage?c().createElement("div",{className:"get-app__download-link"},c().createElement(m.Z,{id:"get_app.openLinkInBrowser",defaultMessage:"Or, [open this link in your browser.](!{link})",values:{link:this.state.location}})):e?c().createElement("div",{className:"get-app__download-link"},this.renderDownloadLinkText()," ",c().createElement("br",null),c().createElement("a",{href:e},c().createElement(p.FormattedMessage,{id:"get_app.downloadTheAppNow",defaultMessage:"Download the app now."}))):null})),P(this,"renderDialogHeader",(()=>{const e=this.getDownloadLink(),t=k.tq();let a=c().createElement(p.FormattedMessage,{id:"get_app.openingLink",defaultMessage:"Opening link in Infogito..."});if(this.props.enableCustomBrand&&(a=c().createElement(p.FormattedMessage,{id:"get_app.openingLinkWhiteLabel",defaultMessage:"Opening link in {appName}...",values:{appName:this.props.siteName||"Infogito"}})),this.state.redirectPage)return c().createElement("h1",{className:"get-app__launching"},a,c().createElement("div",{className:"get-app__alternative".concat(this.state.redirectPage?" redirect-page":"")},c().createElement(p.FormattedMessage,{id:"get_app.redirectedInMoments",defaultMessage:"You will be redirected in a few moments."}),c().createElement("br",null),this.renderDownloadLinkText()," ",c().createElement("br",{className:"mobile-only"}),c().createElement("a",{href:e},c().createElement(p.FormattedMessage,{id:"get_app.downloadTheAppNow",defaultMessage:"Download the app now."}))));let n=c().createElement(p.FormattedMessage,{id:"get_app.ifNothingPrompts",defaultMessage:"You can view {siteName} in the desktop app or continue in your web browser.",values:{siteName:this.props.enableCustomBrand?"":" Infogito"}});return t&&(n=c().createElement(p.FormattedMessage,{id:"get_app.ifNothingPromptsMobile",defaultMessage:"You can view {siteName} in the mobile app or continue in your web browser.",values:{siteName:this.props.enableCustomBrand?"":" Infogito"}})),c().createElement("div",{className:"get-app__launching"},c().createElement(p.FormattedMessage,{id:"get_app.launching",tagName:"h1",defaultMessage:"Where would you like to view this?"}),c().createElement("div",{className:"get-app__alternative"},n))})),P(this,"renderDialogBody",(()=>this.state.redirectPage?c().createElement("div",{className:"get-app__dialog-body"},this.renderDialogHeader(),this.renderDownloadLinkSection()):c().createElement("div",{className:"get-app__dialog-body"},this.renderDialogHeader(),c().createElement("div",{className:"get-app__buttons"},this.renderGoNativeAppMessage(),c().createElement("a",{href:this.state.location,onMouseDown:()=>{this.setPreference(E.PH.BROWSER,!0)},onClick:()=>{this.setPreference(E.PH.BROWSER,!0),this.setState({navigating:!0})},className:"btn btn-primary  btn-lg"},c().createElement("img",{src:u,alt:"macOs Icon",className:"download_btn_icons"}),c().createElement(p.FormattedMessage,{id:"get_app.systemDialogMessage1",defaultMessage:"Download macOS"})),c().createElement("a",{href:"#",onMouseDown:()=>{this.setPreference(E.PH.BROWSER,!0)},onClick:()=>{this.setPreference(E.PH.BROWSER,!0),this.setState({showVideo:!0})},className:"btn btn-tertiary view_in_browser_btn btn-lg"},c().createElement(p.FormattedMessage,{id:"get_app.continueToBrowser",defaultMessage:"View in Browser"}))),c().createElement("label",{className:"get-app__preference"},c().createElement("input",{type:"checkbox",checked:this.state.rememberChecked,className:"get-app__checkbox",onChange:this.handleChecked}),c().createElement(p.FormattedMessage,{id:"get_app.rememberMyPreference",defaultMessage:"Remember my preference"})),this.renderDownloadLinkSection())));const t=window.location.href.replace("/landing#","");this.state={rememberChecked:!1,redirectPage:!1,location:t,nativeLocation:t.replace(/^(https|http)/,"mattermost"),brandImageError:!1,navigating:!1,showVideo:!1},g.Z.hasSeenLandingPage()||g.Z.setLandingPageSeen(!0)}componentDidMount(){M._v(this.props.defaultTheme),this.checkLandingPreferenceApp()&&this.openMattermostApp(),window.addEventListener("beforeunload",this.clearLandingPreferenceIfNotChecked)}componentWillUnmount(){window.removeEventListener("beforeunload",this.clearLandingPreferenceIfNotChecked)}render(){const e=k.tq();return this.checkLandingPreferenceBrowser()||this.isEmbedded()?(this.openInBrowser(),null):this.state.showVideo?c().createElement("video",{style:{width:"100%",height:"100%"},autoPlay:!0,muted:!0,onEnded:this.handleVideoEnd,onClick:this.handleVideoClick},c().createElement("source",{src:b,type:"video/mp4"})):c().createElement("div",{className:"get-app"},c().createElement("div",{className:"get-app__dialog"},c().createElement("div",{className:"get-app__graphic ".concat(e?"mobile":"")},this.renderGraphic()),this.renderDialogBody()))}}P(_,"propTypes",{defaultTheme:d().any.isRequired,desktopAppLink:d().string,iosAppLink:d().string,androidAppLink:d().string,siteUrl:d().string,siteName:d().string,brandImageUrl:d().string,enableCustomBrand:d().bool.isRequired});const v=(0,n.connect)((function(e){const t=(0,r.iE)(e);return{desktopAppLink:t.AppDownloadLink,iosAppLink:t.IosAppDownloadLink,androidAppLink:t.AndroidAppDownloadLink,defaultTheme:(0,i.gh)(e),siteUrl:t.SiteURL,siteName:t.SiteName,brandImageUrl:s.je.getBrandImageUrl("0"),enableCustomBrand:"true"===t.EnableCustomBrand}}))(_)}}]);
//# sourceMappingURL=9028.e68b5947f68a35aca3f7.js.map